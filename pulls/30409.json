{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409",
    "id": 1958283427,
    "node_id": "PR_kwDOABII5850uQij",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30409",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30409.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30409.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/966027bdda53d150321af7db48b57f9756c54e68",
    "number": 30409,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange, drop CRPCSignals & g_best_block",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This continues the work in #30200 so that a future Stratum v2 Template Provider (see #29432) can avoid accessing node internals. It needs to know when a new block arrives in order to push new templates to connected clients.\r\n\r\n`waitTipChanged()` uses a new kernel notification `notifications().m_tip_block_mutex`, which this PR also introduces (a previous version used `g_best_block`).\r\n\r\nIn order to ensure the new method works as intended, the `waitfornewblock`, `waitforblock` and `waitforblockheight` RPC methods are refactored to use it. This allows removing `RPCNotifyBlockChange`.\r\n\r\nThere's a commit to add (direct) tests for the methods that are about to be refactored:\r\n- `waitfornewblock` was already implicitly tested by `feature_shutdown.py`.\r\n- `waitforblockheight` by `feature_coinstatsindex.py` and `example_test.py`\r\n\r\nThis PR renames `getTipHash()` to `getTip()` and returns a `BlockRef` (renamed from `BlockKey`) so that callers can use either the height or hash.\r\n\r\nThe later commits make trivial improvements to the `waitfor*` RPC calls (not needed for this PR).\r\n\r\nThe `waitTipChanged()` method could probably also be used for the longpoll functionality in `getblocktemplate`, but I'm a bit reluctant to touch that.\r\n\r\n`RPCServer::OnStarted` no longer does anything and `RPCServer::OnStopped` merely prints a log statement. They were added in #5711 as a refactor. This PR drops them entirely.\r\n\r\nFinally `g_best_block` is also dropped.",
    "labels": [
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-07-08T17:11:21Z",
    "updated_at": "2024-09-12T18:38:13Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "eca22e678976dfbbfc4d20d6f800efd259799d02",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "Sjors:2024/07/wait-tip-changed",
      "ref": "2024/07/wait-tip-changed",
      "sha": "966027bdda53d150321af7db48b57f9756c54e68",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 248267,
        "default_branch": "sv2",
        "open_issues_count": 11,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-09-12T13:01:59Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-09-03T18:32:31Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "df3f63ccfa0338ee38644b4a3c48f721fc28c2a2",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36157,
        "stargazers_count": 78357,
        "watchers_count": 78357,
        "size": 268323,
        "default_branch": "master",
        "open_issues_count": 663,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-09-12T18:52:19Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-09-12T19:00:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 203,
    "deletions": 164,
    "changed_files": 22,
    "commits": 12,
    "review_comments": 48,
    "comments": 23
  },
  "events": [
    {
      "event": "commented",
      "id": 2214741306,
      "node_id": "IC_kwDOABII586EAkU6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2214741306",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-08T17:11:23Z",
      "updated_at": "2024-09-12T01:45:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30409).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2292315783), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2293537994) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30546](https://github.com/bitcoin/bitcoin/pull/30546) (util: Use consteval checked format string in FatalErrorf, LogConnectFailure by maflcko)\n* [#30440](https://github.com/bitcoin/bitcoin/pull/30440) (Have createNewBlock() return a BlockTemplate interface by Sjors)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2214741306",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "labeled",
      "id": 13429199017,
      "node_id": "LE_lADOABII586O0lCbzwAAAAMgcVCp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13429199017",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-08T20:08:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13434478291,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAMgwd7T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13434478291",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T06:47:46Z"
    },
    {
      "event": "renamed",
      "id": 13435375497,
      "node_id": "RTE_lADOABII586O0lCbzwAAAAMgz4-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13435375497",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T07:54:36Z",
      "rename": {
        "from": "Introduce waitTipChanged() mining interface and replace RPCNotifyBlockChange",
        "to": "Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange and drop CRPCSignals"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13435377512,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAMgz5do",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13435377512",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T07:54:44Z"
    },
    {
      "event": "commented",
      "id": 2216910420,
      "node_id": "IC_kwDOABII586EI15U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2216910420",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T08:17:59Z",
      "updated_at": "2024-07-09T08:19:05Z",
      "author_association": "MEMBER",
      "body": "Some of the functional tests that use the refactored RPC calls still fail under TSAN, so keeping this draft until that's resolved.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2216910420",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13436202713,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAMg3C7Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13436202713",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T08:51:18Z"
    },
    {
      "event": "commented",
      "id": 2217017610,
      "node_id": "IC_kwDOABII586EJQEK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2217017610",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T08:56:22Z",
      "updated_at": "2024-07-09T09:01:08Z",
      "author_association": "MEMBER",
      "body": "Fixed the deadlock. I ran into the same issue before when working on #29432: `UpdateTip` requires holding `cs_main`. It then takes `g_best_block_mutex` in order to announces the new block. So then lines after `g_best_block_cv.wait_until` should release `g_best_block_mutex` before trying to lock `cs_main`.\r\n\r\nThat's not a problem here; I just had to break out of the while loop instead of returning from it.\r\n\r\nBack in the other PR this led to a deadlock if we simultaneously submitted a block and received it via p2p from the pool, which can happen in Stratum v2, see https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-1948355393",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2217017610",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "ready_for_review",
      "id": 13436288936,
      "node_id": "RFRE_lADOABII586O0lCbzwAAAAMg3X-o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13436288936",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T08:56:50Z"
    },
    {
      "event": "unlabeled",
      "id": 13437400179,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAAMg7nRz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13437400179",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T10:09:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13470614601,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAMi6URJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13470614601",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T11:55:30Z"
    },
    {
      "event": "reviewed",
      "id": 2171768079,
      "node_id": "PRR_kwDOABII586Bco0P",
      "url": null,
      "actor": null,
      "commit_id": "482a5fd48d494f44f48209956c77ec1bdb5663f5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2171768079",
      "submitted_at": "2024-07-11T12:35:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "referenced",
      "id": 13525713995,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMmMgRL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13525713995",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4e1a4342f3b2a857e3211587cd14e36704197483",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/4e1a4342f3b2a857e3211587cd14e36704197483",
      "created_at": "2024-07-16T18:51:15Z"
    },
    {
      "event": "referenced",
      "id": 13538820465,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMm-gFx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13538820465",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e1ae38f4bbcdb1b3fa5e1eab1abfa9cf2232798c",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/e1ae38f4bbcdb1b3fa5e1eab1abfa9cf2232798c",
      "created_at": "2024-07-17T15:38:57Z"
    },
    {
      "event": "referenced",
      "id": 13539015189,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMm_PoV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539015189",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e1fa475a5becca0083f59d7cafac9bc67c2f4f1c",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/e1fa475a5becca0083f59d7cafac9bc67c2f4f1c",
      "created_at": "2024-07-17T15:53:00Z"
    },
    {
      "event": "referenced",
      "id": 13539417192,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMnAxxo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539417192",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5126ac430f3bc94b727044dc2497acebb73a9f3f",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/5126ac430f3bc94b727044dc2497acebb73a9f3f",
      "created_at": "2024-07-17T16:24:13Z"
    },
    {
      "event": "referenced",
      "id": 13539417260,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMnAxys",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539417260",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bdd68d5bca483071ca0729e6f0d2d71706ad21e7",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/bdd68d5bca483071ca0729e6f0d2d71706ad21e7",
      "created_at": "2024-07-17T16:24:14Z"
    },
    {
      "event": "referenced",
      "id": 13539756843,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMnCEsr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539756843",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "173580b1237e5bd7d63564aea555ca8914715f75",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/173580b1237e5bd7d63564aea555ca8914715f75",
      "created_at": "2024-07-17T16:56:26Z"
    },
    {
      "event": "referenced",
      "id": 13555095824,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMn8lkQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13555095824",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7967d78d737472c25b6420a1f26c8df25ac21a67",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/7967d78d737472c25b6420a1f26c8df25ac21a67",
      "created_at": "2024-07-18T12:45:55Z"
    },
    {
      "event": "referenced",
      "id": 13555701087,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMn-5Vf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13555701087",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "79336c95faa1af966042f06ad9bc86a5333f18f3",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/79336c95faa1af966042f06ad9bc86a5333f18f3",
      "created_at": "2024-07-18T13:17:31Z"
    },
    {
      "event": "labeled",
      "id": 13559817468,
      "node_id": "LE_lADOABII586O0lCbzwAAAAMoOmT8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13559817468",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-18T16:57:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13559846043,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAMoOtSb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13559846043",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-18T16:59:48Z"
    },
    {
      "event": "commented",
      "id": 2237085603,
      "node_id": "IC_kwDOABII586FVzej",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2237085603",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-18T16:59:51Z",
      "updated_at": "2024-07-18T16:59:51Z",
      "author_association": "MEMBER",
      "body": "Rebased after #30356 (`#include` order).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2237085603",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "unlabeled",
      "id": 13561659992,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAAMoVoJY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13561659992",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-18T19:10:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 13562870527,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMoaPr_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13562870527",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8a814d5f9319cb357498e2c0a8669659a3cc4823",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/8a814d5f9319cb357498e2c0a8669659a3cc4823",
      "created_at": "2024-07-18T20:40:46Z"
    },
    {
      "event": "referenced",
      "id": 13562870564,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMoaPsk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13562870564",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fba04d7756c77ed9371c5dc90d3bebc9aa767f4b",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/fba04d7756c77ed9371c5dc90d3bebc9aa767f4b",
      "created_at": "2024-07-18T20:40:46Z"
    },
    {
      "event": "referenced",
      "id": 13562870801,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMoaPwR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13562870801",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0b76ed6480bf498074423d5904b04ef9a2f5e624",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/0b76ed6480bf498074423d5904b04ef9a2f5e624",
      "created_at": "2024-07-18T20:40:47Z"
    },
    {
      "event": "referenced",
      "id": 13562870882,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMoaPxi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13562870882",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b01bf642b7b663a7f4aa43e14085fca084b1248d",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/b01bf642b7b663a7f4aa43e14085fca084b1248d",
      "created_at": "2024-07-18T20:40:48Z"
    },
    {
      "event": "referenced",
      "id": 13571852146,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMo8gdy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13571852146",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "01bc77e8504e3059d780c00544466f3a04f01779",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/01bc77e8504e3059d780c00544466f3a04f01779",
      "created_at": "2024-07-19T09:46:04Z"
    },
    {
      "event": "referenced",
      "id": 13636881864,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMs0k3I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13636881864",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0fb50734c39919768ea68b86ca5aac9e363b77a4",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/0fb50734c39919768ea68b86ca5aac9e363b77a4",
      "created_at": "2024-07-24T22:12:22Z"
    },
    {
      "event": "referenced",
      "id": 13636881892,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMs0k3k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13636881892",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ec5f45b9186184cac9c64ed08b8b8cc596e301a3",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/ec5f45b9186184cac9c64ed08b8b8cc596e301a3",
      "created_at": "2024-07-24T22:12:22Z"
    },
    {
      "event": "referenced",
      "id": 13636882043,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMs0k57",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13636882043",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "257cc06e875845322caf9fb3738c202b2ce18284",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/257cc06e875845322caf9fb3738c202b2ce18284",
      "created_at": "2024-07-24T22:12:23Z"
    },
    {
      "event": "referenced",
      "id": 13636882079,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAMs0k6f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13636882079",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "35b80d22602ca7346c21fe52509b1aabc31041c8",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/35b80d22602ca7346c21fe52509b1aabc31041c8",
      "created_at": "2024-07-24T22:12:23Z"
    },
    {
      "event": "reviewed",
      "id": 2199367930,
      "node_id": "PRR_kwDOABII586DF7D6",
      "url": null,
      "actor": null,
      "commit_id": "e367258c9b37f0494bdc9d36a6a48adb62f9c94f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review e367258c9b37f0494bdc9d36a6a48adb62f9c94f. This is a nice change, but I didn't ack because I think it would be a regression to not signal g_best_block_cv on shutdown. I posted other suggestions to consider too but they are not critical.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2199367930",
      "submitted_at": "2024-07-25T14:47:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13846147350,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM5S3EW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13846147350",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T10:46:04Z"
    },
    {
      "event": "commented",
      "id": 2283641349,
      "node_id": "IC_kwDOABII586IHZoF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2283641349",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T10:47:33Z",
      "updated_at": "2024-08-12T10:47:33Z",
      "author_association": "MEMBER",
      "body": "Rebased and restored signalling `g_best_block_cv` on shutdown.\r\n\r\nI created `interfaces/types.h`, moved `BlockKey` there and renamed it to `BlockRef`. I then renamed `getTipHash()` to `getTip()` instead of adding `getTipHeight()`. `waitTipChanged` also returns a `BlockKey`.\r\n\r\nAddressed inline comments, except that I still need to look into the tests.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2283641349",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "commented",
      "id": 2283747278,
      "node_id": "IC_kwDOABII586IHzfO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2283747278",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T11:43:21Z",
      "updated_at": "2024-08-12T11:43:21Z",
      "author_association": "MEMBER",
      "body": "As for race conditions with RPC calls that rely on `waitForBlock()`: \r\n\r\n* `waitforblock [hash]`: the while loop breaks if `block.hash == hash`, which together with the early return inside `waitTipChanged` should prevent any blockage\r\n* `waitforblockheight`: similar to `waitforblock`, the while loop checks `block.height >= height`  \r\n* `waitfornewblock`: I opened a draft PR to add an optional `blockhash` argument #30635",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2283747278",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13849171089,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM5eZSR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13849171089",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:34:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13849201317,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM5egql",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13849201317",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:35:35Z"
    },
    {
      "event": "commented",
      "id": 2284019673,
      "node_id": "IC_kwDOABII586II1_Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2284019673",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:37:37Z",
      "updated_at": "2024-08-12T13:37:37Z",
      "author_association": "MEMBER",
      "body": "I simplified the `waitforblock` and `waitfornewblock` tests.\r\n\r\nThey're not very thorough at the moment, because `reconsiderblock` is either atomic or too fast. A better way to test the asynchronous behaviour would be to spin up a second node, and feed it blocks through `add_p2p_connection`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2284019673",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13849606085,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM5gDfF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13849606085",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:57:22Z"
    },
    {
      "event": "commented",
      "id": 2284064523,
      "node_id": "IC_kwDOABII586IJA8L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2284064523",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:57:27Z",
      "updated_at": "2024-08-12T13:57:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/28654787886</sub>\n\n<details><summary>Hints</summary>\n\nMake sure to run all tests locally, according to the documentation.\n\nThe failure may happen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2284064523",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "labeled",
      "id": 13849607248,
      "node_id": "LE_lADOABII586O0lCbzwAAAAM5gDxQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13849607248",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T13:57:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2233198217,
      "node_id": "PRR_kwDOABII586FG-aJ",
      "url": null,
      "actor": null,
      "commit_id": "dcf984b055a367facf7704eb8055619d6fe64a55",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review dcf984b055a367facf7704eb8055619d6fe64a55. I think there might be an infinite loop bug if waitfornewblock is called with timeout of 0, and it looks like there are some other quirks. Left a few suggestions below.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2233198217",
      "submitted_at": "2024-08-12T16:02:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "unlabeled",
      "id": 13851639694,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAAM5nz-O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13851639694",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T16:11:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13860840000,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM6K6JA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13860840000",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-13T09:52:49Z"
    },
    {
      "event": "commented",
      "id": 2285847403,
      "node_id": "IC_kwDOABII586IP0Nr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2285847403",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-13T09:53:38Z",
      "updated_at": "2024-08-13T09:53:38Z",
      "author_association": "MEMBER",
      "body": "Re https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713879417\r\n\r\n> it looks like this will wait 1000ms+1000ms instead of 1000ms+500ms\r\n\r\nIndeed it seems to pick the wrong wait time after the first inner loop. If fixed that and the overflow, though in a slightly different way than the AI overlord suggested.\r\n\r\nI also added a `g_best_block == uint256()` check because it starts 0 until the first `UpdateTip()`.  \r\n\r\nChanged current_tip argument to `uint256` instead of `BlockRef`.\r\n\r\nI also added a commit to recommend `-rpcclienttimeout=0` for these three calls.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2285847403",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "referenced",
      "id": 13863885729,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAM6Whuh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13863885729",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2cff4416949931f384e8096b83366eaf3246ed65",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/2cff4416949931f384e8096b83366eaf3246ed65",
      "created_at": "2024-08-13T13:48:11Z"
    },
    {
      "event": "referenced",
      "id": 13866738365,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAM6haK9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13866738365",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0fc045978ea671fc2b9b48c4bc3f20a206372b40",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/0fc045978ea671fc2b9b48c4bc3f20a206372b40",
      "created_at": "2024-08-13T17:16:33Z"
    },
    {
      "event": "referenced",
      "id": 13866827551,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAM6hv8f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13866827551",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1758b5d2b4665b6229fa5e90eefa8850b15c39ca",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1758b5d2b4665b6229fa5e90eefa8850b15c39ca",
      "created_at": "2024-08-13T17:24:30Z"
    },
    {
      "event": "referenced",
      "id": 13867417207,
      "node_id": "REFE_lADOABII586O0lCbzwAAAAM6j_53",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13867417207",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "27630ec52409b4088bb5c57631fd5f8dddabe531",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/27630ec52409b4088bb5c57631fd5f8dddabe531",
      "created_at": "2024-08-13T18:17:35Z"
    },
    {
      "event": "reviewed",
      "id": 2242860642,
      "node_id": "PRR_kwDOABII586Fr1Zi",
      "url": null,
      "actor": null,
      "commit_id": "9ba60b3a2c22dcd1c9e7b4880f0adb678e4e8d63",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 9ba60b3a2c22dcd1c9e7b4880f0adb678e4e8d63. Just fixed a few bugs to make waiting more reliable since last review and changed test logging. I like the new change to check for overflows generally in waitTipChanged, instead of just checking specifically for the max timeout value. That was better than the suggestion.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2242860642",
      "submitted_at": "2024-08-16T15:28:41Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13926000264,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM-DeaI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13926000264",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T07:27:31Z"
    },
    {
      "event": "reviewed",
      "id": 2245487748,
      "node_id": "PRR_kwDOABII586F12yE",
      "url": null,
      "actor": null,
      "commit_id": "d880419cb65fd9d446057ea05384dad55da0f292",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK d880419cb65fd9d446057ea05384dad55da0f292. Only changes since list review are documentation improvements and a small code simplification.\r\n\r\nOverall this PR makes nice improvements to the waitfor* RPCs and simplifies the code getting rid of boost signals and a global variable.\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2245487748",
      "submitted_at": "2024-08-19T13:08:42Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13931210441,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAAM-XWbJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13931210441",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T14:15:43Z"
    },
    {
      "event": "reviewed",
      "id": 2245698982,
      "node_id": "PRR_kwDOABII586F2qWm",
      "url": null,
      "actor": null,
      "commit_id": "e8176694bb5508b2b488a8c79a6001d2fa625302",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK e8176694bb5508b2b488a8c79a6001d2fa625302, just reduced a variable scope since last review.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2245698982",
      "submitted_at": "2024-08-19T14:27:51Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "reviewed",
      "id": 2254595107,
      "node_id": "PRR_kwDOABII586GYmQj",
      "url": null,
      "actor": null,
      "commit_id": "e8176694bb5508b2b488a8c79a6001d2fa625302",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2254595107",
      "submitted_at": "2024-08-22T13:58:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14010839011,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANDHG_j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14010839011",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T09:39:09Z"
    },
    {
      "event": "commented",
      "id": 2309786222,
      "node_id": "IC_kwDOABII586JrIpu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2309786222",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T09:39:12Z",
      "updated_at": "2024-08-26T09:39:12Z",
      "author_association": "MEMBER",
      "body": "I incorporated https://github.com/TheCharlatan/bitcoin/commit/3c665065f132fd80ea3b1733785b98e45c8b371e so the `waitTipChanged()` implementation uses the kernel signal instead of `g_best_block`. Also rebased.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2309786222",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14010935562,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANDHekK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14010935562",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T09:46:55Z"
    },
    {
      "event": "reviewed",
      "id": 2260994997,
      "node_id": "PRR_kwDOABII586GxAu1",
      "url": null,
      "actor": null,
      "commit_id": "93176016322687f3ad9ade8f32c1ff1392ee6470",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review 93176016322687f3ad9ade8f32c1ff1392ee6470, but I'm concerned code is failing to signal m_tip_block_cv on shutdown so it could make shutdown slower. Suggested a fix below. It also seems like it would be easy to eliminate g_best_block completely, so suggested a way to do that too.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2260994997",
      "submitted_at": "2024-08-26T15:46:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14016648290,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANDdRRi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14016648290",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T17:26:56Z"
    },
    {
      "event": "commented",
      "id": 2310705314,
      "node_id": "IC_kwDOABII586JupCi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2310705314",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T17:26:57Z",
      "updated_at": "2024-08-26T17:26:57Z",
      "author_association": "MEMBER",
      "body": "Alright then, dropping `g_best_block` as well!\r\n\r\nSome tests failed with `EnsureAnyNodeContext(context).notifications`, so I fixed that (relative to the above patches). In `init.cpp` the RPC server starts at step 4a, but the notifications are added at step 7. This case is hit by several functional tests that shut the node down early.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2310705314",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "renamed",
      "id": 14016653544,
      "node_id": "RTE_lADOABII586O0lCbzwAAAANDdSjo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14016653544",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T17:27:22Z",
      "rename": {
        "from": "Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange and drop CRPCSignals",
        "to": "Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange, drop CRPCSignals & g_best_block"
      }
    },
    {
      "event": "commented",
      "id": 2317500958,
      "node_id": "IC_kwDOABII586KIkIe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2317500958",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T12:22:40Z",
      "updated_at": "2024-08-29T12:22:40Z",
      "author_association": "MEMBER",
      "body": "Rebased to ensure it still works with CMake. This PR only adds a header file (`interfaces/types.h`) which don't need to be added to `CMakeLists.txt`. If #30664 lands before this PR, I'll have to drop the addition to `src/Makefile.am`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2317500958",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14060893725,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANGGDYd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14060893725",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T12:22:40Z"
    },
    {
      "event": "reviewed",
      "id": 2265548046,
      "node_id": "PRR_kwDOABII586HCYUO",
      "url": null,
      "actor": null,
      "commit_id": "d66a680c7f9e3accb16f8c10fef1a98596b21369",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2265548046",
      "submitted_at": "2024-08-29T12:44:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14062161284,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANGK42E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14062161284",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T13:41:17Z"
    },
    {
      "event": "commented",
      "id": 2317861428,
      "node_id": "IC_kwDOABII586KJ8I0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2317861428",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T14:23:30Z",
      "updated_at": "2024-08-29T14:24:04Z",
      "author_association": "MEMBER",
      "body": "Based on IRC discussion today it appears there was no need to keep `src/Makefile.am`, so I dropped that: 1b2cdef410abb7fa900c52809ebca249cdaa099c -> 02272716dce292618453d0407988118bc5f07140.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2317861428",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14063327362,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANGPViC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14063327362",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T14:23:30Z"
    },
    {
      "event": "labeled",
      "id": 14107544190,
      "node_id": "LE_lADOABII586O0lCbzwAAAANI4Ap-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14107544190",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-02T22:44:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14111811482,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANJISea",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14111811482",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T09:03:52Z"
    },
    {
      "event": "unlabeled",
      "id": 14111812446,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAANJISte",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14111812446",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T09:03:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2325982902,
      "node_id": "IC_kwDOABII586Ko662",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2325982902",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T09:03:57Z",
      "updated_at": "2024-09-03T09:03:57Z",
      "author_association": "MEMBER",
      "body": "Rebased after #8230.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2325982902",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "commented",
      "id": 2326021511,
      "node_id": "IC_kwDOABII586KpEWH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2326021511",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T09:18:15Z",
      "updated_at": "2024-09-03T09:18:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Rebased after https://github.com/bitcoin/bitcoin/pull/8230.\r\n\r\nHuh, that was merged 8 years ago? :smile:",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2326021511",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "commented",
      "id": 2326190100,
      "node_id": "IC_kwDOABII586KptgU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2326190100",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T10:37:52Z",
      "updated_at": "2024-09-03T10:37:52Z",
      "author_association": "MEMBER",
      "body": "@TheCharlatan oops, I meant #30750.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2326190100",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "mentioned",
      "id": 14113060797,
      "node_id": "MEE_lADOABII586O0lCbzwAAAANJNDe9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14113060797",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T10:37:54Z"
    },
    {
      "event": "subscribed",
      "id": 14113060811,
      "node_id": "SE_lADOABII586O0lCbzwAAAANJNDfL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14113060811",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T10:37:54Z"
    },
    {
      "event": "labeled",
      "id": 14121589465,
      "node_id": "LE_lADOABII586O0lCbzwAAAANJtlrZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14121589465",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T21:49:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2328330492,
      "node_id": "IC_kwDOABII586Kx4D8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2328330492",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T09:12:20Z",
      "updated_at": "2024-09-04T09:12:20Z",
      "author_association": "MEMBER",
      "body": "Rebased after trivial conflict with #29553.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2328330492",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14127032482,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANKCWii",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14127032482",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T09:13:20Z"
    },
    {
      "event": "unlabeled",
      "id": 14128108224,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAANKGdLA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14128108224",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T10:27:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2280948816,
      "node_id": "PRR_kwDOABII586H9IRQ",
      "url": null,
      "actor": null,
      "commit_id": "6c419285720fe5a954e01f09cbe053a0f51bef47",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 6c419285720fe5a954e01f09cbe053a0f51bef47. Since last review just rebased, added suggested m_tip_block_cv notify call on shutdown, and added two new commits dropping g_best_block.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2280948816",
      "submitted_at": "2024-09-04T18:19:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "reviewed",
      "id": 2282242465,
      "node_id": "PRR_kwDOABII586ICEGh",
      "url": null,
      "actor": null,
      "commit_id": "6c419285720fe5a954e01f09cbe053a0f51bef47",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 6c419285720fe5a954e01f09cbe053a0f51bef47\r\n\r\nBut I think it would be good to get more review here. I am fairly convinced that the changes to when the notifications are issued now are good, but the change in logic is a bit tricky to follow.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2282242465",
      "submitted_at": "2024-09-05T08:35:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "commented",
      "id": 2331277841,
      "node_id": "IC_kwDOABII586K9HoR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2331277841",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:27:10Z",
      "updated_at": "2024-09-05T11:34:08Z",
      "author_association": "MEMBER",
      "body": "Paging some people who touched this code in recent years... well, decades: @sipa #12743, @theuni #8680 (d6a5dc4a2eaa0d7348804254ca09e75fc3a858ab), @luke-jr & @laanwj #4503.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2331277841",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "mentioned",
      "id": 14145208847,
      "node_id": "MEE_lADOABII586O0lCbzwAAAANLHsIP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145208847",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:27:12Z"
    },
    {
      "event": "subscribed",
      "id": 14145208855,
      "node_id": "SE_lADOABII586O0lCbzwAAAANLHsIX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145208855",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:27:12Z"
    },
    {
      "event": "mentioned",
      "id": 14145208865,
      "node_id": "MEE_lADOABII586O0lCbzwAAAANLHsIh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145208865",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:27:12Z"
    },
    {
      "event": "subscribed",
      "id": 14145208874,
      "node_id": "SE_lADOABII586O0lCbzwAAAANLHsIq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145208874",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:27:12Z"
    },
    {
      "event": "mentioned",
      "id": 14145259917,
      "node_id": "MEE_lADOABII586O0lCbzwAAAANLH4mN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145259917",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:31:18Z"
    },
    {
      "event": "subscribed",
      "id": 14145259961,
      "node_id": "SE_lADOABII586O0lCbzwAAAANLH4m5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145259961",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:31:19Z"
    },
    {
      "event": "mentioned",
      "id": 14145294359,
      "node_id": "MEE_lADOABII586O0lCbzwAAAANLIBAX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145294359",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:34:08Z"
    },
    {
      "event": "subscribed",
      "id": 14145294382,
      "node_id": "SE_lADOABII586O0lCbzwAAAANLIBAu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14145294382",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:34:09Z"
    },
    {
      "event": "commented",
      "id": 2331303834,
      "node_id": "IC_kwDOABII586K9N-a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2331303834",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T11:41:53Z",
      "updated_at": "2024-09-05T11:41:53Z",
      "author_association": "MEMBER",
      "body": "> the change in logic is a bit tricky to follow.\r\n\r\nAny particular commit that's problematic? I could try splitting it.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2331303834",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "commented",
      "id": 2331380598,
      "node_id": "IC_kwDOABII586K9gt2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2331380598",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T12:21:39Z",
      "updated_at": "2024-09-05T12:21:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Any particular commit that's problematic? I could try splitting it.\r\n\r\nI don't think so. The logic in the changed lines is relatively easy to understand, but it takes a bit of time to check where the notifications are issued and what the differences between the two might be. I don't think dividing anything here might help with that.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2331380598",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "commented",
      "id": 2331826005,
      "node_id": "IC_kwDOABII586K_NdV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2331826005",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T14:24:41Z",
      "updated_at": "2024-09-05T14:25:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > the change in logic is a bit tricky to follow.\r\n> \r\n> Any particular commit that's problematic? I could try splitting it.\r\n\r\nI think the PR is good in it's current form, but if I wanted to be more confident it wasn't changing behavior I would not change code from using `g_best_block` and `::latestblock` directly to calling `waitTipChanged()`. Instead, I would first remove `g_best_block` and replace it with `KernelNotifications::m_tip_block`, then I would remove `::latestblock` and replace it with `KernelNotifications::m_tip_block`, then finally introduce `waitTipChanged()` and change RPCs to call `waitTipChanged()` instead of using `m_tip_block` directly.\r\n\r\nThe drawback to this approach is it would change the same code twice, and increase the amount of code reviewers need to look at and intermediate state they need to think about, which is the same problem as the approach I took in #24230. So I wouldn't necessarily recommend that. (For #24230 I think I will simplify it and keeping the granular commits in a side branch with the same overall diff. So if you want to just review the changes for correctness you can look at the PR and if you want to be more sure behavior isn't changing you can look at the side branch.)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2331826005",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "referenced",
      "id": 14163732733,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANMOWj9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14163732733",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cdf59bbbecd1e2a27097983a62b4ffc8d5792e5f",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/cdf59bbbecd1e2a27097983a62b4ffc8d5792e5f",
      "created_at": "2024-09-06T15:18:52Z"
    },
    {
      "event": "referenced",
      "id": 14163732772,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANMOWkk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14163732772",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "697ba11c9496e3a2aaf6fc3ba64fd39a028109c2",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/697ba11c9496e3a2aaf6fc3ba64fd39a028109c2",
      "created_at": "2024-09-06T15:18:52Z"
    },
    {
      "event": "referenced",
      "id": 14163732877,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANMOWmN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14163732877",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4080052474fddd2cf3284d93c6726d6a4663c399",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/4080052474fddd2cf3284d93c6726d6a4663c399",
      "created_at": "2024-09-06T15:18:53Z"
    },
    {
      "event": "referenced",
      "id": 14163732919,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANMOWm3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14163732919",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4d077f17de166032349728fc692251b31c3f9ba1",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/4d077f17de166032349728fc692251b31c3f9ba1",
      "created_at": "2024-09-06T15:18:53Z"
    },
    {
      "event": "labeled",
      "id": 14190265270,
      "node_id": "LE_lADOABII586O0lCbzwAAAANNzkO2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14190265270",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-09T22:36:25Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM4NGQ1OGNkZDZiZTIwNTc4Y2IxYWYxMTc0MmYxMjE0NjRiMGUxYjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/384d58cdd6be20578cb1af11742f121464b0e1b8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/384d58cdd6be20578cb1af11742f121464b0e1b8",
      "tree": {
        "sha": "b9ee5acdc91540ec87b13bd3e8afc70ee3979668",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b9ee5acdc91540ec87b13bd3e8afc70ee3979668"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b9ee5acdc91540ec87b13bd3e8afc70ee3979668\nparent df3f63ccfa0338ee38644b4a3c48f721fc28c2a2\nauthor Sjors Provoost <sjors@sprovoost.nl> 1723453739 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948716 +0200\n\nrefactor: rename BlockKey to BlockRef\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4ywACgkQV/+b28ww\nEAnWKBAAvarzIpjUNxS5Eo9q3m6UlvdvNjYvaiznFrrxyw2yKa43YtKDIvQ8fhee\nfyAUZMhBTZ4JeVspVgOequQ3+QufrE3v52NLctxGccn19KnDhTAZXLCtjepCn4jr\nqsVbKSGBrpvCAr/U4v/UiboC6e0Wqa/lMIiKbXdlQb3x+DI762JnOtVhOLFmmOOm\nQ3sLDBt03uktJiI2Z9HX3Z4af+PggjkdmwPpks9cFgIud4hrHQ4/xbB+mNPFDfMM\nRMoL6MuYIheAGcdyowr3oJM7AZgTtVVB48CsSMpezCwQdlRvRWer8jO3RlSFa21n\nmtgUrmu9rwDh9QNy9euGMBUJevXLxEoBS1AaMHBfg/6pCKPekgaqMAYaPtoP5E6U\nWkL8P8KnR6cY3h0SQzO7zoBAdyJ1QOBBuSCeMjoakGTQInl26JbWW9QLZEGeAi6S\nSCwB4U6ZPzB6p3cEAtpuBF+757xr5Q9IJKO6TbjinGWatvXWZA6qn9O1+NpIFRWg\nWSB2MfhDrv6D+D6kwWTDsMdZvh3DCZcI5Jz053hhGmmTbRz7hTHPzFSjDhLxvabq\n0BK4hlyGiM/cAs0H5vm7lBDFAE7HujOhvUhdkAuyxlfZ0Sep0WWdgibj4uE1n+dE\naoKxbMWiwiv2SR6ryvIQYn4S7/Z2cM5iLTutgGIS1CHNTapSV9A=\n=w4WF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df3f63ccfa0338ee38644b4a3c48f721fc28c2a2",
          "sha": "df3f63ccfa0338ee38644b4a3c48f721fc28c2a2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/df3f63ccfa0338ee38644b4a3c48f721fc28c2a2"
        }
      ],
      "message": "refactor: rename BlockKey to BlockRef",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:56Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-12T09:08:59Z"
      },
      "sha": "384d58cdd6be20578cb1af11742f121464b0e1b8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRkZTUzZDcyNDJiNWVlNjdiMzg4NGE2YjEwMDYxOTBmOGEyMTBjODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4de53d7242b5ee67b3884a6b1006190f8a210c82",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4de53d7242b5ee67b3884a6b1006190f8a210c82",
      "tree": {
        "sha": "38235f9a6972084e464ebeecd4a643f20ea656e6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/38235f9a6972084e464ebeecd4a643f20ea656e6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 38235f9a6972084e464ebeecd4a643f20ea656e6\nparent 384d58cdd6be20578cb1af11742f121464b0e1b8\nauthor Sjors Provoost <sjors@sprovoost.nl> 1720458491 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948716 +0200\n\nRename getTipHash() to getTip() and return BlockRef\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y0ACgkQV/+b28ww\nEAl1ThAAnufDT1TGndrb2rpOMCAtvjB7zJtfrdPldPikMg1jht/R+B7HR5ImsIkG\nOIKbWNu2A/QCJEWf1H6z/yMqOsr5AY1FcxG2TW4SUxaxzpgj1hKm8UzgHd1xD579\nru7huZO3rkUDcF985JkngVjcxcddBLyDVtv3huKI83HzY4B1dgueo73KyB3OQ9lF\noapK3hA85D3zRsq1vFbSgfLM5vKVHP+C7mIXXLiU7DgoZx8trztwyztwV8UVzw5d\nD7sG7IMbe4AHcHirLp8jm2ArA1y3g8yyRwjFrKcmjwwmXjpvSgh6hjtLYZBCCf91\npNy4E6TKcz9MXiMCSCHmu8fxPO77NPIqpkHbFRFOGuIRxN+M2VrEM1JHRonkkdlt\nv1KhdZeqYUIdb56KA/Me1XBvJ1q9xB+ZYxLNHnQANDHvIFji0Z4TWBGBS+l11ARJ\nTNCjbab/Rd18VLLJ6VU+RwNzAwDpjRip/0p6Ca3WzNCS9zzh8cmV62zLrXJ8PaAE\n2+PjrpCZSw7UeeNhOLXm3e0/Dsqbk6bCMFhwUkG/TFrCq7bsPPEC18xFtRqZy/xd\nwqCfrSgLeWXHwQHm7SVCjod9BnRZCq2Rqqk4n6NqkGz3NAeNtuHBsjdoaFqHHZDI\n2FNuGZC8HG17u1vEjfmUFGibbvDB1N9daTUbEjBa9lj+yuiOvSY=\n=qvYt\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/384d58cdd6be20578cb1af11742f121464b0e1b8",
          "sha": "384d58cdd6be20578cb1af11742f121464b0e1b8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/384d58cdd6be20578cb1af11742f121464b0e1b8"
        }
      ],
      "message": "Rename getTipHash() to getTip() and return BlockRef",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:56Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-08T17:08:11Z"
      },
      "sha": "4de53d7242b5ee67b3884a6b1006190f8a210c82"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0YmU0NjU2OGU0Yzk3NWRkNGJhNzljNDUwMGEyNzY4NmY1ZjMwZmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34be46568e4c975dd4ba79c4500a27686f5f30fd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34be46568e4c975dd4ba79c4500a27686f5f30fd",
      "tree": {
        "sha": "a7c17d285a919eae2ddf4ca7dc33f9fce2e93876",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a7c17d285a919eae2ddf4ca7dc33f9fce2e93876"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a7c17d285a919eae2ddf4ca7dc33f9fce2e93876\nparent 4de53d7242b5ee67b3884a6b1006190f8a210c82\nauthor Sjors Provoost <sjors@sprovoost.nl> 1724688968 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948717 +0200\n\nnode: Track last block that received a blockTip notification\n\nAlso signal m_tip_block_cv when StopRPC is called, for\nconsistency with g_best_block_cv. This is handled in\nStopRPC instead of OnRPCStopped() because the latter\nis deleted in a later commit.\n\nCo-authored-by: TheCharlatan <seb.kung@gmail.com>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y0ACgkQV/+b28ww\nEAlyXQ/+JHkrx2a8OkAvmCaLcGnKYL1WfrTeUWJqzHchxTeJ0OH1v/OvswfTK4q4\nLl4g+p/gG91TMpO9N3Lhn6EwS3ReYNA/JPzmtKtewElD9uWI+SXD36YNA9ZN7h6D\nIG0LrBY1hg2GX4djSs7N/8YklRUPAccshoqn8zdGf3ROspNP8M/uobv3s96+wDHQ\nUqXFdhw1vRp+Ax3BcgYajgbQsoUOtYSqqdSWMix9sI/wo7oWfGg2R54S9Cyp6DBF\naj9fwK+ppnGacaIk6C3ghk8Fyu/D+QVr3tZRjTQkZf1NoJ7VnpnFyeHcgxG/WAOt\nqbMHZ/xQqkRoADawBaMv5lFCQePEdOyMtoRq1QOxhkqNjh6evlbC8rjEfGzlL7l/\n3H5aIH+XOXpmO6v4HN6hEdRaRggVvp6zNTZZECVpzfc80fZx+N1YybOth8d5quvN\nw2IHdR/pxNjiRArh+PxNXkKPFYYJnAmxbN9xKqIjFOY9ivZJRIL//E6GLdnzTH9k\nqo1mEpdrG4aHMkt7gy1zaO2ucDALz18i6t+dN4BI/Wl3R86HVqHc4cxqtng444TE\na90GIrRP6CoP6Cq6pp2qSIbMqFVoYg/OliN5G63SAvfWpsUNc9CduE/JqOOIbgoB\nZrD/owoKi3H3JFJkL/zfHiNw/ixKi2Ctc58ZTUZpPdufe1uXpK0=\n=eWKt\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4de53d7242b5ee67b3884a6b1006190f8a210c82",
          "sha": "4de53d7242b5ee67b3884a6b1006190f8a210c82",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4de53d7242b5ee67b3884a6b1006190f8a210c82"
        }
      ],
      "message": "node: Track last block that received a blockTip notification\n\nAlso signal m_tip_block_cv when StopRPC is called, for\nconsistency with g_best_block_cv. This is handled in\nStopRPC instead of OnRPCStopped() because the latter\nis deleted in a later commit.\n\nCo-authored-by: TheCharlatan <seb.kung@gmail.com>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-26T16:16:08Z"
      },
      "sha": "34be46568e4c975dd4ba79c4500a27686f5f30fd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUwY2VlZjJlMDlhOWRiYzExNjk0NmZiYzQ5Y2U4MmI1M2Y1ZTcwYjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50ceef2e09a9dbc116946fbc49ce82b53f5e70b3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/50ceef2e09a9dbc116946fbc49ce82b53f5e70b3",
      "tree": {
        "sha": "8582d98f8d4e18672b65a8b299cc16f77bf1637d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8582d98f8d4e18672b65a8b299cc16f77bf1637d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8582d98f8d4e18672b65a8b299cc16f77bf1637d\nparent 34be46568e4c975dd4ba79c4500a27686f5f30fd\nauthor Sjors Provoost <sjors@sprovoost.nl> 1724664624 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948717 +0200\n\nAdd waitTipChanged to Mining interface\n\nCo-authored-by: TheCharlatan <seb.kung@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y0ACgkQV/+b28ww\nEAmrnw/5ATVZswN+eBYE/h4IEkj+wtsx+InKCY2TPiT+d7UuleXnanBMzJJikEkX\n48aB+PwJav+aLYOOeMX6167KY+mxtB1+xsMfpUaStXXRYcsldCMWTQOJ8guh3gRt\nlSqpxrqgII70lqfcjhg0WDZ2i9ZLwVIIFEAyqFJRewLUh97GF2VO9aCDMLsUECPu\nwLmrcG9TpgQ4CmKynYuLEdulTvUCr0lzJ9HyDXysx11f7pgU010RX9IPb7/FvlKQ\nzAN4MtRdV1l/JrXiEot6OgMa5j+OBdv67BLq4QeFQ2CoJdrjbouCSNbrnp7o/pxH\nEuvFXxnPDg2Etz+0vkl4QLzcKr0IzrFx4idklgQaTKeFN+i93U+MeAuHh73BHGiR\nZCt6opwqLSqphv1/4d9keb5XJBseBHV6wyJhAx/KErP1yhzVZ0bn6+0/V54MiE3k\nRXlHU/oZvQfxfw1lQ5vW5K+QN0Pd7rABSKUur7jJspG70nZf8nJBGhhluaqEyE71\ng/OVbZwHm6YmN6yKvIWDaI1wP/guUbEUYYXzdBl646wyxaJzwJWdhfoZ0zYAuV79\nJEA+WfktvsAU8X/XpWmLKaNGSmASW6Lb83NXJei7QGySe3JlZPpZ9HPXBWmk9C2u\nrjTl5JlRamb/TVeiceUmwo2v3RU6qwqP3tAcnyyuX71tUqLX1U0=\n=kn0W\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34be46568e4c975dd4ba79c4500a27686f5f30fd",
          "sha": "34be46568e4c975dd4ba79c4500a27686f5f30fd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/34be46568e4c975dd4ba79c4500a27686f5f30fd"
        }
      ],
      "message": "Add waitTipChanged to Mining interface\n\nCo-authored-by: TheCharlatan <seb.kung@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-26T09:30:24Z"
      },
      "sha": "50ceef2e09a9dbc116946fbc49ce82b53f5e70b3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdlNjM1NWU4ZDM0ZDNmNDQ1MjAxZDQ5YTRmZTdkNDcxMTI2NTI0Nzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e6355e8d34d3f445201d49a4fe7d47112652477",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7e6355e8d34d3f445201d49a4fe7d47112652477",
      "tree": {
        "sha": "c68511328175a72ae5dfbe47363249eb3ca30d04",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c68511328175a72ae5dfbe47363249eb3ca30d04"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c68511328175a72ae5dfbe47363249eb3ca30d04\nparent 50ceef2e09a9dbc116946fbc49ce82b53f5e70b3\nauthor Sjors Provoost <sjors@sprovoost.nl> 1720456321 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948717 +0200\n\nrpc: add test for waitforblock and waitfornewblock\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y0ACgkQV/+b28ww\nEAlg9xAAloVv2d1xOk/eg598bPRymTYHQNkaR7jv5puwNHHJ4LOkhr/ggrvBiKwb\nqgxWA+KSlIGlAMiqptm5N5J4eEHfRcCkvofAY76WasYfOoDMT0LGAJn/TRsBBaz9\nduh3VzMrOKrTV1+TVV6jcGUG7l5IXhoOwEUwqqs0OdwXLdNOXIJ4Dwbh4Ty+W/IS\nRm0EpXeSU//61XmjghWutFY/6lMSf1YW3TBEKt/Y20XQYiXQAMgpHk8vZ3fBwj6C\nfNscvXEyRZrgscoW+wnuo0tD1ZMpNciHsV7GzfwwonQ2wxykGJyyF5gJsJWwZHBl\ngP4Qqug7oQO7OhfXgAbl8x1lfkI9In0+BpzWIAfbU2D50dZ1cCxmQzy21buL4wv0\njaKGxzcZ4PB0Gx0tSiN+6b2F/INXFKH4FBy+VuwXR7sUz5fK4t0tnQfygS/byXw6\n40UJDpwaJI1k02DMaZvJfatdyUN8vAETOSEnca9hNv+55F67B5NjS2fVSmEfVuQZ\nEs1PbSV5OCVZv03ty2vlT1lRwxFgnjxm7RaxRv2rUah159vHPCwu9/J8+AXsb8LS\n3K2mvKJC3Zw0vYUiXjHhfMt26vC0rN1mP0B6xEscx1EK3elGSQaQYGky6BAdlgFM\n6CGXcRUI6mbnyW4EeJC1heyRcZhsGIoEOoQj5Dipor4Dlt0z1/k=\n=8Arb\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50ceef2e09a9dbc116946fbc49ce82b53f5e70b3",
          "sha": "50ceef2e09a9dbc116946fbc49ce82b53f5e70b3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/50ceef2e09a9dbc116946fbc49ce82b53f5e70b3"
        }
      ],
      "message": "rpc: add test for waitforblock and waitfornewblock",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-08T16:32:01Z"
      },
      "sha": "7e6355e8d34d3f445201d49a4fe7d47112652477"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQwZGQ4MTY3OGY4NDg5YmNhYWNhOWUwYzY5OTQ0N2Y0Mzg5MDdhNGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/40dd81678f8489bcaaca9e0c699447f438907a4d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/40dd81678f8489bcaaca9e0c699447f438907a4d",
      "tree": {
        "sha": "03d4b9c46549fd9ee445f9e6d8a403ffa4f8913c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/03d4b9c46549fd9ee445f9e6d8a403ffa4f8913c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 03d4b9c46549fd9ee445f9e6d8a403ffa4f8913c\nparent 7e6355e8d34d3f445201d49a4fe7d47112652477\nauthor Sjors Provoost <sjors@sprovoost.nl> 1720456659 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948717 +0200\n\nrpc: fix waitfornewblock description\n\nThe waitforblock RPC method takes a hash argument and waits for that specific block.  The waitfornewblock waits for any new block. This commit fixes the documentation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y0ACgkQV/+b28ww\nEAmojw/+OJMt6m46c0L9kPpoyqYHCmDByrc7mnyULYlJlw0zvhU3H3s2Qa6G/sPG\n1ux+jzrQEQjw2hQ54+S50vSmU6n0u/y7MPt/qSiYhf+AqFgDWiKQ+eYd6oJPGNs8\nWZ1z/9xDRaEcfoc3rsAWM6BhBLsaHIvvnuEmDYfTtN67OJWv0NwlCFadzgNYBUxf\nFVKQhu9K6hhMX2A3CwgGXxOWvY8r9p82NPAFg+jC+pQVL74BTcdmxzEXM6U30rcw\n0oI7uGAu3KtVapwjEnuYzqkqLZfmA+TVee/skP7U9BcIihquO4LwvWhOwN+6ov6/\nZSFihGy81+dlCvEct6Z8P+1OuM70kH4olbUQPKvO/0F+nPHBr0iYJKmTgl8Ky8jH\nR3BfSZRGJfyl/l6GSBRQ1B6AWzkNpf8ahJuXu1sP5SldFALHDjdy9wJVoYDDasQl\n1dVs6JDaNyXQyTUHj7B865ZXyuHleDoA/6xoeyC9fNmZY1ZlCZWhcP95PgwShv5P\nLe5E046r0JjPP93myiV5jyvZnlYWpGgdYWNDwvH5SE1YezSsZDzGNg+qCsBH6ua1\n0Q37wbGSDkvW9ZJ8T9SPo18oZmW3B2tmCppt9P3/mzqXIVjfk1vNeslOXIM+ph2m\nk8Uqu0/F9pWuzBTHxIZr8t/P96NbZD0NonRZrHZOH5Na5mYGa0A=\n=MJGJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e6355e8d34d3f445201d49a4fe7d47112652477",
          "sha": "7e6355e8d34d3f445201d49a4fe7d47112652477",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7e6355e8d34d3f445201d49a4fe7d47112652477"
        }
      ],
      "message": "rpc: fix waitfornewblock description\n\nThe waitforblock RPC method takes a hash argument and waits for that specific block.  The waitfornewblock waits for any new block. This commit fixes the documentation.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-08T16:37:39Z"
      },
      "sha": "40dd81678f8489bcaaca9e0c699447f438907a4d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI5NWQ5YjRiYzczYmNiNDcwNTM5Y2Q3NTg2ZmM2NTFjZDA3OGE2NTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b95d9b4bc73bcb470539cd7586fc651cd078a653",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b95d9b4bc73bcb470539cd7586fc651cd078a653",
      "tree": {
        "sha": "403a88f6cb42c8150ceb9c0514b553859b3a84f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/403a88f6cb42c8150ceb9c0514b553859b3a84f0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 403a88f6cb42c8150ceb9c0514b553859b3a84f0\nparent 40dd81678f8489bcaaca9e0c699447f438907a4d\nauthor Sjors Provoost <sjors@sprovoost.nl> 1723542686 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948717 +0200\n\nrpc: recommend -rpcclienttimeout=0 for waitfor*\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y4ACgkQV/+b28ww\nEAnYag/+IG8TC3Pg44zcFkSHiMypcOMyl+FjBLo+YJRLMxPOCa/9xEN/1x9TQtGl\nwLqRrFKFe6N5o6zKD3hHgKcWe65X9K4gBixS1/JvMhz2zhQBTzMrABrxa+O4GyDg\nJ0PKQib5ejlcONc7EmSOF7jXA3zkjXdnQvOi+dTAAu5+3ZtURlE16Y/SM0OzCPDF\nsccmB+mDzP8AMujj8zCdaA5sSHqYwDjo3QzrITzkK+a+/+CXOL7gTzOj2R1JtYfm\nfvA29O+Rsne+6V+9tuFq7/Iu9nhWi5+61efj8xM4VYgfIvrOPyVUTW9zoQepy8XM\nXrKfr7f72/pUVHG6bo7fHaXFg2aWJtydL07a+24269+hLFvKiJqA075hL1hPsRcS\nmB3sKIo6Uam4emJ0RVQnEf61DzmUCFjEqD8ijzw6O02tv26OYkbQ5KfC8EPF5mGB\nIT7Qmx8GTOXCgvS11LHnMss7T2x0ax8bPMZaAbmwAmBWquKKdECvvjtCCug8D74o\ntL+eDtdjLw2ABuzruIy+aZfO6X38yAGeN5UDai5wBxAjDOFCvjYD5HlpIrYf5VD2\nfDXS0dNpz35kaL0V91dIy2hyrfKLrnSRJ3TmxBihkjoVJv9EsBa44SXCl76vCa1O\nVlKhRzfLmSmSthnAOqL3kwx86C8YMB5WlEOe22UponJjCfOm6es=\n=cY0l\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/40dd81678f8489bcaaca9e0c699447f438907a4d",
          "sha": "40dd81678f8489bcaaca9e0c699447f438907a4d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/40dd81678f8489bcaaca9e0c699447f438907a4d"
        }
      ],
      "message": "rpc: recommend -rpcclienttimeout=0 for waitfor*",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-13T09:51:26Z"
      },
      "sha": "b95d9b4bc73bcb470539cd7586fc651cd078a653"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI3MzdiOGM1MWYyYmExZTU2NDVkNWJjZWQ3OGU2NTZmOWZhMDUwZjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2737b8c51f2ba1e5645d5bced78e656f9fa050f1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2737b8c51f2ba1e5645d5bced78e656f9fa050f1",
      "tree": {
        "sha": "583b31c0d0be80b00dfab5bcc8b98135a1f60aa6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/583b31c0d0be80b00dfab5bcc8b98135a1f60aa6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 583b31c0d0be80b00dfab5bcc8b98135a1f60aa6\nparent b95d9b4bc73bcb470539cd7586fc651cd078a653\nauthor Sjors Provoost <sjors@sprovoost.nl> 1720456771 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948718 +0200\n\nrpc: check for negative timeout arg in waitfor*\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y4ACgkQV/+b28ww\nEAnyfBAAkpkgSnwOGCYm6zADUAeNSM3pkCtrmdpOGPhxE/22OK3+lcMpcbVPiZsA\nZmTgy/NncTqicxumpzzXGcB+csMBHdH66+YkOaWRYFICUwUfxIFEooQS2AMgkowv\nWiDFARY4lv3wNTuZxiw9qZs5FLorCS8EFLKZLtNWn+vzpKPYyWoU4aGWnjryCleO\nKYeIfKrvBurp4Q7NvFlkyO6UcOo02nxRoGHiflOvdJvrwt4khjyDFjzm0+FzRIzR\ncGDAXLnaD+IAZMwdgGgOIrSNh9ZFwcBuaSpNR85UrOO1318w1st9RozlSyiFSCJE\nOKlgGoCuCcPb810BCom2GpnWhOlY7/Zgy0YA5lyMTDa7dM0Xe32m9oQUvPGp5LgX\nAwZmnFK7Z6mpnKk127P9Halqc5QEZm2cTnFBlL4DQghCQyNHqeL3kUP8pS1DZX70\n1wk8omtFwwdVAUnb9yD8qfL9fTusqQqaZ72seqH0myrqmgjDgzFFvjcJjkJntimL\n1muGHJwlkR5W4rnlNmLs6owoay31MM47Mjdz6sMcvWOvGuKFR6ifSZ4fKAfQlVTJ\n+oQ7/sYPpuGzVrpDuoH4KEN5ToL4mzqPpQWEa4GN67+n+QAFXzJTUutLzRe1F3uA\noYrx6YWC0S2faIv9PgIgsMW/RLuW8+uo7Y9Msbp7igNO5P74fCE=\n=26kF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b95d9b4bc73bcb470539cd7586fc651cd078a653",
          "sha": "b95d9b4bc73bcb470539cd7586fc651cd078a653",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b95d9b4bc73bcb470539cd7586fc651cd078a653"
        }
      ],
      "message": "rpc: check for negative timeout arg in waitfor*",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-08T16:39:31Z"
      },
      "sha": "2737b8c51f2ba1e5645d5bced78e656f9fa050f1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM4NjgyZTc0Y2ZmNjc0NDk4ZWRjMTg3OWRmNzc2MWE3ZWI3ODgyNWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8682e74cff674498edc1879df7761a7eb78825c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c8682e74cff674498edc1879df7761a7eb78825c",
      "tree": {
        "sha": "6ec81bd6feec0dace54a65cd1398097e7434323b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ec81bd6feec0dace54a65cd1398097e7434323b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6ec81bd6feec0dace54a65cd1398097e7434323b\nparent 2737b8c51f2ba1e5645d5bced78e656f9fa050f1\nauthor Sjors Provoost <sjors@sprovoost.nl> 1723459009 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725948718 +0200\n\nReplace RPCNotifyBlockChange with waitTipChanged()\n\nThis refactoring commit uses the newly introduced waitTipChanged mining interface method to replace the RPCNotifyBlockChange mechanism.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf4y4ACgkQV/+b28ww\nEAnKIQ//QPXqYu4up0VwYwwN77FTykaPpyuwtVTF/maRo/y6cF7XRKfL9rsVk2/e\nltqFO7aURpHC1IK0BHCZMx0UJiqtb4AJ1NLxWo1T5LHu4m9m+DhuQsxt0iDIXBbe\ncoP5MvbQwR+TIdUOvJpEup+Cy8ZMPEF2hHbC0M5YxrgsDpNt9n7ukg406l6T7Pmk\nz9MTvq9w5FafxlONkyzCgoBHw7rITKlloqhtIBgwrbWbSlqpZ2qUISoRR/w71hbZ\nIZZeTFAai5oGttTj/4YiJkOfXv0yuMrH9X9tQdgPVIFie0jllvtik2O3Wu9iOwrA\nHFM288LJABDlSb9CngWoBVvdjNXSkwiR0q/qCI/VuEg2yk45ZBrpBSXEo+cR/Df4\n2amEoJmuc55VM5mDFNrkBpPtNRTEJVr4C46DN6bNwyQTd6yTfSL4cJZ4FdsJnwCJ\nU+Qp7YljmKwRwcOvPuglfwYIGqEBkXj0bIgXnsgu8um3nsaVnT1BZ28eoNJGw5k9\nA56W7ylDirpXk7QvvXFKmMHbXFflceL+JLnzc28EIQBQYXLgiq2Nna+jNG+mujjn\nTGPyuSqDZNA4ccsJ9ggpXlqHFwGxFM7W615Du0fkepe1BpU0ErUwPHugU2JU2eaQ\nUvrnJ3pCiClPKlza8pqSHiwqHyQXIhdMsKUOCWJ2OzJeHTVm8Rk=\n=DxGc\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2737b8c51f2ba1e5645d5bced78e656f9fa050f1",
          "sha": "2737b8c51f2ba1e5645d5bced78e656f9fa050f1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2737b8c51f2ba1e5645d5bced78e656f9fa050f1"
        }
      ],
      "message": "Replace RPCNotifyBlockChange with waitTipChanged()\n\nThis refactoring commit uses the newly introduced waitTipChanged mining interface method to replace the RPCNotifyBlockChange mechanism.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:11:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-12T10:36:49Z"
      },
      "sha": "c8682e74cff674498edc1879df7761a7eb78825c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkN2Y4ZmQzZjlhN2UwYWNkMDI1ODBjNWYzYjQ3NzU2NTM1YzNhNjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60",
      "tree": {
        "sha": "ace44fe9db3adcdfdf391cf1e2b9e1a14ef12434",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ace44fe9db3adcdfdf391cf1e2b9e1a14ef12434"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ace44fe9db3adcdfdf391cf1e2b9e1a14ef12434\nparent c8682e74cff674498edc1879df7761a7eb78825c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1724689555 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725949165 +0200\n\nRemove unused CRPCSignals\n\nThey are no longer used for anything since RPCNotifyBlockChange was replaced with waitTipChanged() from the mining interface.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf5O4ACgkQV/+b28ww\nEAlq9BAAroiYSEkODDWhGPh6TLbbkRWVbsS/iqIhz7gMWI6AlpOy96iRlneXi5/1\nxHI7DzClynPYTmZ4ymFzfHHTLmLAogOA8iZGRRBWJwcG0YUhoiSHyPpJrzqvy5IG\njeIgdMgTt00zN2eRxeTsB7+jpmauHTdUvqIRzitkPMPRahzQj/ye8ESMzUlon7EN\ntatXxAjgjY5uUxWUCKsEC+3Z9ZtILQGPof6hT490IEe3x9gaahl9L8mUrNYxCtui\nC9nw1Lrx0eU8C0kHEW7d45K+zbxGxBKgYHdeGyOPtSAqhrMzH3R7NE75RraGZy5P\nkwWJmwJ15nTbtfUkrFcXsbUsKQrN1vsGiaWGUQQOEaFrfYSokgIkkSEWGAO1RD+o\neT3XDxUeQpgZQ3kem6rkTLiivFG8Iwhy6CpA9+Y8obKUeCl+uG5gVSkampKPjkun\nuGRv8hSylAXJ0/zaHNVgvJ50JpQFkhVp9xQLQGaYinzv3gPTCB3dUd9rvpaBw0hk\nCBf6QtbgYA5kgTmN2W0lG/W80OXBhMYSZ9yauQGl0qrpxDCP5PSHkBAk2a9tjwGt\nw0cVW6qSPbK+PdyjPUUxRxTjMjeBO0sLvP1gCH7n+q1TARviVNv2nukQDmR4nfiB\nFY0myKqN7hHN5SR7OXvtvAAzj2kqtld867PSfxts2jy4rWQv5BI=\n=juOI\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8682e74cff674498edc1879df7761a7eb78825c",
          "sha": "c8682e74cff674498edc1879df7761a7eb78825c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c8682e74cff674498edc1879df7761a7eb78825c"
        }
      ],
      "message": "Remove unused CRPCSignals\n\nThey are no longer used for anything since RPCNotifyBlockChange was replaced with waitTipChanged() from the mining interface.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:19:25Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-08-26T16:25:55Z"
      },
      "sha": "6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI4YmE3ZWY0NTAyOTRiYmJiOGViMmU5Yzg4Yjc5NThkYTk2ZjIyMDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28ba7ef450294bbbb8eb2e9c88b7958da96f2208",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/28ba7ef450294bbbb8eb2e9c88b7958da96f2208",
      "tree": {
        "sha": "58cefe6ee76940296f593b19a86c927f7b6fa8db",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/58cefe6ee76940296f593b19a86c927f7b6fa8db"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 58cefe6ee76940296f593b19a86c927f7b6fa8db\nparent 6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60\nauthor Ryan Ofsky <ryan@ofsky.org> 1724690116 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725949167 +0200\n\nrpc: use waitTipChanged for longpoll\n\nThis removes the last remaining use of g_best_block by the RPC.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf5O8ACgkQV/+b28ww\nEAkisA//U1ZpeX/5caVqcXrJ//KsiZj89DfBJtFxnsc7753y4j8KWG0HdKDL89Ms\nvU3z8Ti7rDL67IlJ7FR1qthfFfpFLxILNSS4JTJvOtRNuyE17fATEBIS5W5qR7Yj\nT8opQa+52zRW6rJtt2lLK7eU90e+uKkZSJJN7f74s9jMauyVGHDVp0PewHmLP/V/\nIXukxK3e3oDV1SLqCBAPtFCZ29S71bxz1oaRK87dnms+eNG6LfM1zjIzj0K7vEPC\nbgfSHgZGq5TMdmLU/ZYpTpwt/EeDpEiA1sjLFt61OnucjsN9w9t4Mpq9KwBlnigS\n98MzJZ4NQIMeJRocHLDhMH69qx18C4FzWArkmvkmjvvyRO2mfIz+88h/aADAlaI1\nYHey0enc0R6fse/my/usGH6JyexP1f28cFjom/3v3IwY5oPJUmyxZK5rxrFWsyjz\niHEo0cba0N7hUYnRVhaF6NtQF6HdAr+ZGT+egsgOscFCpVLkOlQ/Ows56XiPF3Fh\nm+ZWP6/dEjid6W+4dTmUAGH4sKSfWpWIu/NnwVvM44JWrjW8IA55WcE8o0S/ZB+S\nLMppnXlkfGrh2maMOHIUgtdld9I2v2rddDzJsreoYN3ohPwKiTZ6/yw6rcYnAz/U\nKGIm/vebj7zy6rJnOho5FjqMWZd/xJ6A0amPQ4v4OiD5tcVOHis=\n=D1NI\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60",
          "sha": "6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6d7f8fd3f9a7e0acd02580c5f3b47756535c3a60"
        }
      ],
      "message": "rpc: use waitTipChanged for longpoll\n\nThis removes the last remaining use of g_best_block by the RPC.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:19:27Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-08-26T16:35:16Z"
      },
      "sha": "28ba7ef450294bbbb8eb2e9c88b7958da96f2208"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk2NjAyN2JkZGE1M2QxNTAzMjFhZjdkYjQ4YjU3Zjk3NTZjNTRlNjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/966027bdda53d150321af7db48b57f9756c54e68",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/966027bdda53d150321af7db48b57f9756c54e68",
      "tree": {
        "sha": "7341017ce3cd6e9fbd731e67e2329f9c4b826edf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7341017ce3cd6e9fbd731e67e2329f9c4b826edf"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7341017ce3cd6e9fbd731e67e2329f9c4b826edf\nparent 28ba7ef450294bbbb8eb2e9c88b7958da96f2208\nauthor Ryan Ofsky <ryan@ofsky.org> 1724689687 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1725949167 +0200\n\nRemove unused g_best_block\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmbf5O8ACgkQV/+b28ww\nEAliyxAAuXb1DDWrNn3G6NeAa845bSMk/YgzrSSXpmPUd0pRARUM3Ysi9K5lAhu4\n24eL1gC3sP3WMz72nMbNSn0jiEEx8SBlWXEWCqCRAGvc5Rw/tKRNim/+ugzKavXo\nftexQ8+d8aF11r5PBULzcXv8/UA4swU5kT1E5tqPAUrirh/wG66lyFplAzhxdyFj\n/puNA9GTnZSHgauX0r2m6Vjil1BHDTqp562gTVPtYMLV3nvEuIpF2j0viXQIB413\nHsYZViZsJDxp2lmeMO0Bz4YPo+LKm6s7Dn2g2R1DdciaUIeNIeBwfLW6MBrENLtQ\n8m14xxp0XjZQPHhWPTvZTHOaDDMkMqXHmYYGkp7UK0km72ztZFrOMb8QOYsTY+Kg\nXjAk2o20HziKUWR+nAMqWIKbjQ8d4X9RpPEqtR9DDIZgROA9PqrKdYGl+Dcz5oSt\nM/9H/q6FHv4X5zC5qTrxcx+vV0cwquYFqbW+t9BamhFjCR0bjxu/UDoeE1wCQMa1\nn/RWh3lq+N9H/IhGiuVfoj93OLybS9+buSveYai/cDh+zCUKVF4RkH+llf+c58H3\ncGIa7CDINeHMgoJfCFYQnlPYvHQj3C1mhpBKQMzyVU8sP4oWfqgZv9ZEXEQDqgDg\njOvXulJ+5nxgimp0pzjuz3rgW1/czFGLAHmkL8OK3IdgLAS17eo=\n=JR3N\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28ba7ef450294bbbb8eb2e9c88b7958da96f2208",
          "sha": "28ba7ef450294bbbb8eb2e9c88b7958da96f2208",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/28ba7ef450294bbbb8eb2e9c88b7958da96f2208"
        }
      ],
      "message": "Remove unused g_best_block",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-09-10T06:19:27Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-08-26T16:28:07Z"
      },
      "sha": "966027bdda53d150321af7db48b57f9756c54e68"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14193130719,
      "node_id": "HRFPE_lADOABII586O0lCbzwAAAANN-fzf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14193130719",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T06:22:23Z"
    },
    {
      "event": "commented",
      "id": 2339769505,
      "node_id": "IC_kwDOABII586Ldgyh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2339769505",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T06:23:05Z",
      "updated_at": "2024-09-10T06:23:05Z",
      "author_association": "MEMBER",
      "body": "Trivial rebase after #30509.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2339769505",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    },
    {
      "event": "unlabeled",
      "id": 14193571749,
      "node_id": "UNLE_lADOABII586O0lCbzwAAAANOALel",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14193571749",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T07:02:42Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2292315783,
      "node_id": "PRR_kwDOABII586IofaH",
      "url": null,
      "actor": null,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 966027bdda53d150321af7db48b57f9756c54e68, no changes since last rebase",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2292315783",
      "submitted_at": "2024-09-10T12:38:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "review_requested",
      "id": 14198190048,
      "node_id": "RRE_lADOABII586O0lCbzwAAAANORy_g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14198190048",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T12:38:42Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "referenced",
      "id": 14201709938,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANOfOVy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14201709938",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d38df65999b1d97115eaedc76faaf95a39973601",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/d38df65999b1d97115eaedc76faaf95a39973601",
      "created_at": "2024-09-10T16:15:03Z"
    },
    {
      "event": "labeled",
      "id": 14201791141,
      "node_id": "LE_lADOABII586O0lCbzwAAAANOfiKl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14201791141",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T16:21:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2293537994,
      "node_id": "PRR_kwDOABII586ItJzK",
      "url": null,
      "actor": null,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK 966027bdda53d150321af7db48b57f9756c54e68",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#pullrequestreview-2293537994",
      "submitted_at": "2024-09-10T19:09:07Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
    },
    {
      "event": "referenced",
      "id": 14210299745,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANO__dh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14210299745",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8c1329ff8b0f542d7fe11af36bfcbb4f3949bc75",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/8c1329ff8b0f542d7fe11af36bfcbb4f3949bc75",
      "created_at": "2024-09-11T06:29:20Z"
    },
    {
      "event": "referenced",
      "id": 14210387128,
      "node_id": "REFE_lADOABII586O0lCbzwAAAANPAUy4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14210387128",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "dc10cd379d32808d5f953380c267bd79b7cd1e05",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/dc10cd379d32808d5f953380c267bd79b7cd1e05",
      "created_at": "2024-09-11T06:37:20Z"
    },
    {
      "event": "labeled",
      "id": 14237340541,
      "node_id": "LE_lADOABII586O0lCbzwAAAANQnJN9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14237340541",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T18:38:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2346987862,
      "node_id": "IC_kwDOABII586L5DFW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2346987862",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T18:38:12Z",
      "updated_at": "2024-09-12T18:38:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#issuecomment-2346987862",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30409"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673937990",
      "pull_request_review_id": 2171768079,
      "id": 1673937990,
      "node_id": "PRRC_kwDOABII585jxkRG",
      "diff_hunk": "@@ -860,6 +860,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};\n+\n+        auto deadline = std::chrono::steady_clock::now() + timeout;\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while (!chainman().m_interrupt && std::chrono::steady_clock::now() < deadline) {\n+                auto check_time = std::chrono::steady_clock::now() + std::min(timeout, MillisecondsDouble(1000));",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "482a5fd48d494f44f48209956c77ec1bdb5663f5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I changed this in the last push, previously it would always wait for one second each interrupt \"round\" even if the requested `timeout` was shorter.",
      "created_at": "2024-07-11T12:35:15Z",
      "updated_at": "2024-07-11T12:36:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1673937990",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673937990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 879,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691480674",
      "pull_request_review_id": 2199367930,
      "id": 1691480674,
      "node_id": "PRRC_kwDOABII585k0fJi",
      "diff_hunk": "@@ -39,6 +40,15 @@ class Mining\n     //! Returns the hash for the tip of this chain\n     virtual std::optional<uint256> getTipHash() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout\n+     */\n+    virtual std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout = MillisecondsDouble::max()) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 19,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (4554b3b1adf678e17d479d72738f4f2089971c4a)\r\n\r\nNot important, but it could be good to return [`BlockKey`](https://github.com/bitcoin/bitcoin/blob/5d280130446d57d653c749005a2e363265d87686/src/interfaces/chain.h#L44-L48) struct here instead of std::pair. Could also be good to provide a more consistent interface instead of separate getTipHash() and getTipHeight() functions:\r\n\r\n```c++\r\nvirtual BlockKey getTip() = 0;\r\nvirtual BlockKey waitTipChanged(MillisecondsDouble timeout = MillisecondsDouble::max()) = 0;\r\n```\r\n\r\nIf you do use `BlockKey` here would suggest moving it from `interfaces/chain.h` to `interfaces/types.h`. Also I think I a name like `BlockId` or `BlockRef` would be better than `BlockKey` in this context, given other implications ofthe word \"key\". But feel free to move/rename/reuse BlockKey from chain.h here, or not.",
      "created_at": "2024-07-25T13:49:46Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691480674",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691480674"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691492745",
      "pull_request_review_id": 2199367930,
      "id": 1691492745,
      "node_id": "PRRC_kwDOABII585k0iGJ",
      "diff_hunk": "@@ -861,6 +861,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (4554b3b1adf678e17d479d72738f4f2089971c4a)\r\n\r\nI think caller should be required to pass in the previous hash to avoid race conditions. Otherwise, the caller could initiate a `waitTipChanged` call waiting for the tip to change, and then it could change before this line is executed, and then the `previous_hash` variable will contain the new tip hash, and the function won't return until the tip changes a second time. This problem wouldn't happen if the caller were required to pass in the block hash that they think is the current one.",
      "created_at": "2024-07-25T13:57:02Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691492745",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691492745"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 866,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691499856",
      "pull_request_review_id": 2199367930,
      "id": 1691499856,
      "node_id": "PRRC_kwDOABII585k0j1Q",
      "diff_hunk": "@@ -861,6 +861,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};\n+\n+        auto deadline = std::chrono::steady_clock::now() + timeout;\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while (!chainman().m_interrupt && std::chrono::steady_clock::now() < deadline) {\n+                auto check_time = std::chrono::steady_clock::now() + std::min(timeout, MillisecondsDouble(1000));\n+                g_best_block_cv.wait_until(lock, check_time);\n+                if (g_best_block != previous_hash) break;",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (4554b3b1adf678e17d479d72738f4f2089971c4a)\r\n\r\nIf you adopt suggestion above for caller to pass in the previous_hash value, you will want to delete this line and add `g_best_block == previous_hash &&` to the while loop condition so this function does not block if the hash is already different when it is called.",
      "created_at": "2024-07-25T14:01:37Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691499856",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691499856"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 874,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691546813",
      "pull_request_review_id": 2199367930,
      "id": 1691546813,
      "node_id": "PRRC_kwDOABII585k0vS9",
      "diff_hunk": "@@ -505,6 +513,56 @@ def _test_stopatheight(self):\n         self.start_node(0)\n         assert_equal(self.nodes[0].getblockcount(), HEIGHT + 7)\n \n+    def _test_waitfornewblock(self):\n+        self.log.info(\"Test waitfornewblock\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PInterface())\n+\n+        current_height = node.getblock(node.getbestblockhash())['height']\n+        current_hash = node.getblock(node.getbestblockhash())['hash']\n+\n+        # Create a fork somewhere below our current height, invalidate and\n+        # then reconsider the longest chain.\n+        #\n+        fork_height = current_height - 100 # choose something vaguely near our tip\n+        fork_hash = node.getblockhash(fork_height)\n+        fork_block = node.getblock(fork_hash)\n+\n+        b1 = self.solve_and_send_block(peer, int(fork_hash, 16), fork_height+1, fork_block['time'] + 1)\n+        b2 = self.solve_and_send_block(peer, b1.sha256, fork_height+2, b1.nTime + 1)\n+\n+        node.invalidateblock(b2.hash)\n+        node.reconsiderblock(b2.hash)\n+\n+        assert_equal(\n+            node.waitfornewblock(timeout=2)['hash'],\n+            current_hash)",
      "path": "test/functional/rpc_blockchain.py",
      "position": null,
      "original_position": 49,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "a18cb7adf192bae481c879fe865f1c159b2b8622",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: add test for waitforblock and waitfornewblock\" (a18cb7adf192bae481c879fe865f1c159b2b8622)\r\n\r\nI don't think I understand what this test is checking for. Maybe there could be a comment that describes what the test setup is doing what a failed result might look like. It seems like it is just creating a small fork and then invalidating the fork tip, so it shouldn't affect the most work tip or current chain. I would expect to see wait_until call after the invalidateblock call which verifies it has the intended effect. Also the 2 millisecond timeout seems small so if this is supposed to wait for something it doesn't seem like it waiting very long.\r\n\r\nSame comments also apply to the  _test_waitforblock test below, and maybe it would be good to dedupe the test setup shared by these functions, moving it into a helper method they both could call.",
      "created_at": "2024-07-25T14:25:46Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691546813",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691546813"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 537,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691555861",
      "pull_request_review_id": 2199367930,
      "id": 1691555861,
      "node_id": "PRRC_kwDOABII585k0xgV",
      "diff_hunk": "@@ -255,7 +255,7 @@ void RPCNotifyBlockChange(const CBlockIndex* pindex)\n static RPCHelpMan waitfornewblock()\n {\n     return RPCHelpMan{\"waitfornewblock\",\n-                \"\\nWaits for a specific new block and returns useful info about it.\\n\"\n+                \"\\nWaits for any new block and returns useful info about it.\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 5,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "e2a1347db07933d1c6e40ab45f2ca4c56c691fed",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: fix waitfornewblock description\" (e2a1347db07933d1c6e40ab45f2ca4c56c691fed)\r\n\r\nThis is a good documentation fix, but as described previously this waitfornewblock interface is inherently racy. Ideally it would accept an `current_block` option or argument, and return as soon as the tip is not not pointing to that block. This could be something to add in a followup PR, though, because it is not directly relevant to this one.\r\n",
      "created_at": "2024-07-25T14:30:54Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691555861",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691555861"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 258,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691559189",
      "pull_request_review_id": 2199367930,
      "id": 1691559189,
      "node_id": "PRRC_kwDOABII585k0yUV",
      "diff_hunk": "@@ -427,17 +427,12 @@ static void registerSignalHandler(int signal, void(*handler)(int))\n }\n #endif\n \n-static boost::signals2::connection rpc_notify_block_change_connection;\n static void OnRPCStarted()\n {\n-    rpc_notify_block_change_connection = uiInterface.NotifyBlockTip_connect(std::bind(RPCNotifyBlockChange, std::placeholders::_2));\n }\n \n static void OnRPCStopped()\n {\n-    rpc_notify_block_change_connection.disconnect();\n-    RPCNotifyBlockChange(nullptr);\n-    g_best_block_cv.notify_all();",
      "path": "src/init.cpp",
      "position": 23,
      "original_position": 14,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "9d3b07526110a842c9592425b89785e688a8f46c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (9d3b07526110a842c9592425b89785e688a8f46c)\r\n\r\ng_best_block_cv still exists, so I don't think you should delete this line\r\n\r\nCan move it to the place this function is called when this function is deleted in the next commit.",
      "created_at": "2024-07-25T14:32:51Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691559189",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691559189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 441,
      "original_line": 441,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691564281",
      "pull_request_review_id": 2199367930,
      "id": 1691564281,
      "node_id": "PRRC_kwDOABII585k0zj5",
      "diff_hunk": "@@ -324,14 +314,19 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n     CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    block.hash = CHECK_NONFATAL(miner.getTipHash()).value();\n+    block.height = CHECK_NONFATAL(miner.getTipHeight()).value();\n+\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.hash == hash) break;\n+        auto res = timeout ? miner.waitTipChanged(std::chrono::milliseconds(timeout)) : miner.waitTipChanged();",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 92,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "9d3b07526110a842c9592425b89785e688a8f46c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (9d3b07526110a842c9592425b89785e688a8f46c)\r\n\r\nShould pass `block.hash` as `waitTipChanged` argument here to avoid race condition (see earlier suggestion)",
      "created_at": "2024-07-25T14:35:43Z",
      "updated_at": "2024-07-25T14:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1691564281",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691564281"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527845",
      "pull_request_review_id": 2232637802,
      "id": 1713527845,
      "node_id": "PRRC_kwDOABII585mIlwl",
      "diff_hunk": "@@ -39,6 +40,15 @@ class Mining\n     //! Returns the hash for the tip of this chain\n     virtual std::optional<uint256> getTipHash() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout\n+     */\n+    virtual std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout = MillisecondsDouble::max()) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 19,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": 1691480674,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`getTip()` and `waitTipChanged()` now both return `BlockRef`.",
      "created_at": "2024-08-12T10:47:41Z",
      "updated_at": "2024-08-12T10:47:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713527845",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527845"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527921",
      "pull_request_review_id": 2232637936,
      "id": 1713527921,
      "node_id": "PRRC_kwDOABII585mIlxx",
      "diff_hunk": "@@ -861,6 +861,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": 1691492745,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done. I also simplified the `waitfornewblock` (etc) RPC call to just call getTip() and then pass that into `waitTipChanged`. That gets rid of `struct CUpdatedBlock`.",
      "created_at": "2024-08-12T10:47:45Z",
      "updated_at": "2024-08-12T10:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713527921",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 866,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527986",
      "pull_request_review_id": 2232638042,
      "id": 1713527986,
      "node_id": "PRRC_kwDOABII585mIlyy",
      "diff_hunk": "@@ -861,6 +861,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};\n+\n+        auto deadline = std::chrono::steady_clock::now() + timeout;\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while (!chainman().m_interrupt && std::chrono::steady_clock::now() < deadline) {\n+                auto check_time = std::chrono::steady_clock::now() + std::min(timeout, MillisecondsDouble(1000));\n+                g_best_block_cv.wait_until(lock, check_time);\n+                if (g_best_block != previous_hash) break;",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "4554b3b1adf678e17d479d72738f4f2089971c4a",
      "in_reply_to_id": 1691499856,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-08-12T10:47:48Z",
      "updated_at": "2024-08-12T10:47:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713527986",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713527986"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 874,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528130",
      "pull_request_review_id": 2232638308,
      "id": 1713528130,
      "node_id": "PRRC_kwDOABII585mIl1C",
      "diff_hunk": "@@ -505,6 +513,56 @@ def _test_stopatheight(self):\n         self.start_node(0)\n         assert_equal(self.nodes[0].getblockcount(), HEIGHT + 7)\n \n+    def _test_waitfornewblock(self):\n+        self.log.info(\"Test waitfornewblock\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PInterface())\n+\n+        current_height = node.getblock(node.getbestblockhash())['height']\n+        current_hash = node.getblock(node.getbestblockhash())['hash']\n+\n+        # Create a fork somewhere below our current height, invalidate and\n+        # then reconsider the longest chain.\n+        #\n+        fork_height = current_height - 100 # choose something vaguely near our tip\n+        fork_hash = node.getblockhash(fork_height)\n+        fork_block = node.getblock(fork_hash)\n+\n+        b1 = self.solve_and_send_block(peer, int(fork_hash, 16), fork_height+1, fork_block['time'] + 1)\n+        b2 = self.solve_and_send_block(peer, b1.sha256, fork_height+2, b1.nTime + 1)\n+\n+        node.invalidateblock(b2.hash)\n+        node.reconsiderblock(b2.hash)\n+\n+        assert_equal(\n+            node.waitfornewblock(timeout=2)['hash'],\n+            current_hash)",
      "path": "test/functional/rpc_blockchain.py",
      "position": null,
      "original_position": 49,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "a18cb7adf192bae481c879fe865f1c159b2b8622",
      "in_reply_to_id": 1691546813,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't fully understand the original test either. Will look into it later.",
      "created_at": "2024-08-12T10:47:57Z",
      "updated_at": "2024-08-12T10:47:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713528130",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528130"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 537,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528797",
      "pull_request_review_id": 2232639285,
      "id": 1713528797,
      "node_id": "PRRC_kwDOABII585mIl_d",
      "diff_hunk": "@@ -255,7 +255,7 @@ void RPCNotifyBlockChange(const CBlockIndex* pindex)\n static RPCHelpMan waitfornewblock()\n {\n     return RPCHelpMan{\"waitfornewblock\",\n-                \"\\nWaits for a specific new block and returns useful info about it.\\n\"\n+                \"\\nWaits for any new block and returns useful info about it.\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 5,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "e2a1347db07933d1c6e40ab45f2ca4c56c691fed",
      "in_reply_to_id": 1691555861,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I made a note to either add that argument in this PR or make a followup. ",
      "created_at": "2024-08-12T10:48:28Z",
      "updated_at": "2024-08-12T10:48:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713528797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 258,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528958",
      "pull_request_review_id": 2232639529,
      "id": 1713528958,
      "node_id": "PRRC_kwDOABII585mImB-",
      "diff_hunk": "@@ -427,17 +427,12 @@ static void registerSignalHandler(int signal, void(*handler)(int))\n }\n #endif\n \n-static boost::signals2::connection rpc_notify_block_change_connection;\n static void OnRPCStarted()\n {\n-    rpc_notify_block_change_connection = uiInterface.NotifyBlockTip_connect(std::bind(RPCNotifyBlockChange, std::placeholders::_2));\n }\n \n static void OnRPCStopped()\n {\n-    rpc_notify_block_change_connection.disconnect();\n-    RPCNotifyBlockChange(nullptr);\n-    g_best_block_cv.notify_all();",
      "path": "src/init.cpp",
      "position": 23,
      "original_position": 14,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "9d3b07526110a842c9592425b89785e688a8f46c",
      "in_reply_to_id": 1691559189,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I moved it to `StopRPC()`.",
      "created_at": "2024-08-12T10:48:36Z",
      "updated_at": "2024-08-12T10:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713528958",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713528958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 441,
      "original_line": 441,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713529075",
      "pull_request_review_id": 2232639723,
      "id": 1713529075,
      "node_id": "PRRC_kwDOABII585mImDz",
      "diff_hunk": "@@ -324,14 +314,19 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n     CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    block.hash = CHECK_NONFATAL(miner.getTipHash()).value();\n+    block.height = CHECK_NONFATAL(miner.getTipHeight()).value();\n+\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.hash == hash) break;\n+        auto res = timeout ? miner.waitTipChanged(std::chrono::milliseconds(timeout)) : miner.waitTipChanged();",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 92,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "9d3b07526110a842c9592425b89785e688a8f46c",
      "in_reply_to_id": 1691564281,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-08-12T10:48:42Z",
      "updated_at": "2024-08-12T10:48:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713529075",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713529075"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713879417",
      "pull_request_review_id": 2233198217,
      "id": 1713879417,
      "node_id": "PRRC_kwDOABII585mJ7l5",
      "diff_hunk": "@@ -860,6 +860,25 @@ class MinerImpl : public Mining\n         return tip->GetBlockHash();\n     }\n \n+    std::pair<uint256, int> waitTipChanged(MillisecondsDouble timeout) override\n+    {\n+        uint256 previous_hash{WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash();)};\n+\n+        auto deadline = std::chrono::steady_clock::now() + timeout;\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while (!chainman().m_interrupt && std::chrono::steady_clock::now() < deadline) {\n+                auto check_time = std::chrono::steady_clock::now() + std::min(timeout, MillisecondsDouble(1000));",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "482a5fd48d494f44f48209956c77ec1bdb5663f5",
      "in_reply_to_id": 1673937990,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (3435d7dd430559abffc964c163a2ae73febd99d1)\r\n\r\n> I changed this in the last push, previously it would always wait for one second each interrupt \"round\" even if the requested `timeout` was shorter.\r\n\r\nThis doesn't seem right. If timeout is 1500ms and the block never changes, it looks like this will wait 1000ms+1000ms instead of 1000ms+500ms. I'm also concerned about the `deadline = now() + timeout` assignment above because it seems like that will be an overflowed value when timeout is `MillisecondsDouble::max()` so the while loop condition might be invalid. I fed this to chatgpt and it suggested the following which seems a bit cleaner & safer:\r\n\r\n\r\n```c++\r\nauto deadline = (timeout != std::chrono::duration::max()) \r\n    ? std::make_optional(std::chrono::steady_clock::now() + timeout)\r\n    : std::nullopt;\r\n\r\nWAIT_LOCK(g_best_block_mutex, lock);\r\nwhile (g_best_block == current_tip.hash && !chainman().m_interrupt) {\r\n    auto now = std::chrono::steady_clock::now();\r\n    auto check_time = now + MillisecondsDouble(1000);\r\n    if (deadline) {\r\n        if (now >= *deadline) {\r\n            break;\r\n        }\r\n        check_time = std::min(*deadline, check_time);\r\n    }\r\n    g_best_block_cv.wait_until(lock, check_time);\r\n}\r\n\r\n```\r\n",
      "created_at": "2024-08-12T14:24:12Z",
      "updated_at": "2024-08-12T16:02:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713879417",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713879417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 879,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713960772",
      "pull_request_review_id": 2233198217,
      "id": 1713960772,
      "node_id": "PRRC_kwDOABII585mKPdE",
      "diff_hunk": "@@ -36,8 +38,18 @@ class Mining\n     //! Returns whether IBD is still in progress.\n     virtual bool isInitialBlockDownload() = 0;\n \n-    //! Returns the hash for the tip of this chain\n-    virtual std::optional<uint256> getTipHash() = 0;\n+    //! Returns the hash and height for the tip of this chain\n+    virtual std::optional<BlockRef> getTip() = 0;\n+\n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout\n+     */\n+    virtual BlockRef waitTipChanged(BlockRef current_tip, MillisecondsDouble timeout = MillisecondsDouble::max()) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 28,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "dcf984b055a367facf7704eb8055619d6fe64a55",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (3435d7dd430559abffc964c163a2ae73febd99d1)\r\n\r\nI think it would be slightly better for `current_tip` to just be a block hash, rather than hash and height, because the height value is unused, and a accepting height might create misleading impression that this method could be called to wait for a height to be reached.",
      "created_at": "2024-08-12T15:08:04Z",
      "updated_at": "2024-08-12T16:02:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713960772",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713960772"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713965000",
      "pull_request_review_id": 2233198217,
      "id": 1713965000,
      "node_id": "PRRC_kwDOABII585mKQfI",
      "diff_hunk": "@@ -277,16 +259,16 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);\n     }",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 69,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (d919a230563bd2efee1fccb83194b43f436781ef)\r\n\r\nIt seems like the implementation of the this loop always waits for the timeout to be reached, and doesn't exit early if the tip did change. So if timeout is 0 it will just infinite loop.\r\n\r\nI think if it can be simplified to just:\r\n\r\n```c++\r\n    if (IsRPCRunning()) {\r\n        block = timeout \r\n            ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout))\r\n            : miner.waitTipChanged(block);\r\n    }\r\n```\r\n\r\nAnd you could get rid of the deadline variable.\r\n\r\n\r\n",
      "created_at": "2024-08-12T15:10:47Z",
      "updated_at": "2024-08-12T16:02:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713965000",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713965000"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 268,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713997278",
      "pull_request_review_id": 2233198217,
      "id": 1713997278,
      "node_id": "PRRC_kwDOABII585mKYXe",
      "diff_hunk": "@@ -324,14 +306,14 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.hash == hash) break;\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (d919a230563bd2efee1fccb83194b43f436781ef)\r\n\r\nPassing timeout parameter doesn't seem right, because it could wait too long. For example if timeout is 10 seconds, and tip changed after 8 seconds but did not match expected block hash, the next wait call will wait 10 seconds instead of 2 seconds.\r\n\r\nMight be better to replace with:\r\n\r\n```c++\r\nwhile (IsRPCRunning()) {\r\n    auto now = timeout ? std::chrono::steady_clock::now() : std::chrono::steady_clock::time_point::min();\r\n    if (block.hash == hash || now > deadline) break;\r\n    block = timeout ? miner.waitTipChanged(block, deadline - now) : miner.waitTipChanged(block);\r\n}\r\n```",
      "created_at": "2024-08-12T15:31:09Z",
      "updated_at": "2024-08-12T16:02:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1713997278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713997278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 316,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714002168",
      "pull_request_review_id": 2233198217,
      "id": 1714002168,
      "node_id": "PRRC_kwDOABII585mKZj4",
      "diff_hunk": "@@ -372,15 +354,16 @@ static RPCHelpMan waitforblockheight()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&height]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height >= height || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&height]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height >= height || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.height >= height) break;\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 116,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (d919a230563bd2efee1fccb83194b43f436781ef)\r\n\r\nSeems like this has same problem as waitforblock where waitTipChanged could wait too long because it is called with wrong timeout value. Might be better as:\r\n\r\n```c++\r\nwhile (IsRPCRunning()) {\r\n    auto now = timeout ? std::chrono::steady_clock::now() : std::chrono::steady_clock::time_point::min();\r\n    if (block.height >= height || now > deadline) break;\r\n    block = timeout ? miner.waitTipChanged(block, deadline - now) : miner.waitTipChanged(block);\r\n}\r\n```",
      "created_at": "2024-08-12T15:34:07Z",
      "updated_at": "2024-08-12T16:02:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1714002168",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714002168"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 364,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714902269",
      "pull_request_review_id": 2234901100,
      "id": 1714902269,
      "node_id": "PRRC_kwDOABII585mN1T9",
      "diff_hunk": "@@ -277,16 +259,16 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);\n     }",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 69,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": 1713965000,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, this should not have been a while loop. I reproduced the infinite loop here.",
      "created_at": "2024-08-13T08:39:25Z",
      "updated_at": "2024-08-13T08:39:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1714902269",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714902269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 268,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013521",
      "pull_request_review_id": 2235089228,
      "id": 1715013521,
      "node_id": "PRRC_kwDOABII585mOQeR",
      "diff_hunk": "@@ -372,15 +354,16 @@ static RPCHelpMan waitforblockheight()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&height]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height >= height || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&height]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height >= height || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.height >= height) break;\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 116,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": 1714002168,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed (in the same way as `waitforblock`)",
      "created_at": "2024-08-13T09:52:54Z",
      "updated_at": "2024-08-13T09:52:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1715013521",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 364,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013631",
      "pull_request_review_id": 2235089426,
      "id": 1715013631,
      "node_id": "PRRC_kwDOABII585mOQf_",
      "diff_hunk": "@@ -324,14 +306,14 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while(IsRPCRunning() && (timeout == 0 || std::chrono::steady_clock::now() < deadline)) {\n+        if (block.hash == hash) break;\n+        block = timeout ? miner.waitTipChanged(block, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d919a230563bd2efee1fccb83194b43f436781ef",
      "in_reply_to_id": 1713997278,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed, though in a slightly different way.",
      "created_at": "2024-08-13T09:52:59Z",
      "updated_at": "2024-08-13T09:52:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1715013631",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013631"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 316,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013711",
      "pull_request_review_id": 2235089541,
      "id": 1715013711,
      "node_id": "PRRC_kwDOABII585mOQhP",
      "diff_hunk": "@@ -36,8 +38,18 @@ class Mining\n     //! Returns whether IBD is still in progress.\n     virtual bool isInitialBlockDownload() = 0;\n \n-    //! Returns the hash for the tip of this chain\n-    virtual std::optional<uint256> getTipHash() = 0;\n+    //! Returns the hash and height for the tip of this chain\n+    virtual std::optional<BlockRef> getTip() = 0;\n+\n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout\n+     */\n+    virtual BlockRef waitTipChanged(BlockRef current_tip, MillisecondsDouble timeout = MillisecondsDouble::max()) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 28,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "dcf984b055a367facf7704eb8055619d6fe64a55",
      "in_reply_to_id": 1713960772,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-08-13T09:53:02Z",
      "updated_at": "2024-08-13T09:53:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1715013711",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1715013711"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719929110",
      "pull_request_review_id": 2242860642,
      "id": 1719929110,
      "node_id": "PRRC_kwDOABII585mhAkW",
      "diff_hunk": "@@ -40,6 +41,16 @@ class Mining\n     //! Returns the hash and height for the tip of this chain\n     virtual std::optional<BlockRef> getTip() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 15,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d)\r\n\r\nNot sure \"in case of race condition\" actually explains this. Would suggest changing this to:\r\n\r\n- `current_tip` - block hash compared against the current chain tip. Function waits for the chain tip to change if this matches, otherwise it returns right away.",
      "created_at": "2024-08-16T14:32:47Z",
      "updated_at": "2024-08-16T15:28:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1719929110",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719929110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719939574",
      "pull_request_review_id": 2242860642,
      "id": 1719939574,
      "node_id": "PRRC_kwDOABII585mhDH2",
      "diff_hunk": "@@ -40,6 +41,16 @@ class Mining\n     //! Returns the hash and height for the tip of this chain\n     virtual std::optional<BlockRef> getTip() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 18,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d)\r\n\r\nThink it would  be simpler to say \"returns hash and height of the current chain tip after this call.\"\r\n\r\nIt seems potentially misleading to refer to a \"previous\" tip here because that sounds like this could sometimes return an old block hash. And it's a little confusing to refer to a \"new \"tip in the case where this function just returns immediately and there no interruption or wait or timeout.",
      "created_at": "2024-08-16T14:39:18Z",
      "updated_at": "2024-08-16T15:28:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1719939574",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719939574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 49,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719963458",
      "pull_request_review_id": 2242860642,
      "id": 1719963458,
      "node_id": "PRRC_kwDOABII585mhI9C",
      "diff_hunk": "@@ -870,6 +870,30 @@ class MinerImpl : public Mining\n         return BlockRef{tip->GetBlockHash(), tip->nHeight};\n     }\n \n+    BlockRef waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\n+    {\n+        // Interrupt check interval\n+        const MillisecondsDouble tick{1000};\n+        auto now{std::chrono::steady_clock::now()};\n+        auto deadline = now + timeout;\n+        // std::chrono does not check against overflow\n+        if (deadline < now) deadline = std::chrono::steady_clock::time_point::max();\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while ((g_best_block == uint256() || g_best_block == current_tip) && !chainman().m_interrupt) {\n+                now = std::chrono::steady_clock::now();\n+                if (now >= deadline) break;\n+                const MillisecondsDouble remaining{deadline - now};\n+                const auto interval{std::min(remaining, tick)};\n+                g_best_block_cv.wait_until(lock, now + interval);\n+                // Obtaining the height here using chainman().ActiveChain().Tip()->nHeight\n+                // would result in a deadlock, because UpdateTip requires holding cs_main.",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d)\r\n\r\nI think this comment is only warning about a small part of a bigger danger. It's not just unsafe to obtain the height here but unsafe to acquire cs_main anywhere in this code block, even after the while loop.\r\n\r\nWould suggest dropping this comment and instead adding a simpler comment above LOCK(::cs_main) that says \r\n\"Must release g_best_block_mutex before locking cs_main, to avoid deadlocks.\"\r\n\r\nA comment like that seems more likely to prevent deadlocks generally in this function.",
      "created_at": "2024-08-16T14:57:42Z",
      "updated_at": "2024-08-16T15:28:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1719963458",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719963458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 889,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 890,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719972779",
      "pull_request_review_id": 2242860642,
      "id": 1719972779,
      "node_id": "PRRC_kwDOABII585mhLOr",
      "diff_hunk": "@@ -870,6 +870,30 @@ class MinerImpl : public Mining\n         return BlockRef{tip->GetBlockHash(), tip->nHeight};\n     }\n \n+    BlockRef waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\n+    {\n+        // Interrupt check interval\n+        const MillisecondsDouble tick{1000};\n+        auto now{std::chrono::steady_clock::now()};\n+        auto deadline = now + timeout;\n+        // std::chrono does not check against overflow\n+        if (deadline < now) deadline = std::chrono::steady_clock::time_point::max();\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while ((g_best_block == uint256() || g_best_block == current_tip) && !chainman().m_interrupt) {\n+                now = std::chrono::steady_clock::now();\n+                if (now >= deadline) break;\n+                const MillisecondsDouble remaining{deadline - now};\n+                const auto interval{std::min(remaining, tick)};\n+                g_best_block_cv.wait_until(lock, now + interval);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d)\r\n\r\nNot important but I think it would be clearer to condense these 3 lines to just:\r\n\r\n```c++\r\ng_best_block_cv.wait_until(lock, std::min(deadline, now + tick));\r\n```\r\n\r\nI don't think it helps to introduce 2 extra variables and subtract `now` then add `now` back.",
      "created_at": "2024-08-16T15:06:01Z",
      "updated_at": "2024-08-16T15:28:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1719972779",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719972779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 886,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 888,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721317181",
      "pull_request_review_id": 2244781268,
      "id": 1721317181,
      "node_id": "PRRC_kwDOABII585mmTc9",
      "diff_hunk": "@@ -40,6 +41,16 @@ class Mining\n     //! Returns the hash and height for the tip of this chain\n     virtual std::optional<BlockRef> getTip() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 15,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": 1719929110,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Taken (mostly).",
      "created_at": "2024-08-19T07:18:39Z",
      "updated_at": "2024-08-19T07:18:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721317181",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721317181"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721317268",
      "pull_request_review_id": 2244781413,
      "id": 1721317268,
      "node_id": "PRRC_kwDOABII585mmTeU",
      "diff_hunk": "@@ -40,6 +41,16 @@ class Mining\n     //! Returns the hash and height for the tip of this chain\n     virtual std::optional<BlockRef> getTip() = 0;\n \n+    /**\n+     * Waits for the tip to change\n+     *\n+     * @param[in] current_tip the current tip, in case of a race condition\n+     * @param[in] timeout how long to wait for a new tip\n+     * @returns hash and height for the new tip or the previous tip if\n+     *          interrupted or after the timeout",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 18,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": 1719939574,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-08-19T07:18:44Z",
      "updated_at": "2024-08-19T07:18:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721317268",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721317268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 49,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721324596",
      "pull_request_review_id": 2244793244,
      "id": 1721324596,
      "node_id": "PRRC_kwDOABII585mmVQ0",
      "diff_hunk": "@@ -870,6 +870,30 @@ class MinerImpl : public Mining\n         return BlockRef{tip->GetBlockHash(), tip->nHeight};\n     }\n \n+    BlockRef waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\n+    {\n+        // Interrupt check interval\n+        const MillisecondsDouble tick{1000};\n+        auto now{std::chrono::steady_clock::now()};\n+        auto deadline = now + timeout;\n+        // std::chrono does not check against overflow\n+        if (deadline < now) deadline = std::chrono::steady_clock::time_point::max();\n+        {\n+            WAIT_LOCK(g_best_block_mutex, lock);\n+            while ((g_best_block == uint256() || g_best_block == current_tip) && !chainman().m_interrupt) {\n+                now = std::chrono::steady_clock::now();\n+                if (now >= deadline) break;\n+                const MillisecondsDouble remaining{deadline - now};\n+                const auto interval{std::min(remaining, tick)};\n+                g_best_block_cv.wait_until(lock, now + interval);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "d1c197fbbad86e3f966d9bf9abe4dd0aa76bc83d",
      "in_reply_to_id": 1719972779,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed that's nicer.",
      "created_at": "2024-08-19T07:25:38Z",
      "updated_at": "2024-08-19T07:25:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721324596",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721324596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 886,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 888,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721752519",
      "pull_request_review_id": 2245487748,
      "id": 1721752519,
      "node_id": "PRRC_kwDOABII585mn9vH",
      "diff_hunk": "@@ -326,14 +306,21 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while (IsRPCRunning()) {\n+        auto now{std::chrono::steady_clock::now()};",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "bf3377f4bf988f2477944ca54c4dee33b9b45b6e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (bf3377f4bf988f2477944ca54c4dee33b9b45b6e)\r\n\r\n`now` variable is unused if timeout is zero, so this line could be moved inside the `if (timeout)` block below.",
      "created_at": "2024-08-19T13:01:01Z",
      "updated_at": "2024-08-19T13:08:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721752519",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721752519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 315,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721865864",
      "pull_request_review_id": 2245675379,
      "id": 1721865864,
      "node_id": "PRRC_kwDOABII585moZaI",
      "diff_hunk": "@@ -326,14 +306,21 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while (IsRPCRunning()) {\n+        auto now{std::chrono::steady_clock::now()};",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "bf3377f4bf988f2477944ca54c4dee33b9b45b6e",
      "in_reply_to_id": 1721752519,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done here and in `waitforblockheight`.",
      "created_at": "2024-08-19T14:15:44Z",
      "updated_at": "2024-08-19T14:15:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721865864",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721865864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 315,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721880533",
      "pull_request_review_id": 2245698982,
      "id": 1721880533,
      "node_id": "PRRC_kwDOABII585moc_V",
      "diff_hunk": "@@ -326,14 +306,21 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while (IsRPCRunning()) {\n+        if (block.hash == hash) break;",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Replace RPCNotifyBlockChange with waitTipChanged()\" (b4d37fa70506129ba4a4d218bc49ce8ca9d8380c)\r\n\r\nNot important, but could simplify these two lines to `while (IsRPCRunning() && block.hash != hash)`\r\n\r\nSimilarly, could simplify to `while (IsRPCRunning() && block.height < height)` in waitforblockheight below.",
      "created_at": "2024-08-19T14:24:54Z",
      "updated_at": "2024-08-19T14:27:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721880533",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721880533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 314,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 316,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721929753",
      "pull_request_review_id": 2245780008,
      "id": 1721929753,
      "node_id": "PRRC_kwDOABII585mopAZ",
      "diff_hunk": "@@ -326,14 +306,21 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while (IsRPCRunning()) {\n+        if (block.hash == hash) break;",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1721880533,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, will do if I have to retouch.",
      "created_at": "2024-08-19T14:56:20Z",
      "updated_at": "2024-08-19T14:56:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1721929753",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1721929753"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 314,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 316,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727105521",
      "pull_request_review_id": 2254595107,
      "id": 1727105521,
      "node_id": "PRRC_kwDOABII585m8Ynx",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit b4d37fa70506129ba4a4d218bc49ce8ca9d8380c\r\n\r\nI think there is a significant change in behaviour here between `waitTipChanged`, or rather `g_best_block`, and the rpc notification through `blockTip`. AFAICT the `blockTip` notification reports on completed operations in `ActivateBestChain` and `InvalidatedBlock`, while `g_best_block` is updated through the lower-level `ConnectTip` and `DisconnectTip`, which may respectively be called iteratively by `ActivateBestChain` and `InvalidateBlock`. So for operations involving multiple blocks this might yield different results here. I'm not sure if these RPCs should report on these more ephemeral state changes rather than the results of the respective operations.\r\n\r\nI have not actually tested this, so I might be mistaken here, in which case I think it would still be good to have a note in the commit message comparing the two methods.",
      "created_at": "2024-08-22T13:52:41Z",
      "updated_at": "2024-08-22T13:58:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1727105521",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727105521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727346780",
      "pull_request_review_id": 2254946626,
      "id": 1727346780,
      "node_id": "PRRC_kwDOABII585m9Thc",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`g_best_block_cv.notify_all();` is called by `Chainstate::UpdateTip()`, which indeed is called by `ConnectTip` and `DisconnectTip()`. Still wrapping my head around what the previous approach was. I doubt these RPC's were used outside of tests, but it would make sense to document the different.",
      "created_at": "2024-08-22T15:27:24Z",
      "updated_at": "2024-08-22T15:27:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1727346780",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727346780"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727474250",
      "pull_request_review_id": 2255139063,
      "id": 1727474250,
      "node_id": "PRRC_kwDOABII585m9ypK",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1727105521\r\n\r\nThis is a good catch, but I\"m not sure there is a observable change of behavior in `ActivateBestChain` because cs_main is held the whole time `blockTip` / `uiInterface.NotifyBlockTip` / `RPCNotifyBlockChange` is called and while the old `latestblock` global (now replaced by `g_best_block`) was updated:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/5ce2285b8739e12eebd1d53358038ec2277c662b/src/validation.cpp#L3552\r\n\r\nSo I don't think `waitTipChanged` will actually return during any intermediate tip changes, because it can't return until it locks `cs_main`, so it should just report the latest block as before.\r\n\r\nHowever, `InvalidBlock` seems like a different story because it is releasing cs_main between disconnecting blocks:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/5ce2285b8739e12eebd1d53358038ec2277c662b/src/validation.cpp#L3701\r\n\r\nbut it would previously only notify about a tip change and update `latestblock` at the end:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/5ce2285b8739e12eebd1d53358038ec2277c662b/src/validation.cpp#L3783\r\n\r\nNow it will update `g_best_block` and release `cs_main` while it is disconnecting blocks. This seems like something worth documenting, but probably not likely to cause real problems.\r\n",
      "created_at": "2024-08-22T16:35:45Z",
      "updated_at": "2024-08-22T16:36:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1727474250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727474250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727777786",
      "pull_request_review_id": 2255602043,
      "id": 1727777786,
      "node_id": "PRRC_kwDOABII585m-8v6",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Couple of months ago I was thinking how to get rid of `g_best_block` and its friends entirely in the context of the kernel library. We already have two interfaces for notifying if something changed during validation, having a third one, that is also globally mutable and potentially dangerous if multiple chainstate managers are used is not ideal. I did not make progress then, but looking at it again now, I think this might be the opportunity to get rid of it.\r\n\r\nHow about duplicating the best block logic into the kernel notifications like I've done here https://github.com/TheCharlatan/bitcoin/commit/3c665065f132fd80ea3b1733785b98e45c8b371e (our locking conventions still puzzle me a bit, maybe there is a better way to do it)? This would avoid any change in behavior altogether and mostly make this a refactor. In a follow-up the remaining users of `g_best_block` could then be migrated and the global deleted.\r\n\r\nI think the current user of `g_best_block` (getblocktemplate() in mining.cpp), could be migrated to this interface as well. I don't really see the downside of not being notified on these interim states, since it is undesirable to build work on top of them.",
      "created_at": "2024-08-22T20:33:40Z",
      "updated_at": "2024-08-22T20:33:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1727777786",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1727777786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730914174",
      "pull_request_review_id": 2260145571,
      "id": 1730914174,
      "node_id": "PRRC_kwDOABII585nK6d-",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@TheCharlatan do you want to make a separate PR for the kernel notification changes, or should I just include them here?",
      "created_at": "2024-08-26T08:44:39Z",
      "updated_at": "2024-08-26T08:44:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1730914174",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730914174"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730917837",
      "pull_request_review_id": 2260151370,
      "id": 1730917837,
      "node_id": "PRRC_kwDOABII585nK7XN",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it would be good to integrate them here, and I'll try and follow up with removing the `m_best_header` global from validation.",
      "created_at": "2024-08-26T08:47:24Z",
      "updated_at": "2024-08-26T08:47:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1730917837",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730917837"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730997386",
      "pull_request_review_id": 2260278015,
      "id": 1730997386,
      "node_id": "PRRC_kwDOABII585nLOyK",
      "diff_hunk": "@@ -326,14 +306,21 @@ static RPCHelpMan waitforblock()\n         timeout = request.params[1].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning();});\n-        else\n-            cond_blockchange.wait(lock, [&hash]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.hash == hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    const auto deadline{std::chrono::steady_clock::now() + 1ms * timeout};\n+    while (IsRPCRunning()) {\n+        if (block.hash == hash) break;",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1721880533,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-08-26T09:46:58Z",
      "updated_at": "2024-08-26T09:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1730997386",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1730997386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": 314,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 316,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731432419",
      "pull_request_review_id": 2260994997,
      "id": 1731432419,
      "node_id": "PRRC_kwDOABII585nM4_j",
      "diff_hunk": "@@ -870,6 +871,27 @@ class MinerImpl : public Mining\n         return BlockRef{tip->GetBlockHash(), tip->nHeight};\n     }\n \n+    BlockRef waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\n+    {\n+        // Interrupt check interval\n+        const MillisecondsDouble tick{1000};\n+        auto now{std::chrono::steady_clock::now()};\n+        auto deadline = now + timeout;\n+        // std::chrono does not check against overflow\n+        if (deadline < now) deadline = std::chrono::steady_clock::time_point::max();\n+        {\n+            WAIT_LOCK(notifications().m_tip_block_mutex, lock);\n+            while ((notifications().m_tip_block == uint256() || notifications().m_tip_block == current_tip) && !chainman().m_interrupt) {\n+                now = std::chrono::steady_clock::now();\n+                if (now >= deadline) break;\n+                notifications().m_tip_block_cv.wait_until(lock, std::min(deadline, now + tick));",
      "path": "src/node/interfaces.cpp",
      "position": 60,
      "original_position": 25,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "078fc60f198eb7a3bcccb557416fe1d4498f26e7",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add waitTipChanged to Mining interface\" (078fc60f198eb7a3bcccb557416fe1d4498f26e7)\r\n\r\nOne problem with switching from g_best_block_cv to m_tip_block_cv is that this m_tip_block_cv is not signaled when StopRPC is called, which could mean shutdown hangs for a second instead of being instantaneous. I believe this could be fixed in earlier commit 8400d49ffec47add2dc27267ae13ede5d2fabeea with:\r\n\r\n```diff\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -282,7 +282,7 @@ void Shutdown(NodeContext& node)\r\n \r\n     StopHTTPRPC();\r\n     StopREST();\r\n-    StopRPC();\r\n+    StopRPC(&node);\r\n     StopHTTPServer();\r\n     for (const auto& client : node.chain_clients) {\r\n         client->flush();\r\n--- a/src/node/interfaces.cpp\r\n+++ b/src/node/interfaces.cpp\r\n@@ -139,7 +139,7 @@ public:\r\n         // Stop RPC for clean shutdown if any of waitfor* commands is executed.\r\n         if (args().GetBoolArg(\"-server\", false)) {\r\n             InterruptRPC();\r\n-            StopRPC();\r\n+            StopRPC(m_context);\r\n         }\r\n     }\r\n     bool shutdownRequested() override { return ShutdownRequested(*Assert(m_context)); };\r\n--- a/src/rpc/server.cpp\r\n+++ b/src/rpc/server.cpp\r\n@@ -11,6 +11,7 @@\r\n #include <common/system.h>\r\n #include <logging.h>\r\n #include <node/context.h>\r\n+#include <node/kernel_notifications.h>\r\n #include <rpc/server_util.h>\r\n #include <rpc/util.h>\r\n #include <sync.h>\r\n@@ -293,16 +294,17 @@ void InterruptRPC()\r\n     });\r\n }\r\n \r\n-void StopRPC()\r\n+void StopRPC(const std::any& context)\r\n {\r\n     static std::once_flag g_rpc_stop_flag;\r\n     // This function could be called twice if the GUI has been started with -server=1.\r\n     assert(!g_rpc_running);\r\n-    std::call_once(g_rpc_stop_flag, []() {\r\n+    std::call_once(g_rpc_stop_flag, [&]() {\r\n         LogPrint(BCLog::RPC, \"Stopping RPC\\n\");\r\n         WITH_LOCK(g_deadline_timers_mutex, deadlineTimers.clear());\r\n         DeleteAuthCookie();\r\n         g_best_block_cv.notify_all();\r\n+        Assert(EnsureAnyNodeContext(context).notifications)->m_tip_block_cv.notify_all();\r\n         LogPrint(BCLog::RPC, \"RPC stopped.\\n\");\r\n     });\r\n }\r\n--- a/src/rpc/server.h\r\n+++ b/src/rpc/server.h\r\n@@ -9,6 +9,7 @@\r\n #include <rpc/request.h>\r\n #include <rpc/util.h>\r\n \r\n+#include <any>\r\n #include <functional>\r\n #include <map>\r\n #include <stdint.h>\r\n@@ -172,7 +173,7 @@ extern CRPCTable tableRPC;\r\n \r\n void StartRPC();\r\n void InterruptRPC();\r\n-void StopRPC();\r\n+void StopRPC(const std::any& context);\r\n UniValue JSONRPCExec(const JSONRPCRequest& jreq, bool catch_errors);\r\n \r\n #endif // BITCOIN_RPC_SERVER_H\r\n```",
      "created_at": "2024-08-26T15:35:34Z",
      "updated_at": "2024-08-26T15:46:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1731432419",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731432419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 905,
      "original_line": 905,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731440200",
      "pull_request_review_id": 2260994997,
      "id": 1731440200,
      "node_id": "PRRC_kwDOABII585nM65I",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If we are going to add a new `m_tip_block` variable to replace `g_best_block` seems like it would be good to make replacement complete and eliminate `g_best_block`. I think following could work (compiles but untested):\r\n\r\n```diff\r\n--- a/src/rpc/mining.cpp\r\n+++ b/src/rpc/mining.cpp\r\n@@ -739,7 +739,6 @@ static RPCHelpMan getblocktemplate()\r\n     {\r\n         // Wait to respond until either the best block changes, OR a minute has passed and there are more transactions\r\n         uint256 hashWatchedChain;\r\n-        std::chrono::steady_clock::time_point checktxtime;\r\n         unsigned int nTransactionsUpdatedLastLP;\r\n \r\n         if (lpval.isStr())\r\n@@ -760,19 +759,14 @@ static RPCHelpMan getblocktemplate()\r\n         // Release lock while waiting\r\n         LEAVE_CRITICAL_SECTION(cs_main);\r\n         {\r\n-            checktxtime = std::chrono::steady_clock::now() + std::chrono::minutes(1);\r\n-\r\n-            WAIT_LOCK(g_best_block_mutex, lock);\r\n-            while (g_best_block == hashWatchedChain && IsRPCRunning())\r\n-            {\r\n-                if (g_best_block_cv.wait_until(lock, checktxtime) == std::cv_status::timeout)\r\n-                {\r\n-                    // Timeout: Check transactions for update\r\n-                    // without holding the mempool lock to avoid deadlocks\r\n-                    if (miner.getTransactionsUpdated() != nTransactionsUpdatedLastLP)\r\n-                        break;\r\n-                    checktxtime += std::chrono::seconds(10);\r\n-                }\r\n+            MillisecondsDouble checktxtime{std::chrono::minutes(1)};\r\n+            while (tip == hashWatchedChain && IsRPCRunning()) {\r\n+                tip = miner.waitTipChanged(hashWatchedChain, checktxtime).hash;\r\n+                // Timeout: Check transactions for update\r\n+                // without holding the mempool lock to avoid deadlocks\r\n+                if (miner.getTransactionsUpdated() != nTransactionsUpdatedLastLP)\r\n+                    break;\r\n+                checktxtime = std::chrono::seconds(10);\r\n             }\r\n         }\r\n         ENTER_CRITICAL_SECTION(cs_main);\r\n--- a/src/rpc/server.cpp\r\n+++ b/src/rpc/server.cpp\r\n@@ -303,7 +303,6 @@ void StopRPC(const std::any& context)\r\n         LogPrint(BCLog::RPC, \"Stopping RPC\\n\");\r\n         WITH_LOCK(g_deadline_timers_mutex, deadlineTimers.clear());\r\n         DeleteAuthCookie();\r\n-        g_best_block_cv.notify_all();\r\n         Assert(EnsureAnyNodeContext(context).notifications)->m_tip_block_cv.notify_all();\r\n         LogPrint(BCLog::RPC, \"RPC stopped.\\n\");\r\n     });\r\n--- a/src/test/validation_chainstate_tests.cpp\r\n+++ b/src/test/validation_chainstate_tests.cpp\r\n@@ -4,6 +4,7 @@\r\n //\r\n #include <chainparams.h>\r\n #include <consensus/validation.h>\r\n+#include <node/kernel_notifications.h>\r\n #include <random.h>\r\n #include <rpc/blockchain.h>\r\n #include <sync.h>\r\n@@ -69,14 +70,14 @@ BOOST_AUTO_TEST_CASE(validation_chainstate_resize_caches)\r\n BOOST_FIXTURE_TEST_CASE(chainstate_update_tip, TestChain100Setup)\r\n {\r\n     ChainstateManager& chainman = *Assert(m_node.chainman);\r\n-    uint256 curr_tip = ::g_best_block;\r\n+    uint256 curr_tip = m_node.notifications->m_tip_block;\r\n \r\n     // Mine 10 more blocks, putting at us height 110 where a valid assumeutxo value can\r\n     // be found.\r\n     mineBlocks(10);\r\n \r\n     // After adding some blocks to the tip, best block should have changed.\r\n-    BOOST_CHECK(::g_best_block != curr_tip);\r\n+    BOOST_CHECK(m_node.notifications->m_tip_block != curr_tip);\r\n \r\n     // Grab block 1 from disk; we'll add it to the background chain later.\r\n     std::shared_ptr<CBlock> pblockone = std::make_shared<CBlock>();\r\n@@ -91,15 +92,15 @@ BOOST_FIXTURE_TEST_CASE(chainstate_update_tip, TestChain100Setup)\r\n     // Ensure our active chain is the snapshot chainstate.\r\n     BOOST_CHECK(WITH_LOCK(::cs_main, return chainman.IsSnapshotActive()));\r\n \r\n-    curr_tip = ::g_best_block;\r\n+    curr_tip = m_node.notifications->m_tip_block;\r\n \r\n     // Mine a new block on top of the activated snapshot chainstate.\r\n     mineBlocks(1);  // Defined in TestChain100Setup.\r\n \r\n     // After adding some blocks to the snapshot tip, best block should have changed.\r\n-    BOOST_CHECK(::g_best_block != curr_tip);\r\n+    BOOST_CHECK(m_node.notifications->m_tip_block != curr_tip);\r\n \r\n-    curr_tip = ::g_best_block;\r\n+    curr_tip = m_node.notifications->m_tip_block;\r\n \r\n     BOOST_CHECK_EQUAL(chainman.GetAll().size(), 2);\r\n \r\n@@ -138,7 +139,7 @@ BOOST_FIXTURE_TEST_CASE(chainstate_update_tip, TestChain100Setup)\r\n     // g_best_block should be unchanged after adding a block to the background\r\n     // validation chain.\r\n     BOOST_CHECK(block_added);\r\n-    BOOST_CHECK_EQUAL(curr_tip, ::g_best_block);\r\n+    BOOST_CHECK_EQUAL(curr_tip, m_node.notifications->m_tip_block);\r\n }\r\n \r\n BOOST_AUTO_TEST_SUITE_END()\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -107,10 +107,6 @@ const std::vector<std::string> CHECKLEVEL_DOC {\r\n  * */\r\n static constexpr int PRUNE_LOCK_BUFFER{10};\r\n \r\n-GlobalMutex g_best_block_mutex;\r\n-std::condition_variable g_best_block_cv;\r\n-uint256 g_best_block;\r\n-\r\n const CBlockIndex* Chainstate::FindForkInGlobalIndex(const CBlockLocator& locator) const\r\n {\r\n     AssertLockHeld(cs_main);\r\n@@ -2987,12 +2983,6 @@ void Chainstate::UpdateTip(const CBlockIndex* pindexNew)\r\n         m_mempool->AddTransactionsUpdated(1);\r\n     }\r\n \r\n-    {\r\n-        LOCK(g_best_block_mutex);\r\n-        g_best_block = pindexNew->GetBlockHash();\r\n-        g_best_block_cv.notify_all();\r\n-    }\r\n-\r\n     std::vector<bilingual_str> warning_messages;\r\n     if (!m_chainman.IsInitialBlockDownload()) {\r\n         const CBlockIndex* pindex = pindexNew;\r\n--- a/src/validation.h\r\n+++ b/src/validation.h\r\n@@ -85,11 +85,6 @@ enum class SynchronizationState {\r\n     POST_INIT\r\n };\r\n \r\n-extern GlobalMutex g_best_block_mutex;\r\n-extern std::condition_variable g_best_block_cv;\r\n-/** Used to notify getblocktemplate RPC of new tips. */\r\n-extern uint256 g_best_block;\r\n-\r\n /** Documentation for argument 'checklevel'. */\r\n extern const std::vector<std::string> CHECKLEVEL_DOC;\r\n \r\n```\r\n",
      "created_at": "2024-08-26T15:41:24Z",
      "updated_at": "2024-08-26T15:46:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1731440200",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731440200"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731519643",
      "pull_request_review_id": 2261136712,
      "id": 1731519643,
      "node_id": "PRRC_kwDOABII585nNOSb",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice! I split the changes to `rpc/mining.cpp` into its own commit, that looks correct.\r\n\r\nRunning and debugging some failing tests before pushing...",
      "created_at": "2024-08-26T16:49:25Z",
      "updated_at": "2024-08-26T16:51:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1731519643",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731519643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731725112",
      "pull_request_review_id": 2261470893,
      "id": 1731725112,
      "node_id": "PRRC_kwDOABII585nOAc4",
      "diff_hunk": "@@ -278,16 +260,14 @@ static RPCHelpMan waitfornewblock()\n         timeout = request.params[0].getInt<int>();\n     if (timeout < 0) throw JSONRPCError(RPC_MISC_ERROR, \"Negative timeout\");\n \n-    CUpdatedBlock block;\n-    {\n-        WAIT_LOCK(cs_blockchange, lock);\n-        block = latestblock;\n-        if(timeout)\n-            cond_blockchange.wait_for(lock, std::chrono::milliseconds(timeout), [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        else\n-            cond_blockchange.wait(lock, [&block]() EXCLUSIVE_LOCKS_REQUIRED(cs_blockchange) {return latestblock.height != block.height || latestblock.hash != block.hash || !IsRPCRunning(); });\n-        block = latestblock;\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    Mining& miner = EnsureMining(node);\n+\n+    auto block{CHECK_NONFATAL(miner.getTip()).value()};\n+    if (IsRPCRunning()) {\n+        block = timeout ? miner.waitTipChanged(block.hash, std::chrono::milliseconds(timeout)) : miner.waitTipChanged(block.hash);",
      "path": "src/rpc/blockchain.cpp",
      "position": 76,
      "original_position": 66,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "b4d37fa70506129ba4a4d218bc49ce8ca9d8380c",
      "in_reply_to_id": 1727105521,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks ryanofsky, that is exactly what I had in mind for a potential followup - happy to have this in one go. I still need to think through the trade-offs for the block template rpc, but I think this might actually be better.",
      "created_at": "2024-08-26T19:35:55Z",
      "updated_at": "2024-08-26T19:35:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1731725112",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731725112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 286,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1734235283",
      "pull_request_review_id": 2265548046,
      "id": 1734235283,
      "node_id": "PRRC_kwDOABII585nXlST",
      "diff_hunk": "@@ -50,6 +50,12 @@ namespace node {\n \n kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n {\n+    {\n+        LOCK(m_tip_block_mutex);\n+        m_tip_block= index.GetBlockHash();",
      "path": "src/node/kernel_notifications.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "eb56e9a819a2ab8193f96218bdcd029f473ae222",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Self-Nit: I missed the space here.",
      "created_at": "2024-08-28T08:33:03Z",
      "updated_at": "2024-08-29T12:44:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1734235283",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1734235283"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1736237919",
      "pull_request_review_id": 2268803901,
      "id": 1736237919,
      "node_id": "PRRC_kwDOABII585nfONf",
      "diff_hunk": "@@ -50,6 +50,12 @@ namespace node {\n \n kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n {\n+    {\n+        LOCK(m_tip_block_mutex);\n+        m_tip_block= index.GetBlockHash();",
      "path": "src/node/kernel_notifications.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "966027bdda53d150321af7db48b57f9756c54e68",
      "original_commit_id": "eb56e9a819a2ab8193f96218bdcd029f473ae222",
      "in_reply_to_id": 1734235283,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2024-08-29T13:41:21Z",
      "updated_at": "2024-08-29T13:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30409#discussion_r1736237919",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1736237919"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30409"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    }
  ]
}