{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356",
    "id": 1943909110,
    "node_id": "PR_kwDOABII585z3bL2",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30356",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30356.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30356.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
    "number": 30356,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: add coinbase constraints to BlockAssembler::Options",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "When generating a block template through e.g. getblocktemplate RPC, we reserve 4000 weight units and 400 sigops. Pools use this space for their coinbase outputs.\r\n\r\nAt least one pool patched their Bitcoin Core node to adjust these hardcoded values. They eventually [produced an invalid block](https://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426) which exceeded the sigops limit.\r\n\r\nThe existince of such patches suggests it may be useful to make this value configurable. This PR would make such a change easier. However, the main motivation is that in the Stratum v2 spec requires the pool to communicate the maximum bytes they intend\r\nto add to the coinbase outputs.\r\n\r\nSpecifically the `CoinbaseOutputDataSize` message which is part of the [Template Distribution Protocol](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server) has a field `coinbase_output_max_additional_size`.\r\n\r\nA proposed change to the spec adds the max additional sigops as well: https://github.com/stratum-mining/sv2-spec/pull/86. Whether that change makes it into the spec is not important though, as adding both to `BlockAssembler::Options` makes sense.\r\n\r\nThe first commit is a test refactor followup for #30335, related to the code that's changed here, but not required.\r\n\r\nThe second commit adds `coinbase_output_max_additional_size` and `coinbase_output_max_additional_sigops ` to `BlockAssembler::Options`, with their defaults set to the existing hardcoded values. \r\n\r\nThe third commit introduces `util/mining.h` as a place to store these defaults in a place where both the RPC and node interface can access them. I picked `libbitcoin_util` instead of `libbitcoin_common` to avoid a future dependency of the Stratum v2 Template Provider (#29432) on `libbitcoin_common`. The latter goal requires additional changes and is mostly just nice to have (the important bit is not depending on `libbitcoin_node`).\r\n\r\nThe last commit adds the two arguments to the mining interface. By default it uses the originally hardcoded values, and no existing caller overrides these defaults. This changes in #29432.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2024-06-28T08:56:31Z",
    "updated_at": "2024-07-17T17:03:37Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "a3a4aebd8b8f345e013a3af4ad4fe94bf12811f0",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2024/06/coinbase-constraints",
      "ref": "2024/06/coinbase-constraints",
      "sha": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 242613,
        "default_branch": "sv2",
        "open_issues_count": 6,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-17T17:11:14Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-07-17T15:07:40Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "3679fa167f7d198d9287f05f210f03e83b76f3b8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35647,
        "stargazers_count": 77239,
        "watchers_count": 77239,
        "size": 263292,
        "default_branch": "master",
        "open_issues_count": 671,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-17T16:46:19Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-07-17T16:15:57Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 42,
    "deletions": 19,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 22,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 2196446059,
      "node_id": "IC_kwDOABII586C6xtr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2196446059",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T08:56:34Z",
      "updated_at": "2024-07-17T17:03:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30356).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [itornaza](https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2183473585), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2183452602) |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2211824602) |\n| Stale ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2181599489) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30443](https://github.com/bitcoin/bitcoin/pull/30443) (Introduce waitFeesChanged() mining interface by Sjors)\n* [#30437](https://github.com/bitcoin/bitcoin/pull/30437) (multiprocess: add bitcoin-mine test program by ryanofsky)\n* [#30409](https://github.com/bitcoin/bitcoin/pull/30409) (Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange and drop CRPCSignals by Sjors)\n* [#30391](https://github.com/bitcoin/bitcoin/pull/30391) (BlockAssembler: return selected packages vsize and feerate by ismaelsadeeq)\n* [#30157](https://github.com/bitcoin/bitcoin/pull/30157) (Fee Estimation via Fee rate Forecasters by ismaelsadeeq)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2196446059",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "labeled",
      "id": 13328705456,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMac-ew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13328705456",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T08:56:36Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "reviewed",
      "id": 2148873843,
      "node_id": "PRR_kwDOABII586AFTZz",
      "url": null,
      "actor": null,
      "commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\nThis adds flexibility for SV2, and having less magic numbers is better.  I support adding a configuration parameter for this (would prevent others from needing to fork).\r\n\r\nLeft a couple small nits for now, but plan to test/exercise in more detail.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2148873843",
      "submitted_at": "2024-06-28T21:14:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "commented",
      "id": 2198761717,
      "node_id": "IC_kwDOABII586DDnD1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2198761717",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-30T21:23:44Z",
      "updated_at": "2024-07-01T08:37:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I picked libbitcoin_util instead of libbitcoin_common to avoid a future dependency of the Stratum v2 Template Provider (https://github.com/bitcoin/bitcoin/pull/29432) on libbitcoin_common. The latter goal requires additional changes and is mostly just nice to have (the important bit is not depending on libbitcoin_node).\r\n\r\nSo I guess it should ideally only have the kernel as a dependency? It is not quite clear to me yet how this is going to be achieved. The current mining interface requires knowledge of a `CBlockTemplate`, which I don't think should be part of the kernel in the future.\r\n\r\nEDIT: To be clear, since the constants are given a new header, there is no new hard library dependency introduced no matter which directory you choose to put them into. It just feels weird to put something very specific to the inner workings of our mining code into a directory called `util`.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2198761717",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "reviewed",
      "id": 2150772443,
      "node_id": "PRR_kwDOABII586AMi7b",
      "url": null,
      "actor": null,
      "commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2150772443",
      "submitted_at": "2024-07-01T08:37:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "commented",
      "id": 2199576083,
      "node_id": "IC_kwDOABII586DGt4T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2199576083",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:56Z",
      "updated_at": "2024-07-01T08:42:56Z",
      "author_association": "MEMBER",
      "body": "@TheCharlatan happy to put the constants somewhere else... see https://github.com/Sjors/bitcoin/pull/47 for an attempt at introducing `libbitcoin_net`, which might reduce the dependencies of a future `libbitcoin_sv2` to `libbitcoin_net`, `libbitcoin_crypto` and `libbitcoin_util`. I got stuck there on where to put `XOnlyPubKey` and a few other things.\r\n\r\nA similar problem might exist for `CBlockTemplate` if I actually tried to make `libbitcoin_sv2`, which I haven't done yet.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2199576083",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13347593594,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMblB16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13347593594",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:57Z"
    },
    {
      "event": "subscribed",
      "id": 13347593615,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMblB2P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13347593615",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13349130413,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMbq5Ct",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349130413",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:54Z"
    },
    {
      "event": "commented",
      "id": 2199791658,
      "node_id": "IC_kwDOABII586DHigq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2199791658",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:56Z",
      "updated_at": "2024-07-01T10:35:03Z",
      "author_association": "MEMBER",
      "body": "I renamed `coinbase_output_max_additional_size` to `coinbase_max_additional_weight`. With the current [Stratum v2 spec](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server) the latter could be calculated as follows:\r\n\r\n`coinbase_max_additional_weight = (coinbase_output_max_additional_size + 100 + 0 + 2) * 4`\r\n\r\n- `coinbase_output_max_additional_size * 4`: Coinbase outputs are not part of the witness so their weight is simply the number of bytes specificied in the `CoinbaseOutputDataSize` message times 4.\r\n\r\n- `100 * 4`: the spec also requires taking into account a \"maximally-sized (100 byte) coinbase field\", which refers to the _scriptSig_ of the coinbase. It currently doesn't allow for setting a custom coinbase _witness_.\r\n\r\n- `0 * 4`: a [CompactSize](https://bitcoin.stackexchange.com/a/114585/4948) encodes the size of the above \"coinbase field\" (the spec is ambiguous whether this is included). Given the maximum of 100 its always encoded with 1 byte, so no _additional_ weight units are needed.\r\n\r\n- `2 * 4`: \"Further, the Template Provider MUST consider the maximum additional bytes required in the output count variable-length integer in the coinbase transaction when complying with the size limits.\" - this is tricky because we don't know how _many_ outputs the pool intends to add, and we might want to add an arbitrary number of outputs ourselves. Since there can't be more than 1 million outputs, 3 bytes is always enough to encode the number of outputs. So that's 2 _additional_ bytes in the worst case.\r\n\r\nThe spec should probably be clarified a bit, cc @TheBlueMatt, @Fi3.\r\n\r\nIn any case, tracking coinbase reserved space in term of weight units here should be enough to support Stratum v2 later, and even allow for using the coinbase witness.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2199791658",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13349131267,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMbq5QD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131267",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "subscribed",
      "id": 13349131283,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMbq5QT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131283",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "mentioned",
      "id": 13349131308,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMbq5Qs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131308",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "subscribed",
      "id": 13349131320,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMbq5Q4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131320",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "labeled",
      "id": 13372222329,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMdC-t5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13372222329",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-02T21:49:44Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13390001428,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMeGzUU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390001428",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:35:43Z"
    },
    {
      "event": "commented",
      "id": 2208225151,
      "node_id": "IC_kwDOABII586Dntd_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208225151",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:36:04Z",
      "updated_at": "2024-07-04T06:36:04Z",
      "author_association": "MEMBER",
      "body": "Rebased after #30324.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208225151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2208252561,
      "node_id": "IC_kwDOABII586Dn0KR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208252561",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:57:34Z",
      "updated_at": "2024-07-04T06:57:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Is there a reason why\r\n```\r\nBlockAssembler::Options options;\r\nApplyArgsManOptions(gArgs, options);\r\n```\r\nhas to be inside the block assembler class? Why not construct them externally and pass a reference of the options to the `BlockAssembler`? This seems a bit more efficient, since the options don't have to be constructed and the arguments not read every time a template is retrieved.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208252561",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "unlabeled",
      "id": 13390274883,
      "node_id": "UNLE_lADOABII586N2u5qzwAAAAMeH2FD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390274883",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:03:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2208349301,
      "node_id": "IC_kwDOABII586DoLx1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208349301",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:10Z",
      "updated_at": "2024-07-04T07:59:10Z",
      "author_association": "MEMBER",
      "body": "cc @glozow who added this as part of #26695.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208349301",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13390912505,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMeKRv5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390912505",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:11Z"
    },
    {
      "event": "subscribed",
      "id": 13390912525,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMeKRwN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390912525",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:12Z"
    },
    {
      "event": "commented",
      "id": 2208382368,
      "node_id": "IC_kwDOABII586DoT2g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208382368",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T08:17:31Z",
      "updated_at": "2024-07-04T08:17:31Z",
      "author_association": "MEMBER",
      "body": "> Is there a reason why\r\n> \r\n> ```\r\n> BlockAssembler::Options options;\r\n> ApplyArgsManOptions(gArgs, options);\r\n> ```\r\n> \r\n> has to be inside the block assembler class?\r\n\r\nIt doesn't need to be inside `BlockAssembler`. Prior to #26695, the ctor was using the global `gArgs` to decide on parameters (yuck!). We didn't have the node/*args kernel/*opts conventions at the time and I was pretty happy adding an `ApplyArgsMan` that didn't do that.\r\n\r\n> Why not construct them externally and pass a reference of the options to the `BlockAssembler`?\r\n\r\nThat sounds fine.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208382368",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2211824602,
      "node_id": "IC_kwDOABII586D1cPa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2211824602",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-06T17:21:19Z",
      "updated_at": "2024-07-06T17:21:19Z",
      "author_association": "MEMBER",
      "body": "Weak approach NACK. This is just limiting the max block weight, which is already a configurable parameter. Having two params for the same thing seems like a poor way to do it. I'm not sure it avoids the risk of bugs producing invalid blocks, either - it just moves the bug risk from one place to another equally probable.\r\n\r\nInstead, maybe just perform the block weight cap on initialization rather than block assembly?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2211824602",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2214078752,
      "node_id": "IC_kwDOABII586D-Ckg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2214078752",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-08T13:27:56Z",
      "updated_at": "2024-07-08T13:32:44Z",
      "author_association": "MEMBER",
      "body": "> This is just limiting the max block weight\r\n\r\nThis had me confused initially, and I tried to combine them, but there's really two different things:\r\n\r\n1. The max block weight demanded by the user via `-blockmaxweight`\r\n2. Weight units reserved for the coinbase\r\n\r\nWith stratum v1 the distinction isn't very important. We just subtract (2) from (1). We could indeed do that at initialization.\r\n\r\nBut with Stratum v2 (2) is a per-client setting communicated to us (the Template Provider) via the [CoinbaseOutputDataSize](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md) message. We can set it at connection time, but not during node initialization.\r\n\r\n> I'm not sure it avoids the risk of bugs producing invalid blocks, either - it just moves the bug risk from one place to another equally probable.\r\n\r\nThe fact that Stratum v2 makes this configurable introduces that risk. But removing that ability from the protocol would probably just cause miners to roll their own extension and do it anyway. At 500 sats/byte and $50K per coin, squeezing in an extra 1000 vbyte gets you $250 per block. Pennies in front of steamrollers perhaps, but we've seen miners do this with the current code. \r\n\r\n>> Why not construct them externally and pass a reference of the options to the BlockAssembler?\r\n\r\n> That sounds fine.\r\n\r\nHappy to take patches.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2214078752",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "reviewed",
      "id": 2165021550,
      "node_id": "PRR_kwDOABII586BC5tu",
      "url": null,
      "actor": null,
      "commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "lozanopo",
        "id": 123916116,
        "node_id": "U_kgDOB2LPVA",
        "avatar_url": "https://avatars.githubusercontent.com/u/123916116?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lozanopo",
        "html_url": "https://github.com/lozanopo",
        "followers_url": "https://api.github.com/users/lozanopo/followers",
        "following_url": "https://api.github.com/users/lozanopo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lozanopo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lozanopo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lozanopo/subscriptions",
        "organizations_url": "https://api.github.com/users/lozanopo/orgs",
        "repos_url": "https://api.github.com/users/lozanopo/repos",
        "events_url": "https://api.github.com/users/lozanopo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lozanopo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2165021550",
      "submitted_at": "2024-07-09T05:05:17Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "reviewed",
      "id": 2167070268,
      "node_id": "PRR_kwDOABII586BKt48",
      "url": null,
      "actor": null,
      "commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "Concept ACK d89637eceab0145a64c2d1af1139ace204a3ab3c\r\n\r\nGiving the option to assign the values of `coinbase_max_additional_weight` and `coinbase_output_max_additional_sigops` needed by the Stratum V2 protocol is essential for its integration. I understand the risks involved by having two parameters for the same thing:\r\n\r\n>     1. The max block weight demanded by the user via -blockmaxweight\r\n>     2. Weight units reserved for the coinbase\r\n\r\nbut it seems unavoidable at a first glance due to their different invocation domains. During the node initialisation for the former and connection time for the later.\r\n\r\nLeft some small nit that only applies if the intended name for the variable was `coinbase_max_additional_weight` instead of `coinbase_max_addition_weight`\r\n\r\n\r\n",
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2167070268",
      "submitted_at": "2024-07-09T18:45:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13468298979,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMixe7j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13468298979",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T08:45:21Z"
    },
    {
      "event": "labeled",
      "id": 13479913013,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMjdyY1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13479913013",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-12T01:16:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 13485339962,
      "node_id": "UNLE_lADOABII586N2u5qzwAAAAMjyfU6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13485339962",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-12T10:30:37Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2228550103,
      "node_id": "IC_kwDOABII586E1PnX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2228550103",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T13:47:41Z",
      "updated_at": "2024-07-15T13:47:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK e67e4669a9e263d90f0e276c8e65e93c39170375, but I think the current implementation is too complicated and has too many layers of indirection.\r\n\r\nWould suggest applying the following patch and squashing the PR down to a single commit which would be just +41/-16 with the suggested changes:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/Makefile.am\r\n+++ b/src/Makefile.am\r\n@@ -313,7 +313,6 @@ BITCOIN_CORE_H = \\\r\n   util/hasher.h \\\r\n   util/insert.h \\\r\n   util/macros.h \\\r\n-  util/mining.h \\\r\n   util/moneystr.h \\\r\n   util/overflow.h \\\r\n   util/overloaded.h \\\r\n--- a/src/interfaces/mining.h\r\n+++ b/src/interfaces/mining.h\r\n@@ -5,10 +5,11 @@\r\n #ifndef BITCOIN_INTERFACES_MINING_H\r\n #define BITCOIN_INTERFACES_MINING_H\r\n \r\n+#include <node/types.h>\r\n+#include <uint256.h>\r\n+\r\n #include <memory>\r\n #include <optional>\r\n-#include <uint256.h>\r\n-#include <util/mining.h>\r\n \r\n namespace node {\r\n struct CBlockTemplate;\r\n@@ -42,14 +43,10 @@ public:\r\n      * Construct a new block template\r\n      *\r\n      * @param[in] script_pub_key the coinbase output\r\n-     * @param[in] use_mempool set false to omit mempool transactions\r\n-     * @param[in] coinbase_max_additional_weight maximum additional weight which the pool will add to the coinbase transaction\r\n-     * @param[in] coinbase_output_max_additional_sigops maximum additional sigops which the pool will add in coinbase transaction outputs\r\n+     * @param[in] options options for creating the block\r\n      * @returns a block template\r\n      */\r\n-    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool = true,\r\n-                                                                 size_t coinbase_max_additional_weight = DEFAULT_COINBASE_MAX_ADDITIONAL_WEIGHT,\r\n-                                                                 size_t coinbase_output_max_additional_sigops = DEFAULT_COINBASE_OUTPUT_MAX_ADDITIONAL_SIGOPS) = 0;\r\n+    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, const node::BlockCreateOptions& options={}) = 0;\r\n \r\n     /**\r\n      * Processes new block. A valid new block is automatically relayed to peers.\r\n--- a/src/node/interfaces.cpp\r\n+++ b/src/node/interfaces.cpp\r\n@@ -883,25 +883,11 @@ public:\r\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\r\n     }\r\n \r\n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\r\n-                                                   size_t coinbase_max_additional_weight,\r\n-                                                   size_t coinbase_output_max_additional_sigops) override\r\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, const BlockCreateOptions& options) override\r\n     {\r\n-        BlockAssembler::Options options;\r\n-        ApplyArgsManOptions(gArgs, options);\r\n-\r\n-        Assume(coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\r\n-        options.coinbase_max_additional_weight = coinbase_max_additional_weight;\r\n-\r\n-        Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);\r\n-        options.coinbase_output_max_additional_sigops = coinbase_output_max_additional_sigops;\r\n-\r\n-        // The BlockAssembler constructor calls ClampOptions which clamps\r\n-        // nBlockMaxWeight between coinbase_output_max_additional_size and\r\n-        // DEFAULT_BLOCK_MAX_WEIGHT.\r\n-        // In other words, coinbase (reserved) outputs can safely exceed\r\n-        // -blockmaxweight, but the rest of the block template will be empty.\r\n-        return BlockAssembler{chainman().ActiveChainstate(), use_mempool ? context()->mempool.get() : nullptr, options}.CreateNewBlock(script_pub_key);\r\n+        BlockAssembler::Options assemble_options{options};\r\n+        ApplyArgsManOptions(*Assert(m_node.args), assemble_options);\r\n+        return BlockAssembler{chainman().ActiveChainstate(), context()->mempool.get(), assemble_options}.CreateNewBlock(script_pub_key);\r\n     }\r\n \r\n     NodeContext* context() override { return &m_node; }\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -59,14 +59,17 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\r\n \r\n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\r\n {\r\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\r\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);\r\n     // Limit weight to between coinbase_max_additional_weight and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\r\n+    // Coinbase (reserved) outputs can safely exceed -blockmaxweight, but the rest of the block template will be empty.\r\n     options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, options.coinbase_max_additional_weight, DEFAULT_BLOCK_MAX_WEIGHT);\r\n     return options;\r\n }\r\n \r\n BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool, const Options& options)\r\n     : chainparams{chainstate.m_chainman.GetParams()},\r\n-      m_mempool{mempool},\r\n+      m_mempool{options.use_mempool ? mempool : nullptr},\r\n       m_chainstate{chainstate},\r\n       m_options{ClampOptions(options)}\r\n {\r\n--- a/src/node/miner.h\r\n+++ b/src/node/miner.h\r\n@@ -6,6 +6,7 @@\r\n #ifndef BITCOIN_NODE_MINER_H\r\n #define BITCOIN_NODE_MINER_H\r\n \r\n+#include <node/types.h>\r\n #include <policy/policy.h>\r\n #include <primitives/block.h>\r\n #include <txmempool.h>\r\n@@ -20,8 +21,6 @@\r\n #include <boost/multi_index/tag.hpp>\r\n #include <boost/multi_index_container.hpp>\r\n \r\n-#include <util/mining.h>\r\n-\r\n class ArgsManager;\r\n class CBlockIndex;\r\n class CChainParams;\r\n@@ -155,24 +154,13 @@ private:\r\n     Chainstate& m_chainstate;\r\n \r\n public:\r\n-    struct Options {\r\n+    struct Options : BlockCreateOptions {\r\n         // Configuration parameters for the block size\r\n         size_t nBlockMaxWeight{DEFAULT_BLOCK_MAX_WEIGHT};\r\n         CFeeRate blockMinFeeRate{DEFAULT_BLOCK_MIN_TX_FEE};\r\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\r\n         bool test_block_validity{true};\r\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\r\n-        /**\r\n-         * The maximum additional weight which the pool will add to the coinbase\r\n-         * scriptSig, witness and outputs. This must include any additional\r\n-         * weight needed for larger CompactSize encoded lengths.\r\n-         */\r\n-        size_t coinbase_max_additional_weight{DEFAULT_COINBASE_MAX_ADDITIONAL_WEIGHT};\r\n-        /**\r\n-         * The maximum additional sigops which the pool will add in coinbase\r\n-         * transaction outputs.\r\n-         */\r\n-        size_t coinbase_output_max_additional_sigops{DEFAULT_COINBASE_OUTPUT_MAX_ADDITIONAL_SIGOPS};\r\n     };\r\n \r\n     explicit BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool, const Options& options);\r\n--- a/src/node/types.h\r\n+++ b/src/node/types.h\r\n@@ -13,6 +13,8 @@\r\n #ifndef BITCOIN_NODE_TYPES_H\r\n #define BITCOIN_NODE_TYPES_H\r\n \r\n+#include <cstddef>\r\n+\r\n namespace node {\r\n enum class TransactionError {\r\n     OK, //!< No error\r\n@@ -24,6 +26,24 @@ enum class TransactionError {\r\n     MAX_BURN_EXCEEDED,\r\n     INVALID_PACKAGE,\r\n };\r\n+\r\n+struct BlockCreateOptions {\r\n+    /**\r\n+     * Set false to omit mempool transactions\r\n+     */\r\n+    bool use_mempool{true};\r\n+    /**\r\n+     * The maximum additional weight which the pool will add to the coinbase\r\n+     * scriptSig, witness and outputs. This must include any additional\r\n+     * weight needed for larger CompactSize encoded lengths.\r\n+     */\r\n+    size_t coinbase_max_additional_weight{4000};\r\n+    /**\r\n+     * The maximum additional sigops which the pool will add in coinbase\r\n+     * transaction outputs.\r\n+     */\r\n+    size_t coinbase_output_max_additional_sigops{400};\r\n+};\r\n } // namespace node\r\n \r\n #endif // BITCOIN_NODE_TYPES_H\r\n--- a/src/rpc/mining.cpp\r\n+++ b/src/rpc/mining.cpp\r\n@@ -371,7 +371,7 @@ static RPCHelpMan generateblock()\r\n \r\n     ChainstateManager& chainman = EnsureChainman(node);\r\n     {\r\n-        std::unique_ptr<CBlockTemplate> blocktemplate{miner.createNewBlock(coinbase_script, /*use_mempool=*/false)};\r\n+        std::unique_ptr<CBlockTemplate> blocktemplate{miner.createNewBlock(coinbase_script, {.use_mempool = false})};\r\n         if (!blocktemplate) {\r\n             throw JSONRPCError(RPC_INTERNAL_ERROR, \"Couldn't create new block\");\r\n         }\r\ndeleted file mode 100644\r\n--- a/src/util/mining.h\r\n+++ /dev/null\r\n@@ -1,13 +0,0 @@\r\n-// Copyright (c) 2024 The Bitcoin Core developers\r\n-// Distributed under the MIT software license, see the accompanying\r\n-// file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n-\r\n-#ifndef BITCOIN_UTIL_MINING_H\r\n-#define BITCOIN_UTIL_MINING_H\r\n-\r\n-/** Default for coinbase_max_additional_weight */\r\n-static constexpr unsigned int DEFAULT_COINBASE_MAX_ADDITIONAL_WEIGHT{4000};\r\n-/** Default for coinbase_output_max_additional_sigops */\r\n-static constexpr unsigned int DEFAULT_COINBASE_OUTPUT_MAX_ADDITIONAL_SIGOPS{400};\r\n-\r\n-#endif // BITCOIN_UTIL_MINING_H\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nSuggested changes:\r\n\r\n- Make `createNewBlock` use an options struct so it easier and safer to use (less likely to have bugs from mixing up the order of integer parameters).\r\n- Consolidates documentation for the options in one header instead of three headers.\r\n- Avoids adding `util/mining.h` header since the options more logically belong to the node library than the util library.\r\n- Moves implementation of mining options from `node/interfaces.cpp` to `node/miner.cpp`. The `interfaces.cpp` file is just meant to contain glue code exposing private implementations as public interfaces. Ideally, the interface methods should be 1-3 lines long and not implement real functionality, which belongs in other places like `validation.cpp` and `miner.cpp` so it can be found and reused more easily and better tested.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2228550103",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "review_requested",
      "id": 13505922460,
      "node_id": "RRE_lADOABII586N2u5qzwAAAAMlBAWc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13505922460",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T13:47:46Z",
      "requested_reviewer": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 13505922631,
      "node_id": "RRE_lADOABII586N2u5qzwAAAAMlBAZH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13505922631",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T13:47:46Z",
      "requested_reviewer": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 2177812144,
      "node_id": "PRR_kwDOABII586Bzsaw",
      "url": null,
      "actor": null,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2177812144",
      "submitted_at": "2024-07-15T14:47:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "commented",
      "id": 2228822746,
      "node_id": "IC_kwDOABII586E2SLa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2228822746",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:46:17Z",
      "updated_at": "2024-07-15T15:46:17Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky thanks! I'll look into using your patch. After that I'll check where @ismaelsadeeq's feedback still applies.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2228822746",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13507667286,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMlHqVW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13507667286",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:46:18Z"
    },
    {
      "event": "subscribed",
      "id": 13507667304,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMlHqVo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13507667304",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:46:19Z"
    },
    {
      "event": "mentioned",
      "id": 13507667320,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMlHqV4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13507667320",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:46:19Z"
    },
    {
      "event": "subscribed",
      "id": 13507667342,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMlHqWO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13507667342",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:46:19Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyM2NmZWQ1OTU5YjI1Yzk4MjM1ZWM5ODhiNDA4ZmM1ZTMzOTFlM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/323cfed5959b25c98235ec988b408fc5e3391e3c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/323cfed5959b25c98235ec988b408fc5e3391e3c",
      "tree": {
        "sha": "4821c9d1180cdad0f31e45ff567d5b20978cee7d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4821c9d1180cdad0f31e45ff567d5b20978cee7d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4821c9d1180cdad0f31e45ff567d5b20978cee7d\nparent 8426e018bf22b5e7e1ffa4b42e06813c470b1cc6\nauthor Sjors Provoost <sjors@sprovoost.nl> 1719563713 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1721116517 +0200\n\nrefactor: use CHECK_NONFATAL to avoid single-use symbol\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaWJ2UACgkQV/+b28ww\nEAndmA//T+8T1pH3j5TCJG3/NN+u63cn1SP3ov9N3AaM/5EtY39FHwEOAznGKqXe\n2ZCXwbc4iCQ8Hya+pbwdkVtXi1HiTFKWOeDkpAl3n/ko/Ep8dEnrkWoegzXDXOjW\nGNwaP/IAZNe3vRbfuAfXNh12wiKRBzuPw5Iwv/m5XWsHP9Q+MVs31qTjRG/X8/yj\nl4EDmXTLZW1GJxlfD3jOavton4CPm54Q2bL33aShW9vmqsVDx9hleg6EbkZwRj2t\nu0rXLODqI/UXczR+9eVr9zH+zrzAc+fxi/qJ3JLlTnJP5ylIpkJUnV3A3QCygIW+\nbClYSwAaaS5NS1QLIl1jygZ70Keqerr7ufNMFMDWcZk4XVbHDg1jwzgoIj/HwQNc\nXvwDgWPF9722koc8BFUph7V1hHKWJkYahMyKDlg6OWiXIs5ADo5P/ubb0yoHsSxU\nC9VXc5OfJdkPZmkGB3ZKeKCDfjol4GIZN6UHcYIIJbKtYB6/nVl54iVPIPJjUN64\ndoQZlvWlXXZK7zUBn3YNvqi03S2n00McMWGjNZqiIDRiGAeRS8HMDQULyCTWd8cT\nRkulfU4fJCnU0DERwtcwjKU9am2IXcUqGfxj65LZl8pXsdXfGGXXhdVF53YUJp4u\nfia9jX4ox/89hQgLbu3f3IZBI2sw3SR6RBsunspCNdf7XlGFiU8=\n=kh3q\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8426e018bf22b5e7e1ffa4b42e06813c470b1cc6",
          "sha": "8426e018bf22b5e7e1ffa4b42e06813c470b1cc6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8426e018bf22b5e7e1ffa4b42e06813c470b1cc6"
        }
      ],
      "message": "refactor: use CHECK_NONFATAL to avoid single-use symbol",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-16T07:55:17Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T08:35:13Z"
      },
      "sha": "323cfed5959b25c98235ec988b408fc5e3391e3c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZiNGM4MTdkNGI5NzhhZGY2OTczODY3N2M3NDg1NWVmMDY3NWYzMzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6b4c817d4b978adf69738677c74855ef0675f333",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6b4c817d4b978adf69738677c74855ef0675f333",
      "tree": {
        "sha": "b4cc50a4e3491ad419f9e0865fd0a31c49ecc714",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b4cc50a4e3491ad419f9e0865fd0a31c49ecc714"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b4cc50a4e3491ad419f9e0865fd0a31c49ecc714\nparent 323cfed5959b25c98235ec988b408fc5e3391e3c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1721117608 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1721118477 +0200\n\nrefactor: pass BlockCreateOptions to createNewBlock\n\nRather than pass options individually to createNewBlock and then\ncombining them into BlockAssembler::Options, this commit introduces\nBlockCreateOptions and passes that instead.\n\nCurrently there's only one option (use_mempool) but the next\ncommit adds more.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaWLy4ACgkQV/+b28ww\nEAmJtw/43KC+nUez2WxKuMlfOEmogEeOmorkM3uq6PNmR+Hyzqzl57RRsjTGJ0Y9\nGG2ZJI8PHLwHBnakQoXI65GKfZty/LjlrgPn+TedYrTT/eObk6wKIbA1Rj7z8eYv\nEsZH4obqNxT1JDPbQJbXSKbMgPpqe2NhwjbU8UOPdCy3Mo6EsJ8VXt4s2fSDae5i\ndM5rwXdL43ey+KAFgxH9KyLZcBMTCb0XmryZCGevEd3L59/ETbVCJWZbYWBCsZTc\npCVqfKllQCkOR/klgxFwGzB+96G8zlC1EvdF1lXzumzn4ME5fXMXQVoq0tg4G9EA\nf+QFP/HjVv9rKcbdHlapDKQPlVmxmaCqtlY6Pvk3eIYqb45y4vri6Tb3OvvAfJjD\nz4pljPTNYCgeNwfRlhteiwnWBGA4l1hM3D+djAwZpYDm3HwN2lsO0UelWIz9uQ07\nUKBMzSr94OFJia5vIqN9z2TmLM9M94/vNKGZ7P3IDaK1EN92M4nzOckGRtYg3zf/\nXDZldx6G+LfpdYzXSDx2j8L4TyynANi76pqHCBeVt/6lomWCwVSj1tu4KAQY/HML\nP+WWCefik/N3MZ5E/sLRZyklnrVluLQ5AgUD2+1kMABnnMRNuVjspv5mzkvBelBX\nhn2uK4lTtDlGiwc6czk9BBt4rfcgv1NJbzXabCxfIsrhuneBFw==\n=hqdd\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/323cfed5959b25c98235ec988b408fc5e3391e3c",
          "sha": "323cfed5959b25c98235ec988b408fc5e3391e3c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/323cfed5959b25c98235ec988b408fc5e3391e3c"
        }
      ],
      "message": "refactor: pass BlockCreateOptions to createNewBlock\n\nRather than pass options individually to createNewBlock and then\ncombining them into BlockAssembler::Options, this commit introduces\nBlockCreateOptions and passes that instead.\n\nCurrently there's only one option (use_mempool) but the next\ncommit adds more.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-16T08:27:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-16T08:13:28Z"
      },
      "sha": "6b4c817d4b978adf69738677c74855ef0675f333"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13517121131,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMlruZr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13517121131",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-16T08:29:08Z"
    },
    {
      "event": "commented",
      "id": 2230320294,
      "node_id": "IC_kwDOABII586E7_ym",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2230320294",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-16T08:29:12Z",
      "updated_at": "2024-07-16T08:29:12Z",
      "author_association": "MEMBER",
      "body": "I took @ryanofsky's patch and split it into two commits.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2230320294",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13517122103,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMlruo3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13517122103",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-16T08:29:13Z"
    },
    {
      "event": "subscribed",
      "id": 13517122119,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMlrupH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13517122119",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-16T08:29:13Z"
    },
    {
      "event": "reviewed",
      "id": 2180053795,
      "node_id": "PRR_kwDOABII586B8Psj",
      "url": null,
      "actor": null,
      "commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 95c2edefe383c2b8a1735c26d8442fd36fa5e339\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2180053795",
      "submitted_at": "2024-07-16T12:13:45Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "referenced",
      "id": 13525714019,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMmMgRj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13525714019",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4e1a4342f3b2a857e3211587cd14e36704197483",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/4e1a4342f3b2a857e3211587cd14e36704197483",
      "created_at": "2024-07-16T18:51:15Z"
    },
    {
      "event": "reviewed",
      "id": 2181599489,
      "node_id": "PRR_kwDOABII586CCJEB",
      "url": null,
      "actor": null,
      "commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK 95c2edefe383c2b8a1735c26d8442fd36fa5e339\r\nGood addition and the updates tidy things up nicely.\r\n\r\nI would also support a bitcoind config parameter or possibly an RPC for this.\r\n",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2181599489",
      "submitted_at": "2024-07-17T01:18:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "referenced",
      "id": 13538820484,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMm-gGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13538820484",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e1ae38f4bbcdb1b3fa5e1eab1abfa9cf2232798c",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/e1ae38f4bbcdb1b3fa5e1eab1abfa9cf2232798c",
      "created_at": "2024-07-17T15:38:57Z"
    },
    {
      "event": "referenced",
      "id": 13539015214,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMm_Pou",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539015214",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e1fa475a5becca0083f59d7cafac9bc67c2f4f1c",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/e1fa475a5becca0083f59d7cafac9bc67c2f4f1c",
      "created_at": "2024-07-17T15:53:01Z"
    },
    {
      "event": "reviewed",
      "id": 2183368508,
      "node_id": "PRR_kwDOABII586CI488",
      "url": null,
      "actor": null,
      "commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2183368508",
      "submitted_at": "2024-07-17T16:05:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "referenced",
      "id": 13539417213,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMnAxx9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539417213",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5126ac430f3bc94b727044dc2497acebb73a9f3f",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/5126ac430f3bc94b727044dc2497acebb73a9f3f",
      "created_at": "2024-07-17T16:24:13Z"
    },
    {
      "event": "referenced",
      "id": 13539417272,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMnAxy4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539417272",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bdd68d5bca483071ca0729e6f0d2d71706ad21e7",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/bdd68d5bca483071ca0729e6f0d2d71706ad21e7",
      "created_at": "2024-07-17T16:24:14Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1MDRiNjk5N2IxYWNjOTc3MWFkMWY1MmVmYWE0YmUyYjQ5NjZjNmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "tree": {
        "sha": "86bc76542a141b3025a95ece537465a49d2b9ef1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/86bc76542a141b3025a95ece537465a49d2b9ef1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 86bc76542a141b3025a95ece537465a49d2b9ef1\nparent 6b4c817d4b978adf69738677c74855ef0675f333\nauthor Sjors Provoost <sjors@sprovoost.nl> 1721233995 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1721233995 +0200\n\nrefactor: add coinbase constraints to BlockCreateOptions\n\nWhen generating a block template through e.g. getblocktemplate RPC,\nwe reserve 4000 weight units and 400 sigops. Pools use this space\nfor their coinbase outputs.\n\nAt least one pool patched their Bitcoin Core node to adjust\nthese hardcoded values. They eventually produced an invalid\nblock which exceeded the sigops limit.\nhttps://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426\n\nThe existince of such patches suggests it may be useful to\nmake this value configurable. This commit would make such a\nchange easier.\n\nThe main motivation however is that the Stratum v2 spec\nrequires the pool to communicate the maximum bytes they intend\nto add to the coinbase outputs. A proposed change to the spec\nwould also require them to communicate the maximum number of sigops.\n\nThis commit also documents what happens when\n-blockmaxweight is lower than the coinbase\nreserved value.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaX8kwACgkQV/+b28ww\nEAk8LBAAmyL1NOV1lU9X8fEFTiOOA3fvARl/6buIinN5T431EELNuxAY40wBsSSM\nQdmwJOyW6BKeHohgkodjSa4N8033/OK9I9pc9ot7u7z1aO0cogXqE4YwdQKu/R8J\nD4J2xLvR1IYWeV9ts/mvP/cgIn21h4sZpFDSTXX4gDVe6hYtJRMW619HRLobqUot\nTF/QxyaUXeyjgimssgCW9zoR3d+tEbRV0+gL5nyrPYHEy5kajWX9wOIvOoafoYVS\naMyfUsk6iLvrEPJDHe4tmH+sDXVd57q3NQ28HXntIDYb6IwiewuNnLHpbAZDPQtz\nH688KTL7o6ij6rCAQGVICmZxi1MT9EOYict8mkhEn+Bdb2MW4syPLhnawoLdituh\nD5MTyKIcajHeGxlioViFfzRPP/Rfbl3OFM/r30uPyU24F4qZIaiRRA/wzXBbyR3c\ndT+HAS9Oe04FAziAv+CXXwguYt975ZNk7trI8+W83Y3VfV1wZgLOuACwX6Eqjko+\nE6AyUto3IMrfOaYH/Ed2l8J5JnFr8UcyMvbLWoTg1LHXXIunkoA+7joAymqgJjt9\nRnlwFeOWAQbRqhlSvfG0shYiBfFPfZfvPxhVKh46Fza939K869Ii0eHpVrAVW9qu\nnz+zaKk6rbRTviYsfh8+M4RITxfZfs3LtH4dscWlgOZBm3SptTk=\n=J9SX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6b4c817d4b978adf69738677c74855ef0675f333",
          "sha": "6b4c817d4b978adf69738677c74855ef0675f333",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6b4c817d4b978adf69738677c74855ef0675f333"
        }
      ],
      "message": "refactor: add coinbase constraints to BlockCreateOptions\n\nWhen generating a block template through e.g. getblocktemplate RPC,\nwe reserve 4000 weight units and 400 sigops. Pools use this space\nfor their coinbase outputs.\n\nAt least one pool patched their Bitcoin Core node to adjust\nthese hardcoded values. They eventually produced an invalid\nblock which exceeded the sigops limit.\nhttps://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426\n\nThe existince of such patches suggests it may be useful to\nmake this value configurable. This commit would make such a\nchange easier.\n\nThe main motivation however is that the Stratum v2 spec\nrequires the pool to communicate the maximum bytes they intend\nto add to the coinbase outputs. A proposed change to the spec\nwould also require them to communicate the maximum number of sigops.\n\nThis commit also documents what happens when\n-blockmaxweight is lower than the coinbase\nreserved value.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-17T16:33:15Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-17T16:33:15Z"
      },
      "sha": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13539521071,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMnBLIv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539521071",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-17T16:33:31Z"
    },
    {
      "event": "reviewed",
      "id": 2183473585,
      "node_id": "PRR_kwDOABII586CJSmx",
      "url": null,
      "actor": null,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "tested ACK c504b6997b1acc9771ad1f52efaa4be2b4966c6c\r\n\r\nReviewed all changes since my last https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2167070268. Built the commit and run all unit, functional and extended tests and all of them pass.",
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2183473585",
      "submitted_at": "2024-07-17T16:50:02Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "review_requested",
      "id": 13539688586,
      "node_id": "RRE_lADOABII586N2u5qzwAAAAMnB0CK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539688586",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-17T16:50:06Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 13539688851,
      "node_id": "RRE_lADOABII586N2u5qzwAAAAMnB0GT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539688851",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-17T16:50:07Z",
      "requested_reviewer": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "referenced",
      "id": 13539756853,
      "node_id": "REFE_lADOABII586N2u5qzwAAAAMnCEs1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13539756853",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "173580b1237e5bd7d63564aea555ca8914715f75",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/173580b1237e5bd7d63564aea555ca8914715f75",
      "created_at": "2024-07-17T16:56:26Z"
    },
    {
      "event": "reviewed",
      "id": 2183452602,
      "node_id": "PRR_kwDOABII586CJNe6",
      "url": null,
      "actor": null,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK c504b6997b1acc9771ad1f52efaa4be2b4966c6c\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2183452602",
      "submitted_at": "2024-07-17T17:03:35Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1659263337",
      "pull_request_review_id": 2148873843,
      "id": 1659263337,
      "node_id": "PRRC_kwDOABII585i5llp",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:  Is it comprehensive using the term \"pool\" here, or would it be better to keep things generic (and perhaps mention a pool as an example)?  This is reserving space in the template for the coinbase and the entity requesting the template could be a pool or a solo miner (albeit less commonly), right?  Maybe something like `maximum additional serialized bytes the block requestor can add in coinbase transaction outputs (for example, to enable pool payouts)`.\r\n\r\nnit:  weight and bytes seem to be used interchangeably here and in the function definition.  It might prevent confusion to stick to one nomenclature.",
      "created_at": "2024-06-28T20:04:30Z",
      "updated_at": "2024-06-28T21:15:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1659263337",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1659263337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660679371",
      "pull_request_review_id": 2150769727,
      "id": 1660679371,
      "node_id": "PRRC_kwDOABII585i-_TL",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree something like \"block requestor\" is more generic than \"pool\", but also more confusing.\r\n\r\n> weight and bytes seem to be used interchangeably here and in the function definition\r\n\r\nThese bytes all go in the output which doesn't have a witness discount, so each byte counts as 4 weight units. I think we should prefer the term \"bytes\", but make sure it's used correctly since we use weight units for internal accounting.",
      "created_at": "2024-07-01T08:36:09Z",
      "updated_at": "2024-07-01T08:36:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660679371",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660679371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660681030",
      "pull_request_review_id": 2150772443,
      "id": 1660681030,
      "node_id": "PRRC_kwDOABII585i-_tG",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_output_max_additional_size,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_output_max_additional_size <= DEFAULT_BLOCK_MAX_WEIGHT);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This probably needs to be `DEFAULT_BLOCK_MAX_WEIGHT / 4`, let me check the spec as well...",
      "created_at": "2024-07-01T08:37:23Z",
      "updated_at": "2024-07-01T08:37:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660681030",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660681030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660691098",
      "pull_request_review_id": 2150788974,
      "id": 1660691098,
      "node_id": "PRRC_kwDOABII585i_CKa",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See also: https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server\r\n\r\nWhich has a few more hairy details:\r\n\r\n> The Template Provider MUST NOT provide NewMiningJob messages which would represent consensus-invalid blocks once this additional size â€” **along with a maximally-sized (100 byte) coinbase field** â€” is added. Further, the Template Provider MUST consider the maximum additional bytes required in the **output count variable-length integer** in the coinbase transaction when complying with the size limits.",
      "created_at": "2024-07-01T08:45:03Z",
      "updated_at": "2024-07-01T08:48:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660691098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660691098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660833557",
      "pull_request_review_id": 2151020955,
      "id": 1660833557,
      "node_id": "PRRC_kwDOABII585i_k8V",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I ended up renaming `coinbase_output_max_additional_size` to `coinbase_max_additional_weight` to account for these issues, see below.",
      "created_at": "2024-07-01T10:31:57Z",
      "updated_at": "2024-07-01T10:31:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660833557",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660833557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670984170",
      "pull_request_review_id": 2167070268,
      "id": 1670984170,
      "node_id": "PRRC_kwDOABII585jmTHq",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I take it you wanted to rename it to `coinbase_max_additional_weight` instead",
      "created_at": "2024-07-09T18:25:44Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670984170",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670984170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670985574",
      "pull_request_review_id": 2167070268,
      "id": 1670985574,
      "node_id": "PRRC_kwDOABII585jmTdm",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction\n+     * @param[in] coinbase_output_max_additional_sigops maximum additional sigops which the pool will add in coinbase transaction outputs\n      * @returns a block template\n      */\n-    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool = true) = 0;\n+    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool = true,\n+                                                                 size_t coinbase_max_addition_weight = DEFAULT_COINBASE_MAX_ADDITIONAL_WEIGHT,",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 18,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same here, did you meant to name it `coinbase_max_additional_weight`?",
      "created_at": "2024-07-09T18:26:47Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670985574",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670985574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987152",
      "pull_request_review_id": 2167070268,
      "id": 1670987152,
      "node_id": "PRRC_kwDOABII585jmT2Q",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_addition_weight,",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Again, should it be `coinbase_max_additional_weight?`?",
      "created_at": "2024-07-09T18:28:04Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670987152",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987152"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 887,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987990",
      "pull_request_review_id": 2167070268,
      "id": 1670987990,
      "node_id": "PRRC_kwDOABII585jmUDW",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_addition_weight,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_max_addition_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+        options.coinbase_max_additional_weight = coinbase_max_addition_weight;",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`coinbase_max_additional_weight`?",
      "created_at": "2024-07-09T18:28:47Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670987990",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 894,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673640115",
      "pull_request_review_id": 2171287948,
      "id": 1673640115,
      "node_id": "PRRC_kwDOABII585jwbiz",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": 1670984170,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks.",
      "created_at": "2024-07-11T08:43:29Z",
      "updated_at": "2024-07-11T08:43:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1673640115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673640115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677885951",
      "pull_request_review_id": 2177812144,
      "id": 1677885951,
      "node_id": "PRRC_kwDOABII585kAoH_",
      "diff_hunk": "@@ -160,6 +160,17 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        /**\n+         * The maximum additional weight which the pool will add to the coinbase\n+         * scriptSig, witness and outputs. This must include any additional\n+         * weight needed for larger CompactSize encoded lengths.\n+         */\n+        size_t coinbase_max_additional_weight{4000};\n+        /**\n+         * The maximum additional sigops which the pool will add in coinbase\n+         * transaction outputs.\n+         */\n+        size_t coinbase_output_max_additional_sigops{400};",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 14,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it should not be necessary to reference pool in here\r\n\r\n```suggestion\r\n        /**\r\n         * The maximum additional weight that can be added  to the coinbase\r\n         * scriptSig, witness and outputs. This must include any additional\r\n         * weight needed for larger CompactSize encoded lengths.\r\n         */\r\n        size_t coinbase_max_additional_weight{4000};\r\n        /**\r\n         * The maximum additional sigops that can be added in coinbase\r\n         * transaction outputs.\r\n         */\r\n        size_t coinbase_output_max_additional_sigops{400};\r\n```",
      "created_at": "2024-07-15T14:02:59Z",
      "updated_at": "2024-07-15T14:47:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1677885951",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677885951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 163,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677942835",
      "pull_request_review_id": 2177812144,
      "id": 1677942835,
      "node_id": "PRRC_kwDOABII585kA2Az",
      "diff_hunk": "@@ -160,6 +160,17 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        /**\n+         * The maximum additional weight which the pool will add to the coinbase\n+         * scriptSig, witness and outputs. This must include any additional\n+         * weight needed for larger CompactSize encoded lengths.\n+         */",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 8,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indicate the assumed upper limits of this options?",
      "created_at": "2024-07-15T14:39:52Z",
      "updated_at": "2024-07-15T14:47:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1677942835",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677942835"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677950701",
      "pull_request_review_id": 2177812144,
      "id": 1677950701,
      "node_id": "PRRC_kwDOABII585kA37t",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_additional_weight,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+        options.coinbase_max_additional_weight = coinbase_max_additional_weight;\n+\n+        Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why are we allowing for this large values?\r\nshouldnt this be \r\n```suggestion\r\n         Assume(coinbase_max_additional_weight <= MAX_STANDARD_TX_WEIGHT);\r\n    options.coinbase_max_additional_weight = coinbase_max_additional_weight;\r\n     Assume(options.coinbase_output_max_additional_sigops <= MAX_STANDARD_TX_SIGOPS_COST);\r\n```",
      "created_at": "2024-07-15T14:44:57Z",
      "updated_at": "2024-07-15T14:47:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1677950701",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677950701"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 893,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678963168",
      "pull_request_review_id": 2179547014,
      "id": 1678963168,
      "node_id": "PRRC_kwDOABII585kEvHg",
      "diff_hunk": "@@ -160,6 +160,17 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        /**\n+         * The maximum additional weight which the pool will add to the coinbase\n+         * scriptSig, witness and outputs. This must include any additional\n+         * weight needed for larger CompactSize encoded lengths.\n+         */\n+        size_t coinbase_max_additional_weight{4000};\n+        /**\n+         * The maximum additional sigops which the pool will add in coinbase\n+         * transaction outputs.\n+         */\n+        size_t coinbase_output_max_additional_sigops{400};",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 14,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "in_reply_to_id": 1677885951,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See above https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660679371, omitting the word \"pool\" because in theory there could be something _other_ than a pool that wants to add data to our coinbase, just seems confusing to me.",
      "created_at": "2024-07-16T08:18:13Z",
      "updated_at": "2024-07-16T08:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1678963168",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678963168"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 163,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678967962",
      "pull_request_review_id": 2179554408,
      "id": 1678967962,
      "node_id": "PRRC_kwDOABII585kEwSa",
      "diff_hunk": "@@ -160,6 +160,17 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        /**\n+         * The maximum additional weight which the pool will add to the coinbase\n+         * scriptSig, witness and outputs. This must include any additional\n+         * weight needed for larger CompactSize encoded lengths.\n+         */",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 8,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "in_reply_to_id": 1677942835,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "#29432 implements this in more detail. I'm not even 100% sure if it's correct there, so I'd rather wait with documenting the exact numbers - that might just encourage someone to recompile and burn themselves.",
      "created_at": "2024-07-16T08:21:31Z",
      "updated_at": "2024-07-16T08:21:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1678967962",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678967962"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678972145",
      "pull_request_review_id": 2179560908,
      "id": 1678972145,
      "node_id": "PRRC_kwDOABII585kExTx",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_additional_weight,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+        options.coinbase_max_additional_weight = coinbase_max_additional_weight;\n+\n+        Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "in_reply_to_id": 1677950701,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`MAX_STANDARD_TX_WEIGHT` is a standardness rule. If we wanted to enforce it in the mining code, which would be unrelated to this PR, it shouldn't be through an assert / assume.",
      "created_at": "2024-07-16T08:24:23Z",
      "updated_at": "2024-07-16T08:24:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1678972145",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1678972145"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 893,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1679279840",
      "pull_request_review_id": 2180053795,
      "id": 1679279840,
      "node_id": "PRRC_kwDOABII585kF8bg",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Pass coinbase constraints to createNewBlock\" (e67e4669a9e263d90f0e276c8e65e93c39170375)\r\n\r\nCurrent code seems ok, but depending on how important it is for this not to generate an invalid block, it may make sense to use `assert` instead of `Assume`, since Assume does not do anything in release builds. Or this could also abort in debug builds but cap the values in release builds:\r\n\r\n```c++\r\nif (!Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST)) {\r\n    options.coinbase_output_max_additional_sigops = MAX_BLOCK_SIGOPS_COST\r\n}\r\n```",
      "created_at": "2024-07-16T12:11:26Z",
      "updated_at": "2024-07-16T12:13:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1679279840",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1679279840"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1679851292",
      "pull_request_review_id": 2180978515,
      "id": 1679851292,
      "node_id": "PRRC_kwDOABII585kIH8c",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": 1679279840,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Currently neither of these values can be configured. With Stratum v2 I intend to add runtime checks. If those checks are wrong then I assume the fuzzer would eventually find this `Assume`?",
      "created_at": "2024-07-16T18:19:10Z",
      "updated_at": "2024-07-16T18:19:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1679851292",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1679851292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681316815",
      "pull_request_review_id": 2183368508,
      "id": 1681316815,
      "node_id": "PRRC_kwDOABII585kNtvP",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": 1679279840,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1679851292\r\n\r\nSo you are saying if the values are too big at this point, it means there is a bug elsewhere in the code. If that is the case, I think it would be more appropriate to use `assert` or `Assert` rather than `Assume` so the bug does not go undetected until it is too late and eventually results in an invalid block being produced. I could be wrong, but I don't see a rationale for preferring assume over assert here.",
      "created_at": "2024-07-17T16:02:39Z",
      "updated_at": "2024-07-17T16:05:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1681316815",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681316815"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681358842",
      "pull_request_review_id": 2183438918,
      "id": 1681358842,
      "node_id": "PRRC_kwDOABII585kN3_6",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": 1679279840,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> So you are saying if the values are too big at this point, it means there is a bug elsewhere in the code\r\n\r\nYes\r\n\r\nChanged to Assert.",
      "created_at": "2024-07-17T16:33:34Z",
      "updated_at": "2024-07-17T16:33:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1681358842",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681358842"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681361423",
      "pull_request_review_id": 2183444561,
      "id": 1681361423,
      "node_id": "PRRC_kwDOABII585kN4oP",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": 1679279840,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is great! Despite that these values are hard coded, I also think it is safer to prefer an assert over Assume in this case. In that way we still have a safeguard in place during the whole integration process of Stratum V2 and even if the future run time checks somehow fail to deliver their intended purpose at least we have some feedback in debug mode. On the other hand the assert wont hurt anyone exactly because the values are hard coded.",
      "created_at": "2024-07-17T16:35:32Z",
      "updated_at": "2024-07-17T16:35:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1681361423",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681361423"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681394436",
      "pull_request_review_id": 2183452602,
      "id": 1681394436,
      "node_id": "PRRC_kwDOABII585kOAsE",
      "diff_hunk": "@@ -59,8 +59,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Limit weight to between 4K and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assume(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c504b6997b1acc9771ad1f52efaa4be2b4966c6c",
      "original_commit_id": "95c2edefe383c2b8a1735c26d8442fd36fa5e339",
      "in_reply_to_id": 1679279840,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1681361423\r\n\r\nJust to clarify for other reviewers since the names of these macros are confusing: In bitcoin core, `assert` and `Assert` macros behave very differently from the `assert` macro in standard c++. In standard c++ `assert` statements are not executed at all in release builds, while in bitcoin core they are always executed and always cause the execution to abort if they fail. Other c++ libraries that don't to be confusing use the term [check](https://github.com/bitcoin/bitcoin/pull/16136#issuecomment-501779934) instead of assert for this behavior.\r\n\r\nThe `Assume` macro is more unusual, because it doesn't abort execution in release builds, but does also doesn't get skipped in release builds, so will always evaluate arguments passed to it. It can make sense to use Assume instead of assert when an unexpected condition indicates some kind of bug, but the bug is easy to recover from, so it is worth crashing debug builds but not release builds. Normally it make sense to check the `Assume` return value and do something like log a warning or fix invalid values, not just ignore the unexpected condition completely.",
      "created_at": "2024-07-17T17:02:37Z",
      "updated_at": "2024-07-17T17:03:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1681394436",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1681394436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    }
  ]
}