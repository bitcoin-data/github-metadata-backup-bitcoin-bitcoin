{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531",
    "id": 1529587038,
    "node_id": "PR_kwDOABII585bK6Ve",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28531",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28531.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28531.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/77ebad9651cd9138cf385c84402fd6042db8536e",
    "number": 28531,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "improve MallocUsage() accuracy",
    "user": {
      "login": "LarryRuane",
      "id": 8321330,
      "node_id": "MDQ6VXNlcjgzMjEzMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LarryRuane",
      "html_url": "https://github.com/LarryRuane",
      "followers_url": "https://api.github.com/users/LarryRuane/followers",
      "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
      "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
      "repos_url": "https://api.github.com/users/LarryRuane/repos",
      "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The `MallocUsage()` function takes an allocation size as an argument and returns the amount of physical memory consumed, which is greater due to memory allocator overhead and alignment. It was first added in 2015 (first commit of #6102), but its accuracy has degraded as memory allocation libraries have evolved. It's used when it's important that large data structures, such as the coins cache and mempool, should use a predictable, configurable (limited) amount of physical memory (see the `-dbcache` and `-maxmempool` configuration options), as well as a few other places.\r\n\r\nsipa figured out a concise, efficient [expression](https://github.com/bitcoin/bitcoin/pull/27748#discussion_r1215541260) that this function can use, and that's what's implemented here.\r\n\r\nAlso add a unit test, which is more helpful than usual in this case since platforms, operating systems, and libraries vary significantly in this area.",
    "labels": [],
    "created_at": "2023-09-25T22:17:07Z",
    "updated_at": "2025-03-27T19:54:10Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "36307e5ea7be927bee66faacd563be019a48a237",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "LarryRuane:2023-09-MallocUsage",
      "ref": "2023-09-MallocUsage",
      "sha": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 176543842,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNzY1NDM4NDI=",
        "name": "bitcoin",
        "full_name": "LarryRuane/bitcoin",
        "owner": {
          "login": "LarryRuane",
          "id": 8321330,
          "node_id": "MDQ6VXNlcjgzMjEzMzA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/LarryRuane",
          "html_url": "https://github.com/LarryRuane",
          "followers_url": "https://api.github.com/users/LarryRuane/followers",
          "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
          "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
          "repos_url": "https://api.github.com/users/LarryRuane/repos",
          "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/LarryRuane/bitcoin",
        "description": "Bitcore Bitcoin build with address indexes",
        "fork": true,
        "url": "https://api.github.com/repos/LarryRuane/bitcoin",
        "archive_url": "https://api.github.com/repos/LarryRuane/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/LarryRuane/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/LarryRuane/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/LarryRuane/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/LarryRuane/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/LarryRuane/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/LarryRuane/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/LarryRuane/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/LarryRuane/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/LarryRuane/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/LarryRuane/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/LarryRuane/bitcoin/events",
        "forks_url": "https://api.github.com/repos/LarryRuane/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/LarryRuane/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/LarryRuane/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/LarryRuane/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/LarryRuane/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/LarryRuane/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/LarryRuane/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/LarryRuane/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/LarryRuane/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/LarryRuane/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/LarryRuane/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/LarryRuane/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/LarryRuane/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/LarryRuane/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/LarryRuane/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/LarryRuane/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:LarryRuane/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/LarryRuane/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/LarryRuane/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/LarryRuane/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/LarryRuane/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/LarryRuane/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/LarryRuane/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/LarryRuane/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/LarryRuane/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/LarryRuane/bitcoin/hooks",
        "svn_url": "https://github.com/LarryRuane/bitcoin",
        "homepage": "https://bitcore.io/bitcoin",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 263388,
        "default_branch": "0.12.1-bitcore",
        "open_issues_count": 8,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-27T19:54:08Z",
        "created_at": "2019-03-19T15:31:01Z",
        "updated_at": "2023-02-24T19:51:21Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "74c23f80abbe72c1cc00604ec438498e6a20d3e6",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36971,
        "stargazers_count": 82670,
        "watchers_count": 82670,
        "size": 278957,
        "default_branch": "master",
        "open_issues_count": 690,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-27T15:02:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-03-27T17:25:47Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 41,
    "deletions": 22,
    "changed_files": 3,
    "commits": 3,
    "review_comments": 19,
    "comments": 17
  },
  "events": [
    {
      "event": "mentioned",
      "id": 10467996958,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAJv8PUe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10467996958",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T22:17:07Z"
    },
    {
      "event": "subscribed",
      "id": 10467996963,
      "node_id": "SE_lADOABII585x_FI8zwAAAAJv8PUj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10467996963",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T22:17:07Z"
    },
    {
      "event": "commented",
      "id": 1734540409,
      "node_id": "IC_kwDOABII585nYvx5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1734540409",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T22:17:09Z",
      "updated_at": "2025-03-17T22:40:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/28531.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1734540409",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "commented",
      "id": 1734540676,
      "node_id": "IC_kwDOABII585nYv2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1734540676",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T22:17:28Z",
      "updated_at": "2023-09-25T22:17:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "The results of the old and new versions of this function should differ only slightly; it would be bad if the new one gave very different results, because node operators might find too much memory being consumed, or (not as bad) not enough. To manually test this, I ran `-reindex-chainstate` on Ubuntu, and watched memory usage by printing `/proc/pid/statm` and watching the `data` (6th) field. On master, the value settled to 315140 (units are 4k pages); with this PR it was 315606, which indicates that the new version produces slightly smaller results, but they're close.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1734540676",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "labeled",
      "id": 10468347435,
      "node_id": "LE_lADOABII585x_FI8zwAAAAJv9k4r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10468347435",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T23:22:04Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 10471426866,
      "node_id": "UE_lADOABII585x_FI8zwAAAAJwJUsy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10471426866",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-26T07:51:15Z"
    },
    {
      "event": "commented",
      "id": 1737598930,
      "node_id": "IC_kwDOABII585nkafS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1737598930",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-27T15:11:34Z",
      "updated_at": "2023-09-27T15:11:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Changing to draft because CI on a couple of the platforms failed the new test, so the physical memory calculation will need to be different on those platforms, I try to figure that out.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1737598930",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "convert_to_draft",
      "id": 10488994764,
      "node_id": "CTDE_lADOABII585x_FI8zwAAAAJxMVvM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10488994764",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-27T15:11:56Z"
    },
    {
      "event": "commented",
      "id": 1818440265,
      "node_id": "IC_kwDOABII585sYzJJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1818440265",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T08:24:02Z",
      "updated_at": "2023-11-21T14:47:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "I can reproduce the same results with glibc 2.31 and 2.38, in 32bit and 64bit. I don't think it needs to be perfect on all platforms, I think your new calculation is fine.\r\n\r\nI played a bit with a reproducer, here is mine:  https://godbolt.org/z/s971sbnhG I refactored your `MallocUsage` formula a bit, but it's basically the same",
      "user": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1818440265",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "commented",
      "id": 1970985970,
      "node_id": "IC_kwDOABII5851etvy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1970985970",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T11:58:43Z",
      "updated_at": "2024-02-29T11:58:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--2e250dc3d92b2c9115b66051148d6e47-->\nðŸ¤” There hasn't been much activity lately and the CI seems to be failing.\n\nIf no one reviewed the current pull request by commit hash, a [rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes) can be considered. While the CI failure may be a false positive, the CI hasn't been running for some time, so there may be a real issue hiding as well. A rebase triggers the latest CI and makes sure that no silent merge conflicts have snuck in.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1970985970",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "ready_for_review",
      "id": 11970936074,
      "node_id": "RFRE_lADOABII585x_FI8zwAAAALJhf0K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11970936074",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T20:07:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11971122236,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALJiNQ8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11971122236",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "04f3fbe308728d2fb18fad418603cab97f0b9f59",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/04f3fbe308728d2fb18fad418603cab97f0b9f59",
      "created_at": "2024-02-29T20:26:22Z"
    },
    {
      "event": "commented",
      "id": 1971902956,
      "node_id": "IC_kwDOABII5851iNns",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971902956",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T20:28:06Z",
      "updated_at": "2024-02-29T20:28:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Force-pushed to 04f3fbe308728d2fb18fad418603cab97f0b9f59 - rebase only. (CI is still expected to fail, I'm working on that now.)",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1971902956",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11985002873,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALKXKF5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11985002873",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cee653f8e96efcaa198fcbf6a3c9578d6d284501",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/cee653f8e96efcaa198fcbf6a3c9578d6d284501",
      "created_at": "2024-03-01T23:02:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11985122567,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALKXnUH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11985122567",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "86b71ec8d8e3b2d2ab78edb945594bbbbdbb17da",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/86b71ec8d8e3b2d2ab78edb945594bbbbdbb17da",
      "created_at": "2024-03-01T23:22:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12125078274,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALStgMC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12125078274",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e6d7f57c51fd90b8a10155169990b5bca9f2d3f8",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/e6d7f57c51fd90b8a10155169990b5bca9f2d3f8",
      "created_at": "2024-03-14T23:38:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12125267727,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALSuOcP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12125267727",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6bfdad9a725bd92a19e4c080505110403072e985",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/6bfdad9a725bd92a19e4c080505110403072e985",
      "created_at": "2024-03-15T00:16:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12136930884,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALTat5E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12136930884",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "58ebf90f6f05351f7445d5874317243110615e38",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/58ebf90f6f05351f7445d5874317243110615e38",
      "created_at": "2024-03-15T21:32:52Z"
    },
    {
      "event": "commented",
      "id": 2000589243,
      "node_id": "IC_kwDOABII5853PpG7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000589243",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-15T22:34:47Z",
      "updated_at": "2024-03-15T22:34:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "@martinus\r\nCan you think of why the macOS and Win64 are failing (I have only Ubuntu, which passes)? As an experiment, I changed the memory usage ratio needed to pass to the resource map being just less than `std_map`, but not even that passes (that is, the resource map uses more space). Both of those platforms fail the same way (you can see this in the CI results, this is Win64):\r\n```\r\nD:/a/bitcoin/bitcoin/src/test/pool_tests.cpp(183): error: in \"pool_tests/memusage_test\": \r\n  check memusage::DynamicUsage(resource_map) <= memusage::DynamicUsage(std_map) * 100 / 100 \r\n  has failed [466624 > 451088]\r\n```\r\nOn earlier runs, some other tests have failed, but I'm not sure if those are spurious failures.\r\n\r\nI'm not sure what to do now, any thoughts or suggestions are welcome!",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2000589243",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12137375124,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALTcaWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12137375124",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-15T22:34:48Z"
    },
    {
      "event": "subscribed",
      "id": 12137375133,
      "node_id": "SE_lADOABII585x_FI8zwAAAALTcaWd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12137375133",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-15T22:34:48Z"
    },
    {
      "event": "commented",
      "id": 2002088507,
      "node_id": "IC_kwDOABII5853VXI7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2002088507",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T18:57:08Z",
      "updated_at": "2024-03-17T02:06:32Z",
      "author_association": "MEMBER",
      "body": "@LarryRuane There is no reason to assume that the memory allocation overhead on those platforms, with substantially different C libraries, would match the formula we inferred on x86_64 and arm Linux.\n\nIf our goal is actually accurate memory usage calculations on all systems, we will need to derive a formula for each supported system separately.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2002088507",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12140640559,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALTo3kv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12140640559",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T18:57:10Z"
    },
    {
      "event": "subscribed",
      "id": 12140640564,
      "node_id": "SE_lADOABII585x_FI8zwAAAALTo3k0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12140640564",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T18:57:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12162541818,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALU8aj6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12162541818",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e0fa518f971bca227c1870e8f8fcd7ecbf138a98",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/e0fa518f971bca227c1870e8f8fcd7ecbf138a98",
      "created_at": "2024-03-19T02:29:40Z"
    },
    {
      "event": "commented",
      "id": 2007777780,
      "node_id": "IC_kwDOABII5853rEH0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2007777780",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T17:40:18Z",
      "updated_at": "2024-03-22T20:38:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa - I don't think the test failures could be due to differences in memory allocation overhead across platforms. The actual memory allocation overhead isn't being tested at all. To do that would probably require a test that uses `/proc/meminfo` (which doesn't exist on all platforms) or similar.\r\n\r\nI don't mind giving up and closing this PR, but as @martinus said in an [earlier comment](https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-1818440265), this calculation doesn't need to be perfect, just better.\r\n\r\nI think this test failure must be due to differences in `std::unordered_map` implementations. That container does various allocations for different reasons, and it must be that with this PR's change in memory usage calculation, the `std::unordered_map` on macOS and Win64 (at least) are doing more a kind of allocation that the new calculation thinks has higher overhead. Something like that.\r\n\r\n[UPDATE: the following discussion about `std::unordered_map::reserve()` is incorrect, calling `reserve()` doesn't prevent the bucket array from being reallocated multiple times _within the pool resource_ -- rather, it's reallocated using regular memory. Only allocations up to 128 bytes come from the pool allocator. (I'll probably remove these comments later.)\r\n\r\nI thought I had it figured out; I verified with the debugger that as the test adds the 10k entries to the two maps, it has to repeatedly grow the bucket array. The allocation sizes (in bytes) for the bucket array that I saw here on Ubuntu were: 104, 232, 472, 1026, 2056, 4328, 8872, 18856, 40696, 82184.... The tradeoff one makes when using the pool resource allocator is that memory allocations that are freed but then those same sizes not allocated again, those allocations are, in effect, leaked (until the resource is destroyed). The pool resource works great when freeing and allocating the same sizes (rounded up to the alignment, usually 8 bytes) repeatedly. This is, of course, the case for the individual map entries.\r\n\r\nSo the latest force-push simply calls `reserve()` initially on both maps (this is only really needed for the pool resource map). Debugging verifies that this does prevent the bucket array from being reallocated, here on Ubuntu. But it didn't fix the problem on at least macOS and Win64. Maybe those platforms' implementations of `std::unordered_map` ignore the `reserve()` hint?\r\n\r\nIt's difficult when CI fails on platforms that I don't have access to. Do others have a solution to that? Can I install macOS on Ubuntu or Windows 10 (I have both) as a VM? Maybe I can set up my Windows laptop to build and run the debugger, but that seems like a lot of work.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2007777780",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12173282027,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALVlYrr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12173282027",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T17:40:20Z"
    },
    {
      "event": "subscribed",
      "id": 12173282040,
      "node_id": "SE_lADOABII585x_FI8zwAAAALVlYr4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12173282040",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T17:40:20Z"
    },
    {
      "event": "mentioned",
      "id": 12173282062,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALVlYsO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12173282062",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T17:40:20Z"
    },
    {
      "event": "subscribed",
      "id": 12173282083,
      "node_id": "SE_lADOABII585x_FI8zwAAAALVlYsj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12173282083",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T17:40:20Z"
    },
    {
      "event": "commented",
      "id": 2009121482,
      "node_id": "IC_kwDOABII5853wMLK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2009121482",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T09:32:38Z",
      "updated_at": "2024-03-20T09:37:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "@LarryRuane The problem here is that the `DynamicUsage(const std::unordered_map<X, Y, Z>& m)` just estimates the memory usage by thinking that internally it uses a node with a single pointer (see `struct unordered_node : private X` in `memusage.h`). This estimation is probably not correct on all platforms, e.g. windows seems to use a double linked list, so this underestimates actual memory usage.\r\n\r\nThe inconcsistency now comes when using `DynamicUsage` with a pool resource. Here the actual real world memory usage is counted (because it uses a custom allocator, there's no need for estimating node size), and here the different implementations actually effect the result.\r\n\r\nSo, with your new MallocUsage the numbers are most likely more correct, but this seems to trigger the incorrect underestimation for `DynamicUsage(const std::unordered_map<X, Y, Z>& m)`",
      "user": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2009121482",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12181919865,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALWGVh5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12181919865",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T09:32:39Z"
    },
    {
      "event": "subscribed",
      "id": 12181919878,
      "node_id": "SE_lADOABII585x_FI8zwAAAALWGViG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12181919878",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T09:32:39Z"
    },
    {
      "event": "commented",
      "id": 2013147240,
      "node_id": "IC_kwDOABII5853_jBo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2013147240",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T17:37:44Z",
      "updated_at": "2024-03-21T17:37:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "@martinus - thanks, that makes perfect sense! I hadn't thought of the possibility of the nodes having two pointers instead of one (double instead of single linked list). Seems like a bad design, but anyway.\r\n\r\nI don't think there would be much benefit to fixing `DynamicUsage(const std::unordered_map<X, Y, Z>& m)` to account for this (make it dependent on platform), because this function is no longer important since we're using the pool resource. It's probably really used only in the test. So it's really just a test problem. I'll see what I can do to fix this.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2013147240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12204588675,
      "node_id": "MEE_lADOABII585x_FI8zwAAAALXcz6D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12204588675",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T17:37:45Z"
    },
    {
      "event": "subscribed",
      "id": 12204588700,
      "node_id": "SE_lADOABII585x_FI8zwAAAALXcz6c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12204588700",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T17:37:45Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12221063916,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALYbqLs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12221063916",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c6cba06199b2e1bfcb1df5372bbc40548cd1a9cf",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/c6cba06199b2e1bfcb1df5372bbc40548cd1a9cf",
      "created_at": "2024-03-22T21:10:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12386260242,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAALiR1US",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12386260242",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eec71127333d44a169d0e29f17b4070556f9629a",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/eec71127333d44a169d0e29f17b4070556f9629a",
      "created_at": "2024-04-08T03:02:02Z"
    },
    {
      "event": "labeled",
      "id": 12437147193,
      "node_id": "LE_lADOABII585x_FI8zwAAAALlT845",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12437147193",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-11T14:08:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12698075342,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAL03UDO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12698075342",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ee3683d4a1599602c376809b342dcf9720b254a7",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/ee3683d4a1599602c376809b342dcf9720b254a7",
      "created_at": "2024-05-03T15:38:37Z"
    },
    {
      "event": "unlabeled",
      "id": 12698828220,
      "node_id": "UNLE_lADOABII585x_FI8zwAAAAL06L28",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12698828220",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-03T16:54:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 12783036960,
      "node_id": "CTDE_lADOABII585x_FI8zwAAAAL57aog",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12783036960",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-13T08:02:29Z"
    },
    {
      "event": "commented",
      "id": 2106905968,
      "node_id": "IC_kwDOABII5859lNVw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2106905968",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-13T08:02:59Z",
      "updated_at": "2024-05-13T08:02:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Turned into draft for now, due to failing CI. If this is no longer a WIP, you can move it out of draft.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2106905968",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "ready_for_review",
      "id": 12886295859,
      "node_id": "RFRE_lADOABII585x_FI8zwAAAAMAFUUz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12886295859",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T22:57:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12886332283,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAMAFdN7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12886332283",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9bc440df2d5f00bac0e423a16eebc3efc1e55489",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/9bc440df2d5f00bac0e423a16eebc3efc1e55489",
      "created_at": "2024-05-21T23:03:47Z"
    },
    {
      "event": "labeled",
      "id": 12886626686,
      "node_id": "LE_lADOABII585x_FI8zwAAAAMAGlF-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12886626686",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T23:57:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12888250872,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAMAMxn4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12888250872",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "aeac0f22f6b1c7e0abbfcdd8f56b971bea5f439a",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/aeac0f22f6b1c7e0abbfcdd8f56b971bea5f439a",
      "created_at": "2024-05-22T04:58:08Z"
    },
    {
      "event": "unlabeled",
      "id": 12888793065,
      "node_id": "UNLE_lADOABII585x_FI8zwAAAAMAO1_p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12888793065",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T06:14:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 12889729520,
      "node_id": "UNLE_lADOABII585x_FI8zwAAAAMASanw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12889729520",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T07:23:13Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2125570369,
      "node_id": "IC_kwDOABII585-saFB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2125570369",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T19:12:35Z",
      "updated_at": "2024-05-22T19:12:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "**NOTE**, this PR isn't ready to merge; at the very least it has some debug prints that need to be removed.\r\n\r\nCI was failing on some platforms (Windows and macOS), in `test/functional/mempool_limit.py: test_mid_package_eviction()`. I think this test is fragile; this very-unrelated PR shouldn't be able to cause it to fail IMO. The problem turned out to be the following:\r\n\r\nThis test calls the test utility function `fill_mempool()`. This function creates independent physically-large (around 65kb) transactions at varying fee rates until the one with the lowest feerate is evicted due to the mempool becoming full. The functional tests run with `-maxmempool=5` (MB), so that requires about 72 transactions.\r\n\r\nAfter `fill_mempool()` returns, the mempool likely won't be _completely_ full, because these were large transactions, so there's some space left but not enough for another transaction. The test, `test_mid_package_eviction`, then submits a smaller transaction (weight around 8k) called `mempool_evicted_tx` with a fee just barely high enough to be accepted, and expects that transaction to be accepted. (It has this name, `mempool_evicted_tx`, because the test expects it to be evicted later.)\r\n\r\nWith this PR, that transaction was not accepted on Windows and macOS. Some debug prints show that on those platforms, when `fill_mempool()` returns, there are only 1200 bytes of free space in the mempool. This is because the `std::unordered_map` library implementations are different on these platforms, and this causes the memory usage calculation (for the entire map) to be slightly different in this PR. So it's really just bad luck. This is why I think the test is fragile.\r\n\r\nAfter trying a few fixes to the test that didn't work, what finally worked (the current branch) is, to have `fill_mempool()`, just before it returns, submit another transaction that _replaces_ (RBF) an existing one in the mempool, but is slightly smaller. This frees up about 10kb of additional space, which allows room for the 8k transaction to be reliably accepted. This doesn't break the other tests that call `fill_mempool()`.\r\n\r\nThis attempt didn't work the first time, however, because the mempools wouldn't reliably sync in `test/functional/p2p_1p1c_network.py`. This test starts 4 nodes, and calls `fill_mempool()` on node 0 then waits for all 4 mempools to become synced. Sometimes they do but other times this never happens. I wonder if there might be an unrelated bug (I can investigate later), but what often happens (it's timing dependent and thus random) is that the replacement tx (added by this PR) does appear on all nodes, but a low-feerate tx that was evicted on node 0 remains on nodes 1-3. I can explain what I'm seeing in more detail later if needed. What ended up fixing this is to [delay](https://github.com/bitcoin/bitcoin/pull/28531/files#diff-1a6267ad805cafba25aba03b9c6e3f8315b3f9eb9a938e7c64d4c2b8fac525f9R91) a few seconds before submitting the RBF transaction. It's ugly, maybe there's a better way, but syncing mempools is kind of non-deterministic anyway, so I don't think it's terribly bad.\r\n\r\n@glozow and @theStack, can you let me know your opinion? You two have worked a lot in this area.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2125570369",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12899529701,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAMA3zPl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12899529701",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T19:12:36Z"
    },
    {
      "event": "subscribed",
      "id": 12899529713,
      "node_id": "SE_lADOABII585x_FI8zwAAAAMA3zPx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12899529713",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T19:12:36Z"
    },
    {
      "event": "mentioned",
      "id": 12899529734,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAMA3zQG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12899529734",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T19:12:36Z"
    },
    {
      "event": "subscribed",
      "id": 12899529746,
      "node_id": "SE_lADOABII585x_FI8zwAAAAMA3zQS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12899529746",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T19:12:36Z"
    },
    {
      "event": "commented",
      "id": 2125983180,
      "node_id": "IC_kwDOABII585-t-3M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2125983180",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T00:24:51Z",
      "updated_at": "2024-05-23T00:24:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "@LarryRuane: Interesting problem (and very creative solution with the RBF tx :)). Fwiw, on one of my machines running OpenBSD 7.5, the same behaviour as you described occurs on commit 663e5012d318a7e80a42385ac4e6f71dec46814e: after `fill_mempool`, mempool usage is very close to the max (`'usage': 4998768`), and the subtest `test_mid_package_eviction` fails on the first MiniWallet tx submission with a `\"mempool full\"` error.\r\n\r\nOne idea I had to solve this at the `fill_mempool` side is to submit an extra tx at the end of `fill_mempool` that is smaller (I chose half the size) than the filler txs. Given that this causes eviction, a large filler tx is removed, and the smaller-sized tx is getting in, freeing up some space (around ~32.5KB in terms of bytes). It's still very ugly, especially since this code is only ever executed for edge cases (note that we can't unconditionally submit the smaller tx, as this could cause the problem rather than solve it, if no eviction happens), but passes all the tests that use `fill_mempool` for me: https://github.com/theStack/bitcoin/commit/f758e73a943b8e45acac1ab8834305f7f0bfbf14\r\n\r\nHowever, is this even necessary to be solved in `fill_mempool`? Haven't looked closer at the failing test yet, but maybe it's just a bug in the fee calculation (or MiniWallet's treatment of `target_weight`).",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2125983180",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12901906328,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAMBA3eY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12901906328",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T00:24:52Z"
    },
    {
      "event": "subscribed",
      "id": 12901906336,
      "node_id": "SE_lADOABII585x_FI8zwAAAAMBA3eg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12901906336",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T00:24:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12915098501,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAMBzMOF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12915098501",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f758e73a943b8e45acac1ab8834305f7f0bfbf14",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/f758e73a943b8e45acac1ab8834305f7f0bfbf14",
      "created_at": "2024-05-23T20:54:40Z"
    },
    {
      "event": "commented",
      "id": 2128007110,
      "node_id": "IC_kwDOABII585-1s_G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128007110",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T20:58:18Z",
      "updated_at": "2024-05-23T20:58:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Your patch is much better, @theStack, thanks! It's simpler and doesn't need that weird `sleep`. Force-pushed your patch. If it passes CI, I think this is the way to go. I had tried something similar, but I didn't think to make the sending of that extra (smaller) transaction conditional based on available mempool space.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2128007110",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12915131016,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAMBzUKI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12915131016",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T20:58:19Z"
    },
    {
      "event": "subscribed",
      "id": 12915131038,
      "node_id": "SE_lADOABII585x_FI8zwAAAAMBzUKe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12915131038",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T20:58:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12928384748,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAMCl37s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12928384748",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1fcbebcae0e96bac7f09cf3a458a61552b5e489b",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/1fcbebcae0e96bac7f09cf3a458a61552b5e489b",
      "created_at": "2024-05-24T18:29:13Z"
    },
    {
      "event": "commented",
      "id": 2130140023,
      "node_id": "IC_kwDOABII585-91t3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2130140023",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-24T18:31:07Z",
      "updated_at": "2024-05-24T18:31:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "CI passed, thanks @theStack. I just force-pushed swapping of the two commits, the test commit has to be first for each commit to pass CI.",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2130140023",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "mentioned",
      "id": 12928401487,
      "node_id": "MEE_lADOABII585x_FI8zwAAAAMCl8BP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12928401487",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-24T18:31:08Z"
    },
    {
      "event": "subscribed",
      "id": 12928401511,
      "node_id": "SE_lADOABII585x_FI8zwAAAAMCl8Bn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12928401511",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-24T18:31:08Z"
    },
    {
      "event": "labeled",
      "id": 14227717177,
      "node_id": "LE_lADOABII585x_FI8zwAAAANQCbw5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14227717177",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T07:11:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 14263049105,
      "node_id": "UNLE_lADOABII585x_FI8zwAAAANSJNuR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14263049105",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-15T12:36:11Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 14659204180,
      "node_id": "RRE_lADOABII585x_FI8zwAAAANpwbRU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14659204180",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T14:54:33Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 16754287771,
      "node_id": "LE_lADOABII585x_FI8zwAAAAPmoiSb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16754287771",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-14T03:23:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2726462754,
      "node_id": "IC_kwDOABII586igoUi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2726462754",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-15T11:33:58Z",
      "updated_at": "2025-03-15T11:33:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Needs rebase, if still relevant",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#issuecomment-2726462754",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28531"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16815601653,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPqSbf1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16815601653",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "created_at": "2025-03-17T22:40:17Z"
    },
    {
      "event": "reviewed",
      "id": 2697432959,
      "node_id": "PRR_kwDOABII586gx49_",
      "url": null,
      "actor": null,
      "commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#pullrequestreview-2697432959",
      "submitted_at": "2025-03-19T08:37:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
    },
    {
      "event": "reviewed",
      "id": 2697495377,
      "node_id": "PRR_kwDOABII586gyINR",
      "url": null,
      "actor": null,
      "commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I think this is an important change, ~I'm running a full `reindex-chainstate` to check for any noticeable behavior changes~.\r\n\r\nI left a few recommendations:\r\n```patch\r\ndiff --git a/src/memusage.h b/src/memusage.h\r\nindex 501f7068ca..5855e9d18b 100644\r\n--- a/src/memusage.h\r\n+++ b/src/memusage.h\r\n@@ -24,9 +24,6 @@\r\n namespace memusage\r\n {\r\n \r\n-/** Compute the total memory used by allocating alloc bytes. */\r\n-static size_t MallocUsage(size_t alloc);\r\n-\r\n /** Dynamic memory usage for built-in types is zero. */\r\n static inline size_t DynamicUsage(const int8_t& v) { return 0; }\r\n static inline size_t DynamicUsage(const uint8_t& v) { return 0; }\r\n@@ -48,7 +45,7 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\r\n  *  application data structures require more accurate inner accounting, they should\r\n  *  iterate themselves, or use more efficient caching + updating on modification.\r\n  */\r\n-static inline size_t MallocUsage(size_t alloc)\r\n+static constexpr size_t MallocUsage(size_t alloc)\r\n {\r\n     // There are few if any actual zero-length allocations; when\r\n     // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\r\n@@ -59,20 +56,16 @@ static inline size_t MallocUsage(size_t alloc)\r\n     // library-dependent.\r\n     if (alloc == 0) return 0;\r\n \r\n-    static constexpr size_t overhead = sizeof(void*);\r\n-#if defined(__arm__)\r\n-    // tested with ARM 32bit\r\n-    static constexpr size_t step = sizeof(void*) * 2;\r\n-    static constexpr size_t min_alloc = 9;\r\n+#if defined(__arm__) || SIZE_MAX == UINT64_MAX\r\n+    constexpr size_t min_alloc{9};\r\n #else\r\n-    static constexpr size_t step = 16U;\r\n-    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\r\n+    constexpr size_t min_alloc{0};\r\n #endif\r\n-    // step should be nonzero and a power of 2\r\n-    static_assert(step > 0);\r\n-    static_assert((step & (step-1)) == 0);\r\n-    // tested with Linux glibc 2.31 and 2.38, 32bit and 64bit\r\n-    return (std::max(min_alloc, alloc) + overhead + (step - 1)) & ~(step - 1);\r\n+    constexpr size_t overhead{sizeof(size_t)};\r\n+    constexpr size_t step{alignof(std::max_align_t)};\r\n+    static_assert(std::has_single_bit(step));\r\n+\r\n+    return (std::max(min_alloc, alloc) + overhead + (step - 1)) & -step;\r\n }\r\n \r\n // STL data structures\r\ndiff --git a/src/test/mempool_tests.cpp b/src/test/mempool_tests.cpp\r\nindex f0094dce59..9e9ae4d73c 100644\r\n--- a/src/test/mempool_tests.cpp\r\n+++ b/src/test/mempool_tests.cpp\r\n@@ -804,4 +804,13 @@ BOOST_AUTO_TEST_CASE(MempoolAncestryTestsDiamond)\r\n     BOOST_CHECK_EQUAL(descendants, 4ULL);\r\n }\r\n \r\n+BOOST_AUTO_TEST_CASE(BitwiseStepSimplificationTest)\r\n+{\r\n+    for (uint64_t step{1}; step != 0; step <<= 1) {\r\n+        std::cout << step << std::endl;\r\n+        BOOST_CHECK(std::has_single_bit(step));\r\n+        BOOST_CHECK_EQUAL((~(step - 1)), -step);\r\n+    }\r\n+}\r\n+\r\n BOOST_AUTO_TEST_SUITE_END()\r\n```\r\n\r\nthe updated https://godbolt.org/z/45EnoP16T shows that the output is the same as currently",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#pullrequestreview-2697495377",
      "submitted_at": "2025-03-19T11:06:44Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
    },
    {
      "event": "reviewed",
      "id": 2698031897,
      "node_id": "PRR_kwDOABII586g0LMZ",
      "url": null,
      "actor": null,
      "commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Some of the usages seem to contain some magical values, tailored to the previous behavior:\r\n* https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L1066\r\n* https://github.com/bitcoin/bitcoin/blob/master/src/test/disconnected_transactions.cpp#L39-L43\r\n\r\nDo any of them need adjustments now?\r\n\r\nEdit: finished reindexing, it doesn't seem to result in any performance regression or speedup\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```\r\nCOMMITS=\"3171d7465c237cb752eb500285b272f00027d97d 7ff32e40735c3379da4a14fca1af029d67d43488\"; \\\r\nSTOP_HEIGHT=888000; DBCACHE=5000; \\\r\nC_COMPILER=gcc; CXX_COMPILER=g++; \\\r\ngit fetch -aq && (for c in $COMMITS; do git log -1 --oneline $c || exit 1; done) && \\\r\nhyperfine \\\r\n  --export-json \"/mnt/my_storage/rdx-${COMMITS// /-}-${STOP_HEIGHT}-${DBCACHE}-${C_COMPILER}.json\" \\\r\n  --runs 1 \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind || true; rm -f /mnt/my_storage/BitcoinData/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF -DCMAKE_C_COMPILER=$C_COMPILER -DCMAKE_CXX_COMPILER=$CXX_COMPILER && cmake --build build -j$(nproc) --target bitcoind && ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=$STOP_HEIGHT -dbcache=10000 -printtoconsole=0 || true\" \\\r\n  --cleanup \"cp /mnt/my_storage/BitcoinData/debug.log /mnt/my_storage/logs/debug-{COMMIT}-$(date +%s).log || true\" \\\r\n  \"COMPILER=$C_COMPILER COMMIT={COMMIT} ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\"\r\n\r\n3171d7465c test: ensure that `fill_mempool` leaves some room in mempool\r\n7ff32e4073 Test fix\r\n\r\nBenchmark 1: COMPILER=gcc COMMIT=3171d7465c237cb752eb500285b272f00027d97d ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888000 -dbcache=5000 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\r\n  Time (abs â‰¡):        13876.186 s               [User: 17593.222 s, System: 731.343 s]\r\n \r\nBenchmark 2: COMPILER=gcc COMMIT=7ff32e40735c3379da4a14fca1af029d67d43488 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888000 -dbcache=5000 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\r\n  Time (abs â‰¡):        13912.878 s               [User: 17549.791 s, System: 709.007 s]\r\n \r\nSummary\r\n  COMPILER=gcc COMMIT=3171d7465c237cb752eb500285b272f00027d97d ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888000 -dbcache=5000 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 ran\r\n    1.00 times faster than COMPILER=gcc COMMIT=7ff32e40735c3379da4a14fca1af029d67d43488 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888000 -dbcache=5000 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\r\n```\r\n\r\n</details>",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#pullrequestreview-2698031897",
      "submitted_at": "2025-03-19T12:05:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
    },
    {
      "event": "reviewed",
      "id": 2699829126,
      "node_id": "PRR_kwDOABII586g7B-G",
      "url": null,
      "actor": null,
      "commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "@l0rinc - thank you for the excellent review and great suggestions. I especially like making `MallocUsage()` a `constexpr` function.\r\n\r\nI'll force-push a commit taking all of them except moving the first (test-only) commit (I left a comment explaining my reasoning).",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#pullrequestreview-2699829126",
      "submitted_at": "2025-03-19T20:24:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16878571164,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPuCo6c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16878571164",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d4b18c5f12ed054847c5a53800fd2b8fabf98c3f",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/d4b18c5f12ed054847c5a53800fd2b8fabf98c3f",
      "created_at": "2025-03-19T20:24:59Z"
    },
    {
      "event": "reviewed",
      "id": 2700144694,
      "node_id": "PRR_kwDOABII586g8PA2",
      "url": null,
      "actor": null,
      "commit_id": "d4b18c5f12ed054847c5a53800fd2b8fabf98c3f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#pullrequestreview-2700144694",
      "submitted_at": "2025-03-19T20:40:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16881961584,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPuPkpw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16881961584",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "52a313f4f21496b8af5e5c49c86e280b2d984d5d",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/52a313f4f21496b8af5e5c49c86e280b2d984d5d",
      "created_at": "2025-03-19T22:34:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16922214568,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPwpICo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16922214568",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "85c7ef3708ba8d0657b5cf557cb86fdcf4249974",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/85c7ef3708ba8d0657b5cf557cb86fdcf4249974",
      "created_at": "2025-03-21T05:41:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16934158920,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPxWsJI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16934158920",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f39bafba87d0b25546ee5ef4a865c0114fd6a068",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/f39bafba87d0b25546ee5ef4a865c0114fd6a068",
      "created_at": "2025-03-21T19:19:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16934605826,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPxYZQC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16934605826",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "dff45f2b6629122748c90b1a58949116e72b6155",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/dff45f2b6629122748c90b1a58949116e72b6155",
      "created_at": "2025-03-21T19:55:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16936048410,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPxd5ca",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16936048410",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e4201a2c370888d5148b720de3547c8e631a68d3",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/e4201a2c370888d5148b720de3547c8e631a68d3",
      "created_at": "2025-03-21T21:56:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16939301742,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPxqTtu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16939301742",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7f77c2c489a68e497d3be7bb8273287bee54a059",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/7f77c2c489a68e497d3be7bb8273287bee54a059",
      "created_at": "2025-03-22T06:44:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16940542403,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPxvCnD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16940542403",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3a7b60e3cfd6298f97773359fd9f0728ded18d86",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/3a7b60e3cfd6298f97773359fd9f0728ded18d86",
      "created_at": "2025-03-22T14:52:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16961804967,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPzAJqn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16961804967",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7ff38be949414e60db5d56d07881a9ad5e01aec0",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/7ff38be949414e60db5d56d07881a9ad5e01aec0",
      "created_at": "2025-03-24T19:21:46Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16963778718,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAPzHrie",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16963778718",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0fe6923784d5a61dea70faf6fc39640ffb6db4c1",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/0fe6923784d5a61dea70faf6fc39640ffb6db4c1",
      "created_at": "2025-03-24T22:00:16Z"
    },
    {
      "event": "unlabeled",
      "id": 16964813410,
      "node_id": "UNLE_lADOABII585x_FI8zwAAAAPzLoJi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16964813410",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-25T00:05:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16998635506,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAP1Mpfy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16998635506",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6fca5e200f2b15c4b015674b15b0189c02f42e66",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/6fca5e200f2b15c4b015674b15b0189c02f42e66",
      "created_at": "2025-03-26T19:06:51Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16999939913,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAP1Rn9J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16999939913",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "440e40155a874e835fc33d91bfb289eb4e722f27",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/440e40155a874e835fc33d91bfb289eb4e722f27",
      "created_at": "2025-03-26T20:45:09Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE2ZjUwZTc5MWU5YzQ3YTBlM2I3YTE0OWRjZGQ5NDI0ZGFhODhjZDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1",
      "tree": {
        "sha": "dd46da2a882dc7ab2568769d4e4ec681f89ec829",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd46da2a882dc7ab2568769d4e4ec681f89ec829"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/257fd27e4bb7dfd71e5f9f4dd2db34ff5a7ad957",
          "sha": "257fd27e4bb7dfd71e5f9f4dd2db34ff5a7ad957",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/257fd27e4bb7dfd71e5f9f4dd2db34ff5a7ad957"
        }
      ],
      "message": "test: ensure that `fill_mempool` leaves some room in mempool\n\nWithout this change, fill_mempool() may leave the mempool very close\nto its memory size limit (-maxmempool). This can cause tests to\nincorrectly fail when they submit another transaction expecting it\nto succeed. Note that without this change, the same test that fails on\none platform may succeed on another, because their memory allocation\naccounting algorithms (how they calculate memory usage, that is,\nMallocUsage()) may be slightly different.",
      "committer": {
        "name": "Larry Ruane",
        "email": "larryruane@gmail.com",
        "date": "2025-03-27T18:16:04Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2024-05-22T23:29:08Z"
      },
      "sha": "a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzODliZDgzNTg4Mjg4MzZhYTU4YmVkNGNhNjcwNzYzMDZlNDI3OWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f389bd8358828836aa58bed4ca67076306e4279b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f389bd8358828836aa58bed4ca67076306e4279b",
      "tree": {
        "sha": "04b7d8a4bcbdffdd717834de82879a33d3a61b56",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04b7d8a4bcbdffdd717834de82879a33d3a61b56"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1",
          "sha": "a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a6f50e791e9c47a0e3b7a149dcdd9424daa88cd1"
        }
      ],
      "message": "test: fill_mempool() should call sync_mempools() before returning\n\nWe saw a case where a test (p2p_1p1c_network.py) called\nraise_network_minfee(), which called fill_mempool() using node 0.\n\nThen raise_network_minfee() returned, and the test called rescan_utxos(),\nwhich called getrawmempool() using a different node (node 1) followed by\ngetrawtransaction() on each returned transaction, and the test asserted\nbecause a transaction was not found.\n\nThis was caused by the timing window between the call to getrawmempool()\nand fetching the individual transactions; the transactions were still\nbeing propagated on the P2P network. During this window, a transaction\n(returned by getrawmempool()) was evicted (the mempool is close to full\nduring this test), and did not exist in the mempool by the time it was\nattempted to be fetched.\n\nIt might make more sense for rescan_utxos() to call sync_mempools() just\nbefore calling getrawmempool(), but it can't because rescan_utxos() is\npart of the MiniWallet class, which doesn't have access to test_framework\n(but that could probably be changed).",
      "committer": {
        "name": "Larry Ruane",
        "email": "larryruane@gmail.com",
        "date": "2025-03-27T19:47:41Z"
      },
      "author": {
        "name": "Larry Ruane",
        "email": "larryruane@gmail.com",
        "date": "2025-03-27T19:23:25Z"
      },
      "sha": "f389bd8358828836aa58bed4ca67076306e4279b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc3ZWJhZDk2NTFjZDkxMzhjZjM4NWM4NDQwMmZkNjA0MmRiODUzNmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77ebad9651cd9138cf385c84402fd6042db8536e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/77ebad9651cd9138cf385c84402fd6042db8536e",
      "tree": {
        "sha": "9d10b35974950613eae66824180f69190ba71d35",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9d10b35974950613eae66824180f69190ba71d35"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f389bd8358828836aa58bed4ca67076306e4279b",
          "sha": "f389bd8358828836aa58bed4ca67076306e4279b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f389bd8358828836aa58bed4ca67076306e4279b"
        }
      ],
      "message": "improve MallocUsage() accuracy\n\nCo-authored-by: Pieter Wuille <pieter@wuille.net>\nCo-authored-by: Martin Leitner-Ankerl <martin.ankerl@gmail.com>\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Larry Ruane",
        "email": "larryruane@gmail.com",
        "date": "2025-03-27T19:51:06Z"
      },
      "author": {
        "name": "Larry Ruane",
        "email": "larryruane@gmail.com",
        "date": "2023-09-25T20:14:39Z"
      },
      "sha": "77ebad9651cd9138cf385c84402fd6042db8536e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17021161796,
      "node_id": "HRFPE_lADOABII585x_FI8zwAAAAP2ilFE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17021161796",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "commit_url": "https://api.github.com/repos/LarryRuane/bitcoin/commits/77ebad9651cd9138cf385c84402fd6042db8536e",
      "created_at": "2025-03-27T19:54:10Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002746377",
      "pull_request_review_id": 2697432959,
      "id": 2002746377,
      "node_id": "PRRC_kwDOABII5853X3wJ",
      "diff_hunk": "@@ -92,6 +93,14 @@ def send_batch(fee):\n         send_batch(fee)\n     tx_sync_fun() if tx_sync_fun else test_framework.sync_mempools()  # sync after all evictions\n \n+    # if mempool is almost full (<10k usage bytes left), submit one extra middle-sized tx,\n+    # in order to evict a large filler tx and leave some room; this will enable tests to submit\n+    # txs with just the mempoolminfee without immediate eviction (\"mempool full\" error)\n+    if node.getmempoolinfo()['usage'] >= 4_990_000:\n+        ephemeral_miniwallet.send_self_transfer(from_node=node, fee=num_of_batches * (base_fee / 2),\n+                                                utxo_to_spend=confirmed_utxos.pop(0), target_weight = 32500 * 4)",
      "path": "test/functional/test_framework/mempool_util.py",
      "position": null,
      "original_position": 30,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "After https://github.com/bitcoin/bitcoin/pull/30718 this should likely be:\r\n```suggestion\r\n                                                utxo_to_spend=confirmed_utxos.pop(0), target_vsize=32500)\r\n```",
      "created_at": "2025-03-19T08:37:37Z",
      "updated_at": "2025-03-19T08:37:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002746377",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002746377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002868062",
      "pull_request_review_id": 2697495377,
      "id": 2002868062,
      "node_id": "PRRC_kwDOABII5853YVde",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 5,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "'inline' may be redundant on a global static function, but we should be able to make it `constexpr` regardless:\r\n```suggestion\r\nstatic constexpr size_t MallocUsage(size_t alloc)\r\n...\r\n    constexpr size_t overhead{sizeof(size_t)};\r\n```",
      "created_at": "2025-03-19T09:27:46Z",
      "updated_at": "2025-03-19T11:50:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002868062",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002868062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002883412",
      "pull_request_review_id": 2697495377,
      "id": 2002883412,
      "node_id": "PRRC_kwDOABII5853YZNU",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;\n+    static constexpr size_t min_alloc = 9;\n+#else\n+    static constexpr size_t step = 16U;\n+    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\n+#endif\n+    // step should be nonzero and a power of 2\n+    static_assert(step > 0);\n+    static_assert((step & (step-1)) == 0);",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 37,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "we could use the C++20 https://en.cppreference.com/w/cpp/numeric/has_single_bit here:\r\n```suggestion\r\n    static_assert(std::has_single_bit(step));\r\n```",
      "created_at": "2025-03-19T09:35:22Z",
      "updated_at": "2025-03-19T11:06:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002883412",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002883412"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002916382",
      "pull_request_review_id": 2697495377,
      "id": 2002916382,
      "node_id": "PRRC_kwDOABII5853YhQe",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;\n+    static constexpr size_t min_alloc = 9;\n+#else\n+    static constexpr size_t step = 16U;\n+    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\n+#endif\n+    // step should be nonzero and a power of 2\n+    static_assert(step > 0);\n+    static_assert((step & (step-1)) == 0);\n+    // tested with Linux glibc 2.31 and 2.38, 32bit and 64bit\n+    return (std::max(min_alloc, alloc) + overhead + (step - 1)) & ~(step - 1);",
      "path": "src/memusage.h",
      "position": 40,
      "original_position": 39,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Since `step` is guaranteed to be a power of 2, the expression `~(step - 1)` simplifies to `-step`.\r\n\r\n<details>\r\n<summary>Reproducer</summary>\r\n\r\n```C++\r\nBOOST_AUTO_TEST_CASE(BitwiseStepSimplificationTest)\r\n{\r\n    for (uint64_t step{1}; step != 0; step <<= 1) {\r\n        std::cout << step << std::endl;\r\n        BOOST_CHECK(std::has_single_bit(step));\r\n        BOOST_CHECK_EQUAL((~(step - 1)), -step);\r\n    }\r\n}\r\n```\r\n\r\n</details>\r\n\r\nso we should be able to write:\r\n```suggestion\r\n    return (std::max(min_alloc, alloc) + overhead + (step - 1)) & -step;\r\n```",
      "created_at": "2025-03-19T09:50:40Z",
      "updated_at": "2025-03-19T11:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002916382",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002916382"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 62,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002955096",
      "pull_request_review_id": 2697495377,
      "id": 2002955096,
      "node_id": "PRRC_kwDOABII5853YqtY",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;\n+    static constexpr size_t min_alloc = 9;\n+#else\n+    static constexpr size_t step = 16U;\n+    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\n+#endif",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 34,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm not exactly sure how we got to the `min_alloc` of `9` on these platforms, but we can probably simplify the platform dependent code to:\r\n```C++\r\n#if defined(__arm__) || SIZE_MAX == UINT64_MAX\r\n    constexpr size_t min_alloc{9};\r\n#else\r\n    constexpr size_t min_alloc{0};\r\n#endif\r\n```",
      "created_at": "2025-03-19T10:11:18Z",
      "updated_at": "2025-03-19T11:06:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002955096",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002955096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": 63,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002984240",
      "pull_request_review_id": 2697495377,
      "id": 2002984240,
      "node_id": "PRRC_kwDOABII5853Yx0w",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;\n+    static constexpr size_t min_alloc = 9;\n+#else\n+    static constexpr size_t step = 16U;\n+    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\n+#endif\n+    // step should be nonzero and a power of 2\n+    static_assert(step > 0);",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 36,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "what's the purpose of checking positivity for a `size_t` value? Is this some weird compiler trick or a refactoring leftover? Or if it's purpose is to check the two instantiations have the same type, we could rather create a boolean with the necessary conditions and use that to initialize `step` once.",
      "created_at": "2025-03-19T10:27:12Z",
      "updated_at": "2025-03-19T12:04:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002984240",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002984240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002988544",
      "pull_request_review_id": 2697495377,
      "id": 2002988544,
      "node_id": "PRRC_kwDOABII5853Yy4A",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 29,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`step` is basically the `alignment`, right?\r\nWe could probably do it in a platform-independent way (and get rid of `static_assert(step > 0);` while we're here):\r\n```C++\r\nconstexpr size_t alignment{alignof(std::max_align_t)};\r\n```\r\n",
      "created_at": "2025-03-19T10:29:33Z",
      "updated_at": "2025-03-19T11:06:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2002988544",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2002988544"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003031317",
      "pull_request_review_id": 2697495377,
      "id": 2003031317,
      "node_id": "PRRC_kwDOABII5853Y9UV",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;",
      "path": "src/memusage.h",
      "position": 28,
      "original_position": 24,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Adding the current implementation to the reproducer of @martinus shows this is a behavior change compared to his version - https://godbolt.org/z/cPWz6YnWd\r\n```bash\r\n0: actual=16, estimate=0\r\n```",
      "created_at": "2025-03-19T10:50:51Z",
      "updated_at": "2025-03-19T11:06:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2003031317",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003031317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003067985",
      "pull_request_review_id": 2697495377,
      "id": 2003067985,
      "node_id": "PRRC_kwDOABII5853ZGRR",
      "diff_hunk": "@@ -177,11 +189,16 @@ static inline size_t DynamicUsage(const std::list<X>& l)\n     return MallocUsage(sizeof(list_node<X>)) * l.size();\n }\n \n+// struct unordered_node adds the container overhead to the given structure X,\n+// although this varies across library container implementations (platforms).\n+// It is believed that some containers use two pointers per node, so this",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 49,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "can we add some references to avoid having to rely on beliefs?",
      "created_at": "2025-03-19T11:03:32Z",
      "updated_at": "2025-03-19T11:06:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2003067985",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003067985"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 194,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003099949",
      "pull_request_review_id": 2698031897,
      "id": 2003099949,
      "node_id": "PRRC_kwDOABII5853ZOEt",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 28,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`__arm__` only applies to [32 bits](https://stackoverflow.com/a/41666292), no need for the comments (I'd prefer having them in the commit messages). Before merging we have to make sure we're not just testing ARM on 32 bits",
      "created_at": "2025-03-19T11:20:04Z",
      "updated_at": "2025-03-19T12:05:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2003099949",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003099949"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003105459",
      "pull_request_review_id": 2698031897,
      "id": 2003105459,
      "node_id": "PRRC_kwDOABII5853ZPaz",
      "diff_hunk": "@@ -92,6 +93,14 @@ def send_batch(fee):\n         send_batch(fee)\n     tx_sync_fun() if tx_sync_fun else test_framework.sync_mempools()  # sync after all evictions\n \n+    # if mempool is almost full (<10k usage bytes left), submit one extra middle-sized tx,\n+    # in order to evict a large filler tx and leave some room; this will enable tests to submit\n+    # txs with just the mempoolminfee without immediate eviction (\"mempool full\" error)\n+    if node.getmempoolinfo()['usage'] >= 4_990_000:",
      "path": "test/functional/test_framework/mempool_util.py",
      "position": 28,
      "original_position": 28,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "18a2bd4b041c7d8995c08ce62876a290d66919ea",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I see you've put the test before the fix after the recent rebase - but it never enters this condition before the fix, so basically dead code was added.\r\n```C++\r\n    if node.getmempoolinfo()['usage'] >= 4_990_000:\r\n        raise \"\"\r\n```\r\n\r\nCould we either make sure we enter, and update it in the next commit  accordingly, or add it after the fix commit?\r\nAlso, the commit message claims that \"fill mempool leaves room\" - I think this needs some explanation.",
      "created_at": "2025-03-19T11:23:53Z",
      "updated_at": "2025-03-19T12:16:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2003105459",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003105459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 99,
      "original_line": 99,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003144710",
      "pull_request_review_id": 2698031897,
      "id": 2003144710,
      "node_id": "PRRC_kwDOABII5853ZZAG",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 26,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If it's simpler, we might as well use the size of `size_t` here: https://github.com/bitcoin/bitcoin/blob/master/src/compat/assumptions.h#L37",
      "created_at": "2025-03-19T11:49:22Z",
      "updated_at": "2025-03-19T12:06:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2003144710",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2003144710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004100921",
      "pull_request_review_id": 2699829126,
      "id": 2004100921,
      "node_id": "PRRC_kwDOABII5853dCc5",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;\n+    static constexpr size_t min_alloc = 9;\n+#else\n+    static constexpr size_t step = 16U;\n+    static constexpr size_t min_alloc = sizeof(void*) == 8 ? 9 : 0;\n+#endif\n+    // step should be nonzero and a power of 2\n+    static_assert(step > 0);",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 36,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": 2002984240,
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I wrote this because the following line (`static_assert((step & (step-1)) == 0)`) doesn't actually assert that `step` has a single bit set (which is what I wanted to check); it also succeeds if `step` is zero. But using `std::has_single_bit()` is better, so we can remove `static_assert(step > 0)`, good catch.",
      "created_at": "2025-03-19T19:08:01Z",
      "updated_at": "2025-03-19T20:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004100921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004100921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004163332",
      "pull_request_review_id": 2699829126,
      "id": 2004163332,
      "node_id": "PRRC_kwDOABII5853dRsE",
      "diff_hunk": "@@ -177,11 +189,16 @@ static inline size_t DynamicUsage(const std::list<X>& l)\n     return MallocUsage(sizeof(list_node<X>)) * l.size();\n }\n \n+// struct unordered_node adds the container overhead to the given structure X,\n+// although this varies across library container implementations (platforms).\n+// It is believed that some containers use two pointers per node, so this",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 49,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": 2003067985,
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good point, I am going to back this change out until we see evidence for needing it. I think I \"deduced\" this based on macOS CI failing while the others were passing. But it's been too long. \r\n\r\nJust now, after searching for a while with no luck, I asked X's Grok (I know, we shouldn't trust it too much), and it said LLVM's implementation of `std::unordered_map` that the node includes a next pointer but no previous pointer. You can indeed see that in the source code: https://github.com/llvm/llvm-project/blob/main/libcxx/include/__hash_table#L95",
      "created_at": "2025-03-19T19:42:12Z",
      "updated_at": "2025-03-19T20:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004163332",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004163332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 194,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004197157",
      "pull_request_review_id": 2699829126,
      "id": 2004197157,
      "node_id": "PRRC_kwDOABII5853dZ8l",
      "diff_hunk": "@@ -92,6 +93,14 @@ def send_batch(fee):\n         send_batch(fee)\n     tx_sync_fun() if tx_sync_fun else test_framework.sync_mempools()  # sync after all evictions\n \n+    # if mempool is almost full (<10k usage bytes left), submit one extra middle-sized tx,\n+    # in order to evict a large filler tx and leave some room; this will enable tests to submit\n+    # txs with just the mempoolminfee without immediate eviction (\"mempool full\" error)\n+    if node.getmempoolinfo()['usage'] >= 4_990_000:",
      "path": "test/functional/test_framework/mempool_util.py",
      "position": 28,
      "original_position": 28,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "18a2bd4b041c7d8995c08ce62876a290d66919ea",
      "in_reply_to_id": 2003105459,
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it's okay that it's initially dead code because it makes the test less fragile in general. In theory, a different project could cherry-pick just this test-only commit, and later make some other changes that would have caused this test to break (when it's really a false-positive failure), but because of taking this commit, that doesn't happen (the test continues to pass). Or, a similar way to think of it is, the test could have been written this way to begin with (and that would not have seemed strange). But I don't feel strongly about, I can make that change if you'd like.\r\n\r\nI'll update the commit comment, good catch.",
      "created_at": "2025-03-19T20:04:30Z",
      "updated_at": "2025-03-19T20:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004197157",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004197157"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 99,
      "original_line": 99,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004255350",
      "pull_request_review_id": 2700131619,
      "id": 2004255350,
      "node_id": "PRRC_kwDOABII5853doJ2",
      "diff_hunk": "@@ -92,6 +93,14 @@ def send_batch(fee):\n         send_batch(fee)\n     tx_sync_fun() if tx_sync_fun else test_framework.sync_mempools()  # sync after all evictions\n \n+    # if mempool is almost full (<10k usage bytes left), submit one extra middle-sized tx,\n+    # in order to evict a large filler tx and leave some room; this will enable tests to submit\n+    # txs with just the mempoolminfee without immediate eviction (\"mempool full\" error)\n+    if node.getmempoolinfo()['usage'] >= 4_990_000:",
      "path": "test/functional/test_framework/mempool_util.py",
      "position": 28,
      "original_position": 28,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "18a2bd4b041c7d8995c08ce62876a290d66919ea",
      "in_reply_to_id": 2003105459,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I would like to avoid having a false sense of security by putting this before the fix, which usually indicates that the desired behavior is reproduced and is retained after this fix - which isn't the case here exactly. And the dead code part also bothers me for a similar reason.",
      "created_at": "2025-03-19T20:36:35Z",
      "updated_at": "2025-03-19T20:36:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004255350",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004255350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 99,
      "original_line": 99,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004259676",
      "pull_request_review_id": 2700140886,
      "id": 2004259676,
      "node_id": "PRRC_kwDOABII5853dpNc",
      "diff_hunk": "@@ -48,19 +48,31 @@ template<typename X> static inline size_t DynamicUsage(const X * const &v) { ret\n  *  application data structures require more accurate inner accounting, they should\n  *  iterate themselves, or use more efficient caching + updating on modification.\n  */\n-\n static inline size_t MallocUsage(size_t alloc)\n {\n-    // Measured on libc6 2.19 on Linux.\n-    if (alloc == 0) {\n-        return 0;\n-    } else if (sizeof(void*) == 8) {\n-        return ((alloc + 31) >> 4) << 4;\n-    } else if (sizeof(void*) == 4) {\n-        return ((alloc + 15) >> 3) << 3;\n-    } else {\n-        assert(0);\n-    }\n+    // There are few if any actual zero-length allocations; when\n+    // DynamicUsage(std::vector<X>& v) calls this function, and v.capacity() == 0,\n+    // for example, there has not been a zero-byte allocation (which would require\n+    // some physical space). std::vector has optimized this case. Experimental\n+    // evidence indicates the same is true of other data structures -- there are\n+    // no actual zero-length allocations observed, although of course this is\n+    // library-dependent.\n+    if (alloc == 0) return 0;\n+\n+    static constexpr size_t overhead = sizeof(void*);\n+#if defined(__arm__)\n+    // tested with ARM 32bit\n+    static constexpr size_t step = sizeof(void*) * 2;",
      "path": "src/memusage.h",
      "position": null,
      "original_position": 29,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "28dc1056263aadf84046b4112f5c61bbd7a6a15e",
      "in_reply_to_id": 2002988544,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I forgot to include this in the full patch, my bad",
      "created_at": "2025-03-19T20:39:43Z",
      "updated_at": "2025-03-19T20:39:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004259676",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004259676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004261310",
      "pull_request_review_id": 2700144694,
      "id": 2004261310,
      "node_id": "PRRC_kwDOABII5853dpm-",
      "diff_hunk": "@@ -804,4 +804,13 @@ BOOST_AUTO_TEST_CASE(MempoolAncestryTestsDiamond)\n     BOOST_CHECK_EQUAL(descendants, 4ULL);\n }\n \n+BOOST_AUTO_TEST_CASE(BitwiseStepSimplificationTest)\n+{\n+    for (uint64_t step{1}; step != 0; step <<= 1) {\n+        std::cout << step << std::endl;",
      "path": "src/test/mempool_tests.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "77ebad9651cd9138cf385c84402fd6042db8536e",
      "original_commit_id": "d4b18c5f12ed054847c5a53800fd2b8fabf98c3f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "if you decide to keep this test (which was meant to demonstrate the safety of the change), please remove the logging part",
      "created_at": "2025-03-19T20:40:43Z",
      "updated_at": "2025-03-19T20:40:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28531#discussion_r2004261310",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2004261310"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 810,
      "side": "RIGHT"
    }
  ]
}