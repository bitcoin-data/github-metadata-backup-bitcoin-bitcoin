{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124",
    "id": 3119599294,
    "node_id": "PR_kwDOABII58658U6-",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34124",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34124.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34124.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
    "number": 34124,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: make `CCoinsView` a purely virtual abstract base class",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\n\r\nThis is part of ongoing coins caching cleanup efforts such as #34132, #33866, #33018, and #33512.\r\n\r\n### Fix\r\n\r\nThis PR makes `CCoinsView` a pure abstract interface and introduces an explicit noop implementation, in tiny incremental steps to ease review:\r\n\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and dummy backends\r\n* Replace all direct `CCoinsView` instantiations with `CCoinsViewEmpty`\r\n* Incrementally make all `CCoinsView` methods pure virtual (`GetCoin`, `GetBestBlock`, `BatchWrite`, `EstimateSize`, `Cursor`, `GetHeadBlocks`, `HaveCoin`)\r\n* Remove the legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real database-backed view and `CCoinsViewEmpty`\r\n",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2025-12-20T08:47:33Z",
    "updated_at": "2026-02-06T15:21:03Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "4c409ad17148ce09da4c375b8b67bb15a523350e",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/pure-virtual-CCoinsView",
      "ref": "l0rinc/pure-virtual-CCoinsView",
      "sha": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 283370,
        "default_branch": "master",
        "open_issues_count": 43,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-06T10:22:15Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2026-02-05T12:40:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "01651324f4e540f6b96cff31e89752c3f9417293",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38851,
        "stargazers_count": 87975,
        "watchers_count": 87975,
        "size": 303119,
        "default_branch": "master",
        "open_issues_count": 739,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-06T14:11:24Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-06T15:36:31Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 129,
    "deletions": 130,
    "changed_files": 19,
    "commits": 10,
    "review_comments": 46,
    "comments": 6
  },
  "events": [
    {
      "event": "labeled",
      "id": 21683616602,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUMcbta",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21683616602",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T08:47:37Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 3677609717,
      "node_id": "IC_kwDOABII587bM971",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3677609717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T08:47:41Z",
      "updated_at": "2026-02-05T00:19:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34124.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [andrewtoth](https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3678038276), [ajtowns](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3602578034), [sipa](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3618585105) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3690102337) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34320](https://github.com/bitcoin/bitcoin/pull/34320) (coins: remove redundant and confusing `CCoinsViewDB::HaveCoin` by l0rinc)\n* [#34165](https://github.com/bitcoin/bitcoin/pull/34165) (coins: don't mutate main cache when connecting block by andrewtoth)\n* [#34132](https://github.com/bitcoin/bitcoin/pull/34132) (coins: fail fast on database read deserialization errors by l0rinc)\n* [#33512](https://github.com/bitcoin/bitcoin/pull/33512) (coins: use number of dirty cache entries in flush warnings/logs by l0rinc)\n* [#31132](https://github.com/bitcoin/bitcoin/pull/31132) (validation: fetch block inputs on parallel threads 3x faster IBD by andrewtoth)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#29060](https://github.com/bitcoin/bitcoin/pull/29060) (Policy: Report debug message why inputs are non standard by ismaelsadeeq)\n* [#27865](https://github.com/bitcoin/bitcoin/pull/27865) (wallet: Track no-longer-spendable TXOs separately by achow101)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3677609717",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "commented",
      "id": 3678038276,
      "node_id": "IC_kwDOABII587bOmkE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3678038276",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T19:02:06Z",
      "updated_at": "2025-12-20T19:02:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\n\nMakes sense to make an empty view explicit, and having the base class be purely virtual.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3678038276",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "renamed",
      "id": 21686184225,
      "node_id": "RTE_lADOABII587fgV9xzwAAAAUMmOkh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21686184225",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T19:16:47Z",
      "rename": {
        "from": "refactor: make `CCoinsView` a purely abstract base class",
        "to": "refactor: make `CCoinsView` a purely virtual abstract base class"
      }
    },
    {
      "event": "reviewed",
      "id": 3602578034,
      "node_id": "PRR_kwDOABII587Wuvpy",
      "url": null,
      "actor": null,
      "commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-22T04:23:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, this seemed better separated as an interface and a dummy implementation to me too.\r\n\r\nI think squashing all the commits after the first into a single commit would be better though.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3602578034",
      "submitted_at": "2025-12-22T04:23:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21713218511,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUONWvP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21713218511",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "created_at": "2025-12-22T21:19:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21769399409,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAURjqxx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21769399409",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/784769b5b1a8465d1a09ec489a303c4616d11896",
      "created_at": "2025-12-28T10:58:14Z"
    },
    {
      "event": "commented",
      "id": 3694658009,
      "node_id": "IC_kwDOABII587cOAHZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3694658009",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-28T11:04:11Z",
      "updated_at": "2025-12-28T11:04:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "This change also revealed a potential UB in `MemPoolAccept` member init order. Since class members are constructed in [declaration order](https://en.cppreference.com/w/cpp/language/initializer_list.html#Initialization_order) (not initializer-list order), calls to a virtual method (having `m_view` depend on `m_dummy` but declared before it) can result in a virtual call through an uninitialized vptr and crash.\r\nSince the constructor didn't dereference `m_dummy` during `m_view` construction, the latent ordering hazard stayed dormant. This cleanup accidentally fixed it, but to make it explicit, I have extracted it to the first commit as a temporary fix.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3694658009",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "reviewed",
      "id": 3614915324,
      "node_id": "PRR_kwDOABII587Xdzr8",
      "url": null,
      "actor": null,
      "commit_id": "436765c23a009c18a2a8e29e8b9534924e80d1d0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T01:33:36Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3614915324",
      "submitted_at": "2025-12-29T01:33:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3615075843,
      "node_id": "PRR_kwDOABII587Xea4D",
      "url": null,
      "actor": null,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T05:39:46Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3615075843",
      "submitted_at": "2025-12-29T05:39:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3615082648,
      "node_id": "PRR_kwDOABII587XeciY",
      "url": null,
      "actor": null,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T05:46:39Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3615082648",
      "submitted_at": "2025-12-29T05:46:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21783858694,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUSa04G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21783858694",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "created_at": "2025-12-29T20:21:41Z"
    },
    {
      "event": "reviewed",
      "id": 3618585105,
      "node_id": "PRR_kwDOABII587XrzoR",
      "url": null,
      "actor": null,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-30T16:21:26Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3618585105",
      "submitted_at": "2025-12-30T16:21:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21801346703,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUTdiaP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21801346703",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/b23d784b6baee140f75882fe009be5676db4cb0b",
      "created_at": "2025-12-30T23:14:12Z"
    },
    {
      "event": "reviewed",
      "id": 3622026233,
      "node_id": "PRR_kwDOABII587X47v5",
      "url": null,
      "actor": null,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-01T19:50:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3622026233",
      "submitted_at": "2026-01-01T19:50:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3622038231,
      "node_id": "PRR_kwDOABII587X4-rX",
      "url": null,
      "actor": null,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-01T20:27:10Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3622038231",
      "submitted_at": "2026-01-01T20:27:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21821003039,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUUohUf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21821003039",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "created_at": "2026-01-01T20:42:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21821305216,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUUprGA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21821305216",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e3d4435b94ff7a1153d06e3e6bb709431b18b76b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/e3d4435b94ff7a1153d06e3e6bb709431b18b76b",
      "created_at": "2026-01-01T21:36:41Z"
    },
    {
      "event": "labeled",
      "id": 21833960474,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUVZ8wa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21833960474",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T02:36:48Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21836035022,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUVh3PO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836035022",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d82eedd0a7510dce9b4b7135a7c5d1a7edc6678c",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d82eedd0a7510dce9b4b7135a7c5d1a7edc6678c",
      "created_at": "2026-01-03T13:19:01Z"
    },
    {
      "event": "commented",
      "id": 3707052652,
      "node_id": "IC_kwDOABII587c9SJs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707052652",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:21:29Z",
      "updated_at": "2026-01-03T13:31:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "A slightly more involved rebase after https://github.com/bitcoin/bitcoin/pull/33866.\r\nMost of the conflicts were around moving `BatchWrite` around.\r\nI have also separated the second commit into 3, to address reviewer feedback regarding cleaning up naming and formatting of affected methods. This way - after a boring refactor commit - the non-trivial follow-up commits are easier to review.\r\nCan be reviewed via `git range-diff -w -U0 master e3d4435 3b800c9`.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3707052652",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "unlabeled",
      "id": 21836047952,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAUVh6ZQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836047952",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:23:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21836071895,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUViAPX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836071895",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "created_at": "2026-01-03T13:30:42Z"
    },
    {
      "event": "labeled",
      "id": 21836073678,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUViArO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836073678",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:31:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3707057937,
      "node_id": "IC_kwDOABII587c9TcR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707057937",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:31:25Z",
      "updated_at": "2026-01-03T13:31:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `ASan + LSan + UBSan + integer`: https://github.com/bitcoin/bitcoin/actions/runs/20677817262/job/59367841784</sub>\n<sub>LLM reason ( experimental): Compiler error in fuzz/coins_view.cpp: attempted assignment with no viable overloaded operator=, causing the build to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3707057937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "unlabeled",
      "id": 21836690467,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAUVkXQj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836690467",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T16:03:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3690102337,
      "node_id": "PRR_kwDOABII587b8n5B",
      "url": null,
      "actor": null,
      "commit_id": "3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T00:52:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 3b800c9e939f3c8dcaef6537624033c5be01a64e\r\n\r\n1) Good separation between CCoinsView (interface), CCoinsViewEmpty (no-op), and CCoinsViewBacked (delegator).\r\n2) Test files are notably cleaner, removing the repetitive `CCoinsView coinsDummy; CCoinsViewCache coins(&coinsDummy);` pattern.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3690102337",
      "submitted_at": "2026-01-22T00:52:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "review_requested",
      "id": 22203154477,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154477",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:11Z",
      "requested_reviewer": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22203154708,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUEU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154708",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:13Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22203154921,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUHp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154921",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:14Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 22391501786,
      "node_id": "LE_lADOABII587fgV9xzwAAAAU2ozPa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22391501786",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T00:06:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22401094601,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAU3NZPJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22401094601",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "427cff7620246432cc57777ea43e86e9c5e9e680",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/427cff7620246432cc57777ea43e86e9c5e9e680",
      "created_at": "2026-01-30T08:41:23Z"
    },
    {
      "event": "unlabeled",
      "id": 22401402927,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAU3Okgv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22401402927",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T08:55:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22404364088,
      "node_id": "LE_lADOABII587fgV9xzwAAAAU3Z3c4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22404364088",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:00:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3823124049,
      "node_id": "IC_kwDOABII587j4D5R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3823124049",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:01:03Z",
      "updated_at": "2026-01-30T11:01:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `test max 6 ancestor commits`: https://github.com/bitcoin/bitcoin/actions/runs/21509735101/job/61973587699</sub>\n<sub>LLM reason ( experimental): CI failed because the git rebase could not continue: the index has uncommitted changes preventing merge/rebase.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3823124049",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRmNDQyNTA5NTVjNjQyOWEzMzgwMjdlMjYwNmM1YzMzYTQ3M2EzNjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f44250955c6429a338027e2606c5c33a473a366",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4f44250955c6429a338027e2606c5c33a473a366",
      "tree": {
        "sha": "07f4c72a22f034558b6f739190eb4f11803976af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/07f4c72a22f034558b6f739190eb4f11803976af"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 07f4c72a22f034558b6f739190eb4f11803976af\nparent 01651324f4e540f6b96cff31e89752c3f9417293\nauthor Lrinc <pap.lorinc@gmail.com> 1766917892 +0200\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770990 +0100\n\nvalidation: fix `MemPoolAccept` member init order\n\n`MemPoolAccept` constructs `m_view` with a backend pointer to a `CCoinsView`.\nSince class members are constructed in declaration order (not initializer-list order), calls to a virtual method (having `m_view` declared before `m_dummy`) can result in a virtual call through an uninitialized vptr and crash.\n\nAdd a small `CCoinsViewCache` constructor sanity check (`base->GetBestBlock()`) so uninitialized backends are caught immediately. This is meant to demonstrate a possible UB and will be removed in a follow-up commit after the field is initialized by a singleton instead.\n\nWithout the move:\n```\nThe following tests FAILED:\n        112 - txdownload_tests (SEGFAULT)\n        115 - txpackage_tests (SEGFAULT)\n        118 - txvalidation_tests (SEGFAULT)\n        119 - txvalidationcache_tests (SEGFAULT)\n        127 - validation_block_tests (SEGFAULT)\n        146 - wallet_tests (SEGFAULT)\n```\n\nMove `m_dummy` before `m_view` so it is constructed first.\nIn a follow-up `m_dummy` will be completely removed, this commit was meant to demonstrate why that was necessary.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+4ACgkQZp//D/pH\nenbHfw//QWQtxGFkW7sx/kv7AP74DPQVNBs0KRGSLcXjx66Agx0bNouh+mXFp0Np\ndR/XFTGkRjOUhgyaOlKSf3AXVAxWwocws9591ovbzPSPFCXqjA4KDkPaQvX3CMDl\n+wAFVQOiyEJmA1JR+sIfsAaI/brk8tQetYmeQOWJCMjch6WJ1GjjEqhIfUBhnXG/\nnrwZY51KI9Hflbwji1bud8SShuJeRS0SX0uyUtMmQAzv367I0H/KBzGjUeYAcRJh\n3aEbOb72vUqd8EpP1R6itxc9UkbMXItFuZYWtrDHFZW5T/sXvBLvazA9rYyyrwCx\nSe4ATVSAbiFZz6Qbhaf1mT5l2qG94tltoD1Pag3wKhvyjvXOH9zQ5hJS1xj80DDO\n9mF9UjwE6bAO2kb/e4owAcLDnkH5enCuHSejoz6ttc/pvSDrJYJVKzpBsRzDaQxs\noOvSbKV+kBKU+g9Fx+AIl3jGWdjA8b1kP+cwWR+2EPfGnqTnFH/r+Jng826Al3dl\nf4jlm5xp/x26KfaciSg5xUlwsB3onTCD2xYMesNRO4EYy9s3wXjIDIbiw0rwEYsc\nWxcbD2y8htX7nlQY9uEoC8UFNCgg2acLA4I/VY+B5t6WLG1aNkLNJKqMD6fR3Tcw\nVryi6PkwlOwzT96f2oxJXzC1zebsaAgPbPMp/JHT6pLFs9ZvVX0=\n=dM5+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01651324f4e540f6b96cff31e89752c3f9417293",
          "sha": "01651324f4e540f6b96cff31e89752c3f9417293",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/01651324f4e540f6b96cff31e89752c3f9417293"
        }
      ],
      "message": "validation: fix `MemPoolAccept` member init order\n\n`MemPoolAccept` constructs `m_view` with a backend pointer to a `CCoinsView`.\nSince class members are constructed in declaration order (not initializer-list order), calls to a virtual method (having `m_view` declared before `m_dummy`) can result in a virtual call through an uninitialized vptr and crash.\n\nAdd a small `CCoinsViewCache` constructor sanity check (`base->GetBestBlock()`) so uninitialized backends are caught immediately. This is meant to demonstrate a possible UB and will be removed in a follow-up commit after the field is initialized by a singleton instead.\n\nWithout the move:\n```\nThe following tests FAILED:\n        112 - txdownload_tests (SEGFAULT)\n        115 - txpackage_tests (SEGFAULT)\n        118 - txvalidation_tests (SEGFAULT)\n        119 - txvalidationcache_tests (SEGFAULT)\n        127 - validation_block_tests (SEGFAULT)\n        146 - wallet_tests (SEGFAULT)\n```\n\nMove `m_dummy` before `m_view` so it is constructed first.\nIn a follow-up `m_dummy` will be completely removed, this commit was meant to demonstrate why that was necessary.",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:10Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-28T10:31:32Z"
      },
      "sha": "4f44250955c6429a338027e2606c5c33a473a366"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUzNTc5N2Q4OTllYzFmMGI2ZGFlZDMxM2E1OTIyYTMxNTYyOWY4ZGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e35797d899ec1f0b6daed313a5922a315629f8da",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e35797d899ec1f0b6daed313a5922a315629f8da",
      "tree": {
        "sha": "a226bfa2302a2eb80c211a1f04d39f5176c3ad38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a226bfa2302a2eb80c211a1f04d39f5176c3ad38"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a226bfa2302a2eb80c211a1f04d39f5176c3ad38\nparent 4f44250955c6429a338027e2606c5c33a473a366\nauthor Lrinc <pap.lorinc@gmail.com> 1767442196 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770990 +0100\n\nrefactor: change `CCoinsView` parameter to pointer in `TestCoinsView`\n\nThis makes the `backend_coins_view` parameter relocatable in a follow-up commit.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+4ACgkQZp//D/pH\nenbL1Q/1Gw6hBBsWcUk/yubX+pzFtNfss2U/6p+dzJzTMcx9H8+80CHjq411MmzD\nVemfIv0Cf64peISESpIZaik7XYG4DaMEFtpy59S2OzfDf6KyS+aMob5BieysXK3+\nPEwUMmYPL4QIF6E6Pu1h8rZgL2F65Z51BrPGWHW1Upg0Lx2duE4geT35GwnVJEX5\nWl6Abfe0ozIzsjIzQftZDz+biFTIGUkRdCMduWMBGMH/3I+GPZLl2pEah6joUv2F\nmlACC23swOA4a2dqCJRAir1hjCPU6tXOUYf76FurBUauUHDiXrIptr0T1NeAjDDD\n2Mm6nLm2poOY0z/m9dMq9z0kpBvi2wSj9M4LudsefzIiyVYSLuUZJcnU0+A5o5fi\np7JJPPqeB6vB2iAVNbgmQvul9oUDJELtlmnTI93ckfbMoH01iZZfhU0OqNH7ypkh\nU6HtDjVMUf5W3bFObRBOzlQPwbXJaRbURcvZxGTngi+4D+725ZfSFbVoqO+F8dQ6\nijx6yl2+GfbeKLtiKC+5EN3YrkRY5dq74HmypgCSZok9HePYWr1ojDAzHeJYcMIg\nvYXO3+kr0nF0X7q5TeV3I5wJgvVi4zCvjD/xPe34TcL+I4w/2DO4NJe92y6NTgs+\nUkaWSNABE/tWg+19Q2RtkSJBMazBQGN1R7oKvgPVjmsfC7/eTQ==\n=40Q9\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f44250955c6429a338027e2606c5c33a473a366",
          "sha": "4f44250955c6429a338027e2606c5c33a473a366",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4f44250955c6429a338027e2606c5c33a473a366"
        }
      ],
      "message": "refactor: change `CCoinsView` parameter to pointer in `TestCoinsView`\n\nThis makes the `backend_coins_view` parameter relocatable in a follow-up commit.",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:10Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-03T12:09:56Z"
      },
      "sha": "e35797d899ec1f0b6daed313a5922a315629f8da"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ0NjYzYzY4ZjkwNmQ2MmJmMGM4MjE2NzAwYjYxY2QyODkxNjAzZGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/44663c68f906d62bf0c8216700b61cd2891603da",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/44663c68f906d62bf0c8216700b61cd2891603da",
      "tree": {
        "sha": "3d1c80a56999471004c3f0ed00264002ed8558fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3d1c80a56999471004c3f0ed00264002ed8558fa"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3d1c80a56999471004c3f0ed00264002ed8558fa\nparent e35797d899ec1f0b6daed313a5922a315629f8da\nauthor Lrinc <pap.lorinc@gmail.com> 1767441713 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770990 +0100\n\nrefactor: standardize parameter naming in CCoinsView classes\n\nBesides the parameter and field renames and reformats, the `CCoinsViewBacked` constructor was also made explicit, and the `SetBackend` method moved up higher. The `CCoinsViews` destructor was also moved to the top.\n\nThis should derisk and simplify follow-up commits by reducing noise.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+4ACgkQZp//D/pH\nenYXxhAAxFgh0X6J7IBEvAEVemt0W1K4zNBuFVwJjr7dkco/bjDSHbK0hZFtKG8N\niEsABjo8cg5JEzHK6H4DOKY8Qc6ZTPs/uH5P5r3adV5haSyCA2O0kDmV8grwwGXq\nPgVRrfKhwikjxxIxqDM8v9zIzo4rrRvHhqekZk6hL4z9anqDxbk6g2xL5pHTo0fr\nEzay70Tv1KPaTjSgqPBCyWqlE9oTkIn6Uf0+3do3ako0qLRQ3I9Ihx6YEgLO1YO5\nD5HEwf9dac/q8UXjuYCAr3039qsbZkwKP3Fo8dmzdZ7XjSruW7lZJtRdHNn2MlHi\nhgdhO3KV5Vqq6LySlVHKM8yETXCf+WfsYxDLeU2LCjVjk3oqpwr1sm/mfRFyLdAR\nlVcZaY1I8Cy8EmX/EFToDEDg/38njkNatFgIxq1kajWM5F3MbULtic/itP3HC1F7\nZYEWp1ENrim8AUCsXmXOtj95ldPsTwtT3J7TvvLnXQLIZtocLfBxctTe487//eZ9\nM+f8KVX2h++qZkN5LK+71mE5F5frS5xWUBBvO8rkk6VLz0oHQoIlfaCoKob3a3Xa\nqt7rDobSObr0S1pefauJLINPsVuFt2y1fjMjnx01qfQy+5kRcQQTIfUjWz4PNOPN\nbDK7pYcLynpjpYjVBSZoc6kUg8ZVkElYQiaaJUZ3GC6YwlADJMI=\n=CZri\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e35797d899ec1f0b6daed313a5922a315629f8da",
          "sha": "e35797d899ec1f0b6daed313a5922a315629f8da",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e35797d899ec1f0b6daed313a5922a315629f8da"
        }
      ],
      "message": "refactor: standardize parameter naming in CCoinsView classes\n\nBesides the parameter and field renames and reformats, the `CCoinsViewBacked` constructor was also made explicit, and the `SetBackend` method moved up higher. The `CCoinsViews` destructor was also moved to the top.\n\nThis should derisk and simplify follow-up commits by reducing noise.",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:10Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-03T12:01:53Z"
      },
      "sha": "44663c68f906d62bf0c8216700b61cd2891603da"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDllMDhlNDg4MWVhMDIxMjA1NzM0ODBmMjJiYzIwODJkZDhmNTdmNmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "tree": {
        "sha": "376a99a2246843b1c32a883fc52d18eb0e4031dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/376a99a2246843b1c32a883fc52d18eb0e4031dc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 376a99a2246843b1c32a883fc52d18eb0e4031dc\nparent 44663c68f906d62bf0c8216700b61cd2891603da\nauthor Lrinc <pap.lorinc@gmail.com> 1766146162 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770990 +0100\n\nrefactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\n\nThis enables making `CCoinsView` purely virtual - which is done step-by-step in the following commits.\n\n`CCoinsViewEmpty` is now only constructible via `CCoinsViewEmpty::Get()`.\nSimplified all usages to delegate to the stateless singleton instead.\n\nThe fuzzer was also updated to switch randomly between real db backing and empty view.\n\nAlso removed the sanity check from `CCoinsViewCache` constructor since the initialization isn't done via a local field anymore.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+4ACgkQZp//D/pH\nenao6w/9EwRwvG6NEoy2rzfLpvwjSSAyAEzq9KMJD9bCOkbYZP3KiNLUxSkgM+Hj\ndlEdfEKXcjJvwFOpYAGYNoThyLEmMiS9nm5XArCCfvaNeNG51l6Un0lyI1OQn6wh\nu2CEzmqa/01oE1SexWKTolOOcbr198GJdb7a8tTtJhnH8plNuXLnZlwVJzbTcfNI\nP1buCMjMYZrT8cT2jlxvhg+4/WSmrmJTD1QF5BPPyVZbtnkXEjnEn14Ixy0T8c3Y\nTCtZRgwxPXj4JAIrqLSqxTowioT1T6gdywMQBgClNDivZkEiAe8RXOngaQEIUQtf\n8HslrCr7xRC7SOxwPhxEKtqCcTUn4CZfScYcebNmN2/n1SjONQDki3LRx5NcS49J\nIpsV1kPuCTlC+O9gQ+3v6w2Fl8nsxQNvKleOQKivtFVHtCAIWTKYWYzOVOTHsmNz\nwsUBpiYkaprDWVb+5d09XVeatMV/ZzRCTua5aQhX5+jHUsxPomo+yFgwGmomFyYP\nJvST19B++o9Dk5QWS2PlzUYLWs9tgUqjdDHhw9YYJ66CrJWY7Ro0UlQKrrT3SRS+\nEwzTCORqYi8ksvbCKq2k4/Lb63IOo8ID4Uh5GGjNgIkmEO0YpGv6qi4FQ9wUGY+u\nvUw4xSE+2nUP9Wl50g7u4BG/nkYMAHcyRigjSqgXaBhpZaJWESI=\n=u8rf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/44663c68f906d62bf0c8216700b61cd2891603da",
          "sha": "44663c68f906d62bf0c8216700b61cd2891603da",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/44663c68f906d62bf0c8216700b61cd2891603da"
        }
      ],
      "message": "refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\n\nThis enables making `CCoinsView` purely virtual - which is done step-by-step in the following commits.\n\n`CCoinsViewEmpty` is now only constructible via `CCoinsViewEmpty::Get()`.\nSimplified all usages to delegate to the stateless singleton instead.\n\nThe fuzzer was also updated to switch randomly between real db backing and empty view.\n\nAlso removed the sanity check from `CCoinsViewCache` constructor since the initialization isn't done via a local field anymore.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:10Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:09:22Z"
      },
      "sha": "9e08e4881ea02120573480f22bc2082dd8f57f6e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk1ZjJmOGIyZDM2NTA5ZjA2ZDBkZTg0NDYzZjI2MDA0MGJlODAwMjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95f2f8b2d36509f06d0de84463f260040be80029",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/95f2f8b2d36509f06d0de84463f260040be80029",
      "tree": {
        "sha": "a4ee43085b60e432a5d20bf60d6d14ad1326d40b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a4ee43085b60e432a5d20bf60d6d14ad1326d40b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a4ee43085b60e432a5d20bf60d6d14ad1326d40b\nparent 9e08e4881ea02120573480f22bc2082dd8f57f6e\nauthor Lrinc <pap.lorinc@gmail.com> 1766147559 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770991 +0100\n\nrefactor: make `GetCoin`, `GetBestBlock`, and `BatchWrite` purely virtual in `CCoinsView`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+8ACgkQZp//D/pH\nenamVBAArHJateNK82iMgar0LqFcPA7RqW/5gI2B9B29fZfB2xI+kMlzPzxWXHfs\nrdYZYbpIUC9YoIWnjJBq5AVyHn7CDw5nzZP9CJ7GELcwvsRMjga39SMuCtvWtKCt\nuNuQdlLanCMPy6dHMsB6mwABzkqPd3CBHlGwsLeivlTWgMWpOm8pioWn/INvJsxk\nv2dI5nSmvoImQpTwvs+ZDadmH7wxPFSqWo8ZKoyemx4Bah/hrXzSSbV0F9/1AUeJ\nqTPyCpMFSJtNL3GVb1UsLz7jWdBhfgW1Lrcmi1pk++vlExE0WCKxnsiocDhurpFl\nBQXAsMkCT/3vpYaYduCvthl1vLeY3ZPNKkPL79pcGMoF9L0fkde29ekoPrc8yO5X\nx2KArDyhQ3NgXYMUl/84OSp/ptNnwq/X/yFdV6hjcSQRrqFVdYDZHCqwLvLxnVIQ\nod5oDGzxeDvE+rnY0iXQ8AXKFHaRC2j3N7JBMubV//Z3MbkETWunQSBZCqAmTE3J\nTTacqVhfNVo2rPc7wgx99eNWzI8Ia5eq5GmSjb8TU5d7ccLv+anLhpHuZ181c1ph\n2xIiIsvzMKr+RsQ3hgqHz0+T1jELMwWT+9BTxLQShjS2vQS4vYCFkisSYZ/T3ag/\nUEIy7e3KL9vE0zpVvCxwDIwtgXVVOjF2SRMnW07onuE3oc2T8CM=\n=C2Px\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e08e4881ea02120573480f22bc2082dd8f57f6e",
          "sha": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9e08e4881ea02120573480f22bc2082dd8f57f6e"
        }
      ],
      "message": "refactor: make `GetCoin`, `GetBestBlock`, and `BatchWrite` purely virtual in `CCoinsView`",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:11Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:32:39Z"
      },
      "sha": "95f2f8b2d36509f06d0de84463f260040be80029"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVhNjU0MmEwYTM3N2I5ZWZhN2E5MjFlYjE1ZGY4NDc2YjcxMzZlZTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "tree": {
        "sha": "79b3b3f26b6b8789485f4bf32c9c648472a34de6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79b3b3f26b6b8789485f4bf32c9c648472a34de6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 79b3b3f26b6b8789485f4bf32c9c648472a34de6\nparent 95f2f8b2d36509f06d0de84463f260040be80029\nauthor Lrinc <pap.lorinc@gmail.com> 1766146666 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770991 +0100\n\nrefactor: make `CCoinsView::EstimateSize` purely virtual\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+8ACgkQZp//D/pH\nenYC8BAAvy+u8F4g0CgJU+oRFmqGHKi/1FUSfAUxDEnPP8sLUU+wrGT48VooVlhm\n/BvZ3wMpmE2j8Vq/4xPlacVDPV1zt5iUvtwbTIiXkRDVJt0sEen3YVTsud0I1sEL\nxvff9jXq6kVpStRzd6llF2qRiHXsZ/cD59NqDG8q6z1r3DOjDSMflasXp41lF5F5\npzIIoWuI/RrGubYGVfCwIqHiefOvazujwnrcUH8f9kXQ4DILFyW+m4QcFh1sZYp/\nv3ZsTt0h+W6Abx85KDukgDsODdNr6LrZTnhrkD28JL+2/4bpUhSAYzzM5rWLB1v7\nVUkzyB6RByXm4rIoNWrcJSEtT5UISYCJB3CfzCpOhajOcCnl84WzOwS7SSzZryUv\np7rQAlWCdcwWBiWoMTw8lvRQXgTQH/Y022o2fHJuFIiehntHiTqkXTBSuX5ETR43\n3fxC4QSO58QkKEYymKp3vQ5FkZ6NJf6D09TkH27vZbaEuo1Yk/XGkyb7AXWP4kbX\ncPRnFB/yhcblMgla3R5wH7WvFZ9UYofAYQ3/o75TOhWj0RSyQm/Ab26T89G7vkpV\nJUL9fTN3x2vK5JJjSzd/6O8wg5o35r3FE7DbVF0p5zItyclW7STroiRFyJztjSUw\nLa7v2dsp2ZGKSWuh4EpI6VWgXcx/NIP9Z520SgyxaqXGj4f5FMA=\n=In5A\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95f2f8b2d36509f06d0de84463f260040be80029",
          "sha": "95f2f8b2d36509f06d0de84463f260040be80029",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/95f2f8b2d36509f06d0de84463f260040be80029"
        }
      ],
      "message": "refactor: make `CCoinsView::EstimateSize` purely virtual",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:11Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:17:46Z"
      },
      "sha": "5a6542a0a377b9efa7a921eb15df8476b7136ee6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyMTJjY2YwMmFlNGExNGI1ZjM5Mzk3MjRiZDIxYzg3ZjQ1ZTllMGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2212ccf02ae4a14b5f3939724bd21c87f45e9e0f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2212ccf02ae4a14b5f3939724bd21c87f45e9e0f",
      "tree": {
        "sha": "4484bf9c551564a82d04ac6ddf490eea09aba2a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4484bf9c551564a82d04ac6ddf490eea09aba2a4"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4484bf9c551564a82d04ac6ddf490eea09aba2a4\nparent 5a6542a0a377b9efa7a921eb15df8476b7136ee6\nauthor Lrinc <pap.lorinc@gmail.com> 1766147174 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770991 +0100\n\nrefactor: make `CCoinsView::Cursor` purely virtual\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+8ACgkQZp//D/pH\nenb8NBAAqApdGKWd9OpJLTJItaGQrFhCgQJaXuMmfKV1twdYn3TmR37La2tZM7Hl\nDLS/GvfYCz9okFbgKq/7Cxp39kAe851eBMrmB0rdlyvPpDRXpDTLyzWBNPpJw4Il\nf68qFrjVq2IDydS+usuXKIQIswpvK3F3t7jcDlNaABWTYbZrD0TmbZZZ0/IstaFs\nLmYA99F2a+5fNKpjZF2H8t50U6eZ+u79xckhDxEJ6vfWDLDii9HSdypjk72b4C5X\nYGNptaURaP3rDqvtzYDnVTRUiCRFe6L1YJLwtKqjWNqik6ZIOOuS3R0RTzvZxfXx\nRGX4IAWM17wfUecQv+iClfJIicvXNl+UF0OEDo3h6GJUGuKlx5nljoopiqPk983A\nYKrowMkZ7l5tilMtRSWdGPnxDArJWnFSrkrb5PkQDBq+8bU72Q2fGlAPPsAcSdBh\nZM3nvhWu9s3V3kyT8zA6WFESgP1eIpm3xOSvO6vhTJMt+wKKUR3FpztJ84G4mTB5\nQ+Rc8oA+kw93yHz3qf2WlaTgLwQ/LlY3vY23SQIwlEzjfsgJmK4vkhS5y+gdmOaL\nkiabIJ3eFCJZXFtxjRHluXohTBvQxllDuV/sYWVJpaFV8d1tJFj9Xfi1CmIvSYQU\nokKapuEMAnCyi1zWi+kFTP3WyyXe++LIJjC+OppIufplTwxpUYg=\n=+slh\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a6542a0a377b9efa7a921eb15df8476b7136ee6",
          "sha": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5a6542a0a377b9efa7a921eb15df8476b7136ee6"
        }
      ],
      "message": "refactor: make `CCoinsView::Cursor` purely virtual",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:11Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:26:14Z"
      },
      "sha": "2212ccf02ae4a14b5f3939724bd21c87f45e9e0f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1MzA4OTYzZTNkNDAzMGJiYTdmZmE4YjhhODMzNmE5NDBjMWI3NDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5308963e3d4030bba7ffa8b8a8336a940c1b745",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b5308963e3d4030bba7ffa8b8a8336a940c1b745",
      "tree": {
        "sha": "b9a3f88c56dd29a51d950c12302c53908716d350",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b9a3f88c56dd29a51d950c12302c53908716d350"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b9a3f88c56dd29a51d950c12302c53908716d350\nparent 2212ccf02ae4a14b5f3939724bd21c87f45e9e0f\nauthor Lrinc <pap.lorinc@gmail.com> 1766147680 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769770991 +0100\n\nrefactor: make `CCoinsView::GetHeadBlocks` purely virtual\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8j+8ACgkQZp//D/pH\nenaMJhAAsC4i7bYA8Hueun+1sxpwPtprRR/1WP8xeg8VKW8y4jlgd4KEImfqTl1s\nA298OWr1GbEfGpSaY3Cw34IR6RSAsQTlax5etv32Ye4BFlht2LfDDAC1JUYmh6fO\nL3zaXRE/8D42veyLp1fv0JTnUkNdLgEk2fo80q61m7JT4hzix6xiE7fciyxiFHvn\nwRYunVu+eVAN/H+rdszUsfFALLcT9JS2YpRrZXAtgElrcNcjBZDUsOoHqi6TrdfI\nN/d52+4EFmCBuXxmeU17HgyQk+Abam5vTaHmClH/Gc/cwM6I6/7pSftiyMoSWbFZ\nN2Ri14PoHTgYRPnswmUqME/04mZ8D1A9VAJDgG8xAzL/eYKmyuClEPGuT2mVbo1i\nypE3t9O7/LwtpXZcBeLwmky9BmBAywm679lagad+2vn1Q/udkzuuCPZJAwPmW1t3\nRYrA+EaE28ihiBRS7kpNB/GBWARTamWaHQxQYOUkpi4xMV+gq+YW54N35HgCobgn\n2TzONo2/3JM1j+T2ibYBi7/fwXCUVPPfuu/8uHbxAgwifP7he0GRm4gUIHy8iRjw\nSR2NOdL80EpKO6BAznVuCyuALrzR6jvhDTwOoFXPT74i6IYg8Ccx2ZYScHx3EWYY\n1s5HQzRjc8CXUyFkjYErDHKpc1RImHcAosr/CsTiWvAC7PHuyqA=\n=S39Q\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2212ccf02ae4a14b5f3939724bd21c87f45e9e0f",
          "sha": "2212ccf02ae4a14b5f3939724bd21c87f45e9e0f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2212ccf02ae4a14b5f3939724bd21c87f45e9e0f"
        }
      ],
      "message": "refactor: make `CCoinsView::GetHeadBlocks` purely virtual",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:03:11Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:34:40Z"
      },
      "sha": "b5308963e3d4030bba7ffa8b8a8336a940c1b745"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRiOTA1YzQyODZjNmY0NDcwNjEwNjk5NGVhNzlhNTkxYTI1NTI0NDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db905c4286c6f44706106994ea79a591a2552444",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/db905c4286c6f44706106994ea79a591a2552444",
      "tree": {
        "sha": "6ee42880a60293d3b7aa575f3ebc06cb3b8be505",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ee42880a60293d3b7aa575f3ebc06cb3b8be505"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6ee42880a60293d3b7aa575f3ebc06cb3b8be505\nparent b5308963e3d4030bba7ffa8b8a8336a940c1b745\nauthor Lrinc <pap.lorinc@gmail.com> 1766147784 +0100\ncommitter Lrinc <pap.lorinc@gmail.com> 1769771160 +0100\n\nrefactor: make `CCoinsView::HaveCoin` purely virtual\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8kJgACgkQZp//D/pH\nenbjPQ/9ErtErajuiGO+RSwjSOvSBNG2M5VSLMVXF8olay+2gwrBhp6ORCiY9Jav\nEDVB2tkSayKhqY3fhQbZFzGw+ZkE69idlmozJPH/0DccgEuXVDDc+RXOpQQwZ3JM\n3IAdTbkmtdkcqY9mv2dIMyyCBnwdOfD54vw8XCHYnMiu+SHKqj41gRN5GswmNseY\nHdu/WZbRZglBEDniz11Z78SFcJeZkOeynsHHscT3N2zxK/Rf+o0Bj0hmwnOaj00j\nqvJ4fO2HEoxem1UcUGHmv75alrq7sbpwXqIUqarnVZp0H+o3Bexodq8YVDzzW0pK\nBkt7rgqyxNBc76RN5L5MjVaEKDIt1bdk9j75E9GV962T3kdTNr9s8muSArDwkT0i\n3dsv9LPqjBow71An2i8DcuZFSo7sthCQ/9XCmAfKUNx7d1VI1J3lmCIwalg08CaX\nv74wRhfQNdcPLKmpgmeX0FpTGPNYzV8R7l4hzMkATj7ukZxWuoCKcCUjlZdNjs/W\n5jaVEX2Rw1QsNyr3N7gKVYU3VkYqkO9m9IWCuehSJnxpSIVgMdfMlLa4oHdr2YOz\nQpEo4juOiwHomm9oTLa7qol4TZjTpXY9VzJres0VoFYMdGGuvU8fm3ijPfUiSHqt\nuHZOHBt+drL3mHL/7C2cFx3kDO7qY+uMHLs56S9pNjvN3iaE7CI=\n=0NH/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5308963e3d4030bba7ffa8b8a8336a940c1b745",
          "sha": "b5308963e3d4030bba7ffa8b8a8336a940c1b745",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b5308963e3d4030bba7ffa8b8a8336a940c1b745"
        }
      ],
      "message": "refactor: make `CCoinsView::HaveCoin` purely virtual",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:06:00Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-19T12:36:24Z"
      },
      "sha": "db905c4286c6f44706106994ea79a591a2552444"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxNWRiZjFlNzJlZjRiYTAyMzNhZWRjYzRiNDBmNDQyMjFmODk5ZGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "tree": {
        "sha": "b8e3b186a70ab530e88780f55a0fa781cca0eed7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b8e3b186a70ab530e88780f55a0fa781cca0eed7"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b8e3b186a70ab530e88780f55a0fa781cca0eed7\nparent db905c4286c6f44706106994ea79a591a2552444\nauthor Lrinc <pap.lorinc@gmail.com> 1766438006 +0200\ncommitter Lrinc <pap.lorinc@gmail.com> 1769771160 +0100\n\nrefactor: inline `CCoinsViewBacked` implementation to header\n\nIt's a simple delegate, the cpp is already really crowded, let's do these inline.\n\nAlso note that the `CCoinsViewBacked` constructor is asserted to not take any `nullptr` values anymore, since the reason why `base` was stored as a pointer was that references cannot be reallocated, and we need to call `SetBackend` in a few places - which takes a reference, also proving that `nullptr` was never the goal.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAml8kJgACgkQZp//D/pH\nenZ/2RAAiqOlGcCs09vAhCi1x0rQBmj4kP6Wix4XkVLMbkot4xQf/GZ8/R/kr6/5\nIHrqnRgPF8c6oNJbVCUyIQnEo7dx3QuW3Mqc4jVBNW96lyxnovFjloWda36m/MBP\ncfrEaqHIb1/qp/3QHvxYQV0nqxYhXdwrn0TnYVCCujI1UmvPdwEMfzw4HuwrWSd2\nSlP9hFs51RZgTCz4XbVJO3Ns1VoeQGOTdMS/dSnSKRzBLUBiTC1h4WGxd64KqDr4\n1s8DJ+eRJEd/AuqNRRDhGd846/+zFEX6T15rn1esvVMHU9XSPaWSadaVeaZqnKdT\nJxwc21ZF3AxWoKmgPGPpoVprHw2mW9FInDEIkEowbErwTflQ28qJgMiKzqPPtF70\nlT1XVesh9twYklDN3znQTUXEnbFe03BA8AkbZe/UN33ZuR5AF8LaR3lavM2RQRaL\n1erNQw/jd+bpT4XzTVKJt7YgB1kbaytkwiO+3fD9UccSYEMCVKLH+lWdeygmaJBL\nq3F1i5/M4Jadcx8vCTuefS+Uw164VN0oj4v7TyvQ4dhaMe/DWpOE+Uq+1SUkWynK\nt1fah88vnVuRMEE7+QiePkAh1YVOFfRoCn3LMa8p/HhJubFqSOSk89COdyDSFtD8\nNzozGkLdsu3TuL8O0I1a6QUlVRwAFP8zUIzT0VnRyLQVmp+KNEQ=\n=C/+n\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db905c4286c6f44706106994ea79a591a2552444",
          "sha": "db905c4286c6f44706106994ea79a591a2552444",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/db905c4286c6f44706106994ea79a591a2552444"
        }
      ],
      "message": "refactor: inline `CCoinsViewBacked` implementation to header\n\nIt's a simple delegate, the cpp is already really crowded, let's do these inline.\n\nAlso note that the `CCoinsViewBacked` constructor is asserted to not take any `nullptr` values anymore, since the reason why `base` was stored as a pointer was that references cannot be reallocated, and we need to call `SetBackend` in a few places - which takes a reference, also proving that `nullptr` was never the goal.",
      "committer": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-01-30T11:06:00Z"
      },
      "author": {
        "name": "Lrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-12-22T21:13:26Z"
      },
      "sha": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22404477926,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAU3aTPm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22404477926",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "created_at": "2026-01-30T11:06:36Z"
    },
    {
      "event": "unlabeled",
      "id": 22407834093,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAU3nGnt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22407834093",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T13:41:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3753423708,
      "node_id": "PRR_kwDOABII587fuLNc",
      "url": null,
      "actor": null,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-04T23:18:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review 515dbf1e72ef4ba0233aedcc4b40f44221f899dc. This looks good but I want to spend a little more time checking before acking. Making `CoinsView` pure-virtual seems like a clearly good change. Some things here are maybe not ideal though:\n\n- It doesn't seem good that `CCoinsViewCache` is now default constructible, but if it is default-constructed it behaves like a test class and discards data written to it. It would seem safer to requiring passing a no-op base view if you want that behavior, or to provide a separate `NoOpCoinsCache` subclass that discards data for tests.\n\n- It seems unfortunate to lose the default `HaveCoin(outpoint)` implementation (`GetCoin(outpoint).has_value()`) and force subclasses to re-implement it. Not sure if there would be any downside to keeping this method.\n\nIn general removing the no-op behaviors from the `CCoinsView` base class seems like a clearly good thing, but it would be nice to reduce uses of CCoinsViewEmpty as well. Maybe a followup could do this (or some followups already do).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3753423708",
      "submitted_at": "2026-02-04T23:18:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581366",
      "pull_request_review_id": 3602578034,
      "id": 2638581366,
      "node_id": "PRRC_kwDOABII586dRY52",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }",
      "path": "src/coins.cpp",
      "position": 12,
      "original_position": 8,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Don't see any value in deleting these in a separate commit from making them pure virtual.",
      "created_at": "2025-12-22T04:18:46Z",
      "updated_at": "2025-12-22T04:23:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2638581366",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581846",
      "pull_request_review_id": 3602578034,
      "id": 2638581846,
      "node_id": "PRRC_kwDOABII586dRZBW",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I could see keeping this one; it seems like a reasonable default?",
      "created_at": "2025-12-22T04:19:14Z",
      "updated_at": "2025-12-22T04:23:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2638581846",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641275940",
      "pull_request_review_id": 3605780432,
      "id": 2641275940,
      "node_id": "PRRC_kwDOABII586dbqwk",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }",
      "path": "src/coins.cpp",
      "position": 12,
      "original_position": 8,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581366,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, moved each deletion to the commit that made the method pure, thanks.\r\nAlso made the empty class a singleton which simplified all nested usages significantly.\r\nAnd inlined the trivial implementation of `*Backing` to the header to reduce the clutter in the cpp a bit more.\r\nhttps://github.com/bitcoin/bitcoin/compare/38ae4082a13b2e6dd07e84d228c9e58d3df27b11..d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "created_at": "2025-12-22T21:19:08Z",
      "updated_at": "2025-12-23T08:08:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2641275940",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641275940"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641276223",
      "pull_request_review_id": 3605780748,
      "id": 2641276223,
      "node_id": "PRRC_kwDOABII586dbq0_",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581846,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We need this method because of the specialized database access which doesn't need to deserialize the read value:\r\n* https://github.com/bitcoin/bitcoin/blob/fa5f29774872d18febc0df38831a6e45f3de69cc/src/txdb.cpp#L74-L76\r\n\r\nOtherwise we could of course replace it with `!!GetCoin(outpoint)`:\r\n* https://github.com/bitcoin/bitcoin/blob/7f295e1d9b44c225c823242c1f04239f46fb27a6/src/coins.cpp#L166-L169\r\n\r\nWe're not even really using the former in production code anyway (see https://github.com/bitcoin/bitcoin/pull/34132), we could probably easily inline the `!!GetCoin(outpoint)` to the few remaining call sites instead. Regardless, the current change should simplify usage and we can investigate that later.\r\n\r\n------\r\n\r\nAlso, the underlying problem is that having a separate `CCoinsView` makes adding defaults weird, there's no logical default behavior.\r\nBut we could inline it into `CCoinsViewBacked` (and delete `CCoinsView` and rename `CCoinsViewBacked` back to `CCoinsView`)  and use that as the base for the other caches, with the default implementation simply delegating to `base`, something like:\r\n```patch\r\ndiff --git a/src/coins.cpp b/src/coins.cpp\r\nindex 9bdcb42f45..4f66ed447b 100644\r\n--- a/src/coins.cpp\r\n+++ b/src/coins.cpp\r\n@@ -14,7 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\r\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\r\n \r\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\r\n-    CCoinsViewBacked(baseIn), m_deterministic(deterministic),\r\n+    CCoinsView(baseIn), m_deterministic(deterministic),\r\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\r\n {\r\n     m_sentinel.second.SelfRef(m_sentinel);\r\n@@ -362,10 +362,10 @@ static ReturnType ExecuteBackedWrapper(Func func, const std::vector<std::functio\r\n \r\n std::optional<Coin> CCoinsViewErrorCatcher::GetCoin(const COutPoint& outpoint) const\r\n {\r\n-    return ExecuteBackedWrapper<std::optional<Coin>>([&]() { return CCoinsViewBacked::GetCoin(outpoint); }, m_err_callbacks);\r\n+    return ExecuteBackedWrapper<std::optional<Coin>>([&]() { return CCoinsView::GetCoin(outpoint); }, m_err_callbacks);\r\n }\r\n \r\n bool CCoinsViewErrorCatcher::HaveCoin(const COutPoint& outpoint) const\r\n {\r\n-    return ExecuteBackedWrapper<bool>([&]() { return CCoinsViewBacked::HaveCoin(outpoint); }, m_err_callbacks);\r\n+    return ExecuteBackedWrapper<bool>([&]() { return CCoinsView::HaveCoin(outpoint); }, m_err_callbacks);\r\n }\r\ndiff --git a/src/coins.h b/src/coins.h\r\nindex a64f30376d..7e8120f710 100644\r\n--- a/src/coins.h\r\n+++ b/src/coins.h\r\n@@ -303,37 +303,46 @@ private:\r\n     bool m_will_erase;\r\n };\r\n \r\n-/** Pure abstract view on the open txout dataset. */\r\n+/** Coins view backed by another CCoinsView. */\r\n class CCoinsView\r\n {\r\n+protected:\r\n+    CCoinsView* base{nullptr};\r\n+\r\n+    CCoinsView() = default;\r\n+\r\n public:\r\n+    explicit CCoinsView(CCoinsView* viewIn) : base(Assert(viewIn)) {}\r\n+\r\n     //! As we use CCoinsViews polymorphically, have a virtual destructor\r\n     virtual ~CCoinsView() = default;\r\n \r\n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\r\n+\r\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\r\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\r\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\r\n \r\n     //! Just check whether a given outpoint is unspent.\r\n-    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\r\n+    virtual bool HaveCoin(const COutPoint& outpoint) const { return base->HaveCoin(outpoint); }\r\n \r\n     //! Retrieve the block hash whose state this CCoinsView currently represents\r\n-    virtual uint256 GetBestBlock() const = 0;\r\n+    virtual uint256 GetBestBlock() const { return base->GetBestBlock(); }\r\n \r\n     //! Retrieve the range of blocks that may have been only partially written.\r\n     //! If the database is in a consistent state, the result is the empty vector.\r\n     //! Otherwise, a two-element vector is returned consisting of the new and\r\n     //! the old block hash, in that order.\r\n-    virtual std::vector<uint256> GetHeadBlocks() const = 0;\r\n+    virtual std::vector<uint256> GetHeadBlocks() const { return base->GetHeadBlocks(); }\r\n \r\n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\r\n     //! The passed cursor is used to iterate through the coins.\r\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\r\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) { return base->BatchWrite(cursor, hashBlock); }\r\n \r\n     //! Get a cursor to iterate over the whole state\r\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\r\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const { return base->Cursor(); }\r\n \r\n     //! Estimate database size\r\n-    virtual size_t EstimateSize() const = 0;\r\n+    virtual size_t EstimateSize() const { return base->EstimateSize(); }\r\n };\r\n \r\n /** Noop coins view. */\r\n@@ -361,28 +370,8 @@ public:\r\n     size_t EstimateSize() const override { return 0; }\r\n };\r\n \r\n-/** CCoinsView backed by another CCoinsView */\r\n-class CCoinsViewBacked : public CCoinsView\r\n-{\r\n-protected:\r\n-    CCoinsView* base;\r\n-\r\n-public:\r\n-    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{viewIn} {}\r\n-\r\n-    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\r\n-\r\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\r\n-    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\r\n-    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\r\n-    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\r\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }\r\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return base->Cursor(); }\r\n-    size_t EstimateSize() const override { return base->EstimateSize(); }\r\n-};\r\n-\r\n /** CCoinsView that adds a memory cache for transactions to another CCoinsView */\r\n-class CCoinsViewCache : public CCoinsViewBacked\r\n+class CCoinsViewCache : public CCoinsView\r\n {\r\n private:\r\n     const bool m_deterministic;\r\n@@ -534,10 +523,10 @@ const Coin& AccessByTxid(const CCoinsViewCache& cache, const Txid& txid);\r\n  *\r\n  * Writes do not need similar protection, as failure to write is handled by the caller.\r\n */\r\n-class CCoinsViewErrorCatcher final : public CCoinsViewBacked\r\n+class CCoinsViewErrorCatcher final : public CCoinsView\r\n {\r\n public:\r\n-    explicit CCoinsViewErrorCatcher(CCoinsView* view) : CCoinsViewBacked(view) {}\r\n+    explicit CCoinsViewErrorCatcher(CCoinsView* view) : CCoinsView(view) {}\r\n \r\n     void AddReadErrCallback(std::function<void()> f) {\r\n         m_err_callbacks.emplace_back(std::move(f));\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 4dc692bfd8..3e47428e8e 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -720,7 +720,7 @@ bool CTxMemPool::HasNoInputsOf(const CTransaction &tx) const\r\n     return true;\r\n }\r\n \r\n-CCoinsViewMemPool::CCoinsViewMemPool(CCoinsView* baseIn, const CTxMemPool& mempoolIn) : CCoinsViewBacked(baseIn), mempool(mempoolIn) { }\r\n+CCoinsViewMemPool::CCoinsViewMemPool(CCoinsView* baseIn, const CTxMemPool& mempoolIn) : CCoinsView(baseIn), mempool(mempoolIn) { }\r\n \r\n std::optional<Coin> CCoinsViewMemPool::GetCoin(const COutPoint& outpoint) const\r\n {\r\ndiff --git a/src/txmempool.h b/src/txmempool.h\r\nindex 166a024823..4c24766c77 100644\r\n--- a/src/txmempool.h\r\n+++ b/src/txmempool.h\r\n@@ -778,7 +778,7 @@ public:\r\n  * signrawtransactionwithkey and signrawtransactionwithwallet,\r\n  * as long as the conflicting transaction is not yet confirmed.\r\n  */\r\n-class CCoinsViewMemPool : public CCoinsViewBacked\r\n+class CCoinsViewMemPool : public CCoinsView\r\n {\r\n     /**\r\n     * Coins made available by transactions being validated. Tracking these allows for package\r\n\r\n```\r\n\r\nThis would introduce a sensible default as the base class behavior (always delegating) and we'd instantiate it with the empty sigleton, which would always do nothin'.\r\nI haven't included this yet, we can discuss if it's a good idea.",
      "created_at": "2025-12-22T21:19:13Z",
      "updated_at": "2025-12-22T21:19:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2641276223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641276223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650048046",
      "pull_request_review_id": 3614915324,
      "id": 2650048046,
      "node_id": "PRRC_kwDOABII586d9IYu",
      "diff_hunk": "@@ -722,6 +722,11 @@ class MemPoolAccept\n     }\n \n private:\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\n+     * were pulled from disk. */\n+    CCoinsView m_dummy;\n+",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "original_commit_id": "436765c23a009c18a2a8e29e8b9534924e80d1d0",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit 436765c23a009c18a2a8e29e8b9534924e80d1d0, it looks like you forgot to include the removal diff.\r\n\r\nEdit: It's doubly removed in 148a0a94c65425b7ea9b6cc667502167b8c1c7a0, but that second removal should be here.",
      "created_at": "2025-12-29T01:33:36Z",
      "updated_at": "2025-12-29T05:31:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650048046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650048046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 729,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650227623",
      "pull_request_review_id": 3615075843,
      "id": 2650227623,
      "node_id": "PRRC_kwDOABII586d90On",
      "diff_hunk": "@@ -378,6 +403,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n \n public:\n     CCoinsViewCache(CCoinsView *baseIn, bool deterministic = false);\n+    CCoinsViewCache() : CCoinsViewCache{&CCoinsViewEmpty::Get()} {}",
      "path": "src/coins.h",
      "position": 123,
      "original_position": 111,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Should this constructor be on `CCoinsViewBacked` instead?",
      "created_at": "2025-12-29T05:39:46Z",
      "updated_at": "2025-12-29T05:39:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650227623",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650227623"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 410,
      "original_line": 410,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650234336",
      "pull_request_review_id": 3615082648,
      "id": 2650234336,
      "node_id": "PRRC_kwDOABII586d913g",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure about this sanity check. We're checking that a call to this method will work? Is this better than an assertion that baseIn is non-null? Why not refactor `baseIn` to be a reference?",
      "created_at": "2025-12-29T05:46:39Z",
      "updated_at": "2025-12-29T05:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650234336",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650234336"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650833138",
      "pull_request_review_id": 3615731889,
      "id": 2650833138,
      "node_id": "PRRC_kwDOABII586eAIDy",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it's not null, it will give illegal access since it points to a random address. Try reverting and running any of the mentioned tests from the commit message.",
      "created_at": "2025-12-29T12:07:36Z",
      "updated_at": "2025-12-29T12:07:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650833138",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650833138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651156940",
      "pull_request_review_id": 3616078914,
      "id": 2651156940,
      "node_id": "PRRC_kwDOABII586eBXHM",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ok, but if it's a pointer it is legal for it to be a nullptr. So we should check first if it is not nullptr.\r\nAlso, instead of accessing a method, we could do a dynamic cast to `CCoinsView*` and assert the result.\r\n```suggestion\r\n    assert(!base || dynamic_cast<CCoinsView*>(base));\r\n```",
      "created_at": "2025-12-29T14:58:56Z",
      "updated_at": "2025-12-29T17:13:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651156940",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651156940"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651708755",
      "pull_request_review_id": 3616683354,
      "id": 2651708755,
      "node_id": "PRRC_kwDOABII586eDd1T",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`assert(!base || dynamic_cast<CCoinsView*>(base));` doesn't trigger the failure.\r\n\r\nReverting `m_dummy` (which I did accidentally in the first commit already):\r\n```patch\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\n--- a/src/validation.cpp\t(revision 5f5ff9798098a7cf9c5311dc54c615245fec1a3b)\r\n+++ b/src/validation.cpp\t(date 1767039346685)\r\n@@ -722,11 +722,6 @@\r\n     }\r\n \r\n private:\r\n-    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\r\n-     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\r\n-     * were pulled from disk. */\r\n-    CCoinsView m_dummy;\r\n-\r\n     CTxMemPool& m_pool;\r\n \r\n     /** Holds a cached view of available coins from the UTXO set, mempool, and artificial temporary coins (to enable package validation).\r\n@@ -746,6 +741,10 @@\r\n     /** When m_view is connected to m_viewmempool as its backend, it can pull coins from the mempool and from the UTXO\r\n      * set. This is also where temporary coins are stored. */\r\n     CCoinsViewMemPool m_viewmempool;\r\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\r\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\r\n+     * were pulled from disk. */\r\n+    CCoinsView m_dummy;\r\n \r\n     Chainstate& m_active_chainstate;\r\n```\r\n\r\nAnd running:\r\n> cmake -B build  -DCMAKE_BUILD_TYPE=Debug && cmake --build build && ./build/bin/test_bitcoin --run_test=wallet_tests\r\n\r\nfails correctly with:\r\n> Running 13 test cases...\r\n> ******** errors disabling the alternate stack:\r\n>         #error:22\r\n>         Invalid argument\r\n> unknown location:0: fatal error: in \"wallet_tests/CreateWallet\": memory access violation at address: 0x5f4d1884: invalid permissions\r\n>  wallet/test/wallet_tests.cpp:622: last checkpoint\r\n\r\nMoved the proper removal to the first commit: https://github.com/bitcoin/bitcoin/compare/784769b5b1a8465d1a09ec489a303c4616d11896..a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "created_at": "2025-12-29T20:20:22Z",
      "updated_at": "2025-12-29T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651708755",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651708755"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651711783",
      "pull_request_review_id": 3616686593,
      "id": 2651711783,
      "node_id": "PRRC_kwDOABII586eDekn",
      "diff_hunk": "@@ -378,6 +403,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n \n public:\n     CCoinsViewCache(CCoinsView *baseIn, bool deterministic = false);\n+    CCoinsViewCache() : CCoinsViewCache{&CCoinsViewEmpty::Get()} {}",
      "path": "src/coins.h",
      "position": 123,
      "original_position": 111,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650227623,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How so? We have to init `m_deterministic` as well...",
      "created_at": "2025-12-29T20:21:32Z",
      "updated_at": "2025-12-29T20:21:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651711783",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651711783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 410,
      "original_line": 410,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652027175",
      "pull_request_review_id": 3617058212,
      "id": 2652027175,
      "node_id": "PRRC_kwDOABII586eErkn",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm dynamic casting uninitialized memory should be UB as well, but I guess it doesn't trigger a memory access violation.\r\nBut, we still need to check that `base` is not `nullptr` before accessing, otherwise passing `nullptr` would trigger undefined behavior.",
      "created_at": "2025-12-30T01:08:33Z",
      "updated_at": "2025-12-30T01:08:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2652027175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652027175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652387942",
      "pull_request_review_id": 3617447177,
      "id": 2652387942,
      "node_id": "PRRC_kwDOABII586eGDpm",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "i don't think we support nullptr currently - it's why we have a default implementation with dummy values. ",
      "created_at": "2025-12-30T07:21:04Z",
      "updated_at": "2025-12-30T07:21:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2652387942",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652387942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653138327",
      "pull_request_review_id": 3618429076,
      "id": 2653138327,
      "node_id": "PRRC_kwDOABII586eI62X",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The API supports it. I use it in #31132. If we want to disallow it then we should change the parameter to a reference.",
      "created_at": "2025-12-30T14:35:02Z",
      "updated_at": "2025-12-30T14:35:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653138327",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653138327"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653248652",
      "pull_request_review_id": 3618585105,
      "id": 2653248652,
      "node_id": "PRRC_kwDOABII586eJVyM",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "As I understand it, this is sanity testing through triggering UB in the case the bug is present. I don't think that is ideal, as the compiler is allowed to assume it won't happen and optimize it away. This isn't too far fetched - if it could be inferred that (all implementations of) `CCoinsView::GetBestBlock` are side-effect free, then the statement `(void)base->GetBestBlock();` could just be optimized away.\n\nTesting for bugs due to initialization order seems more like a job for UBSan. Unfortunately, it seems none of the current fuzz tests (with UBSan enabled) trigger with the following patch (on master):\n\n```diff\ndiff --git a/src/coins.cpp b/src/coins.cpp\nindex 14381ecb0aa..c7206c22554 100644\n--- a/src/coins.cpp\n+++ b/src/coins.cpp\n@@ -38,6 +38,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    assert(!base || dynamic_cast<CCoinsView*>(base));\n     m_sentinel.second.SelfRef(m_sentinel);\n }\n```\n\nI'm not objecting to this change, but I think it would be better if we could test for bugs of this class in a more systematic way.\n",
      "created_at": "2025-12-30T15:31:21Z",
      "updated_at": "2025-12-30T16:21:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653248652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653248652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653974593",
      "pull_request_review_id": 3619382385,
      "id": 2653974593,
      "node_id": "PRRC_kwDOABII586eMHBB",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> The API supports it. I use it in https://github.com/bitcoin/bitcoin/pull/31132. If we want to disallow it then we should change the parameter to a reference.\r\n\r\nMy understanding is that it was stored as a pointer since references cannot be reallocated and we need to call `SetBackend` currently in a few places (which takes a reference, also proving that `nullptr` was never the goal).\r\nWe can change it to `std::reference_wrapper<CCoinsView> base` but it would trigger a huge changeset if it percolates to getting rid of all pointers in the constructors. But I don't mind adding an `Assert` to forbid that at least during runtime and fix the constructor and call sites after this PR is merged:\r\n```C++\r\nclass CCoinsViewBacked : public CCoinsView\r\n{\r\nprotected:\r\n    std::reference_wrapper<CCoinsView> base;\r\n\r\npublic:\r\n    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{*Assert(viewIn)} {} // TODO change to reference\r\n\r\n    void SetBackend(CCoinsView& viewIn) { base = std::ref(viewIn); }\r\n\r\n    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base.get().GetCoin(outpoint); }\r\n    bool HaveCoin(const COutPoint& outpoint) const override { return base.get().HaveCoin(outpoint); }\r\n    uint256 GetBestBlock() const override { return base.get().GetBestBlock(); }\r\n    std::vector<uint256> GetHeadBlocks() const override { return base.get().GetHeadBlocks(); }\r\n    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base.get().BatchWrite(cursor, hashBlock); }\r\n    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return base.get().Cursor(); }\r\n    size_t EstimateSize() const override { return base.get().EstimateSize(); }\r\n};\r\n```",
      "created_at": "2025-12-30T22:07:07Z",
      "updated_at": "2025-12-30T22:07:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653974593",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653974593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653979894",
      "pull_request_review_id": 3619387129,
      "id": 2653979894,
      "node_id": "PRRC_kwDOABII586eMIT2",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sorry if I was unclear. `base` should remain a pointer. `viewIn` should be a reference in the constructor, as it is in `SetBackend`.",
      "created_at": "2025-12-30T22:09:14Z",
      "updated_at": "2025-12-30T22:09:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653979894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653979894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654002456",
      "pull_request_review_id": 3619410447,
      "id": 2654002456,
      "node_id": "PRRC_kwDOABII586eMN0Y",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> viewIn should be a reference in the constructor\r\n\r\nyeah, that's what I meant by:\r\n\r\n> it would trigger a huge changeset if it percolates to getting rid of all pointers in the constructors\r\n\r\nIt triggered changes in 22 files so far - I have stopped refactoring after a while. We can prohibit new `nullptr` bases via an `Assert` for now, and clean up this area in a separate PR since it's a bit messy.",
      "created_at": "2025-12-30T22:17:45Z",
      "updated_at": "2025-12-30T22:19:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2654002456",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654002456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654282589",
      "pull_request_review_id": 3619698402,
      "id": 2654282589,
      "node_id": "PRRC_kwDOABII586eNSNd",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I don't think that is ideal, as the compiler is allowed to assume it won't happen and optimize it away.\r\n\r\nI needed something to demonstrate the UB - and that it's fixed now, so [I have removed this reproducer in the second commit](https://github.com/bitcoin/bitcoin/compare/a69ea84b83d22c66ddeeba6d27b761036d6fec40..b23d784b6baee140f75882fe009be5676db4cb0b#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cL20). Would be cool if we could instrument the code with something like `-fsanitize=vptr` or `-Wreorder-ctor` (haven't tried any of them, not sure they would have found this one).\r\n\r\nI've also [added the `Assert`](https://github.com/bitcoin/bitcoin/compare/a69ea84b83d22c66ddeeba6d27b761036d6fec40..b23d784b6baee140f75882fe009be5676db4cb0b#diff-095ce1081a930998a10b37358fae5499ac47f8cb6f25f5df5d88e920a54e0341L371) to prohibit `nullptr` bases in `CCoinsViewBacked` - we should use `CCoinsViewEmpty::Get()` from now on to stop the propagation.",
      "created_at": "2025-12-30T23:18:12Z",
      "updated_at": "2025-12-31T06:47:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2654282589",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654282589"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656573494",
      "pull_request_review_id": 3622026233,
      "id": 2656573494,
      "node_id": "PRRC_kwDOABII586eWBg2",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) = 0;\r\n```",
      "created_at": "2026-01-01T19:44:57Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656573494",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656573494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574800",
      "pull_request_review_id": 3622026233,
      "id": 2656574800,
      "node_id": "PRRC_kwDOABII586eWB1Q",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Should we iterate through the cursor here to clear it, and return `true`? If we return `false` we leave the parent cache in an inconsistent state.",
      "created_at": "2026-01-01T19:47:55Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656574800",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574800"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574925",
      "pull_request_review_id": 3622026233,
      "id": 2656574925,
      "node_id": "PRRC_kwDOABII586eWB3N",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 92,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    explicit CCoinsViewBacked(CCoinsView* view_in) : base{Assert(view_in)} {}\r\n```",
      "created_at": "2026-01-01T19:48:10Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656574925",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574925"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575022",
      "pull_request_review_id": 3622026233,
      "id": 2656575022,
      "node_id": "PRRC_kwDOABII586eWB4u",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 94,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    void SetBackend(CCoinsView& view_in) { base = &view_in; }\r\n```",
      "created_at": "2026-01-01T19:48:22Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656575022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575277",
      "pull_request_review_id": 3622026233,
      "id": 2656575277,
      "node_id": "PRRC_kwDOABII586eWB8t",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override { return base->BatchWrite(cursor, block_hash); }\r\n```",
      "created_at": "2026-01-01T19:48:53Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656575277",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656576235",
      "pull_request_review_id": 3622026233,
      "id": 2656576235,
      "node_id": "PRRC_kwDOABII586eWCLr",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure we need this commit at all, since the PR deletes `m_dummy` and doesn't keep this line either.",
      "created_at": "2026-01-01T19:50:43Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656576235",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656576235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656592223",
      "pull_request_review_id": 3622038231,
      "id": 2656592223,
      "node_id": "PRRC_kwDOABII586eWGFf",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We want to keep the behavior of resetting the backend.\r\n\r\n```suggestion\r\n                if (is_db || fuzzed_data_provider.ConsumeBool()) {\r\n                    auto db_params = DBParams{\r\n                        .path = \"\",\r\n                        .cache_bytes = 1_MiB,\r\n                        .memory_only = true,\r\n                    };\r\n                    backend_coins_view = CCoinsViewDB{std::move(db_params), CoinsViewOptions{}};\r\n                }\r\n                coins_view_cache.SetBackend(backend_coins_view);\r\n```",
      "created_at": "2026-01-01T20:27:10Z",
      "updated_at": "2026-01-01T20:27:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656592223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656592223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599709",
      "pull_request_review_id": 3622042612,
      "id": 2656599709,
      "node_id": "PRRC_kwDOABII586eWH6d",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656573494,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done in the second commit to get that out of the way.",
      "created_at": "2026-01-01T20:42:57Z",
      "updated_at": "2026-01-01T20:42:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599709",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599768",
      "pull_request_review_id": 3622042643,
      "id": 2656599768,
      "node_id": "PRRC_kwDOABII586eWH7Y",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656574800,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> If we return false \r\n\r\nI expect this to be merged after https://github.com/bitcoin/bitcoin/pull/33866/files#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cR19-R22, where there is no return value anymore.\r\n\r\n> Should we iterate through the cursor here to clear it\r\n\r\nThanks, done.",
      "created_at": "2026-01-01T20:43:04Z",
      "updated_at": "2026-01-01T20:43:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599768",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599768"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599790",
      "pull_request_review_id": 3622042662,
      "id": 2656599790,
      "node_id": "PRRC_kwDOABII586eWH7u",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 92,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656574925,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:08Z",
      "updated_at": "2026-01-01T20:43:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599809",
      "pull_request_review_id": 3622042685,
      "id": 2656599809,
      "node_id": "PRRC_kwDOABII586eWH8B",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 94,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575022,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:10Z",
      "updated_at": "2026-01-01T20:43:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599809",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599809"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599841",
      "pull_request_review_id": 3622042719,
      "id": 2656599841,
      "node_id": "PRRC_kwDOABII586eWH8h",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575277,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:15Z",
      "updated_at": "2026-01-01T20:43:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599841",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602352",
      "pull_request_review_id": 3622044422,
      "id": 2656602352,
      "node_id": "PRRC_kwDOABII586eWIjw",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can you explain why you think so? If we have a database backing the cache than we should switch it to another one? in https://github.com/bitcoin/bitcoin/blob/7817197cf2eb07aae32a6f67408c4493a57ea465/src/validation.cpp#L880 we have a normal db switched to an empty one. Here we're either setting the provided `backend_coins_view` or creating a new one - is that not what you think we should do?",
      "created_at": "2026-01-01T20:49:04Z",
      "updated_at": "2026-01-01T20:49:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656602352",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602352"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602847",
      "pull_request_review_id": 3622044687,
      "id": 2656602847,
      "node_id": "PRRC_kwDOABII586eWIrf",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The reason is explain in the commit message:\r\n> In a follow-up `m_dummy` will be completely removed, this commit was meant to demonstrate why that was necessary.\r\n\r\nI.e. I don't want the fix to be accidental - fix first, replace after.",
      "created_at": "2026-01-01T20:50:03Z",
      "updated_at": "2026-01-01T20:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656602847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656604510",
      "pull_request_review_id": 3622045880,
      "id": 2656604510,
      "node_id": "PRRC_kwDOABII586eWJFe",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We are making assertions on `backend_coins_view` below, where we assume it is what is set as the backend of `coins_view_cache`. So if we set the backend as the empty view singleton and don't update `backend_coins_view` those assertions will fail.",
      "created_at": "2026-01-01T20:54:23Z",
      "updated_at": "2026-01-01T20:54:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656604510",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656604510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656605146",
      "pull_request_review_id": 3622046185,
      "id": 2656605146,
      "node_id": "PRRC_kwDOABII586eWJPa",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "But it's not necessary. There is no UB unless you add this commit.",
      "created_at": "2026-01-01T20:55:26Z",
      "updated_at": "2026-01-01T20:55:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656605146",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656605146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656611435",
      "pull_request_review_id": 3622050508,
      "id": 2656611435,
      "node_id": "PRRC_kwDOABII586eWKxr",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Edit: [pushed](https://github.com/bitcoin/bitcoin/compare/50245cadd68c3345c551cd65f878e9c7ca3ae1a4..e3d4435b94ff7a1153d06e3e6bb709431b18b76b#diff-1ef3b6a1936b50f3d5ec4a1786d9e2d63d1a3e1815b103e67f20601995f355b4R96) something, what do you think?",
      "created_at": "2026-01-01T21:09:35Z",
      "updated_at": "2026-01-01T21:37:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656611435",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656611435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658905806",
      "pull_request_review_id": 3624327337,
      "id": 2658905806,
      "node_id": "PRRC_kwDOABII586ee67O",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575277,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Separated the renames and simple moves to a completely new commit to simplify review",
      "created_at": "2026-01-03T12:46:58Z",
      "updated_at": "2026-01-03T12:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2658905806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658905806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658906983",
      "pull_request_review_id": 3624328096,
      "id": 2658906983,
      "node_id": "PRRC_kwDOABII586ee7Nn",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, that's why I added that commit to demonstrate that we're fixing a potential UB as well here.\r\nIt *may* not be UB currently since it *may* not be triggered by any compiler we're using currently - but I don't want to think about those, it's why I'm demonstrating the problem explicitly.",
      "created_at": "2026-01-03T12:49:43Z",
      "updated_at": "2026-01-03T12:49:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2658906983",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658906983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766083950",
      "pull_request_review_id": 3753423708,
      "id": 2766083950,
      "node_id": "PRRC_kwDOABII586k3xdu",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\r\n\r\nI think it would be better to drop this line or add a comment explaining why it is important for `base` to point to a view object that is fully initialized.\r\n\r\nIt seems like it should be OK to pass a pointer to a partially initialized view object to this constructor, as long as the constructor is just initializing itself and not doing lookups.\r\n\r\nI guess I'm curious what the original bug was that motivated this change, because it seems like this commit is essentially adding a bug and fixing it at the same time.\r\n\r\n",
      "created_at": "2026-02-04T21:37:50Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766083950",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766083950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766093722",
      "pull_request_review_id": 3753423708,
      "id": 2766093722,
      "node_id": "PRRC_kwDOABII586k3z2a",
      "diff_hunk": "@@ -720,6 +720,11 @@ class MemPoolAccept\n     }\n \n private:\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\n+     * were pulled from disk. */\n+    CCoinsView m_dummy;",
      "path": "src/validation.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\n\nFeels like a more logical place for this would be directly before `m_view` since `m_view` is the object which depends on it.",
      "created_at": "2026-02-04T21:40:08Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766093722",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766093722"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 726,
      "original_line": 726,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766105394",
      "pull_request_review_id": 3753423708,
      "id": 2766105394,
      "node_id": "PRRC_kwDOABII586k32sy",
      "diff_hunk": "",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\r\n\r\nCan this be changed to `m_view{&m_dummy}`? This would make it obvious that `m_view` depends on `m_dummy`",
      "created_at": "2026-02-04T21:42:40Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766105394",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766105394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766244892",
      "pull_request_review_id": 3753423708,
      "id": 2766244892,
      "node_id": "PRRC_kwDOABII586k4Ywc",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 22,
      "original_position": 22,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (9e08e4881ea02120573480f22bc2082dd8f57f6e)\r\n\r\ni guess all of these methods are copied from `CCoinsView` but it seems like the implementation of this class contains some footguns. \r\n\r\nFor example the `MemPoolAccept::PreChecks` sets the `CCoinsViewEmpty` as the `m_view` backend and immediately does:\r\n\r\n```c++\r\nassert(m_active_chainstate.m_blockman.LookupBlockIndex(m_view.GetBestBlock()) == m_active_chainstate.m_chain.Tip());\r\n```\r\n\r\nEven though `m_view.GetBestBlock()` can call this method and it will return a fake value. It would seem better either to give CCoinsViewEmpty a best block member and have `GetBestBlock` return a real value, or to make it an error to call `GetBestBlock` by asserting false or raising logic_error(\"not implemented\") or something like that. There is precedent for the latter:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/4ae00e9a7183cb15877c3014bf46f2e36470c304/src/coins.h#L393-L395\r\n\r\nSimilarly the `BatchWrite` implementation seems error prone since it uses the cursor argument, but drops the best block argument. Unless something actually needs that implementation, it would seem better for it to be an error to call that method.\r\n\r\nThese are pre-existing problems and the commit doesn't make them worse, but they might be worth addressing later, or here if they could be addressed simply.\r\n\r\n",
      "created_at": "2026-02-04T22:26:44Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766244892",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766244892"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 351,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766253652",
      "pull_request_review_id": 3753423708,
      "id": 2766253652,
      "node_id": "PRRC_kwDOABII586k4a5U",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (9e08e4881ea02120573480f22bc2082dd8f57f6e)\n\nUnclear why this line is being deleted this commit. Might be worth mentioning in commit message if it is was needed earlier but is redundant now, or something like that.",
      "created_at": "2026-02-04T22:29:47Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766253652",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766253652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766285633",
      "pull_request_review_id": 3753423708,
      "id": 2766285633,
      "node_id": "PRRC_kwDOABII586k4itB",
      "diff_hunk": "@@ -14,14 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "original_commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `GetCoin`, `GetBestBlock`, and `BatchWrite` purely virtual in `CCoinsView`\" (95f2f8b2d36509f06d0de84463f260040be80029)\r\n\r\nIMO, this PR would be easier to understand and verify if code moved within single commits instead of being duplicated in an earlier commit and then deleted by later ones.\r\n\r\nThat is, I think it would be better if earlier commit \"refactor: add `CCoinsViewEmpty`\" just inherited `GetCoin()`, and similar methods instead of duplicating them. Then the methods could be moved in these later commits and it would be more obvious the implementations were not changing.\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at": "2026-02-04T22:42:12Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766285633",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766285633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766288640",
      "pull_request_review_id": 3753423708,
      "id": 2766288640,
      "node_id": "PRRC_kwDOABII586k4jcA",
      "diff_hunk": "@@ -156,7 +156,7 @@ class CoinsViewBottom final : public CCoinsView\n     uint256 GetBestBlock() const final { return {}; }\n     std::vector<uint256> GetHeadBlocks() const final { return {}; }\n     std::unique_ptr<CCoinsViewCursor> Cursor() const final { return {}; }\n-    size_t EstimateSize() const final { return m_data.size(); }\n+    size_t EstimateSize() const override { return m_data.size(); }",
      "path": "src/test/fuzz/coinscache_sim.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "original_commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `CCoinsView::EstimateSize` purely virtual\" (5a6542a0a377b9efa7a921eb15df8476b7136ee6)\n\nCurious why this was changed",
      "created_at": "2026-02-04T22:43:19Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766288640",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766288640"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": 158,
      "original_start_line": 158,
      "start_side": "RIGHT",
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774680856",
      "pull_request_review_id": 3763694331,
      "id": 2774680856,
      "node_id": "PRRC_kwDOABII586lYkUY",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766253652,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The commit message mentions this explicitly:\r\n> Also removed the sanity check from `CCoinsViewCache` constructor since the initialization isn't done via a local field anymore.",
      "created_at": "2026-02-06T15:21:03Z",
      "updated_at": "2026-02-06T15:21:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774680856",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774680856"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "LEFT"
    }
  ]
}