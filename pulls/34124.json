{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124",
    "id": 3119599294,
    "node_id": "PR_kwDOABII58658U6-",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34124",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34124.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34124.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/356eb7cd95456d79fbec806ee2105e70b4399a96",
    "number": 34124,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: make `CCoinsView` a pure virtual interface",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\nThis is part of ongoing coins caching cleanup efforts, see https://github.com/bitcoin/bitcoin/issues/34280.\r\n\r\n### Fix\r\nThis PR separates interface and noop behavior, and makes `CCoinsView` pure virtual in incremental steps:\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and temporary backends\r\n* Replace direct bare-`CCoinsView` test/dummy instantiations with `CCoinsViewEmpty`\r\n* Make all `CCoinsView` methods pure virtual (`GetCoin`, `HaveCoin`, `GetBestBlock`, `GetHeadBlocks`, `BatchWrite`, `Cursor`, `EstimateSize`)\r\n* Remove legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real db-backed view and `CCoinsViewEmpty`\r\n* In `MemPoolAccept::PreChecks`, switch backend to `CCoinsViewEmpty::Get()` explicitly instead of using a local `m_dummy` member",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2025-12-20T08:47:33Z",
    "updated_at": "2026-02-19T22:36:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "317f946ef348aa5c2455846d4ad27fc4a36a4f2f",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/pure-virtual-CCoinsView",
      "ref": "l0rinc/pure-virtual-CCoinsView",
      "sha": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 292584,
        "default_branch": "master",
        "open_issues_count": 45,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-19T22:33:46Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2026-02-19T18:23:08Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "c808dfbbdcea5e4363ef0295c01c7966c82f3b8d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38912,
        "stargazers_count": 88186,
        "watchers_count": 88186,
        "size": 305311,
        "default_branch": "master",
        "open_issues_count": 722,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-19T21:42:19Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-19T21:42:29Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 134,
    "deletions": 155,
    "changed_files": 17,
    "commits": 5,
    "review_comments": 102,
    "comments": 10
  },
  "events": [
    {
      "event": "labeled",
      "id": 21683616602,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUMcbta",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21683616602",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T08:47:37Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 3677609717,
      "node_id": "IC_kwDOABII587bM971",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3677609717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T08:47:41Z",
      "updated_at": "2026-02-19T22:34:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34124.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3602578034), [sipa](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3618585105) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3690102337), [andrewtoth](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3802232555), [Eunovo](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3820926080), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3828600047) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34320](https://github.com/bitcoin/bitcoin/pull/34320) (coins: remove redundant and confusing `CCoinsViewDB::HaveCoin` by l0rinc)\n* [#34165](https://github.com/bitcoin/bitcoin/pull/34165) (coins: don't mutate main cache when connecting block by andrewtoth)\n* [#34132](https://github.com/bitcoin/bitcoin/pull/34132) (coins: drop error catcher, centralize fatal read handling by l0rinc)\n* [#33512](https://github.com/bitcoin/bitcoin/pull/33512) (coins: use number of dirty cache entries in flush warnings/logs by l0rinc)\n* [#32317](https://github.com/bitcoin/bitcoin/pull/32317) (kernel: Separate UTXO set access from validation functions by sedited)\n* [#31132](https://github.com/bitcoin/bitcoin/pull/31132) (validation: fetch block inputs on parallel threads 3x faster IBD by andrewtoth)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#29060](https://github.com/bitcoin/bitcoin/pull/29060) (Policy: Report debug message why inputs are non standard by ismaelsadeeq)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- CCoinsViews -> CCoinsView [The comment refers to the CCoinsView type; the plural \"CCoinsViews\" is likely a typo and may confuse readers about the intended class name.]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- SetupDummyInputs(keystore, coins, {11 * COIN, 50 * COIN, 21 * COIN, 22 * COIN}) in src/bench/ccoins_caching.cpp\n- SetupDummyInputs(keystore, coins, {11*CENT, 50*CENT, 21*CENT, 22*CENT}) in src/test/transaction_tests.cpp\n- SetupDummyInputs(keystore, coins, {11*CENT, 50*CENT, 21*CENT, 22*CENT}) in src/test/transaction_tests.cpp\n\n(These calls pass numeric literal values as the third positional argument.)\n\n\n\n<sup>2026-02-19 22:34:19</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3677609717",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "commented",
      "id": 3678038276,
      "node_id": "IC_kwDOABII587bOmkE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3678038276",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T19:02:06Z",
      "updated_at": "2025-12-20T19:02:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\n\nMakes sense to make an empty view explicit, and having the base class be purely virtual.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3678038276",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "renamed",
      "id": 21686184225,
      "node_id": "RTE_lADOABII587fgV9xzwAAAAUMmOkh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21686184225",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T19:16:47Z",
      "rename": {
        "from": "refactor: make `CCoinsView` a purely abstract base class",
        "to": "refactor: make `CCoinsView` a purely virtual abstract base class"
      }
    },
    {
      "event": "reviewed",
      "id": 3602578034,
      "node_id": "PRR_kwDOABII587Wuvpy",
      "url": null,
      "actor": null,
      "commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-22T04:23:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, this seemed better separated as an interface and a dummy implementation to me too.\r\n\r\nI think squashing all the commits after the first into a single commit would be better though.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3602578034",
      "submitted_at": "2025-12-22T04:23:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21713218511,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUONWvP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21713218511",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "created_at": "2025-12-22T21:19:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21769399409,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAURjqxx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21769399409",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/784769b5b1a8465d1a09ec489a303c4616d11896",
      "created_at": "2025-12-28T10:58:14Z"
    },
    {
      "event": "commented",
      "id": 3694658009,
      "node_id": "IC_kwDOABII587cOAHZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3694658009",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-28T11:04:11Z",
      "updated_at": "2025-12-28T11:04:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "This change also revealed a potential UB in `MemPoolAccept` member init order. Since class members are constructed in [declaration order](https://en.cppreference.com/w/cpp/language/initializer_list.html#Initialization_order) (not initializer-list order), calls to a virtual method (having `m_view` depend on `m_dummy` but declared before it) can result in a virtual call through an uninitialized vptr and crash.\r\nSince the constructor didn't dereference `m_dummy` during `m_view` construction, the latent ordering hazard stayed dormant. This cleanup accidentally fixed it, but to make it explicit, I have extracted it to the first commit as a temporary fix.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3694658009",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "reviewed",
      "id": 3614915324,
      "node_id": "PRR_kwDOABII587Xdzr8",
      "url": null,
      "actor": null,
      "commit_id": "436765c23a009c18a2a8e29e8b9534924e80d1d0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T01:33:36Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3614915324",
      "submitted_at": "2025-12-29T01:33:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3615075843,
      "node_id": "PRR_kwDOABII587Xea4D",
      "url": null,
      "actor": null,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T05:39:46Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3615075843",
      "submitted_at": "2025-12-29T05:39:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3615082648,
      "node_id": "PRR_kwDOABII587XeciY",
      "url": null,
      "actor": null,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T05:46:39Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3615082648",
      "submitted_at": "2025-12-29T05:46:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21783858694,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUSa04G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21783858694",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "created_at": "2025-12-29T20:21:41Z"
    },
    {
      "event": "reviewed",
      "id": 3618585105,
      "node_id": "PRR_kwDOABII587XrzoR",
      "url": null,
      "actor": null,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-30T16:21:26Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3618585105",
      "submitted_at": "2025-12-30T16:21:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21801346703,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUTdiaP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21801346703",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/b23d784b6baee140f75882fe009be5676db4cb0b",
      "created_at": "2025-12-30T23:14:12Z"
    },
    {
      "event": "reviewed",
      "id": 3622026233,
      "node_id": "PRR_kwDOABII587X47v5",
      "url": null,
      "actor": null,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-01T19:50:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3622026233",
      "submitted_at": "2026-01-01T19:50:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "reviewed",
      "id": 3622038231,
      "node_id": "PRR_kwDOABII587X4-rX",
      "url": null,
      "actor": null,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-01T20:27:10Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3622038231",
      "submitted_at": "2026-01-01T20:27:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21821003039,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUUohUf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21821003039",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "created_at": "2026-01-01T20:42:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21821305216,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUUprGA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21821305216",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e3d4435b94ff7a1153d06e3e6bb709431b18b76b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/e3d4435b94ff7a1153d06e3e6bb709431b18b76b",
      "created_at": "2026-01-01T21:36:41Z"
    },
    {
      "event": "labeled",
      "id": 21833960474,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUVZ8wa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21833960474",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T02:36:48Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21836035022,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUVh3PO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836035022",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d82eedd0a7510dce9b4b7135a7c5d1a7edc6678c",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d82eedd0a7510dce9b4b7135a7c5d1a7edc6678c",
      "created_at": "2026-01-03T13:19:01Z"
    },
    {
      "event": "commented",
      "id": 3707052652,
      "node_id": "IC_kwDOABII587c9SJs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707052652",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:21:29Z",
      "updated_at": "2026-01-03T13:31:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "A slightly more involved rebase after https://github.com/bitcoin/bitcoin/pull/33866.\r\nMost of the conflicts were around moving `BatchWrite` around.\r\nI have also separated the second commit into 3, to address reviewer feedback regarding cleaning up naming and formatting of affected methods. This way - after a boring refactor commit - the non-trivial follow-up commits are easier to review.\r\nCan be reviewed via `git range-diff -w -U0 master e3d4435 3b800c9`.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3707052652",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "unlabeled",
      "id": 21836047952,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAUVh6ZQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836047952",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:23:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21836071895,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAUViAPX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836071895",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "created_at": "2026-01-03T13:30:42Z"
    },
    {
      "event": "labeled",
      "id": 21836073678,
      "node_id": "LE_lADOABII587fgV9xzwAAAAUViArO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836073678",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:31:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3707057937,
      "node_id": "IC_kwDOABII587c9TcR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707057937",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:31:25Z",
      "updated_at": "2026-01-03T13:31:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `ASan + LSan + UBSan + integer`: https://github.com/bitcoin/bitcoin/actions/runs/20677817262/job/59367841784</sub>\n<sub>LLM reason (âœ¨ experimental): Compiler error in fuzz/coins_view.cpp: attempted assignment with no viable overloaded operator=, causing the build to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3707057937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "unlabeled",
      "id": 21836690467,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAUVkXQj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836690467",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T16:03:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3690102337,
      "node_id": "PRR_kwDOABII587b8n5B",
      "url": null,
      "actor": null,
      "commit_id": "3b800c9e939f3c8dcaef6537624033c5be01a64e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T00:52:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 3b800c9e939f3c8dcaef6537624033c5be01a64e\r\n\r\n1) Good separation between CCoinsView (interface), CCoinsViewEmpty (no-op), and CCoinsViewBacked (delegator).\r\n2) Test files are notably cleaner, removing the repetitive `CCoinsView coinsDummy; CCoinsViewCache coins(&coinsDummy);` pattern.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3690102337",
      "submitted_at": "2026-01-22T00:52:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "review_requested",
      "id": 22203154477,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154477",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:11Z",
      "requested_reviewer": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22203154708,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUEU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154708",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:13Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22203154921,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAUraUHp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22203154921",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T00:52:14Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 22391501786,
      "node_id": "LE_lADOABII587fgV9xzwAAAAU2ozPa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22391501786",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T00:06:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22401094601,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAU3NZPJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22401094601",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "427cff7620246432cc57777ea43e86e9c5e9e680",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/427cff7620246432cc57777ea43e86e9c5e9e680",
      "created_at": "2026-01-30T08:41:23Z"
    },
    {
      "event": "unlabeled",
      "id": 22401402927,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAU3Okgv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22401402927",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T08:55:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22404364088,
      "node_id": "LE_lADOABII587fgV9xzwAAAAU3Z3c4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22404364088",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:00:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3823124049,
      "node_id": "IC_kwDOABII587j4D5R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3823124049",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:01:03Z",
      "updated_at": "2026-01-30T11:01:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `test max 6 ancestor commits`: https://github.com/bitcoin/bitcoin/actions/runs/21509735101/job/61973587699</sub>\n<sub>LLM reason (âœ¨ experimental): CI failed because the git rebase could not continue: the index has uncommitted changes preventing merge/rebase.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3823124049",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22404477926,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAU3aTPm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22404477926",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "created_at": "2026-01-30T11:06:36Z"
    },
    {
      "event": "unlabeled",
      "id": 22407834093,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAU3nGnt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22407834093",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T13:41:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3753423708,
      "node_id": "PRR_kwDOABII587fuLNc",
      "url": null,
      "actor": null,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-04T23:18:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review 515dbf1e72ef4ba0233aedcc4b40f44221f899dc. This looks good but I want to spend a little more time checking before acking. Making `CoinsView` pure-virtual seems like a clearly good change. Some things here are maybe not ideal though:\n\n- It doesn't seem good that `CCoinsViewCache` is now default constructible, but if it is default-constructed it behaves like a test class and discards data written to it. It would seem safer to requiring passing a no-op base view if you want that behavior, or to provide a separate `NoOpCoinsCache` subclass that discards data for tests.\n\n- It seems unfortunate to lose the default `HaveCoin(outpoint)` implementation (`GetCoin(outpoint).has_value()`) and force subclasses to re-implement it. Not sure if there would be any downside to keeping this method.\n\nIn general removing the no-op behaviors from the `CCoinsView` base class seems like a clearly good thing, but it would be nice to reduce uses of CCoinsViewEmpty as well. Maybe a followup could do this (or some followups already do).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3753423708",
      "submitted_at": "2026-02-04T23:18:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22594419231,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAVCu3of",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22594419231",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4fdcf62bb56c0549dfff1f812a6ce880c42f5989",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/4fdcf62bb56c0549dfff1f812a6ce880c42f5989",
      "created_at": "2026-02-06T16:42:47Z"
    },
    {
      "event": "renamed",
      "id": 22594495617,
      "node_id": "RTE_lADOABII587fgV9xzwAAAAVCvKSB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22594495617",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-06T16:45:47Z",
      "rename": {
        "from": "refactor: make `CCoinsView` a purely virtual abstract base class",
        "to": "refactor: make `CCoinsView` a pure virtual interface"
      }
    },
    {
      "event": "commented",
      "id": 3861473216,
      "node_id": "IC_kwDOABII587mKWfA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3861473216",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-06T16:47:56Z",
      "updated_at": "2026-02-06T16:47:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It doesn't seem good that CCoinsViewCache is now default constructible\r\n\r\nIndeed, inlined the default constructor to make these explicit - thanks!\r\n\r\n> It seems unfortunate to lose the default HaveCoin(outpoint) implementation (GetCoin(outpoint).has_value()) and force subclasses to re-implement it.\r\n\r\nHere I was going for the simplest transition, `HaveCoin` is just a slight \"optimization\" that is more confusing often than useful (isn't used on most paths but we have to do dummy implementations anyway - should be tackled in a dedicated PR, part of it is done in https://github.com/bitcoin/bitcoin/pull/34320, though the interface should still be split in follow-ups). Here in the fuzzer we're just testing the test for the `HaveCoin` call, but I have changed it to test existing code by delegating to `!!GetCoin(outpoint)` instead.\r\n\r\nUpdated PR description based on the [changes](https://github.com/bitcoin/bitcoin/compare/515dbf1e72ef4ba0233aedcc4b40f44221f899dc..4fdcf62bb56c0549dfff1f812a6ce880c42f5989).",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3861473216",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "reviewed",
      "id": 3781532482,
      "node_id": "PRR_kwDOABII587hZZtC",
      "url": null,
      "actor": null,
      "commit_id": "4fdcf62bb56c0549dfff1f812a6ce880c42f5989",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-10T22:55:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 4fdcf62bb56c0549dfff1f812a6ce880c42f5989. Very nice changes, and I'm much more comfortable with them having gone through the PR a second time. Thanks for all the updates since last review! I left more suggestions below but none are important.\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3781532482",
      "submitted_at": "2026-02-10T22:55:11Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "review_requested",
      "id": 22688719583,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVIWmLf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22688719583",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T22:55:17Z",
      "requested_reviewer": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22786709230,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVOMZbu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22786709230",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T06:57:25Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3802232555,
      "node_id": "PRR_kwDOABII587ioXbr",
      "url": null,
      "actor": null,
      "commit_id": "4fdcf62bb56c0549dfff1f812a6ce880c42f5989",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-14T19:23:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 4fdcf62bb56c0549dfff1f812a6ce880c42f5989\n\nI think that there are some unnecessary changes that could be dropped and commits removed. The last commit just seems like code churn.\n\nThe commits that make individual methods pure virtual can be combined into one. I think splitting them up like that makes it harder to review.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3802232555",
      "submitted_at": "2026-02-14T19:23:57Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "commented",
      "id": 3902434689,
      "node_id": "IC_kwDOABII587omm2B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3902434689",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T20:04:13Z",
      "updated_at": "2026-02-14T20:04:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "I don't think 8eb773f832b56ca0e0d9971d2bcc8f42f3abe465 (rearranging members that are getting deleted anyway) is very useful, and a1803c9a46225a8673b5ff3d23b389a18c38965e (doing a local cache to avoid using the CCoinsViewCache cache) seems like a step backwards. Weak preference for dropping d2e516e079bae495876b644a1ce4fef1fee0c09e (removing the default for HaveCoin and reimplementing it twice) as well. Still think squashing all the \"make xxx purely virtual\" commits into a single commit would also be an improvement. The fuzz changes confused me, but seem to be fixing potential UB here, so that's good, but should go further I think.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3902434689",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "commented",
      "id": 3902442769,
      "node_id": "IC_kwDOABII587omo0R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3902442769",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T20:10:47Z",
      "updated_at": "2026-02-14T20:10:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you all for the comments, will push an update soon",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3902442769",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "commented",
      "id": 3905057094,
      "node_id": "IC_kwDOABII587ownFG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3905057094",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T19:36:02Z",
      "updated_at": "2026-02-15T19:42:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Still think squashing all the \"make xxx purely virtual\" commits into a single commit would also be an improvement.\r\n\r\nAfter massaging the commits back and forth, having `CCoinsViewEmpty` as an explicit noop implementation (and usable as a base class) lets us make all `CCoinsView` methods pure virtual in one step without repeating dummy implementations in tests/fuzz.\r\n`CCoinsViewEmpty::HaveCoin` uses `!!GetCoin(outpoint)` now, so subclasses overriding GetCoin automatically get the correct HaveCoin behavior.\r\nIt's a lot cleaner this way - a lot fewer and simpler commits.\r\nThanks for the hint, added you as coauthor.\r\n\r\n> The fuzz changes confused me, but seem to be fixing potential UB here, so that's good\r\n\r\nYeah, the previous slice-assignment (`backend_coins_view = CCoinsView{}`) was a silent noop for the db target: it only copied base-class members (none) without changing the vtable, so the backend was never actually switched.\r\nWhen switching over to pointers I had to adjust the assertions since pointers make the switch real for both targets, hence the related changes here.\r\nThe toggle is no longer gated on `is_db`, so both fuzz targets cover backend switching.\r\nThe cursor check is also simplified to `!backend->Cursor() == (backend == &CCoinsViewEmpty::Get())`.\r\n\r\n[Changes since last push](https://github.com/bitcoin/bitcoin/compare/4fdcf62bb56c0549dfff1f812a6ce880c42f5989..9de3da7499137c0a5f4f6106f85be200a69d9030):\r\n* `CCoinsViewCacheTest` loses default constructor, callers pass `&CCoinsViewEmpty::Get()` explicitly\r\n* `CCoinsViewEmpty` is no longer final, constructor public, allows test subclassing\r\n    * `CCoinsViewTest` inherits `CCoinsViewEmpty`, drops 4 boilerplate overrides, gains explicit\r\n    * `CoinsViewBottom` inherits `CCoinsViewEmpty`, drops 5 boilerplate overrides; EstimateSize now returns 0 instead of `m_data.size()`\r\n* `CCoinsViewEmpty::HaveCoin` delegates to `GetCoin` so subclasses get correct HaveCoin for free\r\n* `CCoinsView::Cursor()` comment documents that implementations may return nullptr\r\n* Fuzz backend switching: saves original_backend, toggle no longer gated on `!is_db`, assertion changes to `!backend->Cursor() == (backend == coins_view_empty)` (later changed to `&CCoinsViewEmpty::Get()`)\r\n * First commit introducing a temporary invalid state squashed, code commits adjusted, (void)m_view.GetBestBlock() retained with updated comment\r\n* Wallet rename reverted, other renames added as scripted diff\r\n\r\nEdit: pushed first with clean diff, rebased separately to fix https://github.com/bitcoin/bitcoin/blob/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab/src/test/transaction_tests.cpp#L1120-L1121\r\n",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#issuecomment-3905057094",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34124"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22808192018,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAVPeWQS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22808192018",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9de3da7499137c0a5f4f6106f85be200a69d9030",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/9de3da7499137c0a5f4f6106f85be200a69d9030",
      "created_at": "2026-02-15T19:36:04Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22808216454,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAVPecOG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22808216454",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "877e713dadea535adbc0e3e79bfe106ad1c2bbff",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/877e713dadea535adbc0e3e79bfe106ad1c2bbff",
      "created_at": "2026-02-15T19:39:52Z"
    },
    {
      "event": "labeled",
      "id": 22808225930,
      "node_id": "LE_lADOABII587fgV9xzwAAAAVPeeiK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22808225930",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T19:41:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22809038484,
      "node_id": "UNLE_lADOABII587fgV9xzwAAAAVPhk6U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22809038484",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T21:10:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3820926080,
      "node_id": "PRR_kwDOABII587jvrSA",
      "url": null,
      "actor": null,
      "commit_id": "877e713dadea535adbc0e3e79bfe106ad1c2bbff",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-18T16:26:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/34124/commits/877e713dadea535adbc0e3e79bfe106ad1c2bbff",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3820926080",
      "submitted_at": "2026-02-18T16:26:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "review_requested",
      "id": 22889562521,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVUUwGZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22889562521",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T16:26:24Z",
      "requested_reviewer": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22889563405,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVUUwUN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22889563405",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T16:26:26Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3828600047,
      "node_id": "PRR_kwDOABII587kM8zv",
      "url": null,
      "actor": null,
      "commit_id": "877e713dadea535adbc0e3e79bfe106ad1c2bbff",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-19T21:41:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 877e713dadea535adbc0e3e79bfe106ad1c2bbff. Seems to need rebase due to #33512 but looks great! Lots of nice simplifications since last review.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#pullrequestreview-3828600047",
      "submitted_at": "2026-02-19T21:38:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
    },
    {
      "event": "review_requested",
      "id": 22930018810,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVWvFH6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22930018810",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T21:38:31Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxODA0NTJiZWIxYjk2MzVhMzZiZjBmNDYwNDhhZjQwYzQ2ZWIyZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5180452beb1b9635a36bf0f46048af40c46eb2dd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5180452beb1b9635a36bf0f46048af40c46eb2dd",
      "tree": {
        "sha": "0d2c5347adbfd0b00f0c5d117b60b6a649e23102",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0d2c5347adbfd0b00f0c5d117b60b6a649e23102"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0d2c5347adbfd0b00f0c5d117b60b6a649e23102\nparent c808dfbbdcea5e4363ef0295c01c7966c82f3b8d\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1771165493 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1771540347 +0100\n\nscripted-diff: normalize `CCoinsView` naming\n\nStandardize coins view naming with a mechanical rename pass.\nThis keeps subsequent commits focused on the interface and behavioral changes.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\n\n-BEGIN VERIFY SCRIPT-\ngit grep -qE '\\bin_base\\b|\\bin_view\\b|\\bin_block_hash\\b|\\bblock_hash\\b' -- src/coins.cpp src/coins.h src/txdb.cpp src/txdb.h src/test/coins_tests.cpp && { echo \"Error: target names already exist in scoped files\"; exit 1; }\n\nperl -pi -e '\n  s/\\bbaseIn\\b/in_base/g;\n  s/\\bhashBlockIn\\b/in_block_hash/g;\n  s/\\bhashBlock\\b/block_hash/g;\n  s/\\bviewIn\\b/in_view/g;\n  ' src/coins.cpp src/coins.h src/txdb.cpp src/txdb.h src/test/coins_tests.cpp\n-END VERIFY SCRIPT-\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmXj4IACgkQZp//D/pH\nenYuOg//c7KIq5prFuGKtP3VeN+6YA9dyPqnB0UJai8TJa8NKtIC2z37Y/lXhpCi\naohEFY4kE8sBOE7dyenqd3r8/wbyOoedPwYLqDWjfK0npxdwgrtKfea6OkM9o6y3\nrvTjStllkJCQBik2sOy2rIYkX7D0FU8tLPsEvqJRh3ZcW7QnPlZdADnj7yRj91ag\n0aYSBdPXRAK7UmePsDdX+YNbkkaRQx13o3vNihvtie1VX1Bmu+Tp1woGsoFXQA42\n+EOIerdl7d6/0qrALZYfgxTKCCy4pFTnZUDaD8MiIOfTYLdTo/sYMD5OYai1eIjs\nF7/H0WyRM9Aalsh5EVDbzO9O/bLnkc3ChdiAKYK0ReJEAGRX/lPHI9ayPX9GAFoe\nFW0JgPxc3rx2sMClcbycyK9yWbvpEb3tmOFd9C0WGGoYz92tl7KkPXUqDJ3ydSwd\ndzFclkwI3tg5dfMgJhBfjkRq+Eio1VRPiKE4QgFeUiaTUwSW7ZXwFe1B3TNiOaqA\nbupKnhdEuDguH11hu7meBTVAfg1UBdEqWZOC7lzHBcpucK+0WTEbsuauS7iGYeED\n2bT8Z2wvdjDKkrN7Yu1blKWyiTsXEsDrme7OUgxZ+f3i2T4aABLCMBicMFjFpZsR\n0I8scQNoEv/LJl1fs8Gv3dLusAUt9Ur1wfcl7Di+51dLkZQCI/s=\n=6UL7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c808dfbbdcea5e4363ef0295c01c7966c82f3b8d",
          "sha": "c808dfbbdcea5e4363ef0295c01c7966c82f3b8d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c808dfbbdcea5e4363ef0295c01c7966c82f3b8d"
        }
      ],
      "message": "scripted-diff: normalize `CCoinsView` naming\n\nStandardize coins view naming with a mechanical rename pass.\nThis keeps subsequent commits focused on the interface and behavioral changes.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\n\n-BEGIN VERIFY SCRIPT-\ngit grep -qE '\\bin_base\\b|\\bin_view\\b|\\bin_block_hash\\b|\\bblock_hash\\b' -- src/coins.cpp src/coins.h src/txdb.cpp src/txdb.h src/test/coins_tests.cpp && { echo \"Error: target names already exist in scoped files\"; exit 1; }\n\nperl -pi -e '\n  s/\\bbaseIn\\b/in_base/g;\n  s/\\bhashBlockIn\\b/in_block_hash/g;\n  s/\\bhashBlock\\b/block_hash/g;\n  s/\\bviewIn\\b/in_view/g;\n  ' src/coins.cpp src/coins.h src/txdb.cpp src/txdb.h src/test/coins_tests.cpp\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-19T22:32:27Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-15T14:24:53Z"
      },
      "sha": "5180452beb1b9635a36bf0f46048af40c46eb2dd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiYjE5NTg4ZWYyNmEyZjhkNjgxNjE5ZWY1YTA4ODU1MTQ4OWQ4ZTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abb19588ef26a2f8d681619ef5a088551489d8e1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/abb19588ef26a2f8d681619ef5a088551489d8e1",
      "tree": {
        "sha": "6cec599f497ebb43bc3d349f82262b22d887fad6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6cec599f497ebb43bc3d349f82262b22d887fad6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6cec599f497ebb43bc3d349f82262b22d887fad6\nparent 5180452beb1b9635a36bf0f46048af40c46eb2dd\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1771164931 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1771540354 +0100\n\nfuzz: keep backend assertions aligned to active backend\n\n`TestCoinsView` switches the `CCoinsViewCache` backend during fuzzing and then queries the backend for cross-checks.\nPass the backend as a `CCoinsView*` (to make it relocatable) and retarget it when toggling between the original backend and a local empty `CCoinsView` so assertions always refer to the active backend. This will be switched to a singleton in the next commit.\n\nNote that the previous slice-assignment (`backend_coins_view = CCoinsView{}`) was a silent noop for the db target, it only copied base-class members (none) without changing the vtable, so the backend was never actually switched.\nThe pointer approach makes the switch real for both targets, hence the related changes here.\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmXj4IACgkQZp//D/pH\nenbOWhAAirFhsyzc02ceR9pcqA2xYSMuRiq7eIRUTqpP2Ih0mC7ioFsT1NRhuoKJ\n9Me6fIc8EPSxSTOjygmfOcADrtFaDigzps9fa/rHhfw6e1ToQAvGf0LRZUx4+3Zi\noUUrlqq5fc27hrImYk6rWXbtg/yEFkqPUIlIzInFpcSJPhDQLtlk4CgC7QDBMKe1\nGNMksJSqbLuGEpzUSBqzwiHJgjkZKtrKY608oEbj7sldbrFyEfWTxfhkS52szfRj\nQ9iJTDgWumk33lF7wnw2X0okeLkX0RoGH18xa88xO+0QhWjixHmyEWlXDtnNVqf8\npzsqZNZpVAmWVtp9Z6ca0UkJtL/KJj7ZQA96gEmhIiqT2y+bQKX5twHBxUWsRjxJ\nmuDixFKWU7ZiBUaEFk+0kssDORRbzeQNWhO6OH+0ni2rz18QMUyucDquEAa4oFQH\nwQ/E28Gq889rQZ9BBReJl9XdkVw0xCCRAdjcRdlashHiDXQuvD3dq8hRdn5kNlpS\nzV2KYlwaI3ehkr2CGIKtemB178EsA3+uzzsO1Wo+/uUecPct3W8uTNGKHDFqtBPi\nOHs+lXXX1QoNKBaK+fOShHFp4VwyB46WPyiqBnuzeSkcUH5EncTxaNpRkq8k0qnT\ndFKCpESsc4S5IbUlYsTwh994IglGZy0u3CNFgbY0ME11K8W6Mvc=\n=K91A\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5180452beb1b9635a36bf0f46048af40c46eb2dd",
          "sha": "5180452beb1b9635a36bf0f46048af40c46eb2dd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5180452beb1b9635a36bf0f46048af40c46eb2dd"
        }
      ],
      "message": "fuzz: keep backend assertions aligned to active backend\n\n`TestCoinsView` switches the `CCoinsViewCache` backend during fuzzing and then queries the backend for cross-checks.\nPass the backend as a `CCoinsView*` (to make it relocatable) and retarget it when toggling between the original backend and a local empty `CCoinsView` so assertions always refer to the active backend. This will be switched to a singleton in the next commit.\n\nNote that the previous slice-assignment (`backend_coins_view = CCoinsView{}`) was a silent noop for the db target, it only copied base-class members (none) without changing the vtable, so the backend was never actually switched.\nThe pointer approach makes the switch real for both targets, hence the related changes here.\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-19T22:32:34Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-15T14:15:31Z"
      },
      "sha": "abb19588ef26a2f8d681619ef5a088551489d8e1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVlZGQ2MDY5YTU1OWNkNTgyZTNhOGJjZTgyNDU1NGRjYjE5MzEzZDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eedd6069a559cd582e3a8bce824554dcb19313d5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eedd6069a559cd582e3a8bce824554dcb19313d5",
      "tree": {
        "sha": "a09c947d96f7efd24b6f2e760bb7f951587650c1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a09c947d96f7efd24b6f2e760bb7f951587650c1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a09c947d96f7efd24b6f2e760bb7f951587650c1\nparent abb19588ef26a2f8d681619ef5a088551489d8e1\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1771164987 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1771540354 +0100\n\ncoins: add explicit `CCoinsViewEmpty` noop backend\n\nIntroduce an empty `CCoinsViewEmpty` singleton as an explicit no-op `CCoinsView` implementation.\nUse it at call sites that intentionally want a no-op backend instead of constructing anonymous placeholder views.\n\n`CCoinsViewTest` and `CoinsViewBottom` now inherit defaults from `CCoinsViewEmpty` (e.g. the unused `EstimateSize()`, which now returns 0).\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmXj4IACgkQZp//D/pH\nenYi8A//Vzk8xhctrZFelZ+ruIXpkAusPvFABCisbqQ3D+O3EYwP+hpEqL+NsjEZ\nFf9Qj3NucaFN2IJhjvdgyiqOWJ41K/dWP+fVhCD5QwRFSj1wV9EiqzFa3uANDOlb\n7IdQxZo8988j2Qy7SmUDheGXt8egGBKnpIXAnsJL+eCRehE1eYxUwTHjqkKgziGo\nw65fuOvifYA2KarEQLCG4vHCg5U79rmAuOHOLHGoMsEoMLQpveFvjcAbqIeJZakO\ngBIfzdqHGcMpe+MLUucR5HUD8Hbp9oVtFp56LJu/V6YnixhXcRGhH+Ev4dSVsIE4\ns8RkbMpGG7U/mVjeSgZhH2tiOVQwQI2ZMoQJe4tfGZ3L4snHU+9YHOjRQ4YTity8\nNAnFusSwVOR1qcUJfQn27ynyJXsChJdILrhZJh0SfEcnzaSnOibsPyUSzwi/UPlB\n+OR/YJsw6/6a+bhMSCvAnS4P1IiN8cWJaSW+EiA1lZs03SQbGdorVV1wQl5FYT//\n+5b8WU61eGl+pRuScJ+CI48rGEKUHsmbnfL53uIdR6cGPowUJg7APOT5YdwcEHMs\n+ud3PxOGn8wbd1fc6MMVwlz91s81ZhabhRV5Yltmr1ZBPolXABwMkwq4ocZGynPn\nkejBEKcY9SJilH5XbBy7nwHPzqTtICxh5VCpEOAsh0bS9aZrG0Y=\n=eE6T\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abb19588ef26a2f8d681619ef5a088551489d8e1",
          "sha": "abb19588ef26a2f8d681619ef5a088551489d8e1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/abb19588ef26a2f8d681619ef5a088551489d8e1"
        }
      ],
      "message": "coins: add explicit `CCoinsViewEmpty` noop backend\n\nIntroduce an empty `CCoinsViewEmpty` singleton as an explicit no-op `CCoinsView` implementation.\nUse it at call sites that intentionally want a no-op backend instead of constructing anonymous placeholder views.\n\n`CCoinsViewTest` and `CoinsViewBottom` now inherit defaults from `CCoinsViewEmpty` (e.g. the unused `EstimateSize()`, which now returns 0).\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-19T22:32:34Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-15T14:16:27Z"
      },
      "sha": "eedd6069a559cd582e3a8bce824554dcb19313d5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU5YjA5MDUwMmE5ZGRmNTJlOGMxZmRmMDQxNWRmNGNlYWVkZmU3Yjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7",
      "tree": {
        "sha": "9db5aca692c0c273dae0aae81dd56eebec032a6c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9db5aca692c0c273dae0aae81dd56eebec032a6c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9db5aca692c0c273dae0aae81dd56eebec032a6c\nparent eedd6069a559cd582e3a8bce824554dcb19313d5\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1771164999 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1771540354 +0100\n\ncoins: make `CCoinsView` methods pure virtual\n\n`CCoinsView` provided default no-op implementations, which allowed constructing a bare view and silently getting dummy behavior.\nMake all interface methods pure virtual and remove the legacy default definitions from `coins.cpp` so callers must choose an explicit implementation.\nNo-op backing behavior remains available via `CCoinsViewEmpty`.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmXj4IACgkQZp//D/pH\nenYm9A//WTM4gO+vb9yZX2cO8jpgeBe+k4ML90nD5PNQU92PXk5G5WtHjK5oWPYA\nkLwBLMdCQIfXW6R2PUwv1OKypcnX8NRDUOOBC1Ek5+pheEmuhDajfzSfsTh8nWic\nV0bnJ4Osf14W/cWXhRxS3UyHghdQEzAVVLJA4MNWpJHMj5F6u4Q9doyXHURLNjGT\nH5aFOyYWUAu82MVpdqW3z4FxMqDEAr9JCzVC0yDseSNRnaJjwfz7+PK4A5RRxWZM\nuKLB6Xk4mAPZFWMlHjUdveVVvUKasA2YLHa25cBK9oGMH2I42sKyyOW4bKtQpHTH\nUJpqB/srz0Y6QvZAJv2YvaNkg8m7cF4DvRJZDy1KIsJmduvgefuH1DpVjMvB9/dQ\nJESohs7mXDStDdc/K4+M1SIQLlTdvgCl/GPoJfQ+ctU+34ljvAxdcj4mHH9ajaPA\nL4nMrhZ9h+kT1f/ekBB38Q0ax8Su9UDYiiMv4CWUvCmmMrvZBKT28kZ+6GHCQ3me\n6yDtNJJR14P+vsgFNl9UqKSI2vwSgudVfmeoKet0PI5cxkGqIEQIQzmk5EpvMFGp\n4HjCJhqhh7vJgxWx5MeSAkHax1yZx5ZF9HZ1Rjc/S9FhPNwBOH10ks8AYWHKMZii\nAEn16vT2Hb9O0XGOKdxALaxr75Sk9XgqVjvISMGrYNgYqgoYUWY=\n=N6/L\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eedd6069a559cd582e3a8bce824554dcb19313d5",
          "sha": "eedd6069a559cd582e3a8bce824554dcb19313d5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eedd6069a559cd582e3a8bce824554dcb19313d5"
        }
      ],
      "message": "coins: make `CCoinsView` methods pure virtual\n\n`CCoinsView` provided default no-op implementations, which allowed constructing a bare view and silently getting dummy behavior.\nMake all interface methods pure virtual and remove the legacy default definitions from `coins.cpp` so callers must choose an explicit implementation.\nNo-op backing behavior remains available via `CCoinsViewEmpty`.",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-19T22:32:34Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-15T14:16:39Z"
      },
      "sha": "59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1NmViN2NkOTU0NTZkNzlmYmVjODA2ZWUyMTA1ZTcwYjQzOTlhOTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/356eb7cd95456d79fbec806ee2105e70b4399a96",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/356eb7cd95456d79fbec806ee2105e70b4399a96",
      "tree": {
        "sha": "1a750ac728eac10999b69c47f3b81a6d064b879b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a750ac728eac10999b69c47f3b81a6d064b879b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1a750ac728eac10999b69c47f3b81a6d064b879b\nparent 59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1771165078 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1771540355 +0100\n\nrefactor: inline `CCoinsViewBacked` implementation\n\n`CCoinsViewBacked` is a simple delegating wrapper around another `CCoinsView`.\nInline its one-line overrides in `coins.h` so the view hierarchy can be read without jumping between `coins.h` and `coins.cpp`.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmXj4MACgkQZp//D/pH\nenajCw/+N9ppZBDP0G5uoPr7tKML9jdQgtWL2dYWQ2rnGzfNQjOlMQRPzqU+3U4D\nZrK/ymWw7ZZehcXHuVzU0Lo4Lp6vUBf9zRUHGhydRBCLWCQl6yFkrL+PhSODYe7A\nyiy45zk7GfYDrZliAOOPMEDdC9N2cRoe/jqXw9lfyQAuIAbWZp4DIkud+YY0XlEm\n3vWRVr87XZ1uuhWvGGSu/jT7roKhybYZcsNDJB+u8e6mEDPIaPM47gXACmxWo4Xs\nYjrK/QTTFUEIwbUI2SYb5ax8nYfSSAwGjA0Eu0BNfxP0Tz6EAM0T0Fk8AjJiLZ6X\nu/1cWsVLSVgfdj1+odKEINkXN4NiPVaBUupTGiFS6PxYEK/1fF2BEMlsiurVS3WN\nVmlnh9lDt4/x6GDpKVbUMH8v1cob2ceRY710SEKFhfGTmqNgzplYHmKoJDyBJKbO\n5fALOa/Hi78S3uwcq5ZJ9fKh2FNXXa+70IPcHAd5CBzVQ39kxhH2zjjeeekaSCBP\nAqtMJ82DhyhE2sjayRtSImNx7rqtAxqL7yVMp++77kfwZQlS2/vw93hNsvUf3CYJ\n7TXgaNhaWOvQjQ7RSTYuTRVQrUArXf7JLgN/iGyhakcIwaIpahcucYpPyFRz2iWr\nXivew+w6LkWj5AbvcU5TRBrvDj9t8PB31OzbDjNaPl5rcsatddU=\n=ASxA\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7",
          "sha": "59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/59b090502a9ddf52e8c1fdf0415df4ceaedfe7b7"
        }
      ],
      "message": "refactor: inline `CCoinsViewBacked` implementation\n\n`CCoinsViewBacked` is a simple delegating wrapper around another `CCoinsView`.\nInline its one-line overrides in `coins.h` so the view hierarchy can be read without jumping between `coins.h` and `coins.cpp`.",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-19T22:32:35Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-15T14:17:58Z"
      },
      "sha": "356eb7cd95456d79fbec806ee2105e70b4399a96"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22931210913,
      "node_id": "HRFPE_lADOABII587fgV9xzwAAAAVWzoKh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22931210913",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/356eb7cd95456d79fbec806ee2105e70b4399a96",
      "created_at": "2026-02-19T22:33:48Z"
    },
    {
      "event": "review_requested",
      "id": 22931268934,
      "node_id": "RRE_lADOABII587fgV9xzwAAAAVWz2VG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22931268934",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T22:36:36Z",
      "requested_reviewer": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581366",
      "pull_request_review_id": 3602578034,
      "id": 2638581366,
      "node_id": "PRRC_kwDOABII586dRY52",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }",
      "path": "src/coins.cpp",
      "position": 12,
      "original_position": 8,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Don't see any value in deleting these in a separate commit from making them pure virtual.",
      "created_at": "2025-12-22T04:18:46Z",
      "updated_at": "2025-12-22T04:23:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2638581366",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 20,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581846",
      "pull_request_review_id": 3602578034,
      "id": 2638581846,
      "node_id": "PRRC_kwDOABII586dRZBW",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I could see keeping this one; it seems like a reasonable default?",
      "created_at": "2025-12-22T04:19:14Z",
      "updated_at": "2025-12-22T04:23:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2638581846",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2638581846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641275940",
      "pull_request_review_id": 3605780432,
      "id": 2641275940,
      "node_id": "PRRC_kwDOABII586dbqwk",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }",
      "path": "src/coins.cpp",
      "position": 12,
      "original_position": 8,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581366,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, moved each deletion to the commit that made the method pure, thanks.\r\nAlso made the empty class a singleton which simplified all nested usages significantly.\r\nAnd inlined the trivial implementation of `*Backing` to the header to reduce the clutter in the cpp a bit more.\r\nhttps://github.com/bitcoin/bitcoin/compare/38ae4082a13b2e6dd07e84d228c9e58d3df27b11..d5c77c71428b667b9c9f1a8eb84a75d5874b85af",
      "created_at": "2025-12-22T21:19:08Z",
      "updated_at": "2025-12-23T08:08:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2641275940",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641275940"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 20,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641276223",
      "pull_request_review_id": 3605780748,
      "id": 2641276223,
      "node_id": "PRRC_kwDOABII586dbq0_",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581846,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We need this method because of the specialized database access which doesn't need to deserialize the read value:\r\n* https://github.com/bitcoin/bitcoin/blob/fa5f29774872d18febc0df38831a6e45f3de69cc/src/txdb.cpp#L74-L76\r\n\r\nOtherwise we could of course replace it with `!!GetCoin(outpoint)`:\r\n* https://github.com/bitcoin/bitcoin/blob/7f295e1d9b44c225c823242c1f04239f46fb27a6/src/coins.cpp#L166-L169\r\n\r\nWe're not even really using the former in production code anyway (see https://github.com/bitcoin/bitcoin/pull/34132), we could probably easily inline the `!!GetCoin(outpoint)` to the few remaining call sites instead. Regardless, the current change should simplify usage and we can investigate that later.\r\n\r\n------\r\n\r\nAlso, the underlying problem is that having a separate `CCoinsView` makes adding defaults weird, there's no logical default behavior.\r\nBut we could inline it into `CCoinsViewBacked` (and delete `CCoinsView` and rename `CCoinsViewBacked` back to `CCoinsView`)  and use that as the base for the other caches, with the default implementation simply delegating to `base`, something like:\r\n```patch\r\ndiff --git a/src/coins.cpp b/src/coins.cpp\r\nindex 9bdcb42f45..4f66ed447b 100644\r\n--- a/src/coins.cpp\r\n+++ b/src/coins.cpp\r\n@@ -14,7 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\r\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\r\n \r\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\r\n-    CCoinsViewBacked(baseIn), m_deterministic(deterministic),\r\n+    CCoinsView(baseIn), m_deterministic(deterministic),\r\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\r\n {\r\n     m_sentinel.second.SelfRef(m_sentinel);\r\n@@ -362,10 +362,10 @@ static ReturnType ExecuteBackedWrapper(Func func, const std::vector<std::functio\r\n \r\n std::optional<Coin> CCoinsViewErrorCatcher::GetCoin(const COutPoint& outpoint) const\r\n {\r\n-    return ExecuteBackedWrapper<std::optional<Coin>>([&]() { return CCoinsViewBacked::GetCoin(outpoint); }, m_err_callbacks);\r\n+    return ExecuteBackedWrapper<std::optional<Coin>>([&]() { return CCoinsView::GetCoin(outpoint); }, m_err_callbacks);\r\n }\r\n \r\n bool CCoinsViewErrorCatcher::HaveCoin(const COutPoint& outpoint) const\r\n {\r\n-    return ExecuteBackedWrapper<bool>([&]() { return CCoinsViewBacked::HaveCoin(outpoint); }, m_err_callbacks);\r\n+    return ExecuteBackedWrapper<bool>([&]() { return CCoinsView::HaveCoin(outpoint); }, m_err_callbacks);\r\n }\r\ndiff --git a/src/coins.h b/src/coins.h\r\nindex a64f30376d..7e8120f710 100644\r\n--- a/src/coins.h\r\n+++ b/src/coins.h\r\n@@ -303,37 +303,46 @@ private:\r\n     bool m_will_erase;\r\n };\r\n \r\n-/** Pure abstract view on the open txout dataset. */\r\n+/** Coins view backed by another CCoinsView. */\r\n class CCoinsView\r\n {\r\n+protected:\r\n+    CCoinsView* base{nullptr};\r\n+\r\n+    CCoinsView() = default;\r\n+\r\n public:\r\n+    explicit CCoinsView(CCoinsView* viewIn) : base(Assert(viewIn)) {}\r\n+\r\n     //! As we use CCoinsViews polymorphically, have a virtual destructor\r\n     virtual ~CCoinsView() = default;\r\n \r\n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\r\n+\r\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\r\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\r\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\r\n \r\n     //! Just check whether a given outpoint is unspent.\r\n-    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\r\n+    virtual bool HaveCoin(const COutPoint& outpoint) const { return base->HaveCoin(outpoint); }\r\n \r\n     //! Retrieve the block hash whose state this CCoinsView currently represents\r\n-    virtual uint256 GetBestBlock() const = 0;\r\n+    virtual uint256 GetBestBlock() const { return base->GetBestBlock(); }\r\n \r\n     //! Retrieve the range of blocks that may have been only partially written.\r\n     //! If the database is in a consistent state, the result is the empty vector.\r\n     //! Otherwise, a two-element vector is returned consisting of the new and\r\n     //! the old block hash, in that order.\r\n-    virtual std::vector<uint256> GetHeadBlocks() const = 0;\r\n+    virtual std::vector<uint256> GetHeadBlocks() const { return base->GetHeadBlocks(); }\r\n \r\n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\r\n     //! The passed cursor is used to iterate through the coins.\r\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\r\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) { return base->BatchWrite(cursor, hashBlock); }\r\n \r\n     //! Get a cursor to iterate over the whole state\r\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\r\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const { return base->Cursor(); }\r\n \r\n     //! Estimate database size\r\n-    virtual size_t EstimateSize() const = 0;\r\n+    virtual size_t EstimateSize() const { return base->EstimateSize(); }\r\n };\r\n \r\n /** Noop coins view. */\r\n@@ -361,28 +370,8 @@ public:\r\n     size_t EstimateSize() const override { return 0; }\r\n };\r\n \r\n-/** CCoinsView backed by another CCoinsView */\r\n-class CCoinsViewBacked : public CCoinsView\r\n-{\r\n-protected:\r\n-    CCoinsView* base;\r\n-\r\n-public:\r\n-    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{viewIn} {}\r\n-\r\n-    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\r\n-\r\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\r\n-    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\r\n-    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\r\n-    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\r\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }\r\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return base->Cursor(); }\r\n-    size_t EstimateSize() const override { return base->EstimateSize(); }\r\n-};\r\n-\r\n /** CCoinsView that adds a memory cache for transactions to another CCoinsView */\r\n-class CCoinsViewCache : public CCoinsViewBacked\r\n+class CCoinsViewCache : public CCoinsView\r\n {\r\n private:\r\n     const bool m_deterministic;\r\n@@ -534,10 +523,10 @@ const Coin& AccessByTxid(const CCoinsViewCache& cache, const Txid& txid);\r\n  *\r\n  * Writes do not need similar protection, as failure to write is handled by the caller.\r\n */\r\n-class CCoinsViewErrorCatcher final : public CCoinsViewBacked\r\n+class CCoinsViewErrorCatcher final : public CCoinsView\r\n {\r\n public:\r\n-    explicit CCoinsViewErrorCatcher(CCoinsView* view) : CCoinsViewBacked(view) {}\r\n+    explicit CCoinsViewErrorCatcher(CCoinsView* view) : CCoinsView(view) {}\r\n \r\n     void AddReadErrCallback(std::function<void()> f) {\r\n         m_err_callbacks.emplace_back(std::move(f));\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 4dc692bfd8..3e47428e8e 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -720,7 +720,7 @@ bool CTxMemPool::HasNoInputsOf(const CTransaction &tx) const\r\n     return true;\r\n }\r\n \r\n-CCoinsViewMemPool::CCoinsViewMemPool(CCoinsView* baseIn, const CTxMemPool& mempoolIn) : CCoinsViewBacked(baseIn), mempool(mempoolIn) { }\r\n+CCoinsViewMemPool::CCoinsViewMemPool(CCoinsView* baseIn, const CTxMemPool& mempoolIn) : CCoinsView(baseIn), mempool(mempoolIn) { }\r\n \r\n std::optional<Coin> CCoinsViewMemPool::GetCoin(const COutPoint& outpoint) const\r\n {\r\ndiff --git a/src/txmempool.h b/src/txmempool.h\r\nindex 166a024823..4c24766c77 100644\r\n--- a/src/txmempool.h\r\n+++ b/src/txmempool.h\r\n@@ -778,7 +778,7 @@ public:\r\n  * signrawtransactionwithkey and signrawtransactionwithwallet,\r\n  * as long as the conflicting transaction is not yet confirmed.\r\n  */\r\n-class CCoinsViewMemPool : public CCoinsViewBacked\r\n+class CCoinsViewMemPool : public CCoinsView\r\n {\r\n     /**\r\n     * Coins made available by transactions being validated. Tracking these allows for package\r\n\r\n```\r\n\r\nThis would introduce a sensible default as the base class behavior (always delegating) and we'd instantiate it with the empty sigleton, which would always do nothin'.\r\nI haven't included this yet, we can discuss if it's a good idea.",
      "created_at": "2025-12-22T21:19:13Z",
      "updated_at": "2025-12-22T21:19:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2641276223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2641276223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650048046",
      "pull_request_review_id": 3614915324,
      "id": 2650048046,
      "node_id": "PRRC_kwDOABII586d9IYu",
      "diff_hunk": "@@ -722,6 +722,11 @@ class MemPoolAccept\n     }\n \n private:\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\n+     * were pulled from disk. */\n+    CCoinsView m_dummy;\n+",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "original_commit_id": "436765c23a009c18a2a8e29e8b9534924e80d1d0",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit 436765c23a009c18a2a8e29e8b9534924e80d1d0, it looks like you forgot to include the removal diff.\r\n\r\nEdit: It's doubly removed in 148a0a94c65425b7ea9b6cc667502167b8c1c7a0, but that second removal should be here.",
      "created_at": "2025-12-29T01:33:36Z",
      "updated_at": "2025-12-29T05:31:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650048046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650048046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 729,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650227623",
      "pull_request_review_id": 3615075843,
      "id": 2650227623,
      "node_id": "PRRC_kwDOABII586d90On",
      "diff_hunk": "@@ -378,6 +403,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n \n public:\n     CCoinsViewCache(CCoinsView *baseIn, bool deterministic = false);\n+    CCoinsViewCache() : CCoinsViewCache{&CCoinsViewEmpty::Get()} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 111,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Should this constructor be on `CCoinsViewBacked` instead?",
      "created_at": "2025-12-29T05:39:46Z",
      "updated_at": "2025-12-29T05:39:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650227623",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650227623"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650234336",
      "pull_request_review_id": 3615082648,
      "id": 2650234336,
      "node_id": "PRRC_kwDOABII586d913g",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure about this sanity check. We're checking that a call to this method will work? Is this better than an assertion that baseIn is non-null? Why not refactor `baseIn` to be a reference?",
      "created_at": "2025-12-29T05:46:39Z",
      "updated_at": "2025-12-29T05:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650234336",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650234336"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650833138",
      "pull_request_review_id": 3615731889,
      "id": 2650833138,
      "node_id": "PRRC_kwDOABII586eAIDy",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it's not null, it will give illegal access since it points to a random address. Try reverting and running any of the mentioned tests from the commit message.",
      "created_at": "2025-12-29T12:07:36Z",
      "updated_at": "2025-12-29T12:07:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650833138",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650833138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651156940",
      "pull_request_review_id": 3616078914,
      "id": 2651156940,
      "node_id": "PRRC_kwDOABII586eBXHM",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ok, but if it's a pointer it is legal for it to be a nullptr. So we should check first if it is not nullptr.\r\nAlso, instead of accessing a method, we could do a dynamic cast to `CCoinsView*` and assert the result.\r\n```suggestion\r\n    assert(!base || dynamic_cast<CCoinsView*>(base));\r\n```",
      "created_at": "2025-12-29T14:58:56Z",
      "updated_at": "2025-12-29T17:13:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651156940",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651156940"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651708755",
      "pull_request_review_id": 3616683354,
      "id": 2651708755,
      "node_id": "PRRC_kwDOABII586eDd1T",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`assert(!base || dynamic_cast<CCoinsView*>(base));` doesn't trigger the failure.\r\n\r\nReverting `m_dummy` (which I did accidentally in the first commit already):\r\n```patch\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\n--- a/src/validation.cpp\t(revision 5f5ff9798098a7cf9c5311dc54c615245fec1a3b)\r\n+++ b/src/validation.cpp\t(date 1767039346685)\r\n@@ -722,11 +722,6 @@\r\n     }\r\n \r\n private:\r\n-    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\r\n-     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\r\n-     * were pulled from disk. */\r\n-    CCoinsView m_dummy;\r\n-\r\n     CTxMemPool& m_pool;\r\n \r\n     /** Holds a cached view of available coins from the UTXO set, mempool, and artificial temporary coins (to enable package validation).\r\n@@ -746,6 +741,10 @@\r\n     /** When m_view is connected to m_viewmempool as its backend, it can pull coins from the mempool and from the UTXO\r\n      * set. This is also where temporary coins are stored. */\r\n     CCoinsViewMemPool m_viewmempool;\r\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\r\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\r\n+     * were pulled from disk. */\r\n+    CCoinsView m_dummy;\r\n \r\n     Chainstate& m_active_chainstate;\r\n```\r\n\r\nAnd running:\r\n> cmake -B build  -DCMAKE_BUILD_TYPE=Debug && cmake --build build && ./build/bin/test_bitcoin --run_test=wallet_tests\r\n\r\nfails correctly with:\r\n> Running 13 test cases...\r\n> ******** errors disabling the alternate stack:\r\n>         #error:22\r\n>         Invalid argument\r\n> unknown location:0: fatal error: in \"wallet_tests/CreateWallet\": memory access violation at address: 0x5f4d1884: invalid permissions\r\n>  wallet/test/wallet_tests.cpp:622: last checkpoint\r\n\r\nMoved the proper removal to the first commit: https://github.com/bitcoin/bitcoin/compare/784769b5b1a8465d1a09ec489a303c4616d11896..a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "created_at": "2025-12-29T20:20:22Z",
      "updated_at": "2025-12-29T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651708755",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651708755"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651711783",
      "pull_request_review_id": 3616686593,
      "id": 2651711783,
      "node_id": "PRRC_kwDOABII586eDekn",
      "diff_hunk": "@@ -378,6 +403,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n \n public:\n     CCoinsViewCache(CCoinsView *baseIn, bool deterministic = false);\n+    CCoinsViewCache() : CCoinsViewCache{&CCoinsViewEmpty::Get()} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 111,
      "commit_id": "515dbf1e72ef4ba0233aedcc4b40f44221f899dc",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650227623,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How so? We have to init `m_deterministic` as well...",
      "created_at": "2025-12-29T20:21:32Z",
      "updated_at": "2025-12-29T20:21:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2651711783",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651711783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652027175",
      "pull_request_review_id": 3617058212,
      "id": 2652027175,
      "node_id": "PRRC_kwDOABII586eErkn",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm dynamic casting uninitialized memory should be UB as well, but I guess it doesn't trigger a memory access violation.\r\nBut, we still need to check that `base` is not `nullptr` before accessing, otherwise passing `nullptr` would trigger undefined behavior.",
      "created_at": "2025-12-30T01:08:33Z",
      "updated_at": "2025-12-30T01:08:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2652027175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652027175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652387942",
      "pull_request_review_id": 3617447177,
      "id": 2652387942,
      "node_id": "PRRC_kwDOABII586eGDpm",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "i don't think we support nullptr currently - it's why we have a default implementation with dummy values. ",
      "created_at": "2025-12-30T07:21:04Z",
      "updated_at": "2025-12-30T07:21:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2652387942",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652387942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653138327",
      "pull_request_review_id": 3618429076,
      "id": 2653138327,
      "node_id": "PRRC_kwDOABII586eI62X",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The API supports it. I use it in #31132. If we want to disallow it then we should change the parameter to a reference.",
      "created_at": "2025-12-30T14:35:02Z",
      "updated_at": "2025-12-30T14:35:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653138327",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653138327"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653248652",
      "pull_request_review_id": 3618585105,
      "id": 2653248652,
      "node_id": "PRRC_kwDOABII586eJVyM",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "As I understand it, this is sanity testing through triggering UB in the case the bug is present. I don't think that is ideal, as the compiler is allowed to assume it won't happen and optimize it away. This isn't too far fetched - if it could be inferred that (all implementations of) `CCoinsView::GetBestBlock` are side-effect free, then the statement `(void)base->GetBestBlock();` could just be optimized away.\n\nTesting for bugs due to initialization order seems more like a job for UBSan. Unfortunately, it seems none of the current fuzz tests (with UBSan enabled) trigger with the following patch (on master):\n\n```diff\ndiff --git a/src/coins.cpp b/src/coins.cpp\nindex 14381ecb0aa..c7206c22554 100644\n--- a/src/coins.cpp\n+++ b/src/coins.cpp\n@@ -38,6 +38,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    assert(!base || dynamic_cast<CCoinsView*>(base));\n     m_sentinel.second.SelfRef(m_sentinel);\n }\n```\n\nI'm not objecting to this change, but I think it would be better if we could test for bugs of this class in a more systematic way.\n",
      "created_at": "2025-12-30T15:31:21Z",
      "updated_at": "2025-12-30T16:21:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653248652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653248652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653974593",
      "pull_request_review_id": 3619382385,
      "id": 2653974593,
      "node_id": "PRRC_kwDOABII586eMHBB",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> The API supports it. I use it in https://github.com/bitcoin/bitcoin/pull/31132. If we want to disallow it then we should change the parameter to a reference.\r\n\r\nMy understanding is that it was stored as a pointer since references cannot be reallocated and we need to call `SetBackend` currently in a few places (which takes a reference, also proving that `nullptr` was never the goal).\r\nWe can change it to `std::reference_wrapper<CCoinsView> base` but it would trigger a huge changeset if it percolates to getting rid of all pointers in the constructors. But I don't mind adding an `Assert` to forbid that at least during runtime and fix the constructor and call sites after this PR is merged:\r\n```C++\r\nclass CCoinsViewBacked : public CCoinsView\r\n{\r\nprotected:\r\n    std::reference_wrapper<CCoinsView> base;\r\n\r\npublic:\r\n    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{*Assert(viewIn)} {} // TODO change to reference\r\n\r\n    void SetBackend(CCoinsView& viewIn) { base = std::ref(viewIn); }\r\n\r\n    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base.get().GetCoin(outpoint); }\r\n    bool HaveCoin(const COutPoint& outpoint) const override { return base.get().HaveCoin(outpoint); }\r\n    uint256 GetBestBlock() const override { return base.get().GetBestBlock(); }\r\n    std::vector<uint256> GetHeadBlocks() const override { return base.get().GetHeadBlocks(); }\r\n    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base.get().BatchWrite(cursor, hashBlock); }\r\n    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return base.get().Cursor(); }\r\n    size_t EstimateSize() const override { return base.get().EstimateSize(); }\r\n};\r\n```",
      "created_at": "2025-12-30T22:07:07Z",
      "updated_at": "2025-12-30T22:07:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653974593",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653974593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653979894",
      "pull_request_review_id": 3619387129,
      "id": 2653979894,
      "node_id": "PRRC_kwDOABII586eMIT2",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sorry if I was unclear. `base` should remain a pointer. `viewIn` should be a reference in the constructor, as it is in `SetBackend`.",
      "created_at": "2025-12-30T22:09:14Z",
      "updated_at": "2025-12-30T22:09:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2653979894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653979894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654002456",
      "pull_request_review_id": 3619410447,
      "id": 2654002456,
      "node_id": "PRRC_kwDOABII586eMN0Y",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> viewIn should be a reference in the constructor\r\n\r\nyeah, that's what I meant by:\r\n\r\n> it would trigger a huge changeset if it percolates to getting rid of all pointers in the constructors\r\n\r\nIt triggered changes in 22 files so far - I have stopped refactoring after a while. We can prohibit new `nullptr` bases via an `Assert` for now, and clean up this area in a separate PR since it's a bit messy.",
      "created_at": "2025-12-30T22:17:45Z",
      "updated_at": "2025-12-30T22:19:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2654002456",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654002456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654282589",
      "pull_request_review_id": 3619698402,
      "id": 2654282589,
      "node_id": "PRRC_kwDOABII586eNSNd",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I don't think that is ideal, as the compiler is allowed to assume it won't happen and optimize it away.\r\n\r\nI needed something to demonstrate the UB - and that it's fixed now, so [I have removed this reproducer in the second commit](https://github.com/bitcoin/bitcoin/compare/a69ea84b83d22c66ddeeba6d27b761036d6fec40..b23d784b6baee140f75882fe009be5676db4cb0b#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cL20). Would be cool if we could instrument the code with something like `-fsanitize=vptr` or `-Wreorder-ctor` (haven't tried any of them, not sure they would have found this one).\r\n\r\nI've also [added the `Assert`](https://github.com/bitcoin/bitcoin/compare/a69ea84b83d22c66ddeeba6d27b761036d6fec40..b23d784b6baee140f75882fe009be5676db4cb0b#diff-095ce1081a930998a10b37358fae5499ac47f8cb6f25f5df5d88e920a54e0341L371) to prohibit `nullptr` bases in `CCoinsViewBacked` - we should use `CCoinsViewEmpty::Get()` from now on to stop the propagation.",
      "created_at": "2025-12-30T23:18:12Z",
      "updated_at": "2025-12-31T06:47:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2654282589",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2654282589"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656573494",
      "pull_request_review_id": 3622026233,
      "id": 2656573494,
      "node_id": "PRRC_kwDOABII586eWBg2",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) = 0;\r\n```",
      "created_at": "2026-01-01T19:44:57Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656573494",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656573494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574800",
      "pull_request_review_id": 3622026233,
      "id": 2656574800,
      "node_id": "PRRC_kwDOABII586eWB1Q",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Should we iterate through the cursor here to clear it, and return `true`? If we return `false` we leave the parent cache in an inconsistent state.",
      "created_at": "2026-01-01T19:47:55Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656574800",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574800"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574925",
      "pull_request_review_id": 3622026233,
      "id": 2656574925,
      "node_id": "PRRC_kwDOABII586eWB3N",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 92,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    explicit CCoinsViewBacked(CCoinsView* view_in) : base{Assert(view_in)} {}\r\n```",
      "created_at": "2026-01-01T19:48:10Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656574925",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656574925"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575022",
      "pull_request_review_id": 3622026233,
      "id": 2656575022,
      "node_id": "PRRC_kwDOABII586eWB4u",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 94,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    void SetBackend(CCoinsView& view_in) { base = &view_in; }\r\n```",
      "created_at": "2026-01-01T19:48:22Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656575022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575277",
      "pull_request_review_id": 3622026233,
      "id": 2656575277,
      "node_id": "PRRC_kwDOABII586eWB8t",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override { return base->BatchWrite(cursor, block_hash); }\r\n```",
      "created_at": "2026-01-01T19:48:53Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656575277",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656575277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656576235",
      "pull_request_review_id": 3622026233,
      "id": 2656576235,
      "node_id": "PRRC_kwDOABII586eWCLr",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure we need this commit at all, since the PR deletes `m_dummy` and doesn't keep this line either.",
      "created_at": "2026-01-01T19:50:43Z",
      "updated_at": "2026-01-01T19:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656576235",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656576235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656592223",
      "pull_request_review_id": 3622038231,
      "id": 2656592223,
      "node_id": "PRRC_kwDOABII586eWGFf",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We want to keep the behavior of resetting the backend.\r\n\r\n```suggestion\r\n                if (is_db || fuzzed_data_provider.ConsumeBool()) {\r\n                    auto db_params = DBParams{\r\n                        .path = \"\",\r\n                        .cache_bytes = 1_MiB,\r\n                        .memory_only = true,\r\n                    };\r\n                    backend_coins_view = CCoinsViewDB{std::move(db_params), CoinsViewOptions{}};\r\n                }\r\n                coins_view_cache.SetBackend(backend_coins_view);\r\n```",
      "created_at": "2026-01-01T20:27:10Z",
      "updated_at": "2026-01-01T20:27:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656592223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656592223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599709",
      "pull_request_review_id": 3622042612,
      "id": 2656599709,
      "node_id": "PRRC_kwDOABII586eWH6d",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656573494,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done in the second commit to get that out of the way.",
      "created_at": "2026-01-01T20:42:57Z",
      "updated_at": "2026-01-01T20:42:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599709",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599768",
      "pull_request_review_id": 3622042643,
      "id": 2656599768,
      "node_id": "PRRC_kwDOABII586eWH7Y",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656574800,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> If we return false \r\n\r\nI expect this to be merged after https://github.com/bitcoin/bitcoin/pull/33866/files#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cR19-R22, where there is no return value anymore.\r\n\r\n> Should we iterate through the cursor here to clear it\r\n\r\nThanks, done.",
      "created_at": "2026-01-01T20:43:04Z",
      "updated_at": "2026-01-01T20:43:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599768",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599768"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599790",
      "pull_request_review_id": 3622042662,
      "id": 2656599790,
      "node_id": "PRRC_kwDOABII586eWH7u",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 92,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656574925,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:08Z",
      "updated_at": "2026-01-01T20:43:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599809",
      "pull_request_review_id": 3622042685,
      "id": 2656599809,
      "node_id": "PRRC_kwDOABII586eWH8B",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 94,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575022,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:10Z",
      "updated_at": "2026-01-01T20:43:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599809",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599809"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599841",
      "pull_request_review_id": 3622042719,
      "id": 2656599841,
      "node_id": "PRRC_kwDOABII586eWH8h",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575277,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-01T20:43:15Z",
      "updated_at": "2026-01-01T20:43:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656599841",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656599841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602352",
      "pull_request_review_id": 3622044422,
      "id": 2656602352,
      "node_id": "PRRC_kwDOABII586eWIjw",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can you explain why you think so? If we have a database backing the cache than we should switch it to another one? in https://github.com/bitcoin/bitcoin/blob/7817197cf2eb07aae32a6f67408c4493a57ea465/src/validation.cpp#L880 we have a normal db switched to an empty one. Here we're either setting the provided `backend_coins_view` or creating a new one - is that not what you think we should do?",
      "created_at": "2026-01-01T20:49:04Z",
      "updated_at": "2026-01-01T20:49:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656602352",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602352"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602847",
      "pull_request_review_id": 3622044687,
      "id": 2656602847,
      "node_id": "PRRC_kwDOABII586eWIrf",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The reason is explain in the commit message:\r\n> In a follow-up `m_dummy` will be completely removed, this commit was meant to demonstrate why that was necessary.\r\n\r\nI.e. I don't want the fix to be accidental - fix first, replace after.",
      "created_at": "2026-01-01T20:50:03Z",
      "updated_at": "2026-01-01T20:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656602847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656602847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656604510",
      "pull_request_review_id": 3622045880,
      "id": 2656604510,
      "node_id": "PRRC_kwDOABII586eWJFe",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We are making assertions on `backend_coins_view` below, where we assume it is what is set as the backend of `coins_view_cache`. So if we set the backend as the empty view singleton and don't update `backend_coins_view` those assertions will fail.",
      "created_at": "2026-01-01T20:54:23Z",
      "updated_at": "2026-01-01T20:54:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656604510",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656604510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656605146",
      "pull_request_review_id": 3622046185,
      "id": 2656605146,
      "node_id": "PRRC_kwDOABII586eWJPa",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "But it's not necessary. There is no UB unless you add this commit.",
      "created_at": "2026-01-01T20:55:26Z",
      "updated_at": "2026-01-01T20:55:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656605146",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656605146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656611435",
      "pull_request_review_id": 3622050508,
      "id": 2656611435,
      "node_id": "PRRC_kwDOABII586eWKxr",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Edit: [pushed](https://github.com/bitcoin/bitcoin/compare/50245cadd68c3345c551cd65f878e9c7ca3ae1a4..e3d4435b94ff7a1153d06e3e6bb709431b18b76b#diff-1ef3b6a1936b50f3d5ec4a1786d9e2d63d1a3e1815b103e67f20601995f355b4R96) something, what do you think?",
      "created_at": "2026-01-01T21:09:35Z",
      "updated_at": "2026-01-01T21:37:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656611435",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2656611435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658905806",
      "pull_request_review_id": 3624327337,
      "id": 2658905806,
      "node_id": "PRRC_kwDOABII586ee67O",
      "diff_hunk": "@@ -303,58 +303,83 @@ struct CoinsViewCacheCursor\n     bool m_will_erase;\n };\n \n-/** Abstract view on the open txout dataset. */\n+/** Pure abstract view on the open txout dataset. */\n class CCoinsView\n {\n public:\n+    //! As we use CCoinsViews polymorphically, have a virtual destructor\n+    virtual ~CCoinsView() = default;\n+\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n-    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n+    virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const = 0;\n \n     //! Just check whether a given outpoint is unspent.\n-    virtual bool HaveCoin(const COutPoint &outpoint) const;\n+    virtual bool HaveCoin(const COutPoint& outpoint) const = 0;\n \n     //! Retrieve the block hash whose state this CCoinsView currently represents\n-    virtual uint256 GetBestBlock() const;\n+    virtual uint256 GetBestBlock() const = 0;\n \n     //! Retrieve the range of blocks that may have been only partially written.\n     //! If the database is in a consistent state, the result is the empty vector.\n     //! Otherwise, a two-element vector is returned consisting of the new and\n     //! the old block hash, in that order.\n-    virtual std::vector<uint256> GetHeadBlocks() const;\n+    virtual std::vector<uint256> GetHeadBlocks() const = 0;\n \n     //! Do a bulk modification (multiple Coin changes + BestBlock change).\n     //! The passed cursor is used to iterate through the coins.\n-    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock);\n+    virtual bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n-\n-    //! As we use CCoinsViews polymorphically, have a virtual destructor\n-    virtual ~CCoinsView() = default;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;\n \n-    //! Estimate database size (0 if not implemented)\n-    virtual size_t EstimateSize() const { return 0; }\n+    //! Estimate database size\n+    virtual size_t EstimateSize() const = 0;\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }\n+    std::vector<uint256> GetHeadBlocks() const override { return {}; }\n+    bool BatchWrite(CoinsViewCacheCursor&, const uint256&) override { return false; }\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override { return {}; }\n+    size_t EstimateSize() const override { return 0; }\n+};\n \n /** CCoinsView backed by another CCoinsView */\n class CCoinsViewBacked : public CCoinsView\n {\n protected:\n-    CCoinsView *base;\n+    CCoinsView* base;\n \n public:\n-    CCoinsViewBacked(CCoinsView *viewIn);\n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n-    bool HaveCoin(const COutPoint &outpoint) const override;\n-    uint256 GetBestBlock() const override;\n-    std::vector<uint256> GetHeadBlocks() const override;\n-    void SetBackend(CCoinsView &viewIn);\n-    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) override;\n-    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n-    size_t EstimateSize() const override;\n-};\n+    explicit CCoinsViewBacked(CCoinsView* viewIn) : base{Assert(viewIn)} {}\n \n+    void SetBackend(CCoinsView& viewIn) { base = &viewIn; }\n+\n+    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override { return base->GetCoin(outpoint); }\n+    bool HaveCoin(const COutPoint& outpoint) const override { return base->HaveCoin(outpoint); }\n+    uint256 GetBestBlock() const override { return base->GetBestBlock(); }\n+    std::vector<uint256> GetHeadBlocks() const override { return base->GetHeadBlocks(); }\n+    bool BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override { return base->BatchWrite(cursor, hashBlock); }",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 100,
      "commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656575277,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Separated the renames and simple moves to a completely new commit to simplify review",
      "created_at": "2026-01-03T12:46:58Z",
      "updated_at": "2026-01-03T12:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2658905806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658905806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 379,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658906983",
      "pull_request_review_id": 3624328096,
      "id": 2658906983,
      "node_id": "PRRC_kwDOABII586ee7Nn",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, that's why I added that commit to demonstrate that we're fixing a potential UB as well here.\r\nIt *may* not be UB currently since it *may* not be triggered by any compiler we're using currently - but I don't want to think about those, it's why I'm demonstrating the problem explicitly.",
      "created_at": "2026-01-03T12:49:43Z",
      "updated_at": "2026-01-03T12:49:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2658906983",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2658906983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766083950",
      "pull_request_review_id": 3753423708,
      "id": 2766083950,
      "node_id": "PRRC_kwDOABII586k3xdu",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\r\n\r\nI think it would be better to drop this line or add a comment explaining why it is important for `base` to point to a view object that is fully initialized.\r\n\r\nIt seems like it should be OK to pass a pointer to a partially initialized view object to this constructor, as long as the constructor is just initializing itself and not doing lookups.\r\n\r\nI guess I'm curious what the original bug was that motivated this change, because it seems like this commit is essentially adding a bug and fixing it at the same time.\r\n\r\n",
      "created_at": "2026-02-04T21:37:50Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766083950",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766083950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766093722",
      "pull_request_review_id": 3753423708,
      "id": 2766093722,
      "node_id": "PRRC_kwDOABII586k3z2a",
      "diff_hunk": "@@ -720,6 +720,11 @@ class MemPoolAccept\n     }\n \n private:\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\n+     * were pulled from disk. */\n+    CCoinsView m_dummy;",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\n\nFeels like a more logical place for this would be directly before `m_view` since `m_view` is the object which depends on it.",
      "created_at": "2026-02-04T21:40:08Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766093722",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766093722"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 726,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766105394",
      "pull_request_review_id": 3753423708,
      "id": 2766105394,
      "node_id": "PRRC_kwDOABII586k32sy",
      "diff_hunk": "",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: fix `MemPoolAccept` member init order\" (4f44250955c6429a338027e2606c5c33a473a366)\r\n\r\nCan this be changed to `m_view{&m_dummy}`? This would make it obvious that `m_view` depends on `m_dummy`",
      "created_at": "2026-02-04T21:42:40Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766105394",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766105394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 734,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766244892",
      "pull_request_review_id": 3753423708,
      "id": 2766244892,
      "node_id": "PRRC_kwDOABII586k4Ywc",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (9e08e4881ea02120573480f22bc2082dd8f57f6e)\r\n\r\ni guess all of these methods are copied from `CCoinsView` but it seems like the implementation of this class contains some footguns. \r\n\r\nFor example the `MemPoolAccept::PreChecks` sets the `CCoinsViewEmpty` as the `m_view` backend and immediately does:\r\n\r\n```c++\r\nassert(m_active_chainstate.m_blockman.LookupBlockIndex(m_view.GetBestBlock()) == m_active_chainstate.m_chain.Tip());\r\n```\r\n\r\nEven though `m_view.GetBestBlock()` can call this method and it will return a fake value. It would seem better either to give CCoinsViewEmpty a best block member and have `GetBestBlock` return a real value, or to make it an error to call `GetBestBlock` by asserting false or raising logic_error(\"not implemented\") or something like that. There is precedent for the latter:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/4ae00e9a7183cb15877c3014bf46f2e36470c304/src/coins.h#L393-L395\r\n\r\nSimilarly the `BatchWrite` implementation seems error prone since it uses the cursor argument, but drops the best block argument. Unless something actually needs that implementation, it would seem better for it to be an error to call that method.\r\n\r\nThese are pre-existing problems and the commit doesn't make them worse, but they might be worth addressing later, or here if they could be addressed simply.\r\n\r\n",
      "created_at": "2026-02-04T22:26:44Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766244892",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766244892"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766253652",
      "pull_request_review_id": 3753423708,
      "id": 2766253652,
      "node_id": "PRRC_kwDOABII586k4a5U",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (9e08e4881ea02120573480f22bc2082dd8f57f6e)\n\nUnclear why this line is being deleted this commit. Might be worth mentioning in commit message if it is was needed earlier but is redundant now, or something like that.",
      "created_at": "2026-02-04T22:29:47Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766253652",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766253652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766285633",
      "pull_request_review_id": 3753423708,
      "id": 2766285633,
      "node_id": "PRRC_kwDOABII586k4itB",
      "diff_hunk": "@@ -14,14 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `GetCoin`, `GetBestBlock`, and `BatchWrite` purely virtual in `CCoinsView`\" (95f2f8b2d36509f06d0de84463f260040be80029)\r\n\r\nIMO, this PR would be easier to understand and verify if code moved within single commits instead of being duplicated in an earlier commit and then deleted by later ones.\r\n\r\nThat is, I think it would be better if earlier commit \"refactor: add `CCoinsViewEmpty`\" just inherited `GetCoin()`, and similar methods instead of duplicating them. Then the methods could be moved in these later commits and it would be more obvious the implementations were not changing.\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at": "2026-02-04T22:42:12Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766285633",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766285633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766288640",
      "pull_request_review_id": 3753423708,
      "id": 2766288640,
      "node_id": "PRRC_kwDOABII586k4jcA",
      "diff_hunk": "@@ -156,7 +156,7 @@ class CoinsViewBottom final : public CCoinsView\n     uint256 GetBestBlock() const final { return {}; }\n     std::vector<uint256> GetHeadBlocks() const final { return {}; }\n     std::unique_ptr<CCoinsViewCursor> Cursor() const final { return {}; }\n-    size_t EstimateSize() const final { return m_data.size(); }\n+    size_t EstimateSize() const override { return m_data.size(); }",
      "path": "src/test/fuzz/coinscache_sim.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "original_commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `CCoinsView::EstimateSize` purely virtual\" (5a6542a0a377b9efa7a921eb15df8476b7136ee6)\n\nCurious why this was changed",
      "created_at": "2026-02-04T22:43:19Z",
      "updated_at": "2026-02-04T23:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2766288640",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2766288640"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": 158,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774680856",
      "pull_request_review_id": 3763694331,
      "id": 2774680856,
      "node_id": "PRRC_kwDOABII586lYkUY",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766253652,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The commit message mentions this explicitly:\r\n> Also removed the sanity check from `CCoinsViewCache` constructor since the initialization isn't done via a local field anymore.\r\n\r\nDo you think I should make it even more explicit?",
      "created_at": "2026-02-06T15:21:03Z",
      "updated_at": "2026-02-06T16:39:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774680856",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774680856"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774972635",
      "pull_request_review_id": 3764001223,
      "id": 2774972635,
      "node_id": "PRRC_kwDOABII586lZrjb",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766244892,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Even though m_view.GetBestBlock() can call this method and it will return a fake value\r\n\r\nYeah, that fake getter lazy init was always super-smelly.\r\nI added a commit before the `CCoinsViewEmpty` change that stores `best_block` before switching to the empty backend, then asserts against the stored value. This avoids relying on `CCoinsViewEmpty::GetBestBlock()` in `PreChecks`.\r\nI added you as co-author, thanks for this suggestion.\r\n\r\n> These are pre-existing problems and the commit doesn't make them worse,\r\n\r\nMy understanding is that the throw/default behavior weirdness is a workaround for a lack of a segregated interfaces with focused behavior coverage.\r\nI am planning on investigating that after we clean these up, but seems a bit more involved and dangerous at this stage to add throws where previous code was just returning dummy values. I fully agree that it's messy, it's what motivated me to clean this area up, but seems a bit premature to me to change this yet - please let me know if you disagree, I hope I'm wrong, I would love to add additional cleanups here.",
      "created_at": "2026-02-06T16:30:01Z",
      "updated_at": "2026-02-06T16:38:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774972635",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774972635"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774975617",
      "pull_request_review_id": 3764003707,
      "id": 2774975617,
      "node_id": "PRRC_kwDOABII586lZsSB",
      "diff_hunk": "@@ -14,14 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "in_reply_to_id": 2766285633,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If I understood you correctly, you would prefer introducing the empty view as a simple placeholder for `CCoinsView` (inheriting everything at first), which we populate with dedicated implementations as we are eliminating the defaults in the follow-up commits.\r\nI have played with it a bit and I think it's an excellent idea, modified the commits to do just that, thanks for the hint! Let me know if this is what you meant.",
      "created_at": "2026-02-06T16:30:47Z",
      "updated_at": "2026-02-06T16:48:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774975617",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774975617"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774975813",
      "pull_request_review_id": 3764003707,
      "id": 2774975813,
      "node_id": "PRRC_kwDOABII586lZsVF",
      "diff_hunk": "@@ -156,7 +156,7 @@ class CoinsViewBottom final : public CCoinsView\n     uint256 GetBestBlock() const final { return {}; }\n     std::vector<uint256> GetHeadBlocks() const final { return {}; }\n     std::unique_ptr<CCoinsViewCursor> Cursor() const final { return {}; }\n-    size_t EstimateSize() const final { return m_data.size(); }\n+    size_t EstimateSize() const override { return m_data.size(); }",
      "path": "src/test/fuzz/coinscache_sim.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "original_commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "in_reply_to_id": 2766288640,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah, it was an attempt to make the campsite a bit cleaner than I found it since I'm already modifying `EstimateSize`: it's a redundant 'final' specifier on a function in a final class, but without an `overwrite` which would actually be useful. Changed it back to reduce diff, we can do redundant-specifier cleanup separately.\r\n",
      "created_at": "2026-02-06T16:30:50Z",
      "updated_at": "2026-02-06T16:48:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774975813",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774975813"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": 158,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976478",
      "pull_request_review_id": 3764003707,
      "id": 2774976478,
      "node_id": "PRRC_kwDOABII586lZsfe",
      "diff_hunk": "",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766105394,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "we don't have to, this is completely eliminated in follow-up commits, the first commit is just meant to make the problem obvious - which we're fixing in the next commit, but wanted to make it obvious first why we need to fix it.",
      "created_at": "2026-02-06T16:30:59Z",
      "updated_at": "2026-02-06T16:48:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774976478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 734,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976617",
      "pull_request_review_id": 3764003707,
      "id": 2774976617,
      "node_id": "PRRC_kwDOABII586lZshp",
      "diff_hunk": "@@ -720,6 +720,11 @@ class MemPoolAccept\n     }\n \n private:\n+    /** When m_view is connected to m_dummy, it can no longer look up coins from the mempool or UTXO set (meaning no disk\n+     * operations happen), but can still return coins it accessed previously. Useful for keeping track of which coins\n+     * were pulled from disk. */\n+    CCoinsView m_dummy;",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766093722,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We don't need a dummy anymore after this PR.",
      "created_at": "2026-02-06T16:31:02Z",
      "updated_at": "2026-02-06T16:48:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774976617",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976617"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 726,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976819",
      "pull_request_review_id": 3764003707,
      "id": 2774976819,
      "node_id": "PRRC_kwDOABII586lZskz",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766083950,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> because it seems like this commit is essentially adding a bug and fixing it at the same time\r\n\r\nYes. This commit intentionally makes a pre-existing initialization-order hazard explicit, and the next commit removes that hazard by deleting the dummy backend path.\r\n\r\nI could drop the commit and add it as a patch to the PR description as well, but it's a pre-existing bug that I chose to reveal in the first commit instead.",
      "created_at": "2026-02-06T16:31:05Z",
      "updated_at": "2026-02-06T16:48:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774976819",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2774976819"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790296983",
      "pull_request_review_id": 3781532482,
      "id": 2790296983,
      "node_id": "PRRC_kwDOABII586mUI2X",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766083950,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774976819\r\n\r\n> but it's a pre-existing bug that I chose to reveal in the first commit instead.\r\n\r\nI don't think there actually is a pre-existing bug. It seems ok to store an address to a member that hasn't been constructed yet and not use that address until after the member is constructed. So I don't think this is actually fixing anything.\r\n\r\nAlso, if you drop this commit it looks like the overall PR diff would be unchanged, so even if it did fix a bug it might make sense to drop to decrease review burden. If a PR is deleting buggy code, it's usually fine to just point out buggy code is being deleted and not try to fix the bugs before deleting the code.",
      "created_at": "2026-02-10T21:08:03Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790296983",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790296983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790327630",
      "pull_request_review_id": 3781532482,
      "id": 2790327630,
      "node_id": "PRRC_kwDOABII586mUQVO",
      "diff_hunk": "@@ -107,8 +107,8 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    *backend_coins_view = CCoinsView{};\n+                if (!is_db && fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (ee76bc0056dfa094a467851bfb5f2fb23ac13b39)\r\n\r\nThe commit message says \"The fuzzer was also updated to switch randomly between real db backing and empty view.\" i think referring to this line. But that seems like the opposite of what this change is doing. It seems like this change is updating the fuzzer to *not* switch randomly between a real backing db and an empty view when there is no backing db, and it would just be switching between two empty views?\r\n\r\nI guess my question is whether this !is_db change actually necessary? It'd probably be good to have a code comment saying why the is_db check is there either way.",
      "created_at": "2026-02-10T21:16:30Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790327630",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790327630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790334864",
      "pull_request_review_id": 3781532482,
      "id": 2790334864,
      "node_id": "PRRC_kwDOABII586mUSGQ",
      "diff_hunk": "@@ -874,10 +869,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n     m_view.GetBestBlock();\n \n-    // we have all inputs cached now, so switch back to dummy (to protect\n-    // against bugs where we pull more inputs from disk that miss being added\n-    // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    // We have all inputs cached now, so disconnect m_view from the mempool and UTXO set\n+    // (to protect against bugs where we pull more inputs from disk that miss being added\n+    // to coins_to_uncache).\n+    //\n+    // When m_view is connected to an empty view, it can no longer look up coins from the mempool\n+    // or UTXO set (meaning no disk operations happen), but can still return coins it accessed\n+    // previously. Useful for keeping track of which coins were pulled from disk.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (ee76bc0056dfa094a467851bfb5f2fb23ac13b39)\r\n\r\nThis new comment is good but makes me curious if this is just theoretically useful for keeping track of which coins were pulled from disk, or is there code which actually does that? Might be good to clarify.",
      "created_at": "2026-02-10T21:18:29Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790334864",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790334864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 878,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790411959",
      "pull_request_review_id": 3781532482,
      "id": 2790411959,
      "node_id": "PRRC_kwDOABII586mUk63",
      "diff_hunk": "@@ -330,6 +330,22 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()",
      "path": "src/coins.h",
      "position": 76,
      "original_position": 11,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: add `CCoinsViewEmpty` as a noop implementation for base and testing\" (ee76bc0056dfa094a467851bfb5f2fb23ac13b39)\r\n\r\nWould be nice if this could assert that the object doesn't have any data members, to trigger an error if someone tried to add any, since this returns a non-const reference.\r\n\r\nUnfortunately though it doesn't seem possible to do this reliably, so no real suggestion here.\r\n\r\n`static_assert(sizeof(CCoinsViewEmpty) == sizeof(void*));` would not be portable, for example.",
      "created_at": "2026-02-10T21:37:39Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790411959",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790411959"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 343,
      "original_line": 340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790453122",
      "pull_request_review_id": 3781532482,
      "id": 2790453122,
      "node_id": "PRRC_kwDOABII586mUu-C",
      "diff_hunk": "@@ -878,7 +879,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // previously. Useful for keeping track of which coins were pulled from disk.\n     m_view.SetBackend(CCoinsViewEmpty::Get());\n \n-    assert(m_active_chainstate.m_blockman.LookupBlockIndex(m_view.GetBestBlock()) == m_active_chainstate.m_chain.Tip());\n+    assert(m_active_chainstate.m_blockman.LookupBlockIndex(best_block) == m_active_chainstate.m_chain.Tip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "original_commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: avoid GetBestBlock after empty backend switch\" (a1803c9)\r\n\r\nLooking into this more I think it would actually better for to keep this code unchanged, so the assert is stronger, and directly guarantees for later code that calling `m_view.GetBestBlock()` will return the current tip hash.\r\n\r\nIt looks like the current code is safe because the `m_view.GetBestBlock()` call on line 871 guarantees the `m_view.GetBestBlock()` on line 882 will never call the dummy view, because each call to `GetBestBlock` [updates](https://github.com/bitcoin/bitcoin/blob/91a8e9b549e9965503ce2cfd1bb51f023be9ea2f/src/coins.cpp#L180) the cached block hash, and the cache is always considered valid unless the block hash is 0, which should never happen.\r\n\r\nSo if this commit just improved comments but left code alone I think that would be ideal.",
      "created_at": "2026-02-10T21:48:02Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790453122",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790453122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 882,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790520879",
      "pull_request_review_id": 3781532482,
      "id": 2790520879,
      "node_id": "PRRC_kwDOABII586mU_gv",
      "diff_hunk": "@@ -866,8 +867,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     }\n \n     // This is const, but calls into the back end CoinsViews. The CCoinsViewDB at the bottom of the\n-    // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n-    m_view.GetBestBlock();\n+    // hierarchy brings the best block into scope.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "original_commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"validation: avoid `GetBestBlock` after empty backend switch\" (a1803c9a46225a8673b5ff3d23b389a18c38965e)\n\nIt seems good to drop the reference to `CCoinsViewDB::GetBestBlock()`, but could be helpful to reference [`CCoinsViewCache::GetBestBlock`](https://github.com/bitcoin/bitcoin/blob/91a8e9b549e9965503ce2cfd1bb51f023be9ea2f/src/coins.cpp#L180) since that is where the caching happens.",
      "created_at": "2026-02-10T22:06:49Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790520879",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790520879"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 870,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790571260",
      "pull_request_review_id": 3781532482,
      "id": 2790571260,
      "node_id": "PRRC_kwDOABII586mVLz8",
      "diff_hunk": "@@ -53,6 +53,7 @@ class CCoinsViewTest : public CCoinsView\n     }\n \n     uint256 GetBestBlock() const override { return hashBestBlock_; }\n+    size_t EstimateSize() const override { return map_.size(); }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "dbebcbcdde2a44b9cd0b4b4032fedc62749ef54d",
      "original_commit_id": "dbebcbcdde2a44b9cd0b4b4032fedc62749ef54d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `CCoinsView::EstimateSize` purely virtual\" (dbebcbcdde2a44b9cd0b4b4032fedc62749ef54d)\n\nIt seems like it might be better to just throw not implemented or return 0 like before instead of returning a fake size. It looks like this method is supposed to return an estimation of disk space used by database, not a count of items in the map.",
      "created_at": "2026-02-10T22:20:33Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790571260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790571260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790585286",
      "pull_request_review_id": 3781532482,
      "id": 2790585286,
      "node_id": "PRRC_kwDOABII586mVPPG",
      "diff_hunk": "@@ -324,7 +324,7 @@ class CCoinsView\n     virtual void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hash_block) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;",
      "path": "src/coins.h",
      "position": 64,
      "original_position": 5,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9930a960747f8db26231f964ffbbea32b4a7c125",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `CCoinsView::Cursor` purely virtual\" (9930a960747f8db26231f964ffbbea32b4a7c125)\r\n\r\nThink it would be good if comment noted this can return null. And if returning null has any clear meaning, it might be good to state that too. (It doesn't seem like there is a clear meaning, since logically you might expect an empty view to return an empty cursor, not no cursor).",
      "created_at": "2026-02-10T22:25:08Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790585286",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790585286"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 333,
      "original_line": 327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790604811",
      "pull_request_review_id": 3781532482,
      "id": 2790604811,
      "node_id": "PRRC_kwDOABII586mVUAL",
      "diff_hunk": "@@ -52,6 +52,7 @@ class CCoinsViewTest : public CCoinsView\n         return std::nullopt;\n     }\n \n+    bool HaveCoin(const COutPoint& outpoint) const override { return GetCoin(outpoint).has_value(); }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "d2e516e079bae495876b644a1ce4fef1fee0c09e",
      "original_commit_id": "d2e516e079bae495876b644a1ce4fef1fee0c09e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor: make `CCoinsView::HaveCoin` purely virtual\" (d2e516e079bae495876b644a1ce4fef1fee0c09e)\r\n\r\nNote commit uses `has_value` here but `!!` in the other method. Either seems fine but would be nice to stick with one convention so it doesn't seem like the methods are doing different things. (`return bool{GetCoin(outpoint)}` could be another option)",
      "created_at": "2026-02-10T22:31:14Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790604811",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790604811"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790657593",
      "pull_request_review_id": 3781532482,
      "id": 2790657593,
      "node_id": "PRRC_kwDOABII586mVg45",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766253652,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774680856\r\n\r\n> Do you think I should make it even more explicit?\r\n\r\nI guess I was confused before and didn't understand what the commit message was referring to. I might write it like \"This drops the `GetBestBlock` call from the `CCoinsViewCache` constructor because...\" to be more obvious, or just drop the earlier commit adding the `GetBestBlock` call so it doesn't need to be removed at all. But this all seems ok now and clear at this point.\r\n",
      "created_at": "2026-02-10T22:48:08Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790657593",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790657593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790659948",
      "pull_request_review_id": 3781532482,
      "id": 2790659948,
      "node_id": "PRRC_kwDOABII586mVhds",
      "diff_hunk": "@@ -14,14 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "in_reply_to_id": 2766285633,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2774975617\r\n\r\n> Let me know if this is what you meant.\r\n\r\nYes, that's exactly what I meant, thanks!\r\n\r\n",
      "created_at": "2026-02-10T22:48:55Z",
      "updated_at": "2026-02-10T22:55:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2790659948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790659948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807058641",
      "pull_request_review_id": 3801029633,
      "id": 2807058641,
      "node_id": "PRRC_kwDOABII586nUFDR",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766083950,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah, afaics you're introducing the bug (derefencing the uninitialized base where previously it was just storing an address and not dereferencing until post-initialization) at the same time you're fixing it (getting the object initialized first). Not wrong, but seems over complicated.",
      "created_at": "2026-02-14T05:33:37Z",
      "updated_at": "2026-02-14T05:33:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807058641",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807058641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807080250",
      "pull_request_review_id": 3801075278,
      "id": 2807080250,
      "node_id": "PRRC_kwDOABII586nUKU6",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766244892,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This doesn't make sense to me -- `m_view` is explicitly a caching coins view, and changing the backend explicitly doesn't clear the cache (otherwise the utxos that were already loaded wouldn't go away). Calling `GetBestBlock()` after changing the backend and getting a cached result is completely reasonable behaviour here, and precisely consistent with how utxos are treated, it's not \"fake\", \"lazy\" or \"super-smelly\".",
      "created_at": "2026-02-14T05:55:34Z",
      "updated_at": "2026-02-14T05:55:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807080250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807080250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807257268",
      "pull_request_review_id": 3801366037,
      "id": 2807257268,
      "node_id": "PRRC_kwDOABII586nU1i0",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766244892,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The getter is called only for its side-effect here, ignoring the return value.",
      "created_at": "2026-02-14T09:02:21Z",
      "updated_at": "2026-02-14T09:02:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807257268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807257268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807719097",
      "pull_request_review_id": 3802217866,
      "id": 2807719097,
      "node_id": "PRRC_kwDOABII586nWmS5",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766083950,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Seems like the exact conversation earlier https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2650234336.\r\n",
      "created_at": "2026-02-14T17:39:01Z",
      "updated_at": "2026-02-14T17:39:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807719097",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807719097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807728643",
      "pull_request_review_id": 3802232555,
      "id": 2807728643,
      "node_id": "PRRC_kwDOABII586nWooD",
      "diff_hunk": "@@ -1324,7 +1324,7 @@ bool CWallet::AbandonTransaction(CWalletTx& tx)\n     return true;\n }\n \n-void CWallet::MarkConflicted(const uint256& hashBlock, int conflicting_height, const Txid& hashTx)\n+void CWallet::MarkConflicted(const uint256& hash_block, int conflicting_height, const Txid& hashTx)",
      "path": "src/wallet/wallet.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: This doesn't seem like it's related? It's not a `CCoinsView` subclass. Don't really mind this being changed, but if touching up could either remove it or also update `hashTx` -> `tx_hash`.\n",
      "created_at": "2026-02-14T17:45:18Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807728643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807728643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807729504",
      "pull_request_review_id": 3802232555,
      "id": 2807729504,
      "node_id": "PRRC_kwDOABII586nWo1g",
      "diff_hunk": "@@ -54,7 +54,7 @@ class CCoinsViewTest : public CCoinsView\n \n     uint256 GetBestBlock() const override { return hashBestBlock_; }\n \n-    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hash_block) override",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: This parameter should actually be `block_hash` everywhere, since we're reformatting.",
      "created_at": "2026-02-14T17:46:01Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807729504",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807729504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807730732",
      "pull_request_review_id": 3802232555,
      "id": 2807730732,
      "node_id": "PRRC_kwDOABII586nWpIs",
      "diff_hunk": "@@ -29,18 +29,18 @@ bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n     return GetCoin(outpoint).has_value();\n }\n \n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n+CCoinsViewBacked::CCoinsViewBacked(CCoinsView* view_in) : base(view_in) {}",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Should be `in_view` everywhere.",
      "created_at": "2026-02-14T17:47:21Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807730732",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807730732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807731526",
      "pull_request_review_id": 3802232555,
      "id": 2807731526,
      "node_id": "PRRC_kwDOABII586nWpVG",
      "diff_hunk": "@@ -181,11 +181,12 @@ uint256 CCoinsViewCache::GetBestBlock() const {\n     return hashBlock;\n }\n \n-void CCoinsViewCache::SetBestBlock(const uint256 &hashBlockIn) {\n-    hashBlock = hashBlockIn;\n+void CCoinsViewCache::SetBestBlock(const uint256& hash_block_in)",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 39,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Should be `in_block_hash`.",
      "created_at": "2026-02-14T17:48:12Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807731526",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807731526"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807741532",
      "pull_request_review_id": 3802232555,
      "id": 2807741532,
      "node_id": "PRRC_kwDOABII586nWrxc",
      "diff_hunk": "@@ -107,8 +107,8 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    *backend_coins_view = CCoinsView{};\n+                if (!is_db && fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": 2790327630,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think we should remove the `!is_db` here. It is removing fuzz coverage.\n\nAlso, I don't think we should describe adding new fuzz paths as doing things \"randomly\". It is adding coverage. \"The fuzzer was also updated to cover adding both a real db and empty backing view.\"",
      "created_at": "2026-02-14T17:53:28Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807741532",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807741532"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807750868",
      "pull_request_review_id": 3802232555,
      "id": 2807750868,
      "node_id": "PRRC_kwDOABII586nWuDU",
      "diff_hunk": "@@ -878,7 +879,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // previously. Useful for keeping track of which coins were pulled from disk.\n     m_view.SetBackend(CCoinsViewEmpty::Get());\n \n-    assert(m_active_chainstate.m_blockman.LookupBlockIndex(m_view.GetBestBlock()) == m_active_chainstate.m_chain.Tip());\n+    assert(m_active_chainstate.m_blockman.LookupBlockIndex(best_block) == m_active_chainstate.m_chain.Tip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "original_commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "in_reply_to_id": 2790453122,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think we can drop this commit. I don't think it's related to the goal of this PR.",
      "created_at": "2026-02-14T17:59:09Z",
      "updated_at": "2026-02-14T19:23:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807750868",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807750868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 882,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807847533",
      "pull_request_review_id": 3802417936,
      "id": 2807847533,
      "node_id": "PRRC_kwDOABII586nXFpt",
      "diff_hunk": "@@ -54,7 +54,7 @@ class CCoinsViewTest : public CCoinsView\n \n     uint256 GetBestBlock() const override { return hashBestBlock_; }\n \n-    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hashBlock) override\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hash_block) override",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": 2807729504,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If the reviewers don't mind - given it's already a cleanup PR - done!",
      "created_at": "2026-02-14T19:47:41Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807847533",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807847533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807861296",
      "pull_request_review_id": 3802465563,
      "id": 2807861296,
      "node_id": "PRRC_kwDOABII586nXJAw",
      "diff_hunk": "@@ -107,8 +107,8 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    *backend_coins_view = CCoinsView{};\n+                if (!is_db && fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": 2790327630,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think the old code here never really made sense. Originally it was `CCoinsView backend_coins_view` (ie, an object local to the function, with no pointers/references) that was getting \"reset\" -- but without any state there was nothing to reset. #32602 then made that a reference parameter, and passed in a `CCoinsViewDB&` sometimes, so attempting to reinitialize that as a `CCoinsView` just seems buggy, or at least confusing.\r\n\r\nAs of this PR, I think it would probably be better to do:\r\n\r\n```c++\r\n                if (fuzzed_data_provider.ConsumeBool()) {\r\n                    coins_view_cache.SetBackend(*backend_coins_view);\r\n                } else {\r\n                    coins_view_cache.SetBackend(CCoinsViewEmpty::Get());\r\n                }\r\n```\r\n\r\nI don't think this change would need any further adjustments to the assertions below it.",
      "created_at": "2026-02-14T20:02:18Z",
      "updated_at": "2026-02-14T20:02:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807861296",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807861296"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807876421",
      "pull_request_review_id": 3802514380,
      "id": 2807876421,
      "node_id": "PRRC_kwDOABII586nXMtF",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766244892,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's warming the cache, knowing that it needs it later. There's already a comment saying that's what it's doing, if you want to improve the comment, that seems reasonable, but duplicating the logic locally doesn't. (A previous attempt to improve the comment was #21567)",
      "created_at": "2026-02-14T20:17:50Z",
      "updated_at": "2026-02-14T20:20:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807876421",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807876421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807878941",
      "pull_request_review_id": 3802417936,
      "id": 2807878941,
      "node_id": "PRRC_kwDOABII586nXNUd",
      "diff_hunk": "@@ -330,6 +330,33 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()\n+    {\n+        static CCoinsViewEmpty instance;\n+        return instance;\n+    }\n+\n+    CCoinsViewEmpty(const CCoinsViewEmpty&) = delete;\n+    CCoinsViewEmpty& operator=(const CCoinsViewEmpty&) = delete;\n+\n+    std::optional<Coin> GetCoin(const COutPoint&) const override { return {}; }\n+    bool HaveCoin(const COutPoint&) const override { return false; }\n+    uint256 GetBestBlock() const override { return {}; }",
      "path": "src/coins.h",
      "position": 88,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766244892,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I understand that of course, I would rather use a setter in that case - but as suggested by others, I have reverted this change completely (except documentation changes that were needed here) and will leave the discussion of relying on side-effects to a dedicated PR.",
      "created_at": "2026-02-14T20:20:52Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2807878941",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807878941"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 351,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809051500",
      "pull_request_review_id": 3802417936,
      "id": 2809051500,
      "node_id": "PRRC_kwDOABII586nbrls",
      "diff_hunk": "@@ -107,8 +107,8 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    *backend_coins_view = CCoinsView{};\n+                if (!is_db && fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": 2790327630,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The problem was that the code was switching the backend state but later asserting against\r\n  backend_coins_view, which didn't always reflect the active backend.\r\nAs @ajtowns also mentioned, the previous slice-assignment (`backend_coins_view = CCoinsView{}`) was a silent noop for the db target, it only copied base-class members (none) without changing the vtable, so the backend was never actually switched.\r\nThe pointer approach makes the switch real for both targets, hence the related changes here.\r\nI cheated a bit by relying on `is_db` before, but if we keep track of a separate `active_backend` and always switch it either to the real backend or `CCoinsViewEmpty::Get()`, the  assertions will match what `coins_view_cache` is actually using.\r\nThanks for the comments, my limited Mac fuzzing (+ forked GitHub runners) indicates this should work.\r\nAdded you as coauthor.\r\n\r\n<details>\r\n<summary>Fuzzers on Mac</summary>\r\n\r\n```\r\nrm -rfd build_fuzz_nosan && cmake --preset=libfuzzer-nosan \\\r\n  -DCMAKE_C_COMPILER=\"$(brew --prefix llvm)/bin/clang\" \\\r\n  -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm)/bin/clang++\" \\\r\n  -DCMAKE_OSX_SYSROOT=\"$(xcrun --show-sdk-path)\" \\\r\n  -DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld -L$(brew --prefix llvm)/lib/c++ -Wl,-rpath,$(brew --prefix llvm)/lib/c++\" && \\\r\n cmake --build build_fuzz_nosan -j$(nproc) && \\\r\n FUZZ=coins_view build_fuzz_nosan/bin/fuzz -runs=100000 && \\\r\n FUZZ=coins_view_db build_fuzz_nosan/bin/fuzz -runs=100000 && \\\r\n FUZZ=coinscache_sim build_fuzz_nosan/bin/fuzz -runs=100000 && \\\r\n FUZZ=transaction build_fuzz_nosan/bin/fuzz -runs=100000\r\n```\r\n\r\n</details>\r\n",
      "created_at": "2026-02-15T11:13:09Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809051500",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809051500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809053887",
      "pull_request_review_id": 3802417936,
      "id": 2809053887,
      "node_id": "PRRC_kwDOABII586nbsK_",
      "diff_hunk": "@@ -29,18 +29,18 @@ bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n     return GetCoin(outpoint).has_value();\n }\n \n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n+CCoinsViewBacked::CCoinsViewBacked(CCoinsView* view_in) : base(view_in) {}",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": 2807730732,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, done, though it was changed because of your request: https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2656575022",
      "created_at": "2026-02-15T11:15:28Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809053887",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809053887"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809054510",
      "pull_request_review_id": 3802417936,
      "id": 2809054510,
      "node_id": "PRRC_kwDOABII586nbsUu",
      "diff_hunk": "@@ -181,11 +181,12 @@ uint256 CCoinsViewCache::GetBestBlock() const {\n     return hashBlock;\n }\n \n-void CCoinsViewCache::SetBestBlock(const uint256 &hashBlockIn) {\n-    hashBlock = hashBlockIn;\n+void CCoinsViewCache::SetBestBlock(const uint256& hash_block_in)",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 39,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": 2807731526,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-02-15T11:16:14Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809054510",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809054510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809074671",
      "pull_request_review_id": 3802417936,
      "id": 2809074671,
      "node_id": "PRRC_kwDOABII586nbxPv",
      "diff_hunk": "@@ -1324,7 +1324,7 @@ bool CWallet::AbandonTransaction(CWalletTx& tx)\n     return true;\n }\n \n-void CWallet::MarkConflicted(const uint256& hashBlock, int conflicting_height, const Txid& hashTx)\n+void CWallet::MarkConflicted(const uint256& hash_block, int conflicting_height, const Txid& hashTx)",
      "path": "src/wallet/wallet.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "original_commit_id": "caa574903cd003d03cc08f0ee63661506f7a5d88",
      "in_reply_to_id": 2807728643,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You're right, I have needlessly expanded this unification refactor, reverted the renames in wallet.",
      "created_at": "2026-02-15T11:29:32Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809074671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809074671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809105706",
      "pull_request_review_id": 3802417936,
      "id": 2809105706,
      "node_id": "PRRC_kwDOABII586nb40q",
      "diff_hunk": "@@ -43,6 +43,7 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766083950,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for the comments, now that the potential bug is clear to everyone (and that it would have needed a refactor to be triggered), I agree that there's no point in demonstrating it in a separate commit, I have removed it, mentioning it only in the commit message.",
      "created_at": "2026-02-15T11:48:24Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809105706",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809105706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809106591",
      "pull_request_review_id": 3802417936,
      "id": 2809106591,
      "node_id": "PRRC_kwDOABII586nb5Cf",
      "diff_hunk": "@@ -43,7 +43,6 @@ CCoinsViewCache::CCoinsViewCache(CCoinsView* base_in, bool deterministic) :\n     CCoinsViewBacked(base_in), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n-    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "original_commit_id": "9e08e4881ea02120573480f22bc2082dd8f57f6e",
      "in_reply_to_id": 2766253652,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed the commit, thanks.",
      "created_at": "2026-02-15T11:49:01Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809106591",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809106591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809107670",
      "pull_request_review_id": 3802417936,
      "id": 2809107670,
      "node_id": "PRRC_kwDOABII586nb5TW",
      "diff_hunk": "@@ -878,7 +879,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // previously. Useful for keeping track of which coins were pulled from disk.\n     m_view.SetBackend(CCoinsViewEmpty::Get());\n \n-    assert(m_active_chainstate.m_blockman.LookupBlockIndex(m_view.GetBestBlock()) == m_active_chainstate.m_chain.Tip());\n+    assert(m_active_chainstate.m_blockman.LookupBlockIndex(best_block) == m_active_chainstate.m_chain.Tip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "original_commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "in_reply_to_id": 2790453122,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I have reverted it, thanks for the comments.",
      "created_at": "2026-02-15T11:49:50Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809107670",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809107670"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 882,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809108685",
      "pull_request_review_id": 3802417936,
      "id": 2809108685,
      "node_id": "PRRC_kwDOABII586nb5jN",
      "diff_hunk": "@@ -866,8 +867,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     }\n \n     // This is const, but calls into the back end CoinsViews. The CCoinsViewDB at the bottom of the\n-    // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n-    m_view.GetBestBlock();\n+    // hierarchy brings the best block into scope.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "original_commit_id": "a1803c9a46225a8673b5ff3d23b389a18c38965e",
      "in_reply_to_id": 2790520879,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, added you as coathor.",
      "created_at": "2026-02-15T11:50:32Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809108685",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809108685"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 870,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809112969",
      "pull_request_review_id": 3802417936,
      "id": 2809112969,
      "node_id": "PRRC_kwDOABII586nb6mJ",
      "diff_hunk": "@@ -53,6 +53,7 @@ class CCoinsViewTest : public CCoinsView\n     }\n \n     uint256 GetBestBlock() const override { return hashBestBlock_; }\n+    size_t EstimateSize() const override { return map_.size(); }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "dbebcbcdde2a44b9cd0b4b4032fedc62749ef54d",
      "original_commit_id": "dbebcbcdde2a44b9cd0b4b4032fedc62749ef54d",
      "in_reply_to_id": 2790571260,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I wish we didn't need a default impl, calling the methods for the empty impl seems wrong in every case, but that requires a bigger interface-segregation change - which I'm planning on doing eventually, but this cleanup is needed regardless.\r\n`return map_.size();` is indeed nonsensical, I mindlessly copied https://github.com/bitcoin/bitcoin/blob/6750744eb32da428b0a44c6eaab69e5741a25167/src/test/fuzz/coinscache_sim.cpp#L159, thinking it's better to be closer to the disk space estimation that throwing or returning 0 - added you as coauthor and fixed the fuzzer as well.\r\n\r\nThis also made me realize that https://github.com/bitcoin/bitcoin/blob/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab/src/test/coins_tests.cpp#L40 could inherit from `CCoinsViewEmpty` (if we remove the `final`) which would avoid the need to duplicate the dummy values across the commits.",
      "created_at": "2026-02-15T11:54:06Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809112969",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809112969"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809137448",
      "pull_request_review_id": 3802417936,
      "id": 2809137448,
      "node_id": "PRRC_kwDOABII586ncAko",
      "diff_hunk": "@@ -330,6 +330,22 @@ class CCoinsView\n     virtual size_t EstimateSize() const { return 0; }\n };\n \n+/** Noop coins view. */\n+class CCoinsViewEmpty final : public CCoinsView\n+{\n+private:\n+    CCoinsViewEmpty() = default;\n+\n+public:\n+    static CCoinsViewEmpty& Get()",
      "path": "src/coins.h",
      "position": 76,
      "original_position": 11,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": 2790411959,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't mind adding something like:\r\n```C++\r\n    static CCoinsViewEmpty& Get()\r\n    {\r\n        static_assert(sizeof(CCoinsViewEmpty) == sizeof(CCoinsView), \"CCoinsViewEmpty should stay stateless\");\r\n        static CCoinsViewEmpty instance;\r\n        return instance;\r\n    }\r\n```\r\nif the CI and reviewers think it would help.",
      "created_at": "2026-02-15T12:08:42Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809137448",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809137448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 343,
      "original_line": 340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809179634",
      "pull_request_review_id": 3802417936,
      "id": 2809179634,
      "node_id": "PRRC_kwDOABII586ncK3y",
      "diff_hunk": "@@ -324,7 +324,7 @@ class CCoinsView\n     virtual void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& hash_block) = 0;\n \n     //! Get a cursor to iterate over the whole state\n-    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const = 0;",
      "path": "src/coins.h",
      "position": 64,
      "original_position": 5,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "9930a960747f8db26231f964ffbbea32b4a7c125",
      "in_reply_to_id": 2790585286,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sure, done",
      "created_at": "2026-02-15T12:18:52Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809179634",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809179634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 333,
      "original_line": 327,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809195935",
      "pull_request_review_id": 3802417936,
      "id": 2809195935,
      "node_id": "PRRC_kwDOABII586ncO2f",
      "diff_hunk": "@@ -52,6 +52,7 @@ class CCoinsViewTest : public CCoinsView\n         return std::nullopt;\n     }\n \n+    bool HaveCoin(const COutPoint& outpoint) const override { return GetCoin(outpoint).has_value(); }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "d2e516e079bae495876b644a1ce4fef1fee0c09e",
      "original_commit_id": "d2e516e079bae495876b644a1ce4fef1fee0c09e",
      "in_reply_to_id": 2790604811,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good point, but this actually reveals that `CoinsViewBottom` should instead inherit from `CCoinsViewEmpty` which should have a `bool HaveCoin(const COutPoint& outpoint) const override { return !!GetCoin(outpoint); }` instead - thanks, added you as coauthor.\r\nThis also enables collapsing the virtual migration to a single simple commit now!",
      "created_at": "2026-02-15T12:24:13Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809195935",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809195935"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809227172",
      "pull_request_review_id": 3802417936,
      "id": 2809227172,
      "node_id": "PRRC_kwDOABII586ncWek",
      "diff_hunk": "@@ -874,10 +869,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n     m_view.GetBestBlock();\n \n-    // we have all inputs cached now, so switch back to dummy (to protect\n-    // against bugs where we pull more inputs from disk that miss being added\n-    // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    // We have all inputs cached now, so disconnect m_view from the mempool and UTXO set\n+    // (to protect against bugs where we pull more inputs from disk that miss being added\n+    // to coins_to_uncache).\n+    //\n+    // When m_view is connected to an empty view, it can no longer look up coins from the mempool\n+    // or UTXO set (meaning no disk operations happen), but can still return coins it accessed\n+    // previously. Useful for keeping track of which coins were pulled from disk.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "original_commit_id": "ee76bc0056dfa094a467851bfb5f2fb23ac13b39",
      "in_reply_to_id": 2790334864,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Rephrased these completely, thanks",
      "created_at": "2026-02-15T12:43:36Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809227172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809227172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 878,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809228726",
      "pull_request_review_id": 3802417936,
      "id": 2809228726,
      "node_id": "PRRC_kwDOABII586ncW22",
      "diff_hunk": "@@ -156,7 +156,7 @@ class CoinsViewBottom final : public CCoinsView\n     uint256 GetBestBlock() const final { return {}; }\n     std::vector<uint256> GetHeadBlocks() const final { return {}; }\n     std::unique_ptr<CCoinsViewCursor> Cursor() const final { return {}; }\n-    size_t EstimateSize() const final { return m_data.size(); }\n+    size_t EstimateSize() const override { return m_data.size(); }",
      "path": "src/test/fuzz/coinscache_sim.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "original_commit_id": "5a6542a0a377b9efa7a921eb15df8476b7136ee6",
      "in_reply_to_id": 2766288640,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This was completely removed in the latest push since we're inheriting from `CCoinsViewEmpty` now",
      "created_at": "2026-02-15T12:45:03Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809228726",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809228726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": 158,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809229010",
      "pull_request_review_id": 3802417936,
      "id": 2809229010,
      "node_id": "PRRC_kwDOABII586ncW7S",
      "diff_hunk": "@@ -14,14 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "95f2f8b2d36509f06d0de84463f260040be80029",
      "in_reply_to_id": 2766285633,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This isn't needed anymore now that we could collapse this into a single commit.",
      "created_at": "2026-02-15T12:45:22Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809229010",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809229010"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809229671",
      "pull_request_review_id": 3802417936,
      "id": 2809229671,
      "node_id": "PRRC_kwDOABII586ncXFn",
      "diff_hunk": "",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "original_commit_id": "4f44250955c6429a338027e2606c5c33a473a366",
      "in_reply_to_id": 2766105394,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Commit was squashed into the fix.",
      "created_at": "2026-02-15T12:46:01Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809229671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809229671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 734,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809231313",
      "pull_request_review_id": 3802417936,
      "id": 2809231313,
      "node_id": "PRRC_kwDOABII586ncXfR",
      "diff_hunk": "@@ -93,10 +93,11 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n                 coins_view_cache.Uncache(random_out_point);\n             },\n             [&] {\n-                if (fuzzed_data_provider.ConsumeBool()) {\n-                    backend_coins_view = CCoinsView{};\n+                if (is_db || fuzzed_data_provider.ConsumeBool()) {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "50245cadd68c3345c551cd65f878e9c7ca3ae1a4",
      "original_commit_id": "b23d784b6baee140f75882fe009be5676db4cb0b",
      "in_reply_to_id": 2656592223,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Pushed something else now and added you as coauthor, let me know what you think.",
      "created_at": "2026-02-15T12:47:40Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809231313",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809231313"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809233014",
      "pull_request_review_id": 3802417936,
      "id": 2809233014,
      "node_id": "PRRC_kwDOABII586ncX52",
      "diff_hunk": "@@ -13,31 +13,11 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}\n-\n-CCoinsViewBacked::CCoinsViewBacked(CCoinsView *viewIn) : base(viewIn) { }\n-std::optional<Coin> CCoinsViewBacked::GetCoin(const COutPoint& outpoint) const { return base->GetCoin(outpoint); }\n-bool CCoinsViewBacked::HaveCoin(const COutPoint &outpoint) const { return base->HaveCoin(outpoint); }\n-uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n-std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n-void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n-bool CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return base->BatchWrite(cursor, hashBlock); }\n-std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n-size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n-\n CCoinsViewCache::CCoinsViewCache(CCoinsView* baseIn, bool deterministic) :\n     CCoinsViewBacked(baseIn), m_deterministic(deterministic),\n     cacheCoins(0, SaltedOutpointHasher(/*deterministic=*/deterministic), CCoinsMap::key_equal{}, &m_cache_coins_memory_resource)\n {\n+    (void)base->GetBestBlock(); // Sanity check validity of base",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "a69ea84b83d22c66ddeeba6d27b761036d6fec40",
      "original_commit_id": "784769b5b1a8465d1a09ec489a303c4616d11896",
      "in_reply_to_id": 2650234336,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Demonstration commit squashed with the fix, thanks for the comments.",
      "created_at": "2026-02-15T12:49:32Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809233014",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809233014"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809252363",
      "pull_request_review_id": 3802417936,
      "id": 2809252363,
      "node_id": "PRRC_kwDOABII586nccoL",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581846,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ended up with something similar: the empty view now delegates to `GetCoin` and the tests implementations inherit it so we don't have this duplication anymore.",
      "created_at": "2026-02-15T13:11:45Z",
      "updated_at": "2026-02-15T19:41:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809252363",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2809252363"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2823754493",
      "pull_request_review_id": 3821471130,
      "id": 2823754493,
      "node_id": "PRRC_kwDOABII586oTxL9",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581846,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why not just keep the delegation in `CCoinsView` itself? I don't understand your reasoning above why this has something to do with `CCoinsViewDB`'s implementation. `CCoinsViewDB` can continue to override it.",
      "created_at": "2026-02-18T18:12:24Z",
      "updated_at": "2026-02-18T18:12:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2823754493",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2823754493"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2824158299",
      "pull_request_review_id": 3821912081,
      "id": 2824158299,
      "node_id": "PRRC_kwDOABII586oVTxb",
      "diff_hunk": "@@ -13,17 +13,6 @@ TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n-uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n-std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n-bool CCoinsView::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashBlock) { return false; }\n-std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n-\n-bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n-{\n-    return GetCoin(outpoint).has_value();\n-}",
      "path": "src/coins.cpp",
      "position": 17,
      "original_position": 13,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "38ae4082a13b2e6dd07e84d228c9e58d3df27b11",
      "in_reply_to_id": 2638581846,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Because `CCoinsView` is now a pure interface with no behavior or state whatsoever.\r\nIf we want to segregate this in the future into smaller, focused interfaces based on exact usage, it probably helps to untangle it early. That way, we will know who uses what instead of everyone inheriting everything like we have now. Let's push the specifics down so we can untangle them later.",
      "created_at": "2026-02-18T19:50:08Z",
      "updated_at": "2026-02-18T19:50:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2824158299",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2824158299"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 25,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830222179",
      "pull_request_review_id": 3828600047,
      "id": 2830222179,
      "node_id": "PRRC_kwDOABII586oscNj",
      "diff_hunk": "@@ -220,7 +219,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n     }\n \n     {\n-        assert(backend_coins_view == &coins_view_empty || is_db == !!backend_coins_view->Cursor());\n+        assert(!backend_coins_view->Cursor() == (backend_coins_view == &CCoinsViewEmpty::Get()));",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 52,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add explicit `CCoinsViewEmpty` noop backend\" (01bf0465aebbb9bd475ae128b6e6c182a400906a)\n\nNice that having the singleton lets this check be stronger and reduce is_db complexity. Could be good to extend this approach:\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/src/test/fuzz/coins_view.cpp\n+++ b/src/test/fuzz/coins_view.cpp\n@@ -42,8 +42,9 @@ void initialize_coins_view()\n     static const auto testing_setup = MakeNoLogFileContext<>();\n }\n \n-void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend_coins_view, bool is_db)\n+void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend_coins_view)\n {\n+    const bool is_db{backend_coins_view != &CCoinsViewEmpty::Get()};\n     bool good_data{true};\n     auto* original_backend{backend_coins_view};\n \n@@ -309,7 +310,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n FUZZ_TARGET(coins_view, .init = initialize_coins_view)\n {\n     FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n-    TestCoinsView(fuzzed_data_provider, &CCoinsViewEmpty::Get(), /*is_db=*/false);\n+    TestCoinsView(fuzzed_data_provider, &CCoinsViewEmpty::Get());\n }\n \n FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n@@ -321,5 +322,5 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n         .memory_only = true,\n     };\n     CCoinsViewDB coins_db{std::move(db_params), CoinsViewOptions{}};\n-    TestCoinsView(fuzzed_data_provider, &coins_db, /*is_db=*/true);\n+    TestCoinsView(fuzzed_data_provider, &coins_db);\n }\n```\n</p>\n</details>\n\n\n\n\n\n\n",
      "created_at": "2026-02-19T21:19:51Z",
      "updated_at": "2026-02-19T21:38:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2830222179",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830222179"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 225,
      "original_line": 222,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830275755",
      "pull_request_review_id": 3828600047,
      "id": 2830275755,
      "node_id": "PRRC_kwDOABII586ospSr",
      "diff_hunk": "@@ -869,14 +865,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         }\n     }\n \n-    // This is const, but calls into the back end CoinsViews. The CCoinsViewDB at the bottom of the\n-    // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n-    m_view.GetBestBlock();\n+    // This is const, but calls into `CCoinsViewCache::GetBestBlock()` to refresh\n+    // the cached best block after populating inputs through `m_viewmempool`.\n+    (void)m_view.GetBestBlock();\n \n-    // we have all inputs cached now, so switch back to dummy (to protect\n-    // against bugs where we pull more inputs from disk that miss being added\n-    // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    // We have all relevant inputs cached now, so switch m_view off the mempool/UTXO backends.\n+    // Using an empty view keeps any already-fetched coins in cache for later policy/sequence-lock checks\n+    // but prevents any accidental backend lookups while we finish validation.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 37,
      "commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "original_commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add explicit `CCoinsViewEmpty` noop backend\" (01bf0465aebbb9bd475ae128b6e6c182a400906a)\n\nComment in commit description: \"In `MemPoolAccept::PreChecks`, switch `m_view` to the empty backend...\" is confusing because it sounds like this behavior is new, when the code was already switching to an empty backend previously. The only actual difference here seems to be that backend is called \"empty\" instead of \"dummy\" and some comments are changed. I think I'd suggest dropping the comment from the commit description because this change does really not seem significant to mention. Alternately the comment could be kept but be more clear no behavior is changing.\n\nAlso unsure about the updated justification for switching to an empty view on this line. The previous comment was much more specific and said the view way being switched so `coins_to_uncache` would stay up to date. Now there is no mention of `coins_to_uncache` and the new comment about preventing \"accidental lookups\" doesn't give any hint about what the harm of those lookups are. Also technically it would seem to only change where the lookups happen, not prevent the lookups.",
      "created_at": "2026-02-19T21:34:09Z",
      "updated_at": "2026-02-19T21:38:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2830275755",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830275755"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 874,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830442509",
      "pull_request_review_id": 3828843801,
      "id": 2830442509,
      "node_id": "PRRC_kwDOABII586otSAN",
      "diff_hunk": "@@ -220,7 +219,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView* backend\n     }\n \n     {\n-        assert(backend_coins_view == &coins_view_empty || is_db == !!backend_coins_view->Cursor());\n+        assert(!backend_coins_view->Cursor() == (backend_coins_view == &CCoinsViewEmpty::Get()));",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 52,
      "original_position": 22,
      "commit_id": "356eb7cd95456d79fbec806ee2105e70b4399a96",
      "original_commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "in_reply_to_id": 2830222179,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, thanks",
      "created_at": "2026-02-19T22:20:46Z",
      "updated_at": "2026-02-19T22:20:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2830442509",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830442509"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 225,
      "original_line": 222,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830494424",
      "pull_request_review_id": 3828898645,
      "id": 2830494424,
      "node_id": "PRRC_kwDOABII586oterY",
      "diff_hunk": "@@ -869,14 +865,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         }\n     }\n \n-    // This is const, but calls into the back end CoinsViews. The CCoinsViewDB at the bottom of the\n-    // hierarchy brings the best block into scope. See CCoinsViewDB::GetBestBlock().\n-    m_view.GetBestBlock();\n+    // This is const, but calls into `CCoinsViewCache::GetBestBlock()` to refresh\n+    // the cached best block after populating inputs through `m_viewmempool`.\n+    (void)m_view.GetBestBlock();\n \n-    // we have all inputs cached now, so switch back to dummy (to protect\n-    // against bugs where we pull more inputs from disk that miss being added\n-    // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    // We have all relevant inputs cached now, so switch m_view off the mempool/UTXO backends.\n+    // Using an empty view keeps any already-fetched coins in cache for later policy/sequence-lock checks\n+    // but prevents any accidental backend lookups while we finish validation.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 37,
      "commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "original_commit_id": "01bf0465aebbb9bd475ae128b6e6c182a400906a",
      "in_reply_to_id": 2830275755,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I tried something again, if you still don't like it, can you please suggest something better?\r\nRemoved the mention from the commit message.",
      "created_at": "2026-02-19T22:36:16Z",
      "updated_at": "2026-02-19T22:36:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2830494424",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830494424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34124"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 874,
      "side": "RIGHT"
    }
  ]
}