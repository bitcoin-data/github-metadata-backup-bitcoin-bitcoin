{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
    "id": 1789084952,
    "node_id": "PR_kwDOABII585qo0UY",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29720",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29720.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29720.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29720",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29720/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/faeb2056cf5c63af727994a6775d27a3e160ceed",
    "number": 29720,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "rpc: Avoid getchaintxstats invalid results",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The `getchaintxstats` RPC reply during AU background download may return non-zero, but invalid, values for `window_tx_count` and `txrate`.\r\n\r\nFor example, `txcount` may be zero for a to-be-downloaded block, but may be non-zero for an ancestor block which is already downloaded. Thus, the values returned may be negative (and cause intermediate integer sanitizer violations).\r\n\r\nAlso, `txcount` may be accurate for the snapshot base block, or a descendant of it. However it may be zero for an ancestor block that still needs to be downloaded. Thus, the values returned may be positive, but wrong.\r\n\r\nFix all issues by skipping the returned value if either `txcount` is unset (equal to zero).\r\nAlso, skip `txcount` in the returned value, if it is unset (equal to zero).\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/29328",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2024-03-25T10:15:31Z",
    "updated_at": "2024-04-26T14:20:38Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "1ec235d544f39ce1bb26590f554bf6e413fdf020",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "maflcko:2403-rpc-int-wrap-",
      "ref": "2403-rpc-int-wrap-",
      "sha": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "bitcoin-core",
        "full_name": "maflcko/bitcoin-core",
        "owner": {
          "login": "maflcko",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/maflcko",
          "html_url": "https://github.com/maflcko",
          "followers_url": "https://api.github.com/users/maflcko/followers",
          "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
          "organizations_url": "https://api.github.com/users/maflcko/orgs",
          "repos_url": "https://api.github.com/users/maflcko/repos",
          "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/maflcko/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/maflcko/bitcoin-core",
        "fork": true,
        "url": "https://api.github.com/repos/maflcko/bitcoin-core",
        "archive_url": "https://api.github.com/repos/maflcko/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/maflcko/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/maflcko/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/maflcko/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/maflcko/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/maflcko/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/maflcko/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/maflcko/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/maflcko/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/maflcko/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/maflcko/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/maflcko/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/maflcko/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/maflcko/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/maflcko/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/maflcko/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/maflcko/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/maflcko/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/maflcko/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/maflcko/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/maflcko/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:maflcko/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/maflcko/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/maflcko/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/maflcko/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/maflcko/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/maflcko/bitcoin-core/hooks",
        "svn_url": "https://github.com/maflcko/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 12,
        "stargazers_count": 25,
        "watchers_count": 25,
        "size": 225124,
        "default_branch": "master",
        "open_issues_count": 18,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-26T12:49:32Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2023-10-29T15:00:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "19b968f743ca666032371ab2424feaffd0c6043e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35305,
        "stargazers_count": 76011,
        "watchers_count": 76011,
        "size": 255117,
        "default_branch": "master",
        "open_issues_count": 691,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-26T14:34:25Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-04-26T14:39:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 23,
    "deletions": 13,
    "changed_files": 3,
    "commits": 1,
    "review_comments": 21,
    "comments": 3
  },
  "events": [
    {
      "event": "commented",
      "id": 2017655432,
      "node_id": "IC_kwDOABII5854QvqI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2017655432",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T10:15:34Z",
      "updated_at": "2024-04-23T14:57:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29720).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072584005) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29656](https://github.com/bitcoin/bitcoin/pull/29656) (chainparams: Change nChainTx type to uint64_t by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2017655432",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29720"
    },
    {
      "event": "labeled",
      "id": 12232334959,
      "node_id": "LE_lADOABII586Dc2FczwAAAALZGp5v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12232334959",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T10:15:36Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12232336514,
      "node_id": "HRFPE_lADOABII586Dc2FczwAAAALZGqSC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12232336514",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T10:15:44Z"
    },
    {
      "event": "reviewed",
      "id": 1958361151,
      "node_id": "PRR_kwDOABII5850ujg_",
      "url": null,
      "actor": null,
      "commit_id": "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#pullrequestreview-1958361151",
      "submitted_at": "2024-03-25T17:24:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T21:29:42Z",
      "updated_at": "2024-03-25T21:29:42Z",
      "source": {
        "issue": {
          "id": 2187451727,
          "node_id": "PR_kwDOABII585psJgd",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29656",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29656/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29656/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29656/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29656",
          "number": 29656,
          "state": "open",
          "state_reason": null,
          "title": "chainparams: Change nChainTx type to uint64_t",
          "body": "This picks up the work from #29331 and closes #29258.\r\n\r\nHere I simply change the type and address (hopefully) all the comments from #29331 by changing the type in all relevant places and removing unnecessary casts. I have also added an extremely simple unit test.\r\n\r\n~~In some [draft by sjors from 5 years ago](https://github.com/bitcoin/bitcoin/commit/4485700f93fb609ee292964fa70e89af88ecdd55) I saw that he took the chance to rename the variable to `m_chain_num_tx`. I didnâ€™t do this now because `nChainTx` isnâ€™t terrible IMO, just outdated, but happy to do this if people think itâ€™s valuable while I touch these lines.~~ This is included now.\r\n\r\nThere was also talk about a memory-optimized solution for this by combining nChainTx and nTx: https://github.com/bitcoin/bitcoin/issues/29258#issuecomment-1929388354 I tried out an approach to this here: https://github.com/fjahr/bitcoin/commit/b9382041e541569a2b8ec7ed1f7fb10aa602277f (patch is on top of the changes here), still rough, requires more security checks and cleanup of docs but it works (tests pass) and I am happy to take this route if itâ€™s preferred.",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29656",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29656",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29656.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29656.patch"
          },
          "created_at": "2024-03-14T23:34:35Z",
          "updated_at": "2024-04-26T13:54:53Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZWIyMDU2Y2Y1YzYzYWY3Mjc5OTRhNjc3NWQyN2EzZTE2MGNlZWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faeb2056cf5c63af727994a6775d27a3e160ceed",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faeb2056cf5c63af727994a6775d27a3e160ceed",
      "tree": {
        "sha": "41a57ce18f13dea262f114db16ba721a21d5d2e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41a57ce18f13dea262f114db16ba721a21d5d2e7"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 41a57ce18f13dea262f114db16ba721a21d5d2e7\nparent 53f4607cc8c67366662f49cb312d2e4ff8b6523a\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1711361815 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1711451732 +0100\n\nrpc: Avoid getchaintxstats invalid results\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQL44Cehaxn27aM3NS8agX+X8qB4POKWPA/E4oeYqFUZH28zD1MDQWy0kOd/tTWh8RY\nv6iqLactOAEPMnuVMLOwk=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/53f4607cc8c67366662f49cb312d2e4ff8b6523a",
          "sha": "53f4607cc8c67366662f49cb312d2e4ff8b6523a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/53f4607cc8c67366662f49cb312d2e4ff8b6523a"
        }
      ],
      "message": "rpc: Avoid getchaintxstats invalid results",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2024-03-26T11:15:32Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2024-03-25T10:16:55Z"
      },
      "sha": "faeb2056cf5c63af727994a6775d27a3e160ceed"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12248311161,
      "node_id": "HRFPE_lADOABII586Dc2FczwAAAALaDmV5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12248311161",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-26T11:15:58Z"
    },
    {
      "event": "review_requested",
      "id": 12512387224,
      "node_id": "RRE_lADOABII586Dc2FczwAAAALpy-CY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12512387224",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-17T18:23:19Z",
      "requested_reviewer": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-23T12:52:12Z",
      "updated_at": "2024-04-23T12:52:12Z",
      "source": {
        "issue": {
          "id": 2177880415,
          "node_id": "I_kwDOABII586Bz9Ff",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/29616",
          "number": 29616,
          "state": "open",
          "state_reason": null,
          "title": "AssumeUTXO Mainnet Readiness Tracking",
          "body": "## Goals of this issue\r\n\r\n- Track all ongoing work on assumeutxo until mainnet params are included in a release\r\n- Categorize the work into critical/optional for mainnet readiness\r\n- Conceptual discussion on assumeutxo topics that may or may not be critical for mainnet readiness\r\n\r\nThe initial categorizations here are suggestions and changes should be discussed here in the issue. Obviously let me know if I missed anything.\r\n\r\n## Critical Issues/PRs\r\n\r\n- [ ] #29612 (which fixes #25675) - Improves size of dump, critical because it is not backwards compatible\r\n- [ ] #29519 - Stop syncing non-snapshot chain from peers that are already connected\r\n- [x] #29726 - Fix -reindex behavior\r\n- [x] #29370 - Get rid of faked nTx and nChainTx values (closing issues discussed in #29261)\r\n- [ ] #29720 - RPC fixes for missing values, addressing #29328\r\n- [ ] #28553 - The mainnet params themselves\r\n\r\n## Optional Issues/PRs\r\n\r\n(Attempted a rough ordering by importance)\r\n\r\n- [ ] #28616 (which fixes #28598) - Show background chain funds as not fully confirmed in GUI\r\n- [ ] #29553 - `dumptxoutset` with height param\r\n- [ ] #28670 - Improved error handling for `loadtxoutset`\r\n- [x] #29478 - Additional test coverage for `loadtxoutset`\r\n- [ ] #29617 - Additional test coverage\r\n- [ ] #29973 - Additional test coverage\r\n- [ ] #29428 - Additional test coverage\r\n- [ ] #28608 (draft) - State and locking cleanup\r\n\r\n## Critical conceptual discussion\r\n\r\n- [ ] Agreement on a rule of thumb which height we choose once there is consensus for mainnet readiness, i.e. how to choose the height for #28553 once we are close to an upcoming release. I think the earlier we discuss this the better, so that this doesn't get in the way later.\r\n\r\n## Optional conceptual discussion\r\n\r\nThese were taken from #28553 and [the original assumeutxo PR](https://github.com/bitcoin/bitcoin/pull/27596#issuecomment-1727936044).\r\n\r\n- [ ] Distribution of snapshots - This recently came up [here](https://github.com/bitcoin/bitcoin/pull/29551#pullrequestreview-1917416713) and [here](https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2024-03-07#1012635;). There are multiple levels to this topic but I believe that this is not critical either way. If it were critical then, at the most basic level, we would probably provide an \"official\" torrent/download link for the dump with the release. It would be great if one or more contributors could do that (@Sjors did this in #28516 for example) and are willing to maintain this for a reasonable amount of time but it is not critical IMO because anyone can use `dumptxoutset` to recreate the dump and then share it any way they like. So there is no need to provide this service from within the project. I think anyone who plans to distribute the dump to other users (think of downstream projects like BTCPayServer, Raspiblitz, Umbrel, Greenlight etc.) should validate the dump like this at least once anyway. And there may even be options for distribution possible for downstream projects that we can not even think of right now but if we don't make the feature available they can also not be explored.\r\n- [ ] Usage of MuHash #27669 - While it would be nice to have this I don't think it is blocking because this can still be introduced later without invalidating existing dumps.\r\n- [ ] Make params configurable/not hardcoded params - I think it would be good to stay on the safe side for now and make the feature available to the public as originally planned. If the feature sees wide adoption and requests for more flexibility come in that would be the right point to explore this further.\r\n- [ ] Should old hashes be removed from source code at some point? - Obviously not relevant for the first mainnet params\r\n- [ ] How frequently should we update testnet/signet params and is there any way to deal with the possibility that these chains [may get nuked at some point](https://x.com/kallewoof/status/1763222648367308958)?",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "created_at": "2024-03-10T19:57:46Z",
          "updated_at": "2024-04-26T13:49:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 2072584005,
      "node_id": "IC_kwDOABII5857iR9F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072584005",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-23T14:56:57Z",
      "updated_at": "2024-04-23T14:56:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, could we add a test for this?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072584005",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29720"
    },
    {
      "event": "commented",
      "id": 2072599127,
      "node_id": "IC_kwDOABII5857iVpX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072599127",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-23T15:00:51Z",
      "updated_at": "2024-04-23T15:00:51Z",
      "author_association": "MEMBER",
      "body": "A test is already present in `test/functional/feature_assumeutxo.py`, see the diff. You can also test it by running this pull against a `bitcoind` compiled from master and observing the sanitizer crash and the test failure.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072599127",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29720"
    },
    {
      "event": "reviewed",
      "id": 2017618817,
      "node_id": "PRR_kwDOABII5854QmuB",
      "url": null,
      "actor": null,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#pullrequestreview-2017618817",
      "submitted_at": "2024-04-23T15:34:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
    },
    {
      "event": "review_requested",
      "id": 12579316951,
      "node_id": "RRE_lADOABII586Dc2FczwAAAALtySTX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12579316951",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-23T17:41:01Z",
      "requested_reviewer": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 2024892089,
      "node_id": "PRR_kwDOABII5854sWa5",
      "url": null,
      "actor": null,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#pullrequestreview-2024892089",
      "submitted_at": "2024-04-26T12:07:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
    },
    {
      "event": "reviewed",
      "id": 2024903332,
      "node_id": "PRR_kwDOABII5854sZKk",
      "url": null,
      "actor": null,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#pullrequestreview-2024903332",
      "submitted_at": "2024-04-26T12:53:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1537955050",
      "pull_request_review_id": 1958361151,
      "id": 1537955050,
      "node_id": "PRRC_kwDOABII585bq1Tq",
      "diff_hunk": "@@ -1637,9 +1637,13 @@ static RPCHelpMan getchaintxstats()\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount is non-zero for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is confusing. We know why txcount would be zero, but users might not. Perhaps txcount itself should be omitted when wrong?",
      "created_at": "2024-03-25T17:24:19Z",
      "updated_at": "2024-03-25T17:24:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1537955050",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1537955050"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1642,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539035652",
      "pull_request_review_id": 1960065877,
      "id": 1539035652,
      "node_id": "PRRC_kwDOABII585bu9IE",
      "diff_hunk": "@@ -1637,9 +1637,13 @@ static RPCHelpMan getchaintxstats()\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount is non-zero for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "in_reply_to_id": 1537955050,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it is fine to return a value of zero, if it is explained why the value would be zero.\r\n\r\nHowever, I've made it optional in the last push to address your feedback.",
      "created_at": "2024-03-26T11:19:03Z",
      "updated_at": "2024-03-26T11:19:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1539035652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539035652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1642,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576472588",
      "pull_request_review_id": 2017618817,
      "id": 1576472588,
      "node_id": "PRRC_kwDOABII585d9xAM",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not returning a value here might break downstream projects if they are unlucky since this wasn't optional before. Not sure if deprecation is necessary here but a more safe approach could be to just return 0 if it is unknown. I don't have a strong opinion on it but usually, we are pretty cautious with a change like this.",
      "created_at": "2024-04-23T15:34:30Z",
      "updated_at": "2024-04-23T15:34:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576472588",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576472588"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576507502",
      "pull_request_review_id": 2017673761,
      "id": 1576507502,
      "node_id": "PRRC_kwDOABII585d95hu",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've implemented this in fa032a5792c79b76b038827977c8a5eafd8e297b, but changed it after https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1537955050 to faeb2056cf5c63af727994a6775d27a3e160ceed.\r\n\r\nWhen evaluating whether this is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, regtest-only feature. Also, if changing the `txcount` return value were to affect downstream projects, then b50554babdddf452acaa51bac757736766c70e81 was already a breaking change.\r\n",
      "created_at": "2024-04-23T15:57:10Z",
      "updated_at": "2024-04-23T15:57:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576507502",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576507502"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576521230",
      "pull_request_review_id": 2017694765,
      "id": 1576521230,
      "node_id": "PRRC_kwDOABII585d984O",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, changing the return value wouldn't be much of a concern, but a missing key has higher potential to crash something.\r\n\r\n> When evaluating whether this is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, regtest-only feature. \r\n\r\n(*testnet/regtest-only) I'm pretty much with you here but [others might not be](https://github.com/bitcoin/bitcoin/pull/29612#pullrequestreview-1974818797) though the utxo set dump might also be used in a different context. Feel free to leave the approach as is, I am fine with it.",
      "created_at": "2024-04-23T16:06:48Z",
      "updated_at": "2024-04-23T16:06:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576521230",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576521230"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576536504",
      "pull_request_review_id": 2017718910,
      "id": 1576536504,
      "node_id": "PRRC_kwDOABII585d-Am4",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> (*testnet/regtest-only)\r\n\r\nA good catch. Looks like is in all networks, except for `main`, so I guess it is still fine.",
      "created_at": "2024-04-23T16:18:33Z",
      "updated_at": "2024-04-23T16:18:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576536504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576536504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580933666",
      "pull_request_review_id": 2024888152,
      "id": 1580933666,
      "node_id": "PRRC_kwDOABII585eOyIi",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "We're breaking the format anyway with #29612 so might as well introduce other breaking changes now.",
      "created_at": "2024-04-26T12:05:34Z",
      "updated_at": "2024-04-26T12:05:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580933666",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580933666"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580936006",
      "pull_request_review_id": 2024892089,
      "id": 1580936006,
      "node_id": "PRRC_kwDOABII585eOytG",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The window can contain the snapshot height? If so then it should really check that _all_ `txcount` values exist.",
      "created_at": "2024-04-26T12:07:58Z",
      "updated_at": "2024-04-26T12:09:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580936006",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580936006"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1644,
      "original_line": 1644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580966108",
      "pull_request_review_id": 2024939927,
      "id": 1580966108,
      "node_id": "PRRC_kwDOABII585eO6Dc",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580936006,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> The window can contain the snapshot height? If so then it should really check that _all_ `txcount` values exist.\r\n\r\nWhy? Can you explain this a bit more? The result is not influenced by values that are not used in the calculation. For example, if the windows is [a, x, y, z, b] and you calculate `b - a`, then the values of x, y, z are irrelevant.",
      "created_at": "2024-04-26T12:35:05Z",
      "updated_at": "2024-04-26T12:35:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580966108",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580966108"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1644,
      "original_line": 1644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580968591",
      "pull_request_review_id": 2024944212,
      "id": 1580968591,
      "node_id": "PRRC_kwDOABII585eO6qP",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> We're breaking the format anyway with #29612 so might as well introduce other breaking changes now.\r\n\r\nNot sure why that pull request would be relevant to the changes here. The two RPCs are completely independent and the behavior or interface of one should not interact with the other.",
      "created_at": "2024-04-26T12:37:32Z",
      "updated_at": "2024-04-26T12:37:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580968591",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580968591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580972472",
      "pull_request_review_id": 2024903332,
      "id": 1580972472,
      "node_id": "PRRC_kwDOABII585eO7m4",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```\r\nrpc/blockchain.cpp: In function â€˜getchaintxstats()::<lambda(const RPCHelpMan&, const JSONRPCRequest&)>â€™:\r\nrpc/blockchain.cpp:1707:34: warning: â€˜*(std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>*)((char*)&window_tx_count + offsetof(const std::optional<unsigned int>,std::optional<unsigned int>::<unnamed>.std::_Optional_base<unsigned int, true, true>::<unnamed>)).std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>::_M_valueâ€™ may be used uninitialized [-Wmaybe-uninitialized]\r\n 1707 |             ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);\r\n      |                                  ^~~~~~~~~~~~~~~~~~~~~~~~\r\nrpc/blockchain.cpp:1689:16: note: â€˜*(std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>*)((char*)&window_tx_count + offsetof(const std::optional<unsigned int>,std::optional<unsigned int>::<unnamed>.std::_Optional_base<unsigned int, true, true>::<unnamed>)).std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>::_M_valueâ€™ was declared here\r\n 1689 |     const auto window_tx_count{\r\n      |                ^~~~~~~~~~~~~~~\r\n```\r\n\r\nUbuntu 23.10 with gcc 13.2.0\r\n\r\nWhich seems spurious, but it goes away with e.g.:\r\n\r\n```cpp\r\n    if (blockcount > 0) {\r\n        if (window_tx_count) {\r\n            ret.pushKV(\"window_tx_count\", *window_tx_count);\r\n            if (nTimeDiff > 0) {\r\n                ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);\r\n            }\r\n        }\r\n        ret.pushKV(\"window_interval\", nTimeDiff);\r\n    }\r\n```",
      "created_at": "2024-04-26T12:40:43Z",
      "updated_at": "2024-04-26T12:53:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580972472",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580972472"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581000551",
      "pull_request_review_id": 2024992251,
      "id": 1581000551,
      "node_id": "PRRC_kwDOABII585ePCdn",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Both are listed as critical for mainnet release in #29616. If one needs a breaking change, it's fine for the other to also make one.",
      "created_at": "2024-04-26T12:57:27Z",
      "updated_at": "2024-04-26T12:57:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581000551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581000551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581006151",
      "pull_request_review_id": 2025002092,
      "id": 1581006151,
      "node_id": "PRRC_kwDOABII585ePD1H",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580936006,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Let's say we have blocks [1,2,3,4,5,6,7,8,9] and block 6 is the snapshot. The background sync just processed block 3, foreground sync is past 9. You ask for the window 1 - 7. In that case `nChainTx` for (1) and (7) are set, but's not set for (4) and (5).\r\n\r\nHowever as you say, this not a problem when subtracting `nChainTx` of block (1) from `nChainTx` of block (7).",
      "created_at": "2024-04-26T13:02:18Z",
      "updated_at": "2024-04-26T13:02:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581006151",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581006151"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1644,
      "original_line": 1644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581015988",
      "pull_request_review_id": 2025018103,
      "id": 1581015988,
      "node_id": "PRRC_kwDOABII585ePGO0",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "path": "src/rpc/blockchain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1576472588,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Both are listed as critical for mainnet release in #29616. If one needs a breaking change, it's fine for the other to also make one.\r\n\r\nNot sure. That doesn't mean that https://github.com/bitcoin/bitcoin/pull/29612  will be merged in its current form. One could come up with a non-breaking version of 29612, for example.\r\n\r\nI think the pull requests should be evaluated independently.\r\n\r\nIn any case, when evaluating whether *this pull request* is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, non-mainnet (test-only) feature. Also, if changing the txcount return value were to affect downstream projects, then https://github.com/bitcoin/bitcoin/commit/b50554babdddf452acaa51bac757736766c70e81 was already a breaking change.",
      "created_at": "2024-04-26T13:09:15Z",
      "updated_at": "2024-04-26T13:09:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581015988",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581015988"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1636,
      "original_line": 1636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581021830",
      "pull_request_review_id": 2025027902,
      "id": 1581021830,
      "node_id": "PRRC_kwDOABII585ePHqG",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580972472,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Which seems spurious, but it goes away with e.g.:\r\n\r\nNot sure about changing the code for a broken compiler warning. I am sure this warning already exists in other parts of the code, so if changing the code is a desire, then it should be done for the other places as well (and CI could check against it). However, my recommendation would be to report this to upstream with a minimal reproducer, if it still happens with g++14.0.1-beta",
      "created_at": "2024-04-26T13:14:02Z",
      "updated_at": "2024-04-26T13:14:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581021830",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581021830"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581023235",
      "pull_request_review_id": 2025030293,
      "id": 1581023235,
      "node_id": "PRRC_kwDOABII585ePIAD",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580936006,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> However as you say, this not a problem when subtracting `nChainTx` of block (1) from `nChainTx` of block (7).\r\n\r\nOk, not sure what to do here then. I'll probably resolve the thread for now.",
      "created_at": "2024-04-26T13:15:14Z",
      "updated_at": "2024-04-26T13:15:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581023235",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581023235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1644,
      "original_line": 1644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581037929",
      "pull_request_review_id": 2025054469,
      "id": 1581037929,
      "node_id": "PRRC_kwDOABII585ePLlp",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580972472,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Not sure about changing the code for a broken compiler warning. \r\n\r\nIt's also slightly more readable because it checks `window_tx_count` only once.\r\n\r\n> I am sure this warning already exists in other parts of the code\r\n\r\nThis is the only warning thrown.\r\n",
      "created_at": "2024-04-26T13:26:56Z",
      "updated_at": "2024-04-26T13:26:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581037929",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581037929"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581040393",
      "pull_request_review_id": 2025058512,
      "id": 1581040393,
      "node_id": "PRRC_kwDOABII585ePMMJ",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580972472,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> This is the only warning thrown.\r\n\r\nWhat about all the ones I get, or others? For example: https://api.cirrus-ci.com/v1/task/5983141741985792/logs/make.log",
      "created_at": "2024-04-26T13:28:56Z",
      "updated_at": "2024-04-26T13:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581040393",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581040393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581051238",
      "pull_request_review_id": 2025076689,
      "id": 1581051238,
      "node_id": "PRRC_kwDOABII585ePO1m",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580972472,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Or https://github.com/bitcoin/bitcoin/issues/29359",
      "created_at": "2024-04-26T13:37:51Z",
      "updated_at": "2024-04-26T13:37:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581051238",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581051238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108051",
      "pull_request_review_id": 2025172616,
      "id": 1581108051,
      "node_id": "PRRC_kwDOABII585ePctT",
      "diff_hunk": "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580972472,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nope, it's nice and quiet.",
      "created_at": "2024-04-26T14:20:16Z",
      "updated_at": "2024-04-26T14:20:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581108051",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108051"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1707,
      "original_line": 1707,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108497",
      "pull_request_review_id": 2025173370,
      "id": 1581108497,
      "node_id": "PRRC_kwDOABII585ePc0R",
      "diff_hunk": "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_commit_id": "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "in_reply_to_id": 1580936006,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, it's fine.",
      "created_at": "2024-04-26T14:20:38Z",
      "updated_at": "2024-04-26T14:20:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581108497",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108497"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1644,
      "original_line": 1644,
      "side": "RIGHT"
    }
  ]
}