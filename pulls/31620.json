{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620",
    "id": 2265824105,
    "node_id": "PR_kwDOABII586HDbtp",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31620",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31620.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31620.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31620",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31620/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
    "number": 31620,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Remove --noshutdown flag, Tidy startup failures",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The `--noshutdown` flag is brittle, confusing, and redundant:\r\n\r\n* Someone wanting to inspect the state after a test failure will likely also want to debug the state on the python side, so the option is redundant with `--pdbonfailure`. If there was a use case to replicate `--pdbonfailure` without starting pdb, a dedicated flag could be added for that use case.\r\n* It is brittle to use the flag for a passing test, because it will disable checks in the test. For example, on shutdown LSan will perform a leak check, and the test framework will check that the node did not crash, and it will check that the node did not print errors to stderr.\r\n\r\nFix all issues by removing it.\r\n\r\nAlso, tidy up startup error messages to be less confusing as a result.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-01-08T10:21:18Z",
    "updated_at": "2025-01-23T13:40:18Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "12d187bcb789a7f6f6050907a71af1f0487041fc",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "maflcko:2501-test-clean-shutdown",
      "ref": "2501-test-clean-shutdown",
      "sha": "fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "bitcoin-core",
        "full_name": "maflcko/bitcoin-core",
        "owner": {
          "login": "maflcko",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/maflcko",
          "html_url": "https://github.com/maflcko",
          "followers_url": "https://api.github.com/users/maflcko/followers",
          "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
          "organizations_url": "https://api.github.com/users/maflcko/orgs",
          "repos_url": "https://api.github.com/users/maflcko/repos",
          "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/maflcko/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/maflcko/bitcoin-core",
        "fork": true,
        "url": "https://api.github.com/repos/maflcko/bitcoin-core",
        "archive_url": "https://api.github.com/repos/maflcko/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/maflcko/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/maflcko/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/maflcko/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/maflcko/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/maflcko/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/maflcko/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/maflcko/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/maflcko/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/maflcko/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/maflcko/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/maflcko/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/maflcko/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/maflcko/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/maflcko/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/maflcko/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/maflcko/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/maflcko/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/maflcko/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/maflcko/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/maflcko/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:maflcko/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/maflcko/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/maflcko/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/maflcko/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/maflcko/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/maflcko/bitcoin-core/hooks",
        "svn_url": "https://github.com/maflcko/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 27,
        "watchers_count": 27,
        "size": 243032,
        "default_branch": "master",
        "open_issues_count": 15,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-23T13:53:12Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2025-01-22T17:43:41Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "433412fd8478923dfdb20044f74c5d1e19fa8dd8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36597,
        "stargazers_count": 81587,
        "watchers_count": 81587,
        "size": 274689,
        "default_branch": "master",
        "open_issues_count": 694,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-23T12:50:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-23T13:47:36Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 10,
    "deletions": 20,
    "changed_files": 2,
    "commits": 4,
    "review_comments": 2,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZDQ0MWZiYTA3ODc3ZWE3OGVkNjAyMGZkZTExODI4MzA3MjczYTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad441fba07877ea78ed6020fde11828307273a6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fad441fba07877ea78ed6020fde11828307273a6",
      "tree": {
        "sha": "80db9a6ee8e83240feb7c16813ae46490f080f2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80db9a6ee8e83240feb7c16813ae46490f080f2a"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 80db9a6ee8e83240feb7c16813ae46490f080f2a\nparent 433412fd8478923dfdb20044f74c5d1e19fa8dd8\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330458 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330115 +0100\n\ntest: Treat leftover process as error\n\nPrinting to stderr instead of stdout makes the test_runner.py fail on\nleftover processes. This is desired and fine, because a leftover process\nshould only happen on a test failure anyway.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQMHLl0PZLh7HCkoKlAVJAOu9K3JOa9bToLVWbZ/UFrjrTQoMY4PsWe3MWXv8cXGBov\nCv1CSmZYTlTuALZahHzg0=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/433412fd8478923dfdb20044f74c5d1e19fa8dd8",
          "sha": "433412fd8478923dfdb20044f74c5d1e19fa8dd8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/433412fd8478923dfdb20044f74c5d1e19fa8dd8"
        }
      ],
      "message": "test: Treat leftover process as error\n\nPrinting to stderr instead of stdout makes the test_runner.py fail on\nleftover processes. This is desired and fine, because a leftover process\nshould only happen on a test failure anyway.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T09:55:15Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T10:00:58Z"
      },
      "sha": "fad441fba07877ea78ed6020fde11828307273a6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMGRjMDliOTAwMmYwYmNhZTYzYWY2YWY4ZDM3ZmIzZTAwNDBlZjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4",
      "tree": {
        "sha": "3e3ea8968fd37a577eadfd082ce8033bc76aa02f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3e3ea8968fd37a577eadfd082ce8033bc76aa02f"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 3e3ea8968fd37a577eadfd082ce8033bc76aa02f\nparent fad441fba07877ea78ed6020fde11828307273a6\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330566 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330530 +0100\n\ntest: Remove --noshutdown flag\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQH1dXGLvO3q2MZkSJgLQmDv0Ly6cvdq0WRy7RPr8M9hGbI+nfV7EpMeuP6DP61YVFM\njCFGG7kWa5OEIu9xfJyQs=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad441fba07877ea78ed6020fde11828307273a6",
          "sha": "fad441fba07877ea78ed6020fde11828307273a6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fad441fba07877ea78ed6020fde11828307273a6"
        }
      ],
      "message": "test: Remove --noshutdown flag",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T10:02:10Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T10:02:46Z"
      },
      "sha": "fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZTNiZjZiODcwZWIwZjljZGRkMWFkYWM4MmJhNzI4OTA4MDZhZTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "tree": {
        "sha": "998097f2b9c2e7675f1dadba3ef30a031dd49f23",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/998097f2b9c2e7675f1dadba3ef30a031dd49f23"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 998097f2b9c2e7675f1dadba3ef30a031dd49f23\nparent fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330816 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1736330989 +0100\n\ntest: Avoid redundant stop and error spam on startup failure\n\nTrying to immediately shut down a node after a startup failure without\nwaiting for the RPC to be fully up will in most cases just fail and lead\nto an RPC error.\n\nAlso, it is confusing to sidestep the existing fallback to kill any\nleftover nodes on a test failure.\n\nSo just rely on the fallback.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQDVaXV7MWvdGSejr+u2Jgp1o6IY8DJvp15IIXdYREzK2NjTUZksLX187HtA75QxEmC\naH8uw+LbQ1VsGmVi28SAE=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4",
          "sha": "fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa0dc09b9002f0bcae63af6af8d37fb3e0040ef4"
        }
      ],
      "message": "test: Avoid redundant stop and error spam on startup failure\n\nTrying to immediately shut down a node after a startup failure without\nwaiting for the RPC to be fully up will in most cases just fail and lead\nto an RPC error.\n\nAlso, it is confusing to sidestep the existing fallback to kill any\nleftover nodes on a test failure.\n\nSo just rely on the fallback.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T10:09:49Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-08T10:06:56Z"
      },
      "sha": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3"
    },
    {
      "event": "commented",
      "id": 2577314041,
      "node_id": "IC_kwDOABII586ZnrD5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2577314041",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:21:22Z",
      "updated_at": "2025-01-23T13:38:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31620.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/31620#pullrequestreview-2569419028) |\n| Stale ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/31620#pullrequestreview-2538211296) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30660](https://github.com/bitcoin/bitcoin/pull/30660) (qa: Shut down framework cleanly on RPC connection failure by hodlinator)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#issuecomment-2577314041",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31620"
    },
    {
      "event": "renamed",
      "id": 15851583611,
      "node_id": "RTE_lADOABII586lZtN9zwAAAAOw0_h7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15851583611",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:21:24Z",
      "rename": {
        "from": " test: Remove --noshutdown flag, Tidy startup failures",
        "to": "test: Remove --noshutdown flag, Tidy startup failures"
      }
    },
    {
      "event": "labeled",
      "id": 15851583801,
      "node_id": "LE_lADOABII586lZtN9zwAAAAOw0_k5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15851583801",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:21:25Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2577352102,
      "node_id": "IC_kwDOABII586Zn0Wm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2577352102",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:40:42Z",
      "updated_at": "2025-01-08T10:40:42Z",
      "author_association": "MEMBER",
      "body": "For testing the third commit different ways are possible. For example:\r\n\r\n```\r\n$ rm -rf ./releases\r\n$ ./test/get_previous_releases.py -b\r\n$ rm -rf ./releases/v28.0/\r\n$ ./build/test/functional/wallet_migration.py\r\n```\r\n\r\nThen, observing a shorter error message.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#issuecomment-2577352102",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31620"
    },
    {
      "event": "reviewed",
      "id": 2538211296,
      "node_id": "PRR_kwDOABII586XSgfg",
      "url": null,
      "actor": null,
      "commit_id": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "cr ACK and tACK fae3bf6b870eb0f9cddd1adac82ba72890806ae3 (coming from #31462).\r\n\r\nAdding `sys.stderr` was necessary for the CI checks (1st commit - fad441fba07877ea78ed6020fde11828307273a6). Redundant error messages were eliminated (e.g. in the proposed PR's [test](https://github.com/bitcoin/bitcoin/pull/31620#issuecomment-2577352102): \"`Error: no RPC connection`\" is shown only once instead of twice as in `master`).\r\n\r\nJust for reference, `--noshutdown` was added in #6032 and `--pdbonfailure` in #11023.\r\n\r\n\r\n",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#pullrequestreview-2538211296",
      "submitted_at": "2025-01-08T20:22:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620"
    },
    {
      "event": "reviewed",
      "id": 2569419028,
      "node_id": "PRR_kwDOABII586ZJjkU",
      "url": null,
      "actor": null,
      "commit_id": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK fae3bf6b870eb0f9cddd1adac82ba72890806ae3\r\n\r\nThanks for [digging into the history](https://github.com/bitcoin/bitcoin/pull/31620#pullrequestreview-2538211296) @pablomartin4btc. #6032 from year 2015 added `--noshutdown` in order to change the default behavior of `--nocleanup` from leaving lingering *bitcoind*-processes into shutting them down by default. I suspect no one relies on lingering processes so it makes sense to remove it.\r\n\r\nOn a related note I just opened draft PR #31723 which makes the test framework tell *bitcoind* to pause during startup until one attaches a C++ debugger. That way one can have a debugging session running from the beginning of the test instead of attaching to a lingering process after the test already failed like with `--noshutdown`.\r\n\r\nGood to avoid knock-on errors, similarly to #30660 but more minimal. Contrary to that one, this PR doesn't add any tests, but I repurposed one from the other PR and found a way to further tidy up the output (see inline comment).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#pullrequestreview-2569419028",
      "submitted_at": "2025-01-23T13:23:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMDM2OWNjY2Y3YzJjZGUyNDRlYzZkODY2OTYwNWE1ODE0ZTRhMGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
      "tree": {
        "sha": "6a518bf1e8730b7a8150cc88cedbe7b92ac43fd9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6a518bf1e8730b7a8150cc88cedbe7b92ac43fd9"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 6a518bf1e8730b7a8150cc88cedbe7b92ac43fd9\nparent fae3bf6b870eb0f9cddd1adac82ba72890806ae3\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1737639430 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1737639412 +0100\n\ntest: Avoid redundant stop and error spam on shutdown\n\nTrying to shut down a node after a test failure may fail and lead to an\nRPC error.\n\nAlso, it is confusing to sidestep the existing fallback to kill any\nleftover nodes on a test failure.\n\nSo just rely on the fallback.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQIvdt+qxCcUVsdsbspazyUabybjiOMI8tnKyVjCQlXC89z9fdnYpDXoJn0wAp4UMKr\n6QZxj57l2jdI1mdrlV6Ak=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
          "sha": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fae3bf6b870eb0f9cddd1adac82ba72890806ae3"
        }
      ],
      "message": "test: Avoid redundant stop and error spam on shutdown\n\nTrying to shut down a node after a test failure may fail and lead to an\nRPC error.\n\nAlso, it is confusing to sidestep the existing fallback to kill any\nleftover nodes on a test failure.\n\nSo just rely on the fallback.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-23T13:36:52Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-01-23T13:37:10Z"
      },
      "sha": "fa0369cccf7c2cde244ec6d8669605a5814e4a0a"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926711046",
      "pull_request_review_id": 2569419028,
      "id": 1926711046,
      "node_id": "PRRC_kwDOABII585y10cG",
      "diff_hunk": "@@ -325,18 +323,12 @@ def shutdown(self):\n \n         self.log.debug('Closing down network thread')\n         self.network_thread.close()\n-        if not self.options.noshutdown:\n-            self.log.info(\"Stopping nodes\")\n-            if self.nodes:\n-                self.stop_nodes()\n-        else:\n-            for node in self.nodes:\n-                node.cleanup_on_exit = False\n-            self.log.info(\"Note: bitcoinds were not stopped and may still be running\")\n+        self.log.info(\"Stopping nodes\")\n+        if self.nodes:\n+            self.stop_nodes()",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 23,
      "commit_id": "fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
      "original_commit_id": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Used repurposed test script (556b4646985d4313925bf060692e7a690d396629) from #30660 to see how things behave.\r\n\r\nCleaner shutdowns when failing can be achieved by also avoiding stop-attempts here:\r\n```suggestion\r\n        if self.success == TestStatus.FAILED:\r\n            self.log.info(\"Not stopping nodes as test failed\")\r\n        else:\r\n            self.log.info(\"Stopping nodes\")\r\n            if self.nodes:\r\n                self.stop_nodes()\r\n```\r\n\r\n### Output without suggestion\r\n```\r\nâ‚¿ build/test/functional/feature_framework_rpc_failure.py \r\n2025-01-23T10:07:35.733000Z TestFramework (INFO): PRNG seed is: 1128325736874135373\r\n2025-01-23T10:07:35.733000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_qgky8ew8\r\n2025-01-23T10:07:35.744000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 313, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 401, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 423, in setup_nodes\r\n    self.start_nodes()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 573, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 334, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 198, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] Unable to connect to bitcoind after 0s\r\n2025-01-23T10:07:35.795000Z TestFramework (INFO): Stopping nodes\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/b2/build/test/functional/feature_framework_rpc_failure.py\", line 13, in <module>\r\n    FeatureFrameworkRPCFailure(__file__).main()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 159, in main\r\n    exit_code = self.shutdown()\r\n                ^^^^^^^^^^^^^^^\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 328, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 395, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 215, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 0] Error: no RPC connection\r\n[node 0] Cleaning up leftover process\r\n```\r\n### Output with suggestion\r\n```\r\nâ‚¿ build/test/functional/feature_framework_rpc_failure.py \r\n2025-01-23T10:07:43.326000Z TestFramework (INFO): PRNG seed is: 2921237778351099427\r\n2025-01-23T10:07:43.326000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_7ywaw2wa\r\n2025-01-23T10:07:43.336000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 313, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 404, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 426, in setup_nodes\r\n    self.start_nodes()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_framework.py\", line 576, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 334, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"/home/hodlinator/b2/test/functional/test_framework/test_node.py\", line 198, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] Unable to connect to bitcoind after 0s\r\n2025-01-23T10:07:43.387000Z TestFramework (INFO): Not stopping nodes as test failed\r\n2025-01-23T10:07:43.387000Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_7ywaw2wa\r\n2025-01-23T10:07:43.387000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_7ywaw2wa/test_framework.log\r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): \r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): Hint: Call /home/hodlinator/b2/test/functional/combine_logs.py '/tmp/bitcoin_func_test_7ywaw2wa' to consolidate all logs\r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): \r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2025-01-23T10:07:43.388000Z TestFramework (ERROR): \r\n[node 0] Cleaning up leftover process\r\n```\r\n\r\nSimilar results can be observed by using *wallet_migration.py* as described in https://github.com/bitcoin/bitcoin/pull/31620#issuecomment-2577352102.",
      "created_at": "2025-01-23T10:09:31Z",
      "updated_at": "2025-01-23T13:23:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#discussion_r1926711046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926711046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620"
        }
      },
      "start_line": null,
      "original_start_line": 326,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 328,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926996285",
      "pull_request_review_id": 2569895895,
      "id": 1926996285,
      "node_id": "PRRC_kwDOABII585y26E9",
      "diff_hunk": "@@ -325,18 +323,12 @@ def shutdown(self):\n \n         self.log.debug('Closing down network thread')\n         self.network_thread.close()\n-        if not self.options.noshutdown:\n-            self.log.info(\"Stopping nodes\")\n-            if self.nodes:\n-                self.stop_nodes()\n-        else:\n-            for node in self.nodes:\n-                node.cleanup_on_exit = False\n-            self.log.info(\"Note: bitcoinds were not stopped and may still be running\")\n+        self.log.info(\"Stopping nodes\")\n+        if self.nodes:\n+            self.stop_nodes()",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 23,
      "commit_id": "fa0369cccf7c2cde244ec6d8669605a5814e4a0a",
      "original_commit_id": "fae3bf6b870eb0f9cddd1adac82ba72890806ae3",
      "in_reply_to_id": 1926711046,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Excellent idea to fully rely on the fallback to reduce even more error spam!\r\n\r\nThanks, pushed as a commit!\r\n\r\n\r\n\r\n> Similar results can be observed by using _wallet_migration.py_ as described in [#31620 (comment)](https://github.com/bitcoin/bitcoin/pull/31620#issuecomment-2577352102).\r\n\r\nJust as a test-note: The steps may not work when this pull is rebased on master, so reverting https://github.com/bitcoin/bitcoin/pull/31462 may be helpful if someone wishes to. It should be possible to come up with other steps to test, but I think having one way to test is enough for now.",
      "created_at": "2025-01-23T13:40:17Z",
      "updated_at": "2025-01-23T13:40:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31620#discussion_r1926996285",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926996285"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31620"
        }
      },
      "start_line": null,
      "original_start_line": 326,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 328,
      "side": "RIGHT"
    }
  ]
}