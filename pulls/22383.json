{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383",
    "id": 681908460,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjgxOTA4NDYw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22383",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/22383.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/22383.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/78f4c8b98eada337346ffb206339c3ebae4ff43b",
    "number": 22383,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "rpc: Prefer to use txindex if available for GetTransaction",
    "user": {
      "login": "jlopp",
      "id": 288011,
      "node_id": "MDQ6VXNlcjI4ODAxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlopp",
      "html_url": "https://github.com/jlopp",
      "followers_url": "https://api.github.com/users/jlopp/followers",
      "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
      "organizations_url": "https://api.github.com/users/jlopp/orgs",
      "repos_url": "https://api.github.com/users/jlopp/repos",
      "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jlopp/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixes #22382\r\n\r\nMotivation: prevent excessive disk reads if txindex is enabled.\r\n\r\nWorth noting that this could be argued to be less of a bug and more of an issue of undefined behavior. If a user calls GetTransaction with the wrong block hash, what should happen?",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2021-07-01T14:23:28Z",
    "updated_at": "2022-10-30T19:09:53Z",
    "closed_at": "2021-07-22T18:16:06Z",
    "mergeable_state": "unknown",
    "merged_at": "2021-07-22T18:16:05Z",
    "merge_commit_sha": "7925f3aba820f8965293148ef666c59f87dd3c7f",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jlopp:GetTransactionPerformance",
      "ref": "GetTransactionPerformance",
      "sha": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 19361409,
        "node_id": "MDEwOlJlcG9zaXRvcnkxOTM2MTQwOQ==",
        "name": "statoshi",
        "full_name": "jlopp/statoshi",
        "owner": {
          "login": "jlopp",
          "id": 288011,
          "node_id": "MDQ6VXNlcjI4ODAxMQ==",
          "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jlopp",
          "html_url": "https://github.com/jlopp",
          "followers_url": "https://api.github.com/users/jlopp/followers",
          "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
          "organizations_url": "https://api.github.com/users/jlopp/orgs",
          "repos_url": "https://api.github.com/users/jlopp/repos",
          "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jlopp/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jlopp/statoshi",
        "description": "Bitcoin Core + StatsD integration",
        "fork": true,
        "url": "https://api.github.com/repos/jlopp/statoshi",
        "archive_url": "https://api.github.com/repos/jlopp/statoshi/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jlopp/statoshi/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jlopp/statoshi/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jlopp/statoshi/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jlopp/statoshi/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jlopp/statoshi/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jlopp/statoshi/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jlopp/statoshi/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jlopp/statoshi/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jlopp/statoshi/contributors",
        "deployments_url": "https://api.github.com/repos/jlopp/statoshi/deployments",
        "downloads_url": "https://api.github.com/repos/jlopp/statoshi/downloads",
        "events_url": "https://api.github.com/repos/jlopp/statoshi/events",
        "forks_url": "https://api.github.com/repos/jlopp/statoshi/forks",
        "git_commits_url": "https://api.github.com/repos/jlopp/statoshi/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jlopp/statoshi/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jlopp/statoshi/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jlopp/statoshi.git",
        "issue_comment_url": "https://api.github.com/repos/jlopp/statoshi/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jlopp/statoshi/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jlopp/statoshi/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jlopp/statoshi/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jlopp/statoshi/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jlopp/statoshi/languages",
        "merges_url": "https://api.github.com/repos/jlopp/statoshi/merges",
        "milestones_url": "https://api.github.com/repos/jlopp/statoshi/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jlopp/statoshi/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jlopp/statoshi/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jlopp/statoshi/releases%7B/id%7D",
        "ssh_url": "git@github.com:jlopp/statoshi.git",
        "stargazers_url": "https://api.github.com/repos/jlopp/statoshi/stargazers",
        "statuses_url": "https://api.github.com/repos/jlopp/statoshi/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jlopp/statoshi/subscribers",
        "subscription_url": "https://api.github.com/repos/jlopp/statoshi/subscription",
        "tags_url": "https://api.github.com/repos/jlopp/statoshi/tags",
        "teams_url": "https://api.github.com/repos/jlopp/statoshi/teams",
        "trees_url": "https://api.github.com/repos/jlopp/statoshi/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jlopp/statoshi.git",
        "hooks_url": "https://api.github.com/repos/jlopp/statoshi/hooks",
        "svn_url": "https://github.com/jlopp/statoshi",
        "homepage": "https://jlopp.github.io/statoshi/",
        "language": "C++",
        "forks_count": 25,
        "stargazers_count": 222,
        "watchers_count": 222,
        "size": 199977,
        "default_branch": "master",
        "open_issues_count": 18,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": true,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-04T13:08:31Z",
        "created_at": "2014-05-02T00:02:03Z",
        "updated_at": "2023-06-05T07:09:24Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "7a49fdc58115845ece3a9890bf9498bee6b559de",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34348,
        "stargazers_count": 69854,
        "watchers_count": 69854,
        "size": 234261,
        "default_branch": "master",
        "open_issues_count": 631,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-09T10:08:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-09T09:00:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 24,
    "deletions": 20,
    "changed_files": 3,
    "commits": 1,
    "review_comments": 26,
    "comments": 17
  },
  "events": [
    {
      "event": "labeled",
      "id": 4966350453,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ5NjYzNTA0NTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4966350453",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T14:24:26Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "commented",
      "id": 872304091,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjMwNDA5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872304091",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T14:40:21Z",
      "updated_at": "2021-07-01T14:40:21Z",
      "author_association": "MEMBER",
      "body": "It looks like an empty line needs to be added to the commit message after the subject line for the linter to pass.",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872304091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 872388955,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjM4ODk1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872388955",
      "actor": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T16:31:20Z",
      "updated_at": "2021-07-01T16:31:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think this would change the behavior of `GetTransaction` in some cases. I'm not sure whether this is OK or not, but I'd think we should at least update comments here: https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L146, and docs here: https://github.com/bitcoin/bitcoin/blob/master/src/rpc/rawtransaction.cpp#L78\r\n\r\nThe case I'm thinking about, which you noted, is when an incorrect `block_index` is provided to `GetTransaction`, but `g_txindex->FindTx(hash, hashBlock, tx)` finds and returns the tx. After this PR we would return the tx although it isn't in the block the user asked for. Idk the implications of this or if it matters, but if it does, you could probably check `hashBlock` against the user provided `block_index` and get the performance win you want without changing behavior (if necessary/practical)\r\n\r\nSimilarly, I'm not sure if checking the mempool first has any unintended consequences (other than deviating from current docs). That said, I'm not sure the `if (mempool) {` branch needs to move in this PR, can probably just leave it after the `if (block_index) {` branch as is. Again, not sure how we feel about returning a tx from the mempool when the user wanted to check a specific `block_index`",
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872388955",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4967604169,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk2NzYwNDE2OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4967604169",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T18:29:09Z"
    },
    {
      "event": "commented",
      "id": 872465440,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjQ2NTQ0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872465440",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T18:37:23Z",
      "updated_at": "2021-07-01T18:37:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think a fundamental question is whether or not the block_index is intended to be used as a hint or as a validation parameter.\r\n\r\nGiven that the current logic of this function has various fallbacks, it seems to me that block_index is a hint and that the goal of the function is to try to return the requested transaction regardless of where it is stored. So it seems to me that reorganizing the logic for performance gains is a suitable goal.",
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872465440",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 872470202,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjQ3MDIwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872470202",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T18:45:21Z",
      "updated_at": "2021-07-01T18:45:21Z",
      "author_association": "MEMBER",
      "body": "FindTx returns the block hash, so it's very easy to check if it matches. If you do so, the question of whether the provided block is a hint or a search restriction doesn't apply.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872470202",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4968240071,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk2ODI0MDA3MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4968240071",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-01T21:12:03Z"
    },
    {
      "event": "reviewed",
      "id": 697919335,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk3OTE5MzM1",
      "url": null,
      "actor": null,
      "commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "This is a behavior change, and no test fails which is unfortunate. If we want to do this then a release note would be nice.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-697919335",
      "submitted_at": "2021-07-02T08:12:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4971317491,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk3MTMxNzQ5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4971317491",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-02T12:55:33Z"
    },
    {
      "event": "commented",
      "id": 872977773,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3Mjk3Nzc3Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872977773",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-02T12:58:05Z",
      "updated_at": "2021-07-02T12:58:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "I've added additional checks that should ensure there is no behavior change, only performance improvements. Now it should return nullptr faster in certain conditions.",
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872977773",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "reviewed",
      "id": 698169905,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk4MTY5OTA1",
      "url": null,
      "actor": null,
      "commit_id": "6dd28e76884c72681767b5a43d8960b9904ac3e0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-698169905",
      "submitted_at": "2021-07-02T13:09:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4973239290,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk3MzIzOTI5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4973239290",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-02T20:51:08Z"
    },
    {
      "event": "reviewed",
      "id": 698522695,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk4NTIyNjk1",
      "url": null,
      "actor": null,
      "commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-698522695",
      "submitted_at": "2021-07-02T22:15:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "renamed",
      "id": 4973944643,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDk3Mzk0NDY0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4973944643",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T07:38:26Z",
      "rename": {
        "from": "prefer to use txindex if available for GetTransaction",
        "to": "rpc: Prefer to use txindex if available for GetTransaction"
      }
    },
    {
      "event": "labeled",
      "id": 4973944732,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ5NzM5NDQ3MzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4973944732",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T07:38:34Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 873363488,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MzM2MzQ4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873363488",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T07:38:43Z",
      "updated_at": "2021-07-03T07:38:43Z",
      "author_association": "MEMBER",
      "body": "review ACK 5dd11ea1406f4926ab9061702b69b409459723b4",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-873363488",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "reviewed",
      "id": 698583510,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk4NTgzNTEw",
      "url": null,
      "actor": null,
      "commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK 5dd11ea1406f4926ab9061702b69b409459723b4\r\n\r\nISTM we could use additional test coverage. Edit: Am adding some, will propose separately.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-698583510",
      "submitted_at": "2021-07-03T11:05:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3OGY0YzhiOThlYWRhMzM3MzQ2ZmZiMjA2MzM5YzNlYmFlNGZmNDNi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "tree": {
        "sha": "5f08795aaacdf50ee7cf7d5481d5f0173fbaab20",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5f08795aaacdf50ee7cf7d5481d5f0173fbaab20"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5f08795aaacdf50ee7cf7d5481d5f0173fbaab20\nparent 2749613020ed96a4e9204f8b98c44524b0a62d0d\nauthor Jameson Lopp <jameson@team.casa> 1625149048 -0400\ncommitter Jameson Lopp <jameson.lopp@gmail.com> 1625311887 -0400\n\nprefer to use txindex if available for GetTransaction\n\nFixes #22382\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEZ78xQc7ThCTV4LTpfhUiLXHG2f0FAmDgSpAACgkQfhUiLXHG\n2f0Rnw//QdQaOgDeEEKFGW6hANCJHoXDMU5SF91e/nJ2Fdk4O0sXBAZTYZfVEl8n\n61+culmYfVIT0ThRAmGDsoOOXIAVV8kedxghcEm29lYMP8PXA50VQOWAIh6MMKS0\nyT9yylzXOC6VM6qwzqCUPDjEzxhJGGxULbahH5Laawq33fc41rkDwceyRg1XArMt\nb3CrshdIcpp06MGgjxD5XjJoGkOLD/hZY2+xjRoA05cmRyZEJByU+2hp2UkuSseD\neec5iKThZGsdTr3Qo+GB1uqFI0Pgfd/Z3nU93Ej9Z97NuAmiQ9xTl69R5DiZIQxN\nwHWPXKersZIkTC6QU7hmXhcwRTzM/zx1CbmoZ5NqzrECfK+9CXssUFGq9roY/Y0G\npPbfWwFzFKvaKSAt6ZFYjR36y5oQfqY0MkVFgctsdr+eL0euiejVIfleJMHPZq4S\nFL6ak8LhYBEbSw31h7/scaIs/4kkgjfu/A+ZL3svkDu2zfpTJov64cEWl7NWg4yO\n5I4gEINXW4T++4R7TSI3BY2thhfbgJsV8UnipFkgfzGHQXtg+IOX05RwBukRlRgm\nHc5p1Sie7MGmtFEEPsuQtaQ1YC+tNzs8GonrQd/vb/f4YW8FtNKI6+7jqc/fuIfw\nYoOrTfzQ4meWgfjRHgRBr/vtKV707tS9P0uYRsTxgSOzw/EJYu4=\n=8mDL\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2749613020ed96a4e9204f8b98c44524b0a62d0d",
          "sha": "2749613020ed96a4e9204f8b98c44524b0a62d0d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2749613020ed96a4e9204f8b98c44524b0a62d0d"
        }
      ],
      "message": "prefer to use txindex if available for GetTransaction\n\nFixes #22382",
      "committer": {
        "name": "Jameson Lopp",
        "email": "jameson.lopp@gmail.com",
        "date": "2021-07-03T11:31:27Z"
      },
      "author": {
        "name": "Jameson Lopp",
        "email": "jameson@team.casa",
        "date": "2021-07-01T14:17:28Z"
      },
      "sha": "78f4c8b98eada337346ffb206339c3ebae4ff43b"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4974122159,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk3NDEyMjE1OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4974122159",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T11:31:50Z"
    },
    {
      "event": "commented",
      "id": 873397253,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MzM5NzI1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873397253",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T12:03:14Z",
      "updated_at": "2021-07-03T12:03:14Z",
      "author_association": "MEMBER",
      "body": "ACK 78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-873397253",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 873436275,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3MzQzNjI3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873436275",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-03T16:50:46Z",
      "updated_at": "2021-07-03T16:50:46Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-873436275",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 874410913,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDQxMDkxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874410913",
      "actor": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T02:15:33Z",
      "updated_at": "2021-07-06T02:15:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "NACK  -- In general, I think performance optimizations should come with data that shows they improve things. Especially in the case the code isn't being cleaned up or simplified (I think this PR makes the code slightly more complicated and harder to follow so I'd want to be sure the performance improvements warrant it). I also have other concerns which I lay out below. I can quickly come around on my review with some explanation/correction to my understanding if I'm off base anywhere.\r\n\r\n---\r\n\r\n> Motivation: prevent excessive disk reads if txindex is enabled.\r\n\r\nHowever, from #22382 which this PR fixes, the issue is reported as:\r\n> When using getrawtransaction with an included blockhash, performance should be better as there is no need to scan the entire txindex.\r\n\r\nWas the issue misread? Because the issue expects scanning the entire txindex causes a slowdown, while this PR claims excessive disk reads (in the case that txindex is enabled) causes a slowdown. So to me the two seem to contradict each other.\r\n\r\n---\r\n\r\nTo me it seems both `ReadBlockFromDisk` and `g_txindex->FindTx` do the same disk read, so I'm not sure how this change \"prevents excessive disk reads\" (please correct me if I'm misunderstanding something basic, I'm learning):\r\n  - https://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.cpp#L370\r\n  - https://github.com/bitcoin/bitcoin/blob/master/src/index/txindex.cpp#L238\r\n\r\nIf I'm understanding this correctly, the main benefit of txindex being enabled is that **we don't need** `blockhash` to be specified to know which block to look in for the transaction, so we can still find it, but the same disk read is happens in both cases.\r\n\r\n---\r\n\r\nNow the measurements provided in the issue seem to show some performance discrepancy (which maybe @jlopp just looked at and knew what was going on right away). But I also don't know how much variation is normal in the timing of rpc calls, and whether one measurement (under unknown conditions) is good enough to warrant a performance optimization. On top of that it's only one data point - what if this tx reported in the issue happens to be at the beginning/end of txindex or who knows what?",
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-874410913",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "mentioned",
      "id": 4980603488,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4MDYwMzQ4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4980603488",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T02:15:34Z"
    },
    {
      "event": "subscribed",
      "id": 4980603490,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODA2MDM0OTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4980603490",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T02:15:34Z"
    },
    {
      "event": "commented",
      "id": 874518363,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDUxODM2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874518363",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T07:12:22Z",
      "updated_at": "2021-07-06T07:12:22Z",
      "author_association": "MEMBER",
      "body": "> To me it seems both `ReadBlockFromDisk` and `g_txindex->FindTx` do the same disk read, so I'm not sure how this change \"prevents excessive disk reads\" (please correct me if I'm misunderstanding something basic, I'm learning):\r\n\r\n@mjdietzx txindex stores the transaction position in the block, so it just seeks there to parse the transaction. Without txindex it needs to load the block - parse transactions, build hashes,... - and then search in those transactions.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-874518363",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "mentioned",
      "id": 4981355757,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4MTM1NTc1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4981355757",
      "actor": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T07:12:23Z"
    },
    {
      "event": "subscribed",
      "id": 4981355762,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODEzNTU3NjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4981355762",
      "actor": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T07:12:23Z"
    },
    {
      "event": "commented",
      "id": 874777830,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDc3NzgzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874777830",
      "actor": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T13:50:37Z",
      "updated_at": "2021-07-06T13:52:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "> txindex stores the transaction position in the block, so it just seeks there to parse the transaction. Without txindex it needs to load the block - parse transactions, build hashes,... - and then search in those transactions.\r\n\r\nMakes sense, and thanks for the explanation @promag. So is it safe to say scanning through the entire txindex and then \"seeking to the tx's position in the block and reading it from disk\" is much faster than \" load the block - parse transactions, build hashes,... - and then search in those transactions\"? Do we have any intuitions here, like big-O and/or worst-case runtimes?\r\n\r\nIf so, is it worth adding some good comments to the source code (not sure whether they are added in `GetTransaction` or in the `ReadBlockFromDisk` and `FindTx` declarations). Note, I have no intuition of the runtimes of these operations (due to my inexperience) so just lmk if this is obvious and unnecessary.\r\n\r\nBut here's where I'm coming from - how do I know the test measurements provided in #22382 are on mainnet (what if they are on some testnet where the txindex is extremely small? I can't find the transaction or block hashes from that issue in any block explorers). How do I even know -txindex is enabled for these measurements (and it's not just scanning through his wallet's transactions, and that's where the performance discrepancy comes from)?\r\n\r\nWithout some source code comments and data/measurments showing the performance differences here, it makes me wonder if the reason people pass `block_hash` in the first place is because it gets around scanning the entire txindex.\r\n",
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-874777830",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "mentioned",
      "id": 4983384165,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4MzM4NDE2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4983384165",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T13:50:37Z"
    },
    {
      "event": "subscribed",
      "id": 4983384170,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODMzODQxNzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4983384170",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T13:50:37Z"
    },
    {
      "event": "commented",
      "id": 874805472,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDgwNTQ3Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874805472",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T14:22:40Z",
      "updated_at": "2021-07-06T14:22:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "I don't believe that \"scanning through the entire txindex\" is an accurate way to describe how txindex->FindTx functions. I expect it to be more of a O(1) constant time operation while ReadBlockFromDisk() is more of a O(n) operation that is directly correlated to block size.",
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-874805472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 874814496,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDgxNDQ5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874814496",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T14:33:17Z",
      "updated_at": "2021-07-06T14:44:40Z",
      "author_association": "MEMBER",
      "body": "Right, it doesn't scan the entire txindex as keys are indexed. I think leveldb lookup is O(log n).\r\n\r\n#22382 shows the performance difference from each approach.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-874814496",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "commented",
      "id": 878853661,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODg1MzY2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878853661",
      "actor": {
        "login": "orweinberger",
        "id": 1876045,
        "node_id": "MDQ6VXNlcjE4NzYwNDU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1876045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/orweinberger",
        "html_url": "https://github.com/orweinberger",
        "followers_url": "https://api.github.com/users/orweinberger/followers",
        "following_url": "https://api.github.com/users/orweinberger/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/orweinberger/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/orweinberger/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/orweinberger/subscriptions",
        "organizations_url": "https://api.github.com/users/orweinberger/orgs",
        "repos_url": "https://api.github.com/users/orweinberger/repos",
        "events_url": "https://api.github.com/users/orweinberger/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/orweinberger/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-13T07:38:27Z",
      "updated_at": "2021-07-13T07:38:27Z",
      "author_association": "NONE",
      "body": "FWIW, this is the compared performance with @jlopp's modifications\r\n\r\n```\r\n$ time ./src/bitcoin-cli getrawtransaction 20a93350cd6f4e03dfb6cbb3f104965293627f25c199c1be0e4d187a4ed5f4bb\r\n020000000001018d3f7d8efaa377dda74892af26c1ca028466d97721d2ea6c74a5cbcf404feb9004000000171600147f5a49a2d89f86ff498103bdbcb1762f9f0ab5aefeffffff08a04a05000000000017a91467a849785bb12f1a03260b3b52ec9dff52b30e708724b80100000000001976a914f0b7e8a5ede232c2654fca3b47f8d0c95f7a561688ac50fe0b00000000001976a914ed06524fb21248a37e7f8f20cdc67e27f49c4f1588acf44f01000000000017a9147422dbf3bdf441a640d09a2a91e6fa40837b019f878d9b3100000000001976a9142a5cd9333e4e94c88f7cd33216b2fc0af15fbd8588ac89b400000000000017a914d05dbcdb4587f1a243cc1ed89e96cd4ec19e24a08778e169180000000017a914f520df8923419f60d9a76df60cfc7a0e3a3fc86f8708d806000000000017a9147246c684dd4890e9c8977e6312c30ecdea2b0a55870247304402205704dd3b6d8930e89c660011ab2f6a42aedcbde438d5f121998e3db6a66889310220054a506aee274f885229d6a9ed89eca17bac87dca401f9c63d07990e98b2f0a301210390e3b178ebc51da1589baee9de37de491dba0575838aacf88c2cd70a06a4486eb47c0a00\r\n\r\nreal\t0m0.003s\r\nuser\t0m0.002s\r\nsys\t0m0.000s\r\n\r\n\r\n$ time ./src/bitcoin-cli getrawtransaction 20a93350cd6f4e03dfb6cbb3f104965293627f25c199c1be0e4d187a4ed5f4bb false 0000000000000000000a801776a92ced69dc5fb0a5919271872a9261a613d9c3\r\n020000000001018d3f7d8efaa377dda74892af26c1ca028466d97721d2ea6c74a5cbcf404feb9004000000171600147f5a49a2d89f86ff498103bdbcb1762f9f0ab5aefeffffff08a04a05000000000017a91467a849785bb12f1a03260b3b52ec9dff52b30e708724b80100000000001976a914f0b7e8a5ede232c2654fca3b47f8d0c95f7a561688ac50fe0b00000000001976a914ed06524fb21248a37e7f8f20cdc67e27f49c4f1588acf44f01000000000017a9147422dbf3bdf441a640d09a2a91e6fa40837b019f878d9b3100000000001976a9142a5cd9333e4e94c88f7cd33216b2fc0af15fbd8588ac89b400000000000017a914d05dbcdb4587f1a243cc1ed89e96cd4ec19e24a08778e169180000000017a914f520df8923419f60d9a76df60cfc7a0e3a3fc86f8708d806000000000017a9147246c684dd4890e9c8977e6312c30ecdea2b0a55870247304402205704dd3b6d8930e89c660011ab2f6a42aedcbde438d5f121998e3db6a66889310220054a506aee274f885229d6a9ed89eca17bac87dca401f9c63d07990e98b2f0a301210390e3b178ebc51da1589baee9de37de491dba0575838aacf88c2cd70a06a4486eb47c0a00\r\n\r\nreal\t0m0.003s\r\nuser\t0m0.002s\r\nsys\t0m0.000s\r\n```",
      "user": {
        "login": "orweinberger",
        "id": 1876045,
        "node_id": "MDQ6VXNlcjE4NzYwNDU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1876045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/orweinberger",
        "html_url": "https://github.com/orweinberger",
        "followers_url": "https://api.github.com/users/orweinberger/followers",
        "following_url": "https://api.github.com/users/orweinberger/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/orweinberger/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/orweinberger/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/orweinberger/subscriptions",
        "organizations_url": "https://api.github.com/users/orweinberger/orgs",
        "repos_url": "https://api.github.com/users/orweinberger/repos",
        "events_url": "https://api.github.com/users/orweinberger/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/orweinberger/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-878853661",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "mentioned",
      "id": 5011851318,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTAxMTg1MTMxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5011851318",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-13T07:38:27Z"
    },
    {
      "event": "subscribed",
      "id": 5011851322,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwMTE4NTEzMjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5011851322",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-13T07:38:27Z"
    },
    {
      "event": "commented",
      "id": 879123985,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTEyMzk4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879123985",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-13T14:11:54Z",
      "updated_at": "2021-07-13T14:11:54Z",
      "author_association": "MEMBER",
      "body": "I cherry-picked this change onto #22437 that adds a lot of `GetTransaction()` coverage and it doesn't see any change in behavior; all is green.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-879123985",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "reviewed",
      "id": 699462554,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk5NDYyNTU0",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK\r\n\r\nBased on the issue being clarified and some measurements being provided after this PR, and tests in https://github.com/bitcoin/bitcoin/pull/22437 I'm signing-off on this. I do think this PR would have been a good opportunity to benchmark performance with a few different test cases (instead of times on just one transaction that @orweinberger provided), but that's just my opinion. Don't want to hold things up bc I'm convinced this is a good optimization",
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-699462554",
      "submitted_at": "2021-07-14T19:54:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 709054057,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzA5MDU0MDU3",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 78f4c8b98eada337346ffb206339c3ebae4ff43b\r\n\r\nUsing -txindex if available makes perfect sense, regardless of whether a blockhash has been passed or not. To my understanding, the PR in its current form doesn't change any behaviour (in particular, if the passed blockhash doesn't match the one from the index, still the slower path of reading the block from disk is taken), i.e. the initial objections by reviewers (https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-872388955, https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-697919335) have been sorted out. Follow-up PR #22437 should further increase the confidence that this is the case, will also put that on my review list.\r\nAlso, the structure of `GetTransaction` looks more logical now, as the code blocks for getting a transaction appear in the order of \"fast\" (mempool) to \"slow\" (read block from disk).",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-709054057",
      "submitted_at": "2021-07-18T19:11:08Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 711178990,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzExMTc4OTkw",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK 78f4c8b98eada337346ffb206339c3ebae4ff43b\r\nsuggestions are optional",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-711178990",
      "submitted_at": "2021-07-21T01:18:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 711558121,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzExNTU4MTIx",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-711558121",
      "submitted_at": "2021-07-21T11:43:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 712355651,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzEyMzU1NjUx",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 78f4c8b98eada337346ffb206339c3ebae4ff43b\r\n\r\nEcho @LarryRuane's suggestion here https://github.com/bitcoin/bitcoin/pull/22383/files#r673899065",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-712355651",
      "submitted_at": "2021-07-22T04:26:29Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 712609777,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzEyNjA5Nzc3",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 78f4c8b98eada337346ffb206339c3ebae4ff43b\r\n\r\nCouple of minor documentation suggestions inline.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-712609777",
      "submitted_at": "2021-07-22T11:09:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "mentioned",
      "id": 5055307754,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA1NTMwNzc1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5055307754",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T12:15:19Z"
    },
    {
      "event": "subscribed",
      "id": 5055307756,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNTUzMDc3NTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5055307756",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T12:15:19Z"
    },
    {
      "event": "reviewed",
      "id": 712668337,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzEyNjY4MzM3",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK https://github.com/bitcoin/bitcoin/commit/78f4c8b98eada337346ffb206339c3ebae4ff43b\r\n\r\nDoc updates as mentioned by @jnewbery https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674695881 and https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674700841 seems appropriate. \r\n\r\nWould test #22437 and report back..  ",
      "user": {
        "login": "rajarshimaitra",
        "id": 36541669,
        "node_id": "MDQ6VXNlcjM2NTQxNjY5",
        "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rajarshimaitra",
        "html_url": "https://github.com/rajarshimaitra",
        "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
        "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
        "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
        "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
        "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-712668337",
      "submitted_at": "2021-07-22T12:16:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "reviewed",
      "id": 713033592,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzEzMDMzNTky",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK and Tested ACK https://github.com/bitcoin/bitcoin/pull/22383/commits/78f4c8b98eada337346ffb206339c3ebae4ff43b on Ubuntu 20.04",
      "user": {
        "login": "lsilva01",
        "id": 84432093,
        "node_id": "MDQ6VXNlcjg0NDMyMDkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lsilva01",
        "html_url": "https://github.com/lsilva01",
        "followers_url": "https://api.github.com/users/lsilva01/followers",
        "following_url": "https://api.github.com/users/lsilva01/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lsilva01/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lsilva01/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
        "organizations_url": "https://api.github.com/users/lsilva01/orgs",
        "repos_url": "https://api.github.com/users/lsilva01/repos",
        "events_url": "https://api.github.com/users/lsilva01/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lsilva01/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-713033592",
      "submitted_at": "2021-07-22T17:06:46Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "commented",
      "id": 885130926,
      "node_id": "IC_kwDOABII5840wgau",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885130926",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T18:15:33Z",
      "updated_at": "2021-07-22T18:15:33Z",
      "author_association": "MEMBER",
      "body": "Would be nice to include the documentation suggested by @jnewbery to avoid someone \"optimizing\" this again in the future. Maybe #22528, which also moves the code, can be used for that?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-885130926",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "mentioned",
      "id": 5057269544,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA1NzI2OTU0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5057269544",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T18:15:33Z"
    },
    {
      "event": "subscribed",
      "id": 5057269554,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNTcyNjk1NTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5057269554",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T18:15:33Z"
    },
    {
      "event": "merged",
      "id": 5057273447,
      "node_id": "MDExOk1lcmdlZEV2ZW50NTA1NzI3MzQ0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5057273447",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7925f3aba820f8965293148ef666c59f87dd3c7f",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7925f3aba820f8965293148ef666c59f87dd3c7f",
      "created_at": "2021-07-22T18:16:05Z"
    },
    {
      "event": "closed",
      "id": 5057273449,
      "node_id": "MDExOkNsb3NlZEV2ZW50NTA1NzI3MzQ0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5057273449",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-22T18:16:06Z"
    },
    {
      "event": "reviewed",
      "id": 713115133,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzEzMTE1MTMz",
      "url": null,
      "actor": null,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#pullrequestreview-713115133",
      "submitted_at": "2021-07-22T18:33:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
    },
    {
      "event": "referenced",
      "id": 5057424106,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNTc0MjQxMDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5057424106",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f685a13bef0418663015ea6d8f448f075510c0ec",
      "commit_url": "https://api.github.com/repos/theStack/bitcoin/commits/f685a13bef0418663015ea6d8f448f075510c0ec",
      "created_at": "2021-07-22T18:36:28Z"
    },
    {
      "event": "referenced",
      "id": 5058786411,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNTg3ODY0MTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5058786411",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "54a29aafa03ae829c0a5a825d28eefaefcaf1f60",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/54a29aafa03ae829c0a5a825d28eefaefcaf1f60",
      "created_at": "2021-07-23T01:27:02Z"
    },
    {
      "event": "referenced",
      "id": 5081109799,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwODExMDk3OTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5081109799",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d300c2ce4a9c36a2adfd013984ac259cb6c04f60",
      "commit_url": "https://api.github.com/repos/theStack/bitcoin/commits/d300c2ce4a9c36a2adfd013984ac259cb6c04f60",
      "created_at": "2021-07-28T15:55:38Z"
    },
    {
      "event": "referenced",
      "id": 5081247256,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwODEyNDcyNTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5081247256",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4b1fb50def0dea0cd320bc43c12d9a12edde0390",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4b1fb50def0dea0cd320bc43c12d9a12edde0390",
      "created_at": "2021-07-28T16:22:08Z"
    },
    {
      "event": "referenced",
      "id": 5084863684,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwODQ4NjM2ODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5084863684",
      "actor": {
        "login": "NikhilBartwal",
        "id": 42388668,
        "node_id": "MDQ6VXNlcjQyMzg4NjY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/42388668?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NikhilBartwal",
        "html_url": "https://github.com/NikhilBartwal",
        "followers_url": "https://api.github.com/users/NikhilBartwal/followers",
        "following_url": "https://api.github.com/users/NikhilBartwal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NikhilBartwal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NikhilBartwal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NikhilBartwal/subscriptions",
        "organizations_url": "https://api.github.com/users/NikhilBartwal/orgs",
        "repos_url": "https://api.github.com/users/NikhilBartwal/repos",
        "events_url": "https://api.github.com/users/NikhilBartwal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NikhilBartwal/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "57d223f5b704af0c5d76b366de7bcdae8b7646d7",
      "commit_url": "https://api.github.com/repos/NikhilBartwal/bitcoin/commits/57d223f5b704af0c5d76b366de7bcdae8b7646d7",
      "created_at": "2021-07-29T09:20:11Z"
    },
    {
      "event": "commented",
      "id": 890974295,
      "node_id": "IC_kwDOABII5841GzBX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890974295",
      "actor": {
        "login": "NelsonGaldeman",
        "id": 9610178,
        "node_id": "MDQ6VXNlcjk2MTAxNzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9610178?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NelsonGaldeman",
        "html_url": "https://github.com/NelsonGaldeman",
        "followers_url": "https://api.github.com/users/NelsonGaldeman/followers",
        "following_url": "https://api.github.com/users/NelsonGaldeman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NelsonGaldeman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NelsonGaldeman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NelsonGaldeman/subscriptions",
        "organizations_url": "https://api.github.com/users/NelsonGaldeman/orgs",
        "repos_url": "https://api.github.com/users/NelsonGaldeman/repos",
        "events_url": "https://api.github.com/users/NelsonGaldeman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NelsonGaldeman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T12:10:22Z",
      "updated_at": "2021-08-02T12:25:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "I was curious about response times so I ran some tests:\r\n\r\nI picked up 5 random transactions and fetched them with and without the block hash against both latest release (v0.21.1) and  78f4c8b98eada337346ffb206339c3ebae4ff43b\r\n\r\nv0.21.1 results\r\n```\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 278e5e132279ef4bbb0a612cb6b27d8b7510c2cc3be432b0641841cf56a7b0d5\r\n[...]\r\n\r\nreal\t0m0.118s\r\nuser\t0m0.000s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 278e5e132279ef4bbb0a612cb6b27d8b7510c2cc3be432b0641841cf56a7b0d5 false 0000000000000000000611dd7a5bde18744ebd17dd0ee71123bb31c5a500f9c0\r\n[...]\r\n\r\nreal\t0m0.133s\r\nuser\t0m0.005s\r\nsys\t0m0.001s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2ad5c8d13cc87293145eefbf4f6b4ee22859c75006266b335248ae402d1495f8\r\n[...]\r\n\r\nreal\t0m0.117s\r\nuser\t0m0.006s\r\nsys\t0m0.001s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2ad5c8d13cc87293145eefbf4f6b4ee22859c75006266b335248ae402d1495f8 false 00000000000000000070de9aec218ad077a877f8061cf990ab321dbd2753bfbc\r\n[...]\r\n\r\nreal\t0m0.043s\r\nuser\t0m0.006s\r\nsys\t0m0.000s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction b9d34e525aa764d7043abb2c83d51394ada5162d6c1a352047bc388de8845e4b false 000000000000000006cd4488b5c44d79983f466fc2e7821cb309e0523dee0e52\r\n[...]\r\n\r\nreal\t0m0.090s\r\nuser\t0m0.000s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction b9d34e525aa764d7043abb2c83d51394ada5162d6c1a352047bc388de8845e4b\r\n[...]\r\n\r\nreal\t0m0.112s\r\nuser\t0m0.000s\r\nsys\t0m0.005s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction c2def6c34dd508a36776ac76eab06391f1ce90fdb142355b6ddd4fdb90b60f24 false 00000000000004fa9ea9acff9060083ea60f9377589e6797bb132484263f4b7c\r\n[...]\r\n\r\nreal\t0m0.021s\r\nuser\t0m0.003s\r\nsys\t0m0.004s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction c2def6c34dd508a36776ac76eab06391f1ce90fdb142355b6ddd4fdb90b60f24\r\n[...]\r\n\r\nreal\t0m0.102s\r\nuser\t0m0.005s\r\nsys\t0m0.001s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2722e08668a07b515d57a80922c2348c6a857f9afd1fa456851d489edc39b9e6\r\n[...]\r\n\r\nreal\t0m0.154s\r\nuser\t0m0.000s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli  getrawtransaction 2722e08668a07b515d57a80922c2348c6a857f9afd1fa456851d489edc39b9e6 false 00000000000536414be8da7f69059a812bab7623ebd25abd779d1d24b06110fc\r\n[...]\r\n\r\nreal\t0m0.006s\r\nuser\t0m0.002s\r\nsys\t0m0.003s\r\n```\r\n\r\n78f4c8b98eada337346ffb206339c3ebae4ff43b results\r\n```\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 278e5e132279ef4bbb0a612cb6b27d8b7510c2cc3be432b0641841cf56a7b0d5\r\n[...]\r\n\r\nreal\t0m0.095s\r\nuser\t0m0.001s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 278e5e132279ef4bbb0a612cb6b27d8b7510c2cc3be432b0641841cf56a7b0d5 false 0000000000000000000611dd7a5bde18744ebd17dd0ee71123bb31c5a500f9c0\r\n[...]\r\n\r\nreal\t0m0.007s\r\nuser\t0m0.002s\r\nsys\t0m0.005s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2ad5c8d13cc87293145eefbf4f6b4ee22859c75006266b335248ae402d1495f8\r\n[...]\r\n\r\nreal\t0m0.124s\r\nuser\t0m0.001s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2ad5c8d13cc87293145eefbf4f6b4ee22859c75006266b335248ae402d1495f8 false 00000000000000000070de9aec218ad077a877f8061cf990ab321dbd2753bfbc\r\n[...]\r\nreal\t0m0.009s\r\nuser\t0m0.000s\r\nsys\t0m0.007s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction b9d34e525aa764d7043abb2c83d51394ada5162d6c1a352047bc388de8845e4b false 000000000000000006cd4488b5c44d79983f466fc2e7821cb309e0523dee0e52\r\n[...]\r\n\r\nreal\t0m0.153s\r\nuser\t0m0.003s\r\nsys\t0m0.004s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction b9d34e525aa764d7043abb2c83d51394ada5162d6c1a352047bc388de8845e4b\r\n[...]\r\n\r\nreal\t0m0.006s\r\nuser\t0m0.006s\r\nsys\t0m0.000s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction c2def6c34dd508a36776ac76eab06391f1ce90fdb142355b6ddd4fdb90b60f24 false 00000000000004fa9ea9acff9060083ea60f9377589e6797bb132484263f4b7c\r\n[...]\r\n\r\nreal\t0m0.138s\r\nuser\t0m0.000s\r\nsys\t0m0.006s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction c2def6c34dd508a36776ac76eab06391f1ce90fdb142355b6ddd4fdb90b60f24\r\n[...]\r\n\r\nreal\t0m0.006s\r\nuser\t0m0.000s\r\nsys\t0m0.006s\r\n\r\n\r\n\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2722e08668a07b515d57a80922c2348c6a857f9afd1fa456851d489edc39b9e6\r\n[...]\r\n\r\nreal\t0m0.158s\r\nuser\t0m0.000s\r\nsys\t0m0.005s\r\nnelson@bitcoin-node-v3:~$ time ./bitcoin-cli getrawtransaction 2722e08668a07b515d57a80922c2348c6a857f9afd1fa456851d489edc39b9e6 false 00000000000536414be8da7f69059a812bab7623ebd25abd779d1d24b06110fc\r\n[...]\r\n\r\nreal\t0m0.006s\r\nuser\t0m0.005s\r\nsys\t0m0.000s\r\n```\r\n\r\n**System information**\r\nGCP n1-standard-2\r\n2 vCPUs\r\n7.5 GB memory\r\nHDD Standard Disk",
      "user": {
        "login": "NelsonGaldeman",
        "id": 9610178,
        "node_id": "MDQ6VXNlcjk2MTAxNzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9610178?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NelsonGaldeman",
        "html_url": "https://github.com/NelsonGaldeman",
        "followers_url": "https://api.github.com/users/NelsonGaldeman/followers",
        "following_url": "https://api.github.com/users/NelsonGaldeman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NelsonGaldeman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NelsonGaldeman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NelsonGaldeman/subscriptions",
        "organizations_url": "https://api.github.com/users/NelsonGaldeman/orgs",
        "repos_url": "https://api.github.com/users/NelsonGaldeman/repos",
        "events_url": "https://api.github.com/users/NelsonGaldeman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NelsonGaldeman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-890974295",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22383"
    },
    {
      "event": "referenced",
      "id": 5104391337,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMDQzOTEzMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5104391337",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/eaf09bda4ab21f79f89822d2c6fa3d7a3ce57b0d",
      "created_at": "2021-08-03T12:07:37Z"
    },
    {
      "event": "referenced",
      "id": 5108646135,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMDg2NDYxMzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5108646135",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cf4a7f7c15801953c7b528a45c97d8dab9ef32b1",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/cf4a7f7c15801953c7b528a45c97d8dab9ef32b1",
      "created_at": "2021-08-04T04:49:22Z"
    },
    {
      "event": "referenced",
      "id": 5240739326,
      "node_id": "REFE_lADOABII5843uX8BzwAAAAE4X1X-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5240739326",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7e75400bb568fe8a653246c4e76f6baab2455a61",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/7e75400bb568fe8a653246c4e76f6baab2455a61",
      "created_at": "2021-09-01T16:17:28Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 5279493190,
      "node_id": "HRDE_lADOABII5843uX8BzwAAAAE6rqxG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5279493190",
      "actor": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-09T15:49:26Z"
    },
    {
      "event": "referenced",
      "id": 7565335222,
      "node_id": "REFE_lADOABII5843uX8BzwAAAAHC7dq2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7565335222",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a03ebc0261a8149715cffb8d5645b57f546f62cb",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/a03ebc0261a8149715cffb8d5645b57f546f62cb",
      "created_at": "2022-10-11T18:20:59Z"
    },
    {
      "event": "locked",
      "id": 7699631925,
      "node_id": "LOE_lADOABII5843uX8BzwAAAAHK7w81",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7699631925",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-30T19:09:53Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662813217",
      "pull_request_review_id": 697919335,
      "id": 662813217,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjgxMzIxNw==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided, check it first for the tx.\n+ * If g_index is available, check it next for the tx.",
      "path": "src/validation.h",
      "position": null,
      "original_position": 9,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`g_index`? How about `If -txindex is enabled, check it next for the tx`.",
      "created_at": "2021-07-02T07:52:09Z",
      "updated_at": "2021-07-02T08:12:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662813217",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662813217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662819949",
      "pull_request_review_id": 697919335,
      "id": 662819949,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjgxOTk0OQ==",
      "diff_hunk": "@@ -1159,6 +1159,14 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        if (g_txindex->FindTx(hash, hashBlock, tx)) return tx;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Something like the following would keep behavior?\r\n```cpp\r\nuint256 block_hash;\r\nif (g_txindex->FindTx(hash, block_hash, tx)) {\r\n    if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;\r\n    hashBlock = block_hash;\r\n    return tx;\r\n}\r\n```\r\nNote the local `block_hash` to avoid changing the out-arg in case it fails.",
      "created_at": "2021-07-02T08:02:33Z",
      "updated_at": "2021-07-02T08:12:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662819949",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662819949"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1168,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662821224",
      "pull_request_review_id": 697919335,
      "id": 662821224,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjgyMTIyNA==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided, check it first for the tx.\n+ * If g_index is available, check it next for the tx.\n+ * Finally, if block_index is provided, check for tx by reading entire block from disk.\n  *\n  * @param[in]  block_index     The block to read from disk, or nullptr\n  * @param[in]  mempool         If block_index is not provided, look in the mempool, if provided\n  * @param[in]  hash            The txid\n  * @param[in]  consensusParams The params\n- * @param[out] hashBlock       The hash of block_index, if the tx was found via block_index\n+ * @param[out] hashBlock       The block hash, if the tx was found via g_txindex or block_index",
      "path": "src/validation.h",
      "position": null,
      "original_position": 17,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "same, `... via -txindex or ...`",
      "created_at": "2021-07-02T08:04:48Z",
      "updated_at": "2021-07-02T08:12:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662821224",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662821224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 154,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991449",
      "pull_request_review_id": 698156964,
      "id": 662991449,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk5MTQ0OQ==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided, check it first for the tx.\n+ * If g_index is available, check it next for the tx.",
      "path": "src/validation.h",
      "position": null,
      "original_position": 9,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": 662813217,
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure; will update.",
      "created_at": "2021-07-02T12:54:35Z",
      "updated_at": "2021-07-02T12:54:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662991449",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991716",
      "pull_request_review_id": 698157299,
      "id": 662991716,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk5MTcxNg==",
      "diff_hunk": "@@ -1159,6 +1159,14 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        if (g_txindex->FindTx(hash, hashBlock, tx)) return tx;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": 662819949,
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Makes sense; I can add a similar check for the mempool condition.",
      "created_at": "2021-07-02T12:55:00Z",
      "updated_at": "2021-07-02T12:55:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662991716",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1168,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991827",
      "pull_request_review_id": 698157449,
      "id": 662991827,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk5MTgyNw==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided, check it first for the tx.\n+ * If g_index is available, check it next for the tx.\n+ * Finally, if block_index is provided, check for tx by reading entire block from disk.\n  *\n  * @param[in]  block_index     The block to read from disk, or nullptr\n  * @param[in]  mempool         If block_index is not provided, look in the mempool, if provided\n  * @param[in]  hash            The txid\n  * @param[in]  consensusParams The params\n- * @param[out] hashBlock       The hash of block_index, if the tx was found via block_index\n+ * @param[out] hashBlock       The block hash, if the tx was found via g_txindex or block_index",
      "path": "src/validation.h",
      "position": null,
      "original_position": 17,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5ab22ef9445522748393ebceb0ca41a6b13a2bc3",
      "in_reply_to_id": 662821224,
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure; will update.",
      "created_at": "2021-07-02T12:55:10Z",
      "updated_at": "2021-07-02T12:55:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r662991827",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662991827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 154,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663000869",
      "pull_request_review_id": 698169905,
      "id": 663000869,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzAwMDg2OQ==",
      "diff_hunk": "@@ -1159,6 +1159,24 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) {\n+            // Transaction was found in mempool but we were searching for it in a block.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "6dd28e76884c72681767b5a43d8960b9904ac3e0",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It could be an orphaned block and tx went back to the pool? I think previously it would return the transaction.\r\n\r\nMight be better just do `if (mempool && !block_index) {` in L1162?",
      "created_at": "2021-07-02T13:09:29Z",
      "updated_at": "2021-07-02T13:12:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663000869",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663000869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663241855",
      "pull_request_review_id": 698492344,
      "id": 663241855,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzI0MTg1NQ==",
      "diff_hunk": "@@ -1159,6 +1159,24 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) {\n+            // Transaction was found in mempool but we were searching for it in a block.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "6dd28e76884c72681767b5a43d8960b9904ac3e0",
      "in_reply_to_id": 663000869,
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": " ",
      "created_at": "2021-07-02T20:51:16Z",
      "updated_at": "2021-07-02T20:51:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663241855",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663241855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663267393",
      "pull_request_review_id": 698522695,
      "id": 663267393,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzI2NzM5Mw==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Really edge case but I think this should be:\r\n```cpp\r\nif (!block_index || block_index->GetBlockHash() == block_hash) {\r\n    hashBlock = block_hash;\r\n    return tx;\r\n}\r\n```\r\nSo if the block hash doesn't match with the index then fall thru the next check - the transaction can be in another block right?",
      "created_at": "2021-07-02T22:15:19Z",
      "updated_at": "2021-07-02T22:15:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663267393",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663267393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663347449",
      "pull_request_review_id": 698583510,
      "id": 663347449,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM0NzQ0OQ==",
      "diff_hunk": "@@ -74,12 +74,10 @@ static RPCHelpMan getrawtransaction()\n                 \"getrawtransaction\",\n                 \"\\nReturn the raw transaction data.\\n\"\n \n-                \"\\nBy default this function only works for mempool transactions. When called with a blockhash\\n\"\n-                \"argument, getrawtransaction will return the transaction if the specified block is available and\\n\"\n-                \"the transaction is found in that block. When called without a blockhash argument, getrawtransaction\\n\"\n-                \"will return the transaction if it is in the mempool, or if -txindex is enabled and the transaction\\n\"\n-                \"is in a block in the blockchain.\\n\"\n-\n+                \"\\nBy default this function only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit if you retouch\r\n```suggestion\r\n                \"\\nBy default, this call only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"\r\n```",
      "created_at": "2021-07-03T10:18:30Z",
      "updated_at": "2021-07-03T11:05:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663347449",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663347449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663348910",
      "pull_request_review_id": 698583510,
      "id": 663348910,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM0ODkxMA==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;\n+            hashBlock = block_hash;\n+            return tx;\n+        }",
      "path": "src/validation.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663267393 seems preferable, otherwise move comment to the right place (or omit it)\r\n```diff\r\n@@ -1167,8 +1167,10 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\r\n         CTransactionRef tx;\r\n         uint256 block_hash;\r\n         if (g_txindex->FindTx(hash, block_hash, tx)) {\r\n-            // Transaction was found in a different block than requested.\r\n-            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;\r\n+            if (block_index && block_index->GetBlockHash() != block_hash) {\r\n+                // Transaction was found in a different block than requested.\r\n+                return nullptr;\r\n+            }\r\n             hashBlock = block_hash;\r\n             return tx;\r\n```\r\n",
      "created_at": "2021-07-03T10:33:49Z",
      "updated_at": "2021-07-03T11:05:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663348910",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663348910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1174,
      "original_line": 1174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663354682",
      "pull_request_review_id": 698587713,
      "id": 663354682,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM1NDY4Mg==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": 663267393,
      "user": {
        "login": "jlopp",
        "id": 288011,
        "node_id": "MDQ6VXNlcjI4ODAxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlopp",
        "html_url": "https://github.com/jlopp",
        "followers_url": "https://api.github.com/users/jlopp/followers",
        "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
        "organizations_url": "https://api.github.com/users/jlopp/orgs",
        "repos_url": "https://api.github.com/users/jlopp/repos",
        "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jlopp/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "indeed",
      "created_at": "2021-07-03T11:32:16Z",
      "updated_at": "2021-07-03T11:32:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663354682",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663354682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663389869",
      "pull_request_review_id": 698608862,
      "id": 663389869,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM4OTg2OQ==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": 663267393,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This shouldn't happen, though, as the `FindTx` wouldn't return true?",
      "created_at": "2021-07-03T17:36:39Z",
      "updated_at": "2021-07-03T17:36:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663389869",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663389869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663395936",
      "pull_request_review_id": 698612208,
      "id": 663395936,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM5NTkzNg==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": 663267393,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "txindex only keeps 1 block hash right?",
      "created_at": "2021-07-03T18:41:57Z",
      "updated_at": "2021-07-03T18:41:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663395936",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663395936"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663396921",
      "pull_request_review_id": 698612705,
      "id": 663396921,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzM5NjkyMQ==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": 663267393,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, I didn't think of BIP 30",
      "created_at": "2021-07-03T18:52:20Z",
      "updated_at": "2021-07-03T18:52:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663396921",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663396921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663533270",
      "pull_request_review_id": 698694318,
      "id": 663533270,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzUzMzI3MA==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            // Transaction was found in a different block than requested.\n+            if (block_index && block_index->GetBlockHash() != block_hash) return nullptr;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "5dd11ea1406f4926ab9061702b69b409459723b4",
      "in_reply_to_id": 663267393,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Also, `block_index` could be an orphaned block where the transaction is but in the index the block is the one in the chain.",
      "created_at": "2021-07-04T17:21:37Z",
      "updated_at": "2021-07-04T17:21:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663533270",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663533270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664172064",
      "pull_request_review_id": 699462554,
      "id": 664172064,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDE3MjA2NA==",
      "diff_hunk": "@@ -74,12 +74,10 @@ static RPCHelpMan getrawtransaction()\n                 \"getrawtransaction\",\n                 \"\\nReturn the raw transaction data.\\n\"\n \n-                \"\\nBy default this function only works for mempool transactions. When called with a blockhash\\n\"\n-                \"argument, getrawtransaction will return the transaction if the specified block is available and\\n\"\n-                \"the transaction is found in that block. When called without a blockhash argument, getrawtransaction\\n\"\n-                \"will return the transaction if it is in the mempool, or if -txindex is enabled and the transaction\\n\"\n-                \"is in a block in the blockchain.\\n\"\n-\n+                \"\\nBy default, this call only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"\n+                \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 11,
      "original_position": 11,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: there is the case where -txindex is enabled and a blockhash argument is passed, where it will return the transaction only if the block it's found in matches the blockhash argument passed",
      "created_at": "2021-07-06T00:59:19Z",
      "updated_at": "2021-07-14T19:54:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r664172064",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664172064"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 78,
      "original_line": 78,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/673591294",
      "pull_request_review_id": 711178990,
      "id": 673591294,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzU5MTI5NA==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided and block_index is not provided, check it first for the tx.\n+ * If -txindex is available, check it next for the tx.\n+ * Finally, if block_index is provided, check for tx by reading entire block from disk.\n  *\n  * @param[in]  block_index     The block to read from disk, or nullptr\n- * @param[in]  mempool         If block_index is not provided, look in the mempool, if provided\n+ * @param[in]  mempool         If provided, check mempool for tx",
      "path": "src/validation.h",
      "position": 14,
      "original_position": 14,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n * @param[in]  mempool         If provided and block_index is not, check mempool for tx\r\n```",
      "created_at": "2021-07-21T01:13:15Z",
      "updated_at": "2021-07-21T01:18:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r673591294",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/673591294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 151,
      "original_line": 151,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/673899065",
      "pull_request_review_id": 711558121,
      "id": 673899065,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3Mzg5OTA2NQ==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            if (!block_index || block_index->GetBlockHash() == block_hash) {\n+                hashBlock = block_hash;\n+                return tx;\n+            }",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            }\r\n            return nullptr;\r\n```\r\nNit: This improves the performance of the (unlikely) case where a block hash is specified, but the transaction is found in the txindex but in a different block. The `if` at line 1170 would be false, so we would call `ReadBlockFromDisk()` below, but would not find the transaction there either (assuming the txindex is accurate).\r\n\r\nI cherry-picked this PR with this suggestion onto #22437 as @jonatack [described above](https://github.com/bitcoin/bitcoin/pull/22383#issuecomment-879123985), and the tests all pass.",
      "created_at": "2021-07-21T11:43:57Z",
      "updated_at": "2021-07-21T16:53:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r673899065",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/673899065"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1173,
      "original_line": 1173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674532918",
      "pull_request_review_id": 712401628,
      "id": 674532918,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDUzMjkxOA==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            if (!block_index || block_index->GetBlockHash() == block_hash) {\n+                hashBlock = block_hash;\n+                return tx;\n+            }",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": 673899065,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "How is this different from the initial solution: https://github.com/bitcoin/bitcoin/pull/22383#discussion_r663267393?",
      "created_at": "2021-07-22T06:32:55Z",
      "updated_at": "2021-07-22T06:32:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674532918",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674532918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1173,
      "original_line": 1173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674694240",
      "pull_request_review_id": 712607533,
      "id": 674694240,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDY5NDI0MA==",
      "diff_hunk": "@@ -142,15 +142,16 @@ void StartScriptCheckWorkerThreads(int threads_num);\n /** Stop all of the script checking worker threads */\n void StopScriptCheckWorkerThreads();\n /**\n- * Return transaction from the block at block_index.\n- * If block_index is not provided, fall back to mempool.\n- * If mempool is not provided or the tx couldn't be found in mempool, fall back to g_txindex.\n+ * Return transaction with a given hash.\n+ * If mempool is provided and block_index is not provided, check it first for the tx.\n+ * If -txindex is available, check it next for the tx.\n+ * Finally, if block_index is provided, check for tx by reading entire block from disk.\n  *\n  * @param[in]  block_index     The block to read from disk, or nullptr\n- * @param[in]  mempool         If block_index is not provided, look in the mempool, if provided\n+ * @param[in]  mempool         If provided, check mempool for tx",
      "path": "src/validation.h",
      "position": 14,
      "original_position": 14,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": 673591294,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd suggest just replacing this with `Optional pointer to the node's mempool` to avoid duplicating what's already documented above.",
      "created_at": "2021-07-22T10:56:46Z",
      "updated_at": "2021-07-22T10:56:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674694240",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674694240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 151,
      "original_line": 151,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674695881",
      "pull_request_review_id": 712609777,
      "id": 674695881,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDY5NTg4MQ==",
      "diff_hunk": "@@ -74,12 +74,10 @@ static RPCHelpMan getrawtransaction()\n                 \"getrawtransaction\",\n                 \"\\nReturn the raw transaction data.\\n\"\n \n-                \"\\nBy default this function only works for mempool transactions. When called with a blockhash\\n\"\n-                \"argument, getrawtransaction will return the transaction if the specified block is available and\\n\"\n-                \"the transaction is found in that block. When called without a blockhash argument, getrawtransaction\\n\"\n-                \"will return the transaction if it is in the mempool, or if -txindex is enabled and the transaction\\n\"\n-                \"is in a block in the blockchain.\\n\"\n-\n+                \"\\nBy default, this call only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"\n+                \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n+                \"If -txindex is not enabled and a blockhash argument is passed, it will return the transaction if\\n\"\n+                \"the specified block is available and the transaction is found in that block.\\n\"",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 13,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think the following change addresses @mjdietzx's comment: https://github.com/bitcoin/bitcoin/pull/22383/files#r664172064\r\n\r\n```suggestion\r\n                \"If a blockhash argument is passed, it will return the transaction if\\n\"\r\n                \"the specified block is available and the transaction is in that block.\\n\"\r\n```",
      "created_at": "2021-07-22T10:59:49Z",
      "updated_at": "2021-07-22T11:09:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674695881",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674695881"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": 79,
      "original_start_line": 79,
      "start_side": "RIGHT",
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674700406",
      "pull_request_review_id": 712615811,
      "id": 674700406,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDcwMDQwNg==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            if (!block_index || block_index->GetBlockHash() == block_hash) {\n+                hashBlock = block_hash;\n+                return tx;\n+            }",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": 673899065,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@LarryRuane the idea is to allow fetching the transaction from a block out of the active chain - which -txindex doesn't take into account. Before this was possible.",
      "created_at": "2021-07-22T11:07:48Z",
      "updated_at": "2021-07-22T11:07:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674700406",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674700406"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1173,
      "original_line": 1173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674700841",
      "pull_request_review_id": 712609777,
      "id": 674700841,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDcwMDg0MQ==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            if (!block_index || block_index->GetBlockHash() == block_hash) {\n+                hashBlock = block_hash;",
      "path": "src/validation.cpp",
      "position": 13,
      "original_position": 13,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This could do with a comment:\r\n\r\n```suggestion\r\n            if (!block_index || block_index->GetBlockHash() == block_hash) {\r\n                // Don't return the transaction if the provided block hash doesn't match.\r\n                // The case where a transaction appears in multiple blocks (e.g. reorgs or\r\n                // BIP30) is handled by the block lookup below.\r\n                hashBlock = block_hash;\r\n```",
      "created_at": "2021-07-22T11:08:32Z",
      "updated_at": "2021-07-22T11:09:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674700841",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674700841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": 1170,
      "original_start_line": 1170,
      "start_side": "RIGHT",
      "line": 1171,
      "original_line": 1171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674994661",
      "pull_request_review_id": 713033426,
      "id": 674994661,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDk5NDY2MQ==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);\n \n+    if (mempool && !block_index) {\n+        CTransactionRef ptx = mempool->get(hash);\n+        if (ptx) return ptx;\n+    }\n+    if (g_txindex) {\n+        CTransactionRef tx;\n+        uint256 block_hash;\n+        if (g_txindex->FindTx(hash, block_hash, tx)) {\n+            if (!block_index || block_index->GetBlockHash() == block_hash) {\n+                hashBlock = block_hash;\n+                return tx;\n+            }",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": 673899065,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That could be checked by seeing if the specified block index is in the main chain.\r\n\r\nBut I suppose even that has edge cases (eg, index out of sync), so maybe it's better to just leave it alone.",
      "created_at": "2021-07-22T17:06:37Z",
      "updated_at": "2021-07-22T17:06:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r674994661",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/674994661"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1173,
      "original_line": 1173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675069128",
      "pull_request_review_id": 713115133,
      "id": 675069128,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTA2OTEyOA==",
      "diff_hunk": "@@ -1159,6 +1159,20 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n {\n     LOCK(cs_main);",
      "path": "src/validation.cpp",
      "position": 2,
      "original_position": 2,
      "commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "original_commit_id": "78f4c8b98eada337346ffb206339c3ebae4ff43b",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just realized after merge that cs_main is not needed to read from the mempool (only to write to it)",
      "created_at": "2021-07-22T18:33:05Z",
      "updated_at": "2021-07-22T18:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22383#discussion_r675069128",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675069128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22383"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1160,
      "original_line": 1160,
      "side": "RIGHT"
    }
  ]
}