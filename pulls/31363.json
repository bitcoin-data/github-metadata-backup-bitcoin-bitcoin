{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363",
    "id": 2196846832,
    "node_id": "PR_kwDOABII586C8Tjw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31363",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31363.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31363.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
    "number": 31363,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "cluster mempool: introduce TxGraph",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Part of cluster mempool: #30289.\r\n\r\n### 1. Overview\r\n\r\nThis introduces the `TxGraph` class, which encapsulates knowledge about the fees, sizes, and dependencies between all mempool transactions, but nothing else. In particular, it lacks knowledge about `CTransaction`, inputs, outputs, txids, wtxids, prioritization, validatity, policy rules, and a lot more. Being restricted to just those aspects of the mempool makes the behavior very easy to fully specify (ignoring the actual linearizations produced), and write simulation-based tests for (which are included in this PR).\r\n\r\n### 2. Interface\r\n\r\nThe interface can be largely categorized into:\r\n* Mutation functions:\r\n  * `AddTransaction` (add a new transaction with specified feerate, and get a `Ref` object back to identify it).\r\n  * `RemoveTransaction` (given a `Ref` object, remove the transaction).\r\n  * `AddDependency` (given two `Ref` objects, add a dependency between them).\r\n  * `SetTransactionFeerate` (modify the feerate associated with a Ref object).\r\n* Inspector functions:\r\n  * `GetAncestors` (get the ancestor set in the form of `Ref*` pointers)\r\n  * `GetDescendants` (get the descendant set in the form of `Ref*` pointers)\r\n  * `GetCluster` (get the connected component set in the form of `Ref*` pointers, in the order they would be mined).\r\n  * `GetIndividualFeerate` (get the feerate of a tranaction)\r\n  * `GetChunkFeerate` (get the mining score of a transaction)\r\n* Staging functions:\r\n  * `StartStaging` (make all future mutations operate on a proposed transaction graph)\r\n  * `CommitStaging` (apply all the changes that are staged)\r\n  * `AbortStaging` (discard all the changes that are staged)\r\n\r\nThis `TxGraph::Ref` type used as a \"handle\" on transactions in the graph can be inherited from, and the idea is that in the full cluster mempool implementation (#28676, after it is rebased on this), `CTxMempoolEntry` will inherit from it, and all actually used Ref objects will be `CTxMempoolEntry`s. With that, the mempool code can just cast any `Ref*` returned by txgraph to `CTxMempoolEntry*`.\r\n\r\n### 3. Implementation\r\n\r\nInternally the graph data is kept in clustered form (partitioned into connected components), for which linearizations are maintained and updated as needed using the `cluster_linearize.h` algorithms under the hood, but this is hidden from the users of this class. Implementation-wise, mutations are generally applied lazily, appending to queues of to-be-removed transactions and to-be-added dependencies, so they can be batched for higher performance. Inspectors will generally only evaluate as much as is needed to answer queries, with roughly 5 levels of processing to go to fully instantiated and acceptable cluster linearizations, in order:\r\n1. `ApplyRemovals` (take batches of to-be-removed transactions and translate them to \"holes\" in the corresponding Clusters/DepGraphs).\r\n2. `SplitAll` (creating holes in Clusters may cause them to break apart into smaller connected components, so make turn them into separate Clusters/linearizations).\r\n3. `GroupClusters` (figure out which Clusters will need to be combined in order to add requested to-be-added dependencies, as these may span clusters).\r\n4. `ApplyDependencies` (actually merge Clusters as precomputed by `GroupClusters`, and add the dependencies between them).\r\n5. `MakeAcceptable` (perform the LIMO linearization algorithm on Clusters to make sure their linearizations are acceptable).\r\n\r\n### 4. Future work\r\n\r\nThis is only an initial version of TxGraph, and some functionality is missing before #28676 can be rebased on top of it:\r\n* The ability to get comparative feerate diagrams before/after for the set of staged changes (to evaluate RBF incentive-compatibility).\r\n* Mining interface (ability to iterate transactions quickly in mining score order) (see #31444).\r\n* Eviction interface (reverse of mining order, plus memory usage accounting) (see #31444).\r\n* Ability to inspect the would-be-constructed clusters (so they can be \"fixed\" if they violate policy rules, as opposed to just accepted/rejected, before applying - this is needed for reorgs which are not optional).\r\n* Interface for controlling how much effort is spent on LIMO. In this PR it is hardcoded.\r\n\r\nThen there are further improvements possible which would not block other work:\r\n* Making Cluster a virtual class with different implementations based on transaction count (which could dramatically reduce memory usage, as most Clusters are just a single transaction, for which the current implementation is overkill).\r\n* The ability to have background thread(s) for improving cluster linearizations.",
    "labels": [
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "created_at": "2024-11-24T15:59:18Z",
    "updated_at": "2025-01-09T20:13:00Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "bf9fc85cb7acf6c05dc5c6f90b3427156fd244fe",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sipa:202411_txgraph",
      "ref": "202411_txgraph",
      "sha": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1458655,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDU4NjU1",
        "name": "bitcoin",
        "full_name": "sipa/bitcoin",
        "owner": {
          "login": "sipa",
          "id": 548488,
          "node_id": "MDQ6VXNlcjU0ODQ4OA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sipa",
          "html_url": "https://github.com/sipa",
          "followers_url": "https://api.github.com/users/sipa/followers",
          "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
          "organizations_url": "https://api.github.com/users/sipa/orgs",
          "repos_url": "https://api.github.com/users/sipa/repos",
          "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sipa/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/sipa/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sipa/bitcoin",
        "archive_url": "https://api.github.com/repos/sipa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sipa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sipa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sipa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sipa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sipa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sipa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sipa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sipa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sipa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sipa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sipa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sipa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sipa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sipa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sipa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sipa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sipa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sipa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sipa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sipa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sipa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sipa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sipa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sipa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sipa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sipa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sipa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sipa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sipa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sipa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sipa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sipa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sipa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sipa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sipa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sipa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sipa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sipa/bitcoin/hooks",
        "svn_url": "https://github.com/sipa/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "TypeScript",
        "forks_count": 21,
        "stargazers_count": 91,
        "watchers_count": 91,
        "size": 253536,
        "default_branch": "lows",
        "open_issues_count": 16,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-09T20:46:23Z",
        "created_at": "2011-03-09T10:46:59Z",
        "updated_at": "2025-01-09T14:12:33Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "66aa6a47bd8efd7e0448319c74be3ee62caa777a",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36509,
        "stargazers_count": 81271,
        "watchers_count": 81271,
        "size": 273986,
        "default_branch": "master",
        "open_issues_count": 695,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-08T18:01:37Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-09T19:57:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 2739,
    "deletions": 14,
    "changed_files": 8,
    "commits": 13,
    "review_comments": 9,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 2496083772,
      "node_id": "IC_kwDOABII586Uxzc8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2496083772",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T15:59:21Z",
      "updated_at": "2024-12-24T19:33:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31363.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2520463595), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/31363#pullrequestreview-2522187404) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2496083772",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15410951192,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWkHQY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15410951192",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eff65737e508a6b6a1254858bbbe1792f3c36da6",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/eff65737e508a6b6a1254858bbbe1792f3c36da6",
      "created_at": "2024-11-24T16:20:24Z"
    },
    {
      "event": "commented",
      "id": 2496093320,
      "node_id": "IC_kwDOABII586Ux1yI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2496093320",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T16:20:29Z",
      "updated_at": "2024-11-24T16:20:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/33443336095</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2496093320",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "labeled",
      "id": 15410951366,
      "node_id": "LE_lADOABII586gNt5RzwAAAAOWkHTG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15410951366",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T16:20:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15411081261,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWknAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411081261",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1e432cae6b5005db209c10c28e9aa47cc3ac68df",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/1e432cae6b5005db209c10c28e9aa47cc3ac68df",
      "created_at": "2024-11-24T17:24:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15411231038,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWlLk-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411231038",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "36a9db46b664e2637a8add9201d2b5a91d7c24f1",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/36a9db46b664e2637a8add9201d2b5a91d7c24f1",
      "created_at": "2024-11-24T18:46:41Z"
    },
    {
      "event": "unlabeled",
      "id": 15411323294,
      "node_id": "UNLE_lADOABII586gNt5RzwAAAAOWliGe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411323294",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T19:39:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15421286163,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXLicT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15421286163",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "aa430ddacab7e119f36bc73dd46dd19ee4ac9180",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/aa430ddacab7e119f36bc73dd46dd19ee4ac9180",
      "created_at": "2024-11-25T14:04:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15421321817,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXLrJZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15421321817",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "84fcb24ee16802e3538a0e7ee40d66b78bfad2e2",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/84fcb24ee16802e3538a0e7ee40d66b78bfad2e2",
      "created_at": "2024-11-25T14:07:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15427571318,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXjg52",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15427571318",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "created_at": "2024-11-25T22:35:30Z"
    },
    {
      "event": "labeled",
      "id": 15459146457,
      "node_id": "LE_lADOABII586gNt5RzwAAAAOZb9rZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15459146457",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-28T01:34:01Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15500928592,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOb7WZQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15500928592",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c4b4e1f358c05415e691f7ceaba4cb203fffb127",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/c4b4e1f358c05415e691f7ceaba4cb203fffb127",
      "created_at": "2024-12-02T23:54:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15532933633,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOd1cIB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15532933633",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "18184f4e73404a7d41579fb408bd21f14c73668d",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/18184f4e73404a7d41579fb408bd21f14c73668d",
      "created_at": "2024-12-04T21:50:40Z"
    },
    {
      "event": "commented",
      "id": 2520463595,
      "node_id": "IC_kwDOABII586WOzjr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2520463595",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-05T14:22:51Z",
      "updated_at": "2024-12-05T14:22:51Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2520463595",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15732581373,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOpvCP9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15732581373",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "19cd5a8c32da47b08721cec4b6f92b13080bb9df",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/19cd5a8c32da47b08721cec4b6f92b13080bb9df",
      "created_at": "2024-12-20T13:15:31Z"
    },
    {
      "event": "commented",
      "id": 2557349002,
      "node_id": "IC_kwDOABII586YbgyK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2557349002",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-20T16:33:51Z",
      "updated_at": "2024-12-20T16:33:51Z",
      "author_association": "MEMBER",
      "body": "I'm aware this is a big chunk of code, but perhaps this can aid review a bit.\r\n\r\nThe biggest commits is [txgraph: (feature) add initial version](https://github.com/bitcoin/bitcoin/pull/31363/commits/afc6a665770004411f1b57f4f43dda916dadd8f7). To get an idea of what is going on, I think it's useful to look (in order) at:\r\n* The `src/txgraph.h` file added in that commit, as it defines the public interface.\r\n* The `src/test/fuzz/txgraph.cpp` test added in the next commit ([txgraph: (tests) add simulation fuzz test](https://github.com/bitcoin/bitcoin/pull/31363/commits/fe5cba87972f192faa286473b3fbff96d2b1df29)), as it does to an extent show how the interface is used, and what is expected of it.\r\n* The data structures (`TxGraphImpl` and `Cluster`) in `src/txgraph.cpp`, and the internal functions corresponding to the 5 processing steps that happen:\r\n  * **Batch removal of queued transaction removals**: `TxGraphImpl::ApplyRemovals` and `Cluster::ApplyRemovals`.\r\n  * **Splitting of clusters into components after removing transactions**: `TxGraphImpl::SplitAll`, `TxGraphImpl::Split`, and `Cluster::Split`\r\n  * **Computing which clusters will need to be combined due to queued dependencies being added between them**: `TxGraphImpl::GroupClusters`.\r\n  * **Merging of clusters and applying queued dependencies to them**: `TxGraphImpl::ApplyDependencies`, `TxGraphImpl::Merge`, `Cluster::Merge`, `Cluster::ApplyDependencies`.\r\n  * **Making the linearization of clusters acceptable**: `TxGraphImpl::MakeAcceptable` and `Cluster::Relinearize`.\r\n* The interface implementation functions that are built on top in `TxGraphImpl`: `AddTransaction`, `RemoveTransaction`, `AddDependency`, `SetTransactionFee`, `Cleanup`, `GetAncestors`, `GetDescendants`, `GetCluster`, `GetChunkFeerate`, etc.\r\n\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2557349002",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15742002242,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOqS-RC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15742002242",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "72d3ca13b56b9ae17da1234f61a3e24874ab6d00",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/72d3ca13b56b9ae17da1234f61a3e24874ab6d00",
      "created_at": "2024-12-22T17:18:41Z"
    },
    {
      "event": "commented",
      "id": 2558527144,
      "node_id": "IC_kwDOABII586YgAao",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2558527144",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-22T17:23:23Z",
      "updated_at": "2024-12-23T03:21:54Z",
      "author_association": "MEMBER",
      "body": "I have pushed a substantial change to the `TxGraphImpl::GroupClusters` function (in commit \"txgraph: (feature) add initial version\"). In a benchmark with 64000 transactions being combined into 1000 clusters, this makes it go from ~160ms to ~16ms. I will add the benchmark to this PR when I clean it up.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2558527144",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "reviewed",
      "id": 2522187404,
      "node_id": "PRR_kwDOABII586WVYaM",
      "url": null,
      "actor": null,
      "commit_id": "72d3ca13b56b9ae17da1234f61a3e24874ab6d00",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\n\r\n> GetChunkFeerate (get the mining score of a transaction)\r\n\r\n\r\nFrom reading the description and skimming through the code, IIUC `TxGraph` encapsulates knowledge about fees and sizes but lacks knowledge about prioritization. This implies that the fee it uses is the effective fee, not the modified fee that includes prioritization.\r\n\r\nHow are we accounting for the real mining score of a  `Ref` without that prioritization knowledge? The current mining algorithm uses the modified ancestor fee to calculate the mining score.\r\n\r\nCould you clarify how prioritization will be handled post-cluster mempool?",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#pullrequestreview-2522187404",
      "submitted_at": "2024-12-24T19:33:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
    },
    {
      "event": "commented",
      "id": 2561368066,
      "node_id": "IC_kwDOABII586Yq2AC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2561368066",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-24T19:41:16Z",
      "updated_at": "2024-12-24T19:41:16Z",
      "author_association": "MEMBER",
      "body": "@ismaelsadeeq TxGraph (and DepGraph, and FeeFrac) just treat \"fee\" and \"size\" as numbers whose ratio is to be maximized. These classes don't care what meaning they correspond to.\n\nIn practice, I expect that the mempool code will provide the modified fee as \"fee\", and vsize or weight as \"size\".",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2561368066",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "mentioned",
      "id": 15758399642,
      "node_id": "MEE_lADOABII586gNt5RzwAAAAOrRhia",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15758399642",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-24T19:41:17Z"
    },
    {
      "event": "subscribed",
      "id": 15758399645,
      "node_id": "SE_lADOABII586gNt5RzwAAAAOrRhid",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15758399645",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-24T19:41:17Z"
    },
    {
      "event": "commented",
      "id": 2561403310,
      "node_id": "IC_kwDOABII586Yq-mu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2561403310",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-24T20:37:46Z",
      "updated_at": "2024-12-24T20:37:46Z",
      "author_association": "MEMBER",
      "body": "Thank you for clarifying. Reading 'lacks knowledge about prioritization' led me to infer that.\r\nBut I see now you are talking about `mapDeltas`",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2561403310",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFjNWYxYzQ2MDFlMGE4OTUyNThjZmUwNzMxMjUzNjFmN2E2ZWEwMTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c5f1c4601e0a895258cfe073125361f7a6ea012",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1c5f1c4601e0a895258cfe073125361f7a6ea012",
      "tree": {
        "sha": "b87eb9dd6a107d9965cf893e4da601956e49248e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b87eb9dd6a107d9965cf893e4da601956e49248e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66aa6a47bd8efd7e0448319c74be3ee62caa777a",
          "sha": "66aa6a47bd8efd7e0448319c74be3ee62caa777a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/66aa6a47bd8efd7e0448319c74be3ee62caa777a"
        }
      ],
      "message": "clusterlin: add FixLinearization function + fuzz test\n\nThis function takes an existing ordering for transactions in a DepGraph, and\nmakes it a valid linearization for it (i.e., topological). Any topological\nprefix of the input remains untouched.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:26Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-10-25T18:11:50Z"
      },
      "sha": "1c5f1c4601e0a895258cfe073125361f7a6ea012"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZhOTBkNzg1MDEyNWZkNGNlODMxYzU4NzlmMzI5NzUyYzIxOTM0ZDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a90d7850125fd4ce831c5879f329752c21934d1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6a90d7850125fd4ce831c5879f329752c21934d1",
      "tree": {
        "sha": "a43429c6af7132b54b0811c7330fd9024eefb96b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a43429c6af7132b54b0811c7330fd9024eefb96b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c5f1c4601e0a895258cfe073125361f7a6ea012",
          "sha": "1c5f1c4601e0a895258cfe073125361f7a6ea012",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1c5f1c4601e0a895258cfe073125361f7a6ea012"
        }
      ],
      "message": "clusterlin: make IsAcyclic() a DepGraph member function\n\n... instead of being a separate test-only function.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-12T20:13:58Z"
      },
      "sha": "6a90d7850125fd4ce831c5879f329752c21934d1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBjOGRjMjMyM2ViMWVjMzQzNTdhODA3ZjA4NjBjZjBhMDhhNjNhNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
      "tree": {
        "sha": "d3fc3fc7ac5a2058e7ac0377951eee25ecf022e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3fc3fc7ac5a2058e7ac0377951eee25ecf022e1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a90d7850125fd4ce831c5879f329752c21934d1",
          "sha": "6a90d7850125fd4ce831c5879f329752c21934d1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6a90d7850125fd4ce831c5879f329752c21934d1"
        }
      ],
      "message": "txgraph: (feature) add initial version\n\nThis adds an initial version of the txgraph module, with the TxGraph class.\nIt encapsulates knowledge about the fees, sizes, and dependencies between all\nmempool transactions, but nothing else.\n\nIn particular, it lacks knowledge about txids, inputs, outputs, CTransactions,\n... and so for. Instead, it exposes a generic TxGraph::Ref type to reference\nnodes in the TxGraph, which can be passed around and stored by layers on top.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-08-21T18:37:00Z"
      },
      "sha": "0c8dc2323eb1ec34357a807f0860cf0a08a63a75"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkzMjJkNDU1NTEzZDA2NzlhMTI0YTVhZDkwOThlZGY4MzRjMzM5MmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9322d455513d0679a124a5ad9098edf834c3392c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9322d455513d0679a124a5ad9098edf834c3392c",
      "tree": {
        "sha": "566abb7561d23302ab90a417a27a35812c392053",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/566abb7561d23302ab90a417a27a35812c392053"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
          "sha": "0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0c8dc2323eb1ec34357a807f0860cf0a08a63a75"
        }
      ],
      "message": "txgraph: (tests) add simulation fuzz test\n\nThis adds a simulation fuzz test for txgraph, by comparing with a naive\nreimplementation that models the entire graph as a single DepGraph, and\nclusters in TxGraph as connected components within that DepGraph.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T19:15:12Z"
      },
      "sha": "9322d455513d0679a124a5ad9098edf834c3392c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1N2UwNjViZTkwNjQ3NzQ0ZDYxZmUxNDIyMTBhNjg2NGRjZDFiNDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f57e065be90647744d61fe142210a6864dcd1b43",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f57e065be90647744d61fe142210a6864dcd1b43",
      "tree": {
        "sha": "94cc87fc4372add0d4db03d36dfde6f10d4094ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/94cc87fc4372add0d4db03d36dfde6f10d4094ce"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9322d455513d0679a124a5ad9098edf834c3392c",
          "sha": "9322d455513d0679a124a5ad9098edf834c3392c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9322d455513d0679a124a5ad9098edf834c3392c"
        }
      ],
      "message": "txgraph: (tests) add internal sanity check function\n\nTo make testing more powerful, expose a function to perform an internal sanity\ncheck on the state of a TxGraph. This is especially important as TxGraphImpl\ncontains many redundantly represented pieces of information:\n\n* graph contains clusters, which refer to entries, but the entries refer back\n* graph maintains pointers to Ref objects, which point back to the graph.\n\nThis lets us make sure they are always in sync.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T03:45:46Z"
      },
      "sha": "f57e065be90647744d61fe142210a6864dcd1b43"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyZGU1MGNlZjZjYjJlMDE3Zjc0YzdhY2NmYzYwMDY0ZDM2NGY5OWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32de50cef6cb2e017f74c7accfc60064d364f99f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/32de50cef6cb2e017f74c7accfc60064d364f99f",
      "tree": {
        "sha": "befeb71c4b84add84b4dd14bb2d03951c52f0f18",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/befeb71c4b84add84b4dd14bb2d03951c52f0f18"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f57e065be90647744d61fe142210a6864dcd1b43",
          "sha": "f57e065be90647744d61fe142210a6864dcd1b43",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f57e065be90647744d61fe142210a6864dcd1b43"
        }
      ],
      "message": "txgraph: (feature) make max cluster count configurable and \"oversize\" state\n\nInstead of leaving the responsibility on higher layers to guarantee that\nno connected component within TxGraph (a barely exposed concept, except through\nGetCluster()) exceeds the cluster count limit, move this responsibility to\nTxGraph itself:\n* TxGraph retains a cluster count limit, but it becomes configurable at construction\n  time (this primarily helps with testing that it is properly enforced).\n* It is always allowed to perform mutators on TxGraph, even if they would cause the\n  cluster count limit to be exceeded. Instead, TxGraph exposes an IsOversized()\n  function, which queries whether it is in a special \"oversize\" state.\n* During oversize state, many inspectors are unavailable, but mutators remain valid,\n  so the higher layer can \"fix\" the oversize state before continuing.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T13:53:50Z"
      },
      "sha": "32de50cef6cb2e017f74c7accfc60064d364f99f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYwZWM5ZDhkZTRhZTRmOWYzZjNhNGJiZGVjZTM2MGM0YmY1NDZhYTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2",
      "tree": {
        "sha": "94f31bee4822af7cef5b2fe17033e7d316399244",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/94f31bee4822af7cef5b2fe17033e7d316399244"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32de50cef6cb2e017f74c7accfc60064d364f99f",
          "sha": "32de50cef6cb2e017f74c7accfc60064d364f99f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/32de50cef6cb2e017f74c7accfc60064d364f99f"
        }
      ],
      "message": "txgraph: (optimization) delay chunking while sub-acceptable\n\nChunk-based information (primarily, chunk feerates) are never accessed without\nfirst bringing the relevant Clusters to an \"acceptable\" quality level. Thus,\nwhile operations are ongoing and Clusters are not acceptable, we can omit\ncomputing the chunkings and chunk feerates for Clusters.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T18:31:23Z"
      },
      "sha": "f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNlYjc2YjUwMmQyOTExMzZjMTg0MWU0NDNiMDg2YTIzOGY1YjhiYjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3eb76b502d291136c1841e443b086a238f5b8bb1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3eb76b502d291136c1841e443b086a238f5b8bb1",
      "tree": {
        "sha": "1c7f342a6236af1ac873bf13a34fa8a4fc4a094d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1c7f342a6236af1ac873bf13a34fa8a4fc4a094d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2",
          "sha": "f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f0ec9d8de4ae4f9f3f3a4bbdece360c4bf546aa2"
        }
      ],
      "message": "txgraph: (optimization) special-case removal of tail of cluster\n\nWhen transactions are removed from the tail of a cluster, we know the existing\nlinearization remains acceptable/optimal (if it already was), but may just need\nsplitting, so special case these into separate quality levels.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-14T23:10:24Z"
      },
      "sha": "3eb76b502d291136c1841e443b086a238f5b8bb1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJlZWE3ZTdkNWJkNjk1YmJmYzg4MjY5MTE0MGEwMDcwN2VkMTc1OGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2eea7e7d5bd695bbfc882691140a00707ed1758c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2eea7e7d5bd695bbfc882691140a00707ed1758c",
      "tree": {
        "sha": "3ca1c9c023732a69a0ced90c673c03f85b45cbea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3ca1c9c023732a69a0ced90c673c03f85b45cbea"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3eb76b502d291136c1841e443b086a238f5b8bb1",
          "sha": "3eb76b502d291136c1841e443b086a238f5b8bb1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3eb76b502d291136c1841e443b086a238f5b8bb1"
        }
      ],
      "message": "txgraph: (refactor) group per-graph data in ClusterSet\n\nThis is a preparation for a next commit where a TxGraph will start representing\npotentially two distinct graphs (a main one, and a staging one with proposed\nchanges).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T13:37:53Z"
      },
      "sha": "2eea7e7d5bd695bbfc882691140a00707ed1758c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQwNDEzNTRlYzU0N2ZiZDg0OWViMTk1ZmNmMjc2MDg0ZDAzNDc5MmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4041354ec547fbd849eb195fcf276084d034792b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4041354ec547fbd849eb195fcf276084d034792b",
      "tree": {
        "sha": "09a372957f0b6d4a807ecf7875575025432b72c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/09a372957f0b6d4a807ecf7875575025432b72c6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2eea7e7d5bd695bbfc882691140a00707ed1758c",
          "sha": "2eea7e7d5bd695bbfc882691140a00707ed1758c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2eea7e7d5bd695bbfc882691140a00707ed1758c"
        }
      ],
      "message": "txgraph: (refactor) abstract out ClearLocator\n\nMove a number of related modifications to TxGraphImpl into a separate\nfunction for removal of transactions. This is preparation for a later\ncommit where this will be useful in more than one place.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T15:00:59Z"
      },
      "sha": "4041354ec547fbd849eb195fcf276084d034792b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3MmRmMTVhZjI4YmE2Nzg3ZjA5NjE2MmY3NzZiMjk3MzM0MmU2NzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/972df15af28ba6787f096162f776b2973342e674",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/972df15af28ba6787f096162f776b2973342e674",
      "tree": {
        "sha": "f04a7d45029db863e61cf270092a5b37bb709a25",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f04a7d45029db863e61cf270092a5b37bb709a25"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4041354ec547fbd849eb195fcf276084d034792b",
          "sha": "4041354ec547fbd849eb195fcf276084d034792b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4041354ec547fbd849eb195fcf276084d034792b"
        }
      ],
      "message": "txgraph: (feature) add staging support\n\nIn order to make it easy to evaluate proposed changes to a TxGraph, introduce a\n\"staging\" mode, where mutators (AddTransaction, AddDependency, RemoveTransaction)\ndo not modify the actual graph, but just a staging version of it. That staging\ngraph can then be commited (replacing the main one with it), or aborted (discarding\nthe staging).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-12-04T14:40:53Z"
      },
      "sha": "972df15af28ba6787f096162f776b2973342e674"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY3Y2MxZWQ3ZDI2MWIwYmQ2ZDIzODM1MjQ2ZmMyZThkODg2Y2E5NzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7cc1ed7d261b0bd6d23835246fc2e8d886ca971",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f7cc1ed7d261b0bd6d23835246fc2e8d886ca971",
      "tree": {
        "sha": "267ed06a1b5697eb470d86afb78c5b000042db68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/267ed06a1b5697eb470d86afb78c5b000042db68"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/972df15af28ba6787f096162f776b2973342e674",
          "sha": "972df15af28ba6787f096162f776b2973342e674",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/972df15af28ba6787f096162f776b2973342e674"
        }
      ],
      "message": "txgraph: (feature) destroying Ref means removing transaction\n\nBefore this commit, if a TxGraph::Ref object is destroyed, it becomes impossible\nto refer to, but the actual corresponding transaction node in the TxGraph remains,\nand remains indefinitely as there is no way to remove it.\n\nFix this by making the destruction of TxGraph::Ref trigger immediate removal of\nthe corresponding transaction in TxGraph, both in main and staging if it exists.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-12-03T16:25:49Z"
      },
      "sha": "f7cc1ed7d261b0bd6d23835246fc2e8d886ca971"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2Njg0YmMzZjZmMWFkYzVlNzAwNDJkNzc5MmNiNWU5ZDY1YmFjZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "tree": {
        "sha": "04d907b537bea66b16cbe39958d564568d0099a8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04d907b537bea66b16cbe39958d564568d0099a8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7cc1ed7d261b0bd6d23835246fc2e8d886ca971",
          "sha": "f7cc1ed7d261b0bd6d23835246fc2e8d886ca971",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f7cc1ed7d261b0bd6d23835246fc2e8d886ca971"
        }
      ],
      "message": "txgraph: (feature) expose ability to compare transactions\n\nIn order to make it possible for higher layers to compare transaction quality\n(ordering within the implicit total ordering on the mempool), expose a comparison\nfunction and test it.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-08T18:24:27Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-14T21:16:59Z"
      },
      "sha": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15861068971,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOxZLSr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15861068971",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "created_at": "2025-01-08T23:26:27Z"
    },
    {
      "event": "reviewed",
      "id": 2529361978,
      "node_id": "PRR_kwDOABII586WwwA6",
      "url": null,
      "actor": null,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#pullrequestreview-2529361978",
      "submitted_at": "2025-01-09T18:49:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909270566",
      "pull_request_review_id": 2529361978,
      "id": 1909270566,
      "node_id": "PRRC_kwDOABII585xzSgm",
      "diff_hunk": "@@ -84,44 +86,67 @@ class TxGraph\n      * deletion of B also either A or C is deleted, there is no distinction.\n      */\n     virtual void RemoveTransaction(Ref& arg) noexcept = 0;\n-    /** Add a dependency between two specified transactions. Parent may not be a descendant of\n-     *  child already (but may be an ancestor of it already, in which case this is a no-op). If\n-     *  either transaction is already removed, this is a no-op. */\n+    /** Add a dependency between two specified transactions. If a staging graph exists, the\n+     *  dependency is only added there. Parent may not be a descendant of child already (but may\n+     *  be an ancestor of it already, in which case this is a no-op). If either transaction is\n+     *  already removed, this is a no-op. */\n     virtual void AddDependency(Ref& parent, Ref& child) noexcept = 0;\n-    /** Modify the fee of the specified transaction. If the transaction does not exist (or was\n-     *  removed), this has no effect. */\n+    /** Modify the fee of the specified transaction, in both the main graph and the staging\n+     *  graph if it exists. Wherever the transaction does not exist (or was removed), this has no\n+     *  effect. */\n     virtual void SetTransactionFee(Ref& arg, int64_t fee) noexcept = 0;\n     /** Return a vector of pointers to Ref objects for transactions which have been removed from\n-     *  the graph, and have not been destroyed yet. This has no effect if the graph is oversized\n-     *  (see below). Each transaction is only reported once by Cleanup(). Afterwards, all Refs will\n-     *  be empty. */\n+     *  the graph, and have not been destroyed yet. This has no effect if a staging graph exists,\n+     *  or if the graph is oversized (see below). Each transaction is only reported once by\n+     *  Cleanup(). Afterwards, all Refs will be empty. */\n     [[nodiscard]] virtual std::vector<Ref*> Cleanup() noexcept = 0;\n \n-    /** Determine whether arg exists in this graph (i.e., was not removed). */\n-    virtual bool Exists(const Ref& arg) noexcept = 0;\n+    /** Create a staging graph (which cannot exist already). This acts as if a full copy of\n+     *  the transaction graph is made, upon which further modifications are made. This copy can\n+     *  be inspected, and then either discarded, or the main graph can be replaced by it by\n+     *  commiting it. */\n+    virtual void StartStaging() noexcept = 0;\n+    /** Discard the existing active staging graph (which must exist). */\n+    virtual void AbortStaging() noexcept = 0;\n+    /** Replace the main graph with the staging graph (which must exist). */\n+    virtual void CommitStaging() noexcept = 0;\n+    /** Check whether a staging graph exists. */\n+    virtual bool HaveStaging() const noexcept = 0;\n+\n+    /** Determine whether arg exists in the graph (i.e., was not removed). If main_only is false\n+     *  and a staging graph exists, it is queried; otherwise the main graph is queried. */\n+    virtual bool Exists(const Ref& arg, bool main_only = false) noexcept = 0;\n     /** Determine whether the graph is oversized (contains a connected component of more than the\n-     *  configured maximum cluster count). Some of the functions below are not available\n+     *  configured maximum cluster count). If main_only is false and a staging graph exists, it is\n+     *  queried; otherwise the main graph is queried. Some of the functions below are not available\n      *  for oversized graphs. The mutators above are always available. */\n-    virtual bool IsOversized() noexcept = 0;\n-    /** Get the feerate of the chunk which transaction arg is in. Returns the empty FeeFrac if arg\n-     *  does not exist. The graph must not be oversized. */\n-    virtual FeeFrac GetChunkFeerate(const Ref& arg) noexcept = 0;\n+    virtual bool IsOversized(bool main_only = false) noexcept = 0;\n+    /** Get the feerate of the chunk which transaction arg is in in the main graph. Returns the",
      "path": "src/txgraph.h",
      "position": 127,
      "original_position": 68,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "original_commit_id": "972df15af28ba6787f096162f776b2973342e674",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit when retouching\r\n\r\nIn \" txgraph: (feature) add staging support\" 972df15af28ba6787f096162f776b2973342e674\r\n```suggestion\r\n    /** Get the feerate of the chunk which transaction arg is in the main graph. Returns the\r\n```",
      "created_at": "2025-01-09T18:28:30Z",
      "updated_at": "2025-01-09T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#discussion_r1909270566",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909270566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 127,
      "original_line": 124,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909271584",
      "pull_request_review_id": 2529361978,
      "id": 1909271584,
      "node_id": "PRRC_kwDOABII585xzSwg",
      "diff_hunk": "@@ -0,0 +1,125 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <compare>\n+#include <stdint.h>\n+#include <memory>\n+#include <vector>\n+\n+#include <util/feefrac.h>\n+\n+#ifndef BITCOIN_TXGRAPH_H\n+#define BITCOIN_TXGRAPH_H\n+\n+/** No connected component within TxGraph is allowed to exceed this number of transactions. */\n+static constexpr unsigned CLUSTER_COUNT_LIMIT{64};\n+\n+/** Data structure to encapsulate fees, sizes, and dependencies for a set of transactions. */\n+class TxGraph\n+{\n+public:\n+    /** Internal identifier for a transaction within a TxGraph. */\n+    using GraphIndex = uint32_t;\n+\n+    /** Data type used to reference transactions within a TxGraph.\n+     *\n+     * Every transaction within a TxGraph has exactly one corresponding TxGraph::Ref, held by users\n+     * of the class. Destroying the TxGraph::Ref removes the corresponding transaction.\n+     *\n+     * Users of the class can inherit from TxGraph::Ref. If all Refs are inherited this way, the\n+     * Ref* pointers returned by TxGraph functions can be used as this inherited type.\n+     */\n+    class Ref\n+    {\n+        // Allow TxGraph's GetRefGraph and GetRefIndex to access internals.\n+        friend class TxGraph;\n+        /** Which Graph the Entry lives in. nullptr if this Ref is empty. */\n+        TxGraph* m_graph = nullptr;\n+        /** Index into the Graph's m_entries. Only used if m_graph != nullptr. */\n+        GraphIndex m_index = GraphIndex(-1);\n+    public:\n+        /** Construct an empty Ref (not pointing to any Entry). */\n+        Ref() noexcept = default;\n+        /** Test if this Ref is not empty. */\n+        explicit operator bool() const noexcept { return m_graph != nullptr; }\n+        /** Destroy this Ref. */\n+        virtual ~Ref();\n+        // Support moving a Ref.\n+        Ref& operator=(Ref&& other) noexcept;\n+        Ref(Ref&& other) noexcept;\n+        // Do not permit copy constructing or copy assignment. A TxGraph entry can have at most one\n+        // Ref pointing to it.\n+        Ref& operator=(const Ref&) = delete;\n+        Ref(const Ref&) = delete;\n+    };\n+\n+protected:\n+    // Allow TxGraph::Ref to call UpdateRef and UnlinkRef.\n+    friend class TxGraph::Ref;\n+    /** Inform the TxGraph implementation that a TxGraph::Ref has moved. */\n+    virtual void UpdateRef(GraphIndex index, Ref& new_location) noexcept = 0;\n+    /** Inform the TxGraph implementation that a TxGraph::Ref was destroyed. */\n+    virtual void UnlinkRef(GraphIndex index) noexcept = 0;\n+    // Allow TxGraph implementations (inheriting from it) to access Ref internals.\n+    static TxGraph*& GetRefGraph(Ref& arg) noexcept { return arg.m_graph; }\n+    static TxGraph* GetRefGraph(const Ref& arg) noexcept { return arg.m_graph; }\n+    static GraphIndex& GetRefIndex(Ref& arg) noexcept { return arg.m_index; }\n+    static GraphIndex GetRefIndex(const Ref& arg) noexcept { return arg.m_index; }\n+\n+public:\n+    /** Virtual destructor, so inheriting is safe. */\n+    virtual ~TxGraph() = default;\n+    /** Construct a new transaction with the specified feerate, and return a Ref to it. */\n+    [[nodiscard]] virtual Ref AddTransaction(const FeeFrac& feerate) noexcept = 0;\n+    /** Remove the specified transaction. This is a no-op if the transaction was already removed.\n+     *\n+     * TxGraph may internally reorder transaction removals with dependency additions for\n+     * performance reasons. If together with any transaction removal all its descendants, or all\n+     * its ancestors, are removed as well (which is what always happens in realistic scenarios),\n+     * this reordering will not affect the behavior of TxGraph.\n+     *\n+     * As an example, imagine 3 transactions A,B,C where B depends on A. If a dependency of C on B\n+     * is added, and then B is deleted, C will still depend on A. If the deletion of B is reordered\n+     * before the C->B dependency is added, it has no effect instead. If, together with the\n+     * deletion of B also either A or C is deleted, there is no distinction.\n+     */\n+    virtual void RemoveTransaction(Ref& arg) noexcept = 0;\n+    /** Add a dependency between two specified transactions. Parent may not be a descendant of\n+     *  child already (but may be an ancestor of it already, in which case this is a no-op). If\n+     *  either transaction is already removed, this is a no-op. */\n+    virtual void AddDependency(Ref& parent, Ref& child) noexcept = 0;\n+    /** Modify the fee of the specified transaction. If the transaction does not exist (or was\n+     *  removed), this has no effect. */\n+    virtual void SetTransactionFee(Ref& arg, int64_t fee) noexcept = 0;\n+    /** Return a vector of pointers to Ref objects for transactions which have been removed from\n+     *  the graph, and have not been destroyed yet. Each transaction is only reported once by\n+     *  Cleanup(). Afterwards, all Refs will be empty. */\n+    [[nodiscard]] virtual std::vector<Ref*> Cleanup() noexcept = 0;\n+\n+    /** Determine whether arg exists in this graph (i.e., was not removed). */\n+    virtual bool Exists(const Ref& arg) noexcept = 0;\n+    /** Get the feerate of the chunk which transaction arg is in. Returns the empty FeeFrac if arg\n+     *  does not exist. */\n+    virtual FeeFrac GetChunkFeerate(const Ref& arg) noexcept = 0;\n+    /** Get the individual transaction feerate of transaction arg. Returns the empty FeeFrac if\n+     *  arg does not exist. */\n+    virtual FeeFrac GetIndividualFeerate(const Ref& arg) noexcept = 0;\n+    /** Get pointers to all transactions in the connected component (\"cluster\") which arg is in.\n+     *  The transactions will be returned in a topologically-valid order of acceptable quality.",
      "path": "src/txgraph.h",
      "position": 136,
      "original_position": 109,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "original_commit_id": "0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "optional nit when their is need to retouch\r\n\r\nIn  \"txgraph: (feature) add initial version\" 0c8dc2323eb1ec34357a807f0860cf0a08a63a75\r\nyou mean `QualityLevel::ACCEPTABLE` right we could just reference the enum like you were doing `txgraph.cpp`?\r\n```suggestion\r\n     *  The transactions will be returned in a topologically-valid order of acceptable quality (QualityLevel::ACCEPTABLE).\r\n```",
      "created_at": "2025-01-09T18:29:33Z",
      "updated_at": "2025-01-09T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#discussion_r1909271584",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909271584"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 136,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909277721",
      "pull_request_review_id": 2529361978,
      "id": 1909277721,
      "node_id": "PRRC_kwDOABII585xzUQZ",
      "diff_hunk": "@@ -1336,6 +1336,35 @@ std::vector<ClusterIndex> MergeLinearizations(const DepGraph<SetType>& depgraph,\n     return ret;\n }\n \n+/** Make linearization topological, retaining its ordering where possible. */\n+template<typename SetType>\n+void FixLinearization(const DepGraph<SetType>& depgraph, Span<ClusterIndex> linearization) noexcept\n+{\n+    // This algorithm can be summarized as moving every element in the linearization backwards\n+    // until it is placed after all this ancestors.\n+    SetType done;\n+    const auto len = linearization.size();\n+    // Iterate over the elements of linearization from back to front (i is distance from back).\n+    for (ClusterIndex i = 0; i < len; ++i) {\n+        /** The element at that position. */\n+        ClusterIndex elem = linearization[len - 1 - i];\n+        /** j represents how far from the back of the linearization elem should be placed. */\n+        ClusterIndex j = i;\n+        // Figure out which elements elem needs to be placed before.\n+        SetType place_before = done & depgraph.Ancestors(elem);\n+        // Find which position to place elem in (updating j), continuously moving the elements\n+        // in between forward.\n+        while (place_before.Any()) {\n+            auto to_swap = linearization[len - 1 - (j - 1)];",
      "path": "src/cluster_linearize.h",
      "position": 41,
      "original_position": 23,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "original_commit_id": "1c5f1c4601e0a895258cfe073125361f7a6ea012",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \"clusterlin: add FixLinearization function + fuzz test\" 1c5f1c4601e0a895258cfe073125361f7a6ea012\r\nIs it safe to get the `ClusterIndex` when j is 0, we will subtract 1 from `uint32_t` which will result to a large positive number?",
      "created_at": "2025-01-09T18:35:26Z",
      "updated_at": "2025-01-09T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#discussion_r1909277721",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909277721"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1369,
      "original_line": 1358,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909373642",
      "pull_request_review_id": 2540832787,
      "id": 1909373642,
      "node_id": "PRRC_kwDOABII585xzrrK",
      "diff_hunk": "@@ -0,0 +1,125 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <compare>\n+#include <stdint.h>\n+#include <memory>\n+#include <vector>\n+\n+#include <util/feefrac.h>\n+\n+#ifndef BITCOIN_TXGRAPH_H\n+#define BITCOIN_TXGRAPH_H\n+\n+/** No connected component within TxGraph is allowed to exceed this number of transactions. */\n+static constexpr unsigned CLUSTER_COUNT_LIMIT{64};\n+\n+/** Data structure to encapsulate fees, sizes, and dependencies for a set of transactions. */\n+class TxGraph\n+{\n+public:\n+    /** Internal identifier for a transaction within a TxGraph. */\n+    using GraphIndex = uint32_t;\n+\n+    /** Data type used to reference transactions within a TxGraph.\n+     *\n+     * Every transaction within a TxGraph has exactly one corresponding TxGraph::Ref, held by users\n+     * of the class. Destroying the TxGraph::Ref removes the corresponding transaction.\n+     *\n+     * Users of the class can inherit from TxGraph::Ref. If all Refs are inherited this way, the\n+     * Ref* pointers returned by TxGraph functions can be used as this inherited type.\n+     */\n+    class Ref\n+    {\n+        // Allow TxGraph's GetRefGraph and GetRefIndex to access internals.\n+        friend class TxGraph;\n+        /** Which Graph the Entry lives in. nullptr if this Ref is empty. */\n+        TxGraph* m_graph = nullptr;\n+        /** Index into the Graph's m_entries. Only used if m_graph != nullptr. */\n+        GraphIndex m_index = GraphIndex(-1);\n+    public:\n+        /** Construct an empty Ref (not pointing to any Entry). */\n+        Ref() noexcept = default;\n+        /** Test if this Ref is not empty. */\n+        explicit operator bool() const noexcept { return m_graph != nullptr; }\n+        /** Destroy this Ref. */\n+        virtual ~Ref();\n+        // Support moving a Ref.\n+        Ref& operator=(Ref&& other) noexcept;\n+        Ref(Ref&& other) noexcept;\n+        // Do not permit copy constructing or copy assignment. A TxGraph entry can have at most one\n+        // Ref pointing to it.\n+        Ref& operator=(const Ref&) = delete;\n+        Ref(const Ref&) = delete;\n+    };\n+\n+protected:\n+    // Allow TxGraph::Ref to call UpdateRef and UnlinkRef.\n+    friend class TxGraph::Ref;\n+    /** Inform the TxGraph implementation that a TxGraph::Ref has moved. */\n+    virtual void UpdateRef(GraphIndex index, Ref& new_location) noexcept = 0;\n+    /** Inform the TxGraph implementation that a TxGraph::Ref was destroyed. */\n+    virtual void UnlinkRef(GraphIndex index) noexcept = 0;\n+    // Allow TxGraph implementations (inheriting from it) to access Ref internals.\n+    static TxGraph*& GetRefGraph(Ref& arg) noexcept { return arg.m_graph; }\n+    static TxGraph* GetRefGraph(const Ref& arg) noexcept { return arg.m_graph; }\n+    static GraphIndex& GetRefIndex(Ref& arg) noexcept { return arg.m_index; }\n+    static GraphIndex GetRefIndex(const Ref& arg) noexcept { return arg.m_index; }\n+\n+public:\n+    /** Virtual destructor, so inheriting is safe. */\n+    virtual ~TxGraph() = default;\n+    /** Construct a new transaction with the specified feerate, and return a Ref to it. */\n+    [[nodiscard]] virtual Ref AddTransaction(const FeeFrac& feerate) noexcept = 0;\n+    /** Remove the specified transaction. This is a no-op if the transaction was already removed.\n+     *\n+     * TxGraph may internally reorder transaction removals with dependency additions for\n+     * performance reasons. If together with any transaction removal all its descendants, or all\n+     * its ancestors, are removed as well (which is what always happens in realistic scenarios),\n+     * this reordering will not affect the behavior of TxGraph.\n+     *\n+     * As an example, imagine 3 transactions A,B,C where B depends on A. If a dependency of C on B\n+     * is added, and then B is deleted, C will still depend on A. If the deletion of B is reordered\n+     * before the C->B dependency is added, it has no effect instead. If, together with the\n+     * deletion of B also either A or C is deleted, there is no distinction.\n+     */\n+    virtual void RemoveTransaction(Ref& arg) noexcept = 0;\n+    /** Add a dependency between two specified transactions. Parent may not be a descendant of\n+     *  child already (but may be an ancestor of it already, in which case this is a no-op). If\n+     *  either transaction is already removed, this is a no-op. */\n+    virtual void AddDependency(Ref& parent, Ref& child) noexcept = 0;\n+    /** Modify the fee of the specified transaction. If the transaction does not exist (or was\n+     *  removed), this has no effect. */\n+    virtual void SetTransactionFee(Ref& arg, int64_t fee) noexcept = 0;\n+    /** Return a vector of pointers to Ref objects for transactions which have been removed from\n+     *  the graph, and have not been destroyed yet. Each transaction is only reported once by\n+     *  Cleanup(). Afterwards, all Refs will be empty. */\n+    [[nodiscard]] virtual std::vector<Ref*> Cleanup() noexcept = 0;\n+\n+    /** Determine whether arg exists in this graph (i.e., was not removed). */\n+    virtual bool Exists(const Ref& arg) noexcept = 0;\n+    /** Get the feerate of the chunk which transaction arg is in. Returns the empty FeeFrac if arg\n+     *  does not exist. */\n+    virtual FeeFrac GetChunkFeerate(const Ref& arg) noexcept = 0;\n+    /** Get the individual transaction feerate of transaction arg. Returns the empty FeeFrac if\n+     *  arg does not exist. */\n+    virtual FeeFrac GetIndividualFeerate(const Ref& arg) noexcept = 0;\n+    /** Get pointers to all transactions in the connected component (\"cluster\") which arg is in.\n+     *  The transactions will be returned in a topologically-valid order of acceptable quality.",
      "path": "src/txgraph.h",
      "position": 136,
      "original_position": 109,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "original_commit_id": "0c8dc2323eb1ec34357a807f0860cf0a08a63a75",
      "in_reply_to_id": 1909271584,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I consider the `QualityLevel` enum to be an implementation detail of the txgraph module that should not leak into its interface.\r\n\r\nHowever, I guess it would be helpful to specify more clearly what acceptable mean. I'll think about that; it's hard to define.",
      "created_at": "2025-01-09T20:07:21Z",
      "updated_at": "2025-01-09T20:07:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#discussion_r1909373642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909373642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 136,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909379046",
      "pull_request_review_id": 2540841654,
      "id": 1909379046,
      "node_id": "PRRC_kwDOABII585xzs_m",
      "diff_hunk": "@@ -1336,6 +1336,35 @@ std::vector<ClusterIndex> MergeLinearizations(const DepGraph<SetType>& depgraph,\n     return ret;\n }\n \n+/** Make linearization topological, retaining its ordering where possible. */\n+template<typename SetType>\n+void FixLinearization(const DepGraph<SetType>& depgraph, Span<ClusterIndex> linearization) noexcept\n+{\n+    // This algorithm can be summarized as moving every element in the linearization backwards\n+    // until it is placed after all this ancestors.\n+    SetType done;\n+    const auto len = linearization.size();\n+    // Iterate over the elements of linearization from back to front (i is distance from back).\n+    for (ClusterIndex i = 0; i < len; ++i) {\n+        /** The element at that position. */\n+        ClusterIndex elem = linearization[len - 1 - i];\n+        /** j represents how far from the back of the linearization elem should be placed. */\n+        ClusterIndex j = i;\n+        // Figure out which elements elem needs to be placed before.\n+        SetType place_before = done & depgraph.Ancestors(elem);\n+        // Find which position to place elem in (updating j), continuously moving the elements\n+        // in between forward.\n+        while (place_before.Any()) {\n+            auto to_swap = linearization[len - 1 - (j - 1)];",
      "path": "src/cluster_linearize.h",
      "position": 41,
      "original_position": 23,
      "commit_id": "56684bc3f6f1adc5e70042d7792cb5e9d65bace0",
      "original_commit_id": "1c5f1c4601e0a895258cfe073125361f7a6ea012",
      "in_reply_to_id": 1909277721,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`j` cannot be 0. If it were, there is necessarily nothing `elem` needs to be moved before anymore, and `place_before` would be empty, and the loop would have terminated.\r\n\r\nWill add an `Assume(j > 0);` on the next push.",
      "created_at": "2025-01-09T20:13:00Z",
      "updated_at": "2025-01-09T20:13:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#discussion_r1909379046",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1909379046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1369,
      "original_line": 1358,
      "side": "RIGHT"
    }
  ]
}