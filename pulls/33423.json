{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423",
    "id": 2839326033,
    "node_id": "PR_kwDOABII586pPK1R",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33423",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33423.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33423.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a1f76230209629c5141984aaac1cc4ba7b4f761a",
    "number": 33423,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "qa: Improvements to debug_assert_log + busy_wait_for_debug_log",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "* Remove incorrect docstring in `busy_wait_for_debug_log()`.\r\n* Replace nerfed regex searches with `X in Y` expressions.\r\n* Only compute the log string to be printed on failure *when we actually fail* instead of every 0.05s.\r\n* As we find each needle (expected message) in the haystack (log output), stop searching for it. **If we fail and time out, we will only complain about the needles (expected messages) we didn't find. On master we also include found needles, which is less helpful.**\r\n\r\nFound while developing a new test case in https://github.com/bitcoin/bitcoin/pull/33336#discussion_r2351892330",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-09-18T08:39:52Z",
    "updated_at": "2025-11-17T18:55:52Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "6545a71338520d69ad8e0626b963b5b5b4be88ea",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hodlinator:2025/09/assert_debug_log",
      "ref": "2025/09/assert_debug_log",
      "sha": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 813856282,
        "node_id": "R_kgDOMIJ2Gg",
        "name": "bitcoin",
        "full_name": "hodlinator/bitcoin",
        "owner": {
          "login": "hodlinator",
          "id": 172445034,
          "node_id": "U_kgDOCkdNag",
          "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hodlinator",
          "html_url": "https://github.com/hodlinator",
          "followers_url": "https://api.github.com/users/hodlinator/followers",
          "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
          "organizations_url": "https://api.github.com/users/hodlinator/orgs",
          "repos_url": "https://api.github.com/users/hodlinator/repos",
          "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hodlinator/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/hodlinator/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hodlinator/bitcoin",
        "archive_url": "https://api.github.com/repos/hodlinator/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hodlinator/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hodlinator/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hodlinator/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hodlinator/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hodlinator/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hodlinator/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hodlinator/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hodlinator/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hodlinator/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hodlinator/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hodlinator/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hodlinator/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hodlinator/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hodlinator/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hodlinator/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hodlinator/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hodlinator/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hodlinator/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hodlinator/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hodlinator/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hodlinator/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hodlinator/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hodlinator/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hodlinator/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hodlinator/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hodlinator/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hodlinator/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hodlinator/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hodlinator/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hodlinator/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hodlinator/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hodlinator/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hodlinator/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hodlinator/bitcoin/hooks",
        "svn_url": "https://github.com/hodlinator/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 253402,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-17T15:16:55Z",
        "created_at": "2024-06-11T22:00:51Z",
        "updated_at": "2025-09-09T13:03:15Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "200150beba6601237036bc01ee10f6a0a2246c3d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38215,
        "stargazers_count": 86847,
        "watchers_count": 86847,
        "size": 296068,
        "default_branch": "master",
        "open_issues_count": 738,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-17T14:00:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-11-17T16:02:16Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 20,
    "deletions": 20,
    "changed_files": 1,
    "commits": 4,
    "review_comments": 22,
    "comments": 4
  },
  "events": [
    {
      "event": "labeled",
      "id": 19769237137,
      "node_id": "LE_lADOABII587MZ2uEzwAAAASaVp6R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19769237137",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T08:39:55Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 3306273916,
      "node_id": "IC_kwDOABII587FEbx8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3306273916",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T08:39:57Z",
      "updated_at": "2025-11-17T18:55:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33423.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3543410242) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3306273916",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423"
    },
    {
      "event": "reviewed",
      "id": 3241292554,
      "node_id": "PRR_kwDOABII587BMjMK",
      "url": null,
      "actor": null,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-19T00:39:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for reducing useless work - did you measure any speedup?\r\nI think we could make the result simpler and more pythonic - it's a test, I find visibly simpler code better here than theoretically faster one that we can't even measure, so I suggested a few changes.\r\nHere's the end-result containing most of my suggestions:\r\n```patch\r\ndiff --git a/test/functional/test_framework/test_node.py b/test/functional/test_framework/test_node.py\r\nindex e28140c17b..ccbde4702c 100755\r\n--- a/test/functional/test_framework/test_node.py\r\n+++ b/test/functional/test_framework/test_node.py\r\n@@ -550,32 +550,31 @@ class TestNode():\r\n         time_end = time.time() + timeout * self.timeout_factor\r\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\r\n \r\n-        def print_log(log):\r\n-            return \" - \" + \"\\n - \".join(log.splitlines())\r\n-\r\n         yield\r\n \r\n+        def join_lines(logs):\r\n+            return \" - \" + \"\\n - \".join(logs.splitlines())\r\n+\r\n+        remaining = list(expected_msgs)\r\n         while True:\r\n-            found = []\r\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\r\n                 dl.seek(prev_size)\r\n                 log = dl.read()\r\n+\r\n             for unexpected_msg in unexpected_msgs:\r\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\r\n-                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\r\n-            for i, expected_msg in enumerate(expected_msgs):\r\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\r\n-                    found.append(i)\r\n+                if unexpected_msg in log:\r\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{join_lines(log)}\\n\\n')\r\n+\r\n+            found = {i for i, m in enumerate(remaining) if m in log}\r\n             # We found remaining expected messages before encountering unexpected messages.\r\n-            if len(found) == len(expected_msgs):\r\n+            if len(found) == len(remaining):\r\n                 return\r\n             # Remove the ones we found so far, so we only complain about remaining ones when timing out.\r\n-            for f in reversed(found):\r\n-                expected_msgs.pop(f)\r\n+            remaining = [m for m in remaining if m not in found]\r\n             if time.time() >= time_end:\r\n                 break\r\n             time.sleep(0.05)\r\n-        self._raise_assertion_error(f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log(log)}\\n\\n')\r\n+        self._raise_assertion_error(f'Expected message(s) {remaining!r} not found in log:\\n\\n{join_lines(log)}\\n\\n')\r\n \r\n     @contextlib.contextmanager\r\n     def busy_wait_for_debug_log(self, expected_msgs, timeout=60):\r\n@@ -589,21 +588,16 @@ class TestNode():\r\n \r\n         yield\r\n \r\n+        remaining = list(expected_msgs)\r\n         while True:\r\n-            found = []\r\n             with open(self.debug_log_path, \"rb\") as dl:\r\n                 dl.seek(prev_size)\r\n                 log = dl.read()\r\n \r\n-            for i, expected_msg in enumerate(expected_msgs):\r\n-                if expected_msg in log:\r\n-                    found.append(i)\r\n-\r\n-            if len(found) == len(expected_msgs):\r\n+            found = {i for i, m in enumerate(remaining) if m in log}\r\n+            if len(found) == len(remaining):\r\n                 return\r\n-\r\n-            for f in reversed(found):\r\n-                expected_msgs.pop(f)\r\n+            remaining = [m for m in remaining if m not in found]\r\n \r\n             if time.time() >= time_end:\r\n                 print_log = \" - \" + \"\\n - \".join(log.decode(\"utf8\", errors=\"replace\").splitlines())\r\n@@ -612,8 +606,7 @@ class TestNode():\r\n             # No sleep here because we want to detect the message fragment as fast as\r\n             # possible.\r\n \r\n-        self._raise_assertion_error(\r\n-            f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log}\\n\\n')\r\n+        self._raise_assertion_error(f'Expected message(s) {remaining!r} not found in log:\\n\\n{print_log}\\n\\n')\r\n \r\n     @contextlib.contextmanager\r\n     def wait_for_new_peer(self, timeout=5):\r\n```",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3241292554",
      "submitted_at": "2025-09-19T00:39:55Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19818319079,
      "node_id": "HRFPE_lADOABII587MZ2uEzwAAAASdQ4zn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19818319079",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "created_at": "2025-09-20T21:33:11Z"
    },
    {
      "event": "reviewed",
      "id": 3244741286,
      "node_id": "PRR_kwDOABII587BZtKm",
      "url": null,
      "actor": null,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-20T21:33:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the feedback!\r\n\r\n> Thanks for reducing useless work - did you measure any speedup?\r\n\r\nRebased new push on top of #33336 which has a lot of `assert_debug_log()` (010cf81407c0df8de766fd2a116463d180f25f33), the below represents somewhat average runs:\r\n```\r\nâ‚¿ git co 2025/09/assert_debug_log_rebased~3\r\nâ‚¿ hyperfine -r 30 -N ./build/test/functional/feature_assumevalid.py\r\nBenchmark 1: ./build/test/functional/feature_assumevalid.py\r\n  Time (mean Â± Ïƒ):      6.058 s Â±  0.049 s    [User: 4.263 s, System: 0.520 s]\r\n  Range (min â€¦ max):    5.985 s â€¦  6.157 s    30 runs\r\n\r\nâ‚¿ git co 2025/09/assert_debug_log_rebased\r\nâ‚¿ hyperfine -r 30 -N ./build/test/functional/feature_assumevalid.py\r\nBenchmark 1: ./build/test/functional/feature_assumevalid.py\r\n  Time (mean Â± Ïƒ):      5.998 s Â±  0.045 s    [User: 4.237 s, System: 0.496 s]\r\n  Range (min â€¦ max):    5.929 s â€¦  6.109 s    30 runs\r\n```\r\nSo the tendency is a difference of 1% for this test case - a bit underwhelming. Would expect to see more of a difference for longer log files and more `expected_msgs` per invocation.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3244741286",
      "submitted_at": "2025-09-20T21:33:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    },
    {
      "event": "commented",
      "id": 3317267505,
      "node_id": "IC_kwDOABII587FuXwx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3317267505",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-22T07:05:55Z",
      "updated_at": "2025-09-22T07:05:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "CI failure (https://github.com/bitcoin/bitcoin/actions/runs/17885097855/job/50857723211?pr=33423) seems unrelated:\r\n\r\n`ERROR: failed to build: failed to solve: short read: expected 659078263 bytes but got 90259897: unexpected EOF`\r\n`Command '['./ci/test/02_run_container.sh']' returned non-zero exit status 1.`",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3317267505",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19847491910,
      "node_id": "HRFPE_lADOABII587MZ2uEzwAAAASfALFG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19847491910",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d116c8a20e74618f9fe3d3fbd49d085cde21e30c",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/d116c8a20e74618f9fe3d3fbd49d085cde21e30c",
      "created_at": "2025-09-22T18:55:00Z"
    },
    {
      "event": "commented",
      "id": 3320876003,
      "node_id": "IC_kwDOABII587F8Ivj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3320876003",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-22T19:01:15Z",
      "updated_at": "2025-09-22T19:01:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Latest push has somewhat simpler code (no `found`-list). Tested performance again, similarly to https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3244741286:\r\n```\r\nâ‚¿ git co 2025/09/assert_debug_log_rebased~3\r\nâ‚¿ hyperfine -r 30 -N ./build/test/functional/feature_assumevalid.py\r\nBenchmark 1: ./build/test/functional/feature_assumevalid.py\r\n  Time (mean Â± Ïƒ):      6.034 s Â±  0.047 s    [User: 4.260 s, System: 0.488 s]\r\n  Range (min â€¦ max):    5.964 s â€¦  6.146 s    30 runs\r\n \r\nâ‚¿ git co 2025/09/assert_debug_log_rebased\r\nâ‚¿ hyperfine -r 30 -N ./build/test/functional/feature_assumevalid.py\r\nBenchmark 1: ./build/test/functional/feature_assumevalid.py\r\n  Time (mean Â± Ïƒ):      5.990 s Â±  0.046 s    [User: 4.233 s, System: 0.482 s]\r\n  Range (min â€¦ max):    5.881 s â€¦  6.126 s    30 runs\r\n```\r\nSo less than 1% performance improvement in this case. Again, should perform better for other cases.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3320876003",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19917718103,
      "node_id": "HRFPE_lADOABII587MZ2uEzwAAAASjMEJX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19917718103",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/6561ac312e1a43701e949255079397127ae7ffd9",
      "created_at": "2025-09-25T11:57:34Z"
    },
    {
      "event": "reviewed",
      "id": 3268886010,
      "node_id": "PRR_kwDOABII587C1z36",
      "url": null,
      "actor": null,
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-25T18:04:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "The error message seems off to me now, we're potentially logging lines as missing that we haven't checked.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3268886010",
      "submitted_at": "2025-09-25T18:04:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    },
    {
      "event": "reviewed",
      "id": 3268946797,
      "node_id": "PRR_kwDOABII587C2Ctt",
      "url": null,
      "actor": null,
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-25T18:17:00Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3268946797",
      "submitted_at": "2025-09-25T18:17:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVjMTZlNDYzMWMwMDkwNTZkNTcxZDgzZmUxNzA2MmMxMDdmNzE3OTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c16e4631c009056d571d83fe17062c107f71798",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5c16e4631c009056d571d83fe17062c107f71798",
      "tree": {
        "sha": "912420f49c4fd60fe54cbc3a569b0995e2065c37",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/912420f49c4fd60fe54cbc3a569b0995e2065c37"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 912420f49c4fd60fe54cbc3a569b0995e2065c37\nparent 947bed28fe62cd6c27baace5ae7c2b6955ee6379\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758918372 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758918462 +0200\n\ndoc: Remove no longer correct comment\n\nLeft over since fa7b07571f24b6def6effdd4cc1b96c7507bf959.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQFMs6VG9F73AM3Y5Ruydaksi5zYXBSh7lvDx0fo7D9An8tGdvivf8XGuaPh0TnU8zn\nOSwbFw/cgnBwBU9tY1AAc=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/947bed28fe62cd6c27baace5ae7c2b6955ee6379",
          "sha": "947bed28fe62cd6c27baace5ae7c2b6955ee6379",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/947bed28fe62cd6c27baace5ae7c2b6955ee6379"
        }
      ],
      "message": "doc: Remove no longer correct comment\n\nLeft over since fa7b07571f24b6def6effdd4cc1b96c7507bf959.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-26T20:27:42Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-26T20:26:12Z"
      },
      "sha": "5c16e4631c009056d571d83fe17062c107f71798"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5MDIxMTAxZGM2M2VlN2ZiMWUxZjM0MjM4N2FiN2QzZjBlM2NlZmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc",
      "tree": {
        "sha": "d968040cefb7f8b90e0b756366114383e3e2698c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d968040cefb7f8b90e0b756366114383e3e2698c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d968040cefb7f8b90e0b756366114383e3e2698c\nparent 5c16e4631c009056d571d83fe17062c107f71798\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758391148 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758918462 +0200\n\nqa: Replace always-escaped regexps with \"X in Y\"\n\nAlways escaping the search string makes the use of regular expressions unnecessary.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQNdbwecOSbusPxPGyXVsXRAuGB008UKbx/BUvbj4EMVCKNIBoe7LoP/9wpGRrRiBF+\nMSLHayueo0E0tryiskBA0=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c16e4631c009056d571d83fe17062c107f71798",
          "sha": "5c16e4631c009056d571d83fe17062c107f71798",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5c16e4631c009056d571d83fe17062c107f71798"
        }
      ],
      "message": "qa: Replace always-escaped regexps with \"X in Y\"\n\nAlways escaping the search string makes the use of regular expressions unnecessary.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-26T20:27:42Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-20T17:59:08Z"
      },
      "sha": "a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFlNTQxMjVlMmUwMDYzZTQ1ODYyNjViOTU3OTEyODk2YzA1NmJhMGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1e54125e2e0063e4586265b957912896c056ba0a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1e54125e2e0063e4586265b957912896c056ba0a",
      "tree": {
        "sha": "3df30bda3f10349310ee64c9d9b268747544a1c2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3df30bda3f10349310ee64c9d9b268747544a1c2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3df30bda3f10349310ee64c9d9b268747544a1c2\nparent a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758287150 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758918462 +0200\n\nrefactor(qa): Avoid unnecessary string operations\n\nprint_log was recalculated every 0.05s in assert_debug_log(), even during successful circumstances - changed to only be computed upon failure.\n\nSimplified terminology from \"(does not) partially match(es)\" to \"(not) found in\" since it seems to reference the first function having used regular expression matching, while it always escaped the search strings (see parent commit). (Simplified grammar also avoids issues with singular/plural \"was/were not found\").\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQLijZLbpQKGn3j3SkgMNYQSxIU8KyXQIXDAQCqV2+aEw/6KcsjiDNn7UCU79E/qGIH\nhLPGDUQc13zS0pYK1+BAo=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc",
          "sha": "a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a9021101dc63ee7fb1e1f342387ab7d3f0e3cefc"
        }
      ],
      "message": "refactor(qa): Avoid unnecessary string operations\n\nprint_log was recalculated every 0.05s in assert_debug_log(), even during successful circumstances - changed to only be computed upon failure.\n\nSimplified terminology from \"(does not) partially match(es)\" to \"(not) found in\" since it seems to reference the first function having used regular expression matching, while it always escaped the search strings (see parent commit). (Simplified grammar also avoids issues with singular/plural \"was/were not found\").",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-26T20:27:42Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-19T13:05:50Z"
      },
      "sha": "1e54125e2e0063e4586265b957912896c056ba0a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGExZjc2MjMwMjA5NjI5YzUxNDE5ODRhYWFjMWNjNGJhN2I0Zjc2MWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "tree": {
        "sha": "9d371872e7d592cf91939ae8ea0695c53800e315",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9d371872e7d592cf91939ae8ea0695c53800e315"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9d371872e7d592cf91939ae8ea0695c53800e315\nparent 1e54125e2e0063e4586265b957912896c056ba0a\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758834721 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758921315 +0200\n\nqa: Only complain about expected messages that were not found\n\nOnly leaves messages we never found in the final assert message of the functions, which is more helpful (remaining_expected).\n\nAvoids repeatedly searching for messages we have already found (pop()).\n\nStops searching for other expected messages if we already failed finding one. Still need to clean remaining_expected at the end, but *only if we fail*.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQAn7mF0SenUa+YO4aG/jsI+e6yE6JnMLy2Ju2v+jtJZ4mQTZ7jPmGIGTxCV34DF29C\nSWGJ6tZCDEYdONvj8XbQM=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1e54125e2e0063e4586265b957912896c056ba0a",
          "sha": "1e54125e2e0063e4586265b957912896c056ba0a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1e54125e2e0063e4586265b957912896c056ba0a"
        }
      ],
      "message": "qa: Only complain about expected messages that were not found\n\nOnly leaves messages we never found in the final assert message of the functions, which is more helpful (remaining_expected).\n\nAvoids repeatedly searching for messages we have already found (pop()).\n\nStops searching for other expected messages if we already failed finding one. Still need to clean remaining_expected at the end, but *only if we fail*.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-26T21:15:15Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-25T21:12:01Z"
      },
      "sha": "a1f76230209629c5141984aaac1cc4ba7b4f761a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19953090472,
      "node_id": "HRFPE_lADOABII587MZ2uEzwAAAASlS_-o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19953090472",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "created_at": "2025-09-26T21:16:34Z"
    },
    {
      "event": "reviewed",
      "id": 3273948902,
      "node_id": "PRR_kwDOABII587DJH7m",
      "url": null,
      "actor": null,
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-26T21:21:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Latest push fixes bug from previous push (https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379926157), simplifies code (https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379920746) and adds commit to fix docstring (https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379958513).\r\n\r\nCompared run-times for all functional tests and wasn't able to find one which clearly benefited from this optimization. So I'm open to just replacing `while remaining_expected and remaining_expected[-1] in log: remaining_expected.pop()` with `remaining_expected = [e for e in remaining_expected if e not in log]` if reviewers prefer.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3273948902",
      "submitted_at": "2025-09-26T21:21:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    },
    {
      "event": "commented",
      "id": 3543410242,
      "node_id": "IC_kwDOABII587TNCZC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3543410242",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:55:49Z",
      "updated_at": "2025-11-17T18:55:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK a1f76230209629c5141984aaac1cc4ba7b4f761a\r\n\r\nThe PR helps provide clearer failure output, since only missing expected messages are reported.\r\nThe lazy initialization part is not necessarily an optimization - I see it primarily as code simplification. That is why I suggested using a list comprehension for `remaining` on each iteration instead of the tail-pop optimization.\r\nBut I am also fine with it as is.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3543410242",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360549564",
      "pull_request_review_id": 3241292554,
      "id": 2360549564,
      "node_id": "PRRC_kwDOABII586MsyC8",
      "diff_hunk": "@@ -569,7 +571,7 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 27,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "this was weird before, it logged `print_log` which was created in different scope. Having `log` here is still weird, but I guess Python is weird.\r\n\r\nnit: based on the docs, [`!r`](https://docs.python.org/3/library/functions.html#repr) might be more appropriate here:\r\n```suggestion\r\n        self._raise_assertion_error(f'Expected message(s) {expected_msgs!r} not found in log:\\n\\n{print_log(log)}\\n\\n')\r\n```",
      "created_at": "2025-09-18T17:59:51Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2360549564",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360549564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360551867",
      "pull_request_review_id": 3241292554,
      "id": 2360551867,
      "node_id": "PRRC_kwDOABII586Msym7",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n             found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 18,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: you could mention the reason for changing the texts as well in the commit message",
      "created_at": "2025-09-18T18:00:28Z",
      "updated_at": "2025-09-19T00:40:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2360551867",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360551867"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 565,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361373085",
      "pull_request_review_id": 3241292554,
      "id": 2361373085,
      "node_id": "PRRC_kwDOABII586Mv7Gd",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: `print_log` and `log` are both used in the vicinity, if you retouch again, consider different names\r\nnit2: any reason for putting this before the yield?",
      "created_at": "2025-09-18T23:26:02Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361373085",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361373085"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361375488",
      "pull_request_review_id": 3241292554,
      "id": 2361375488,
      "node_id": "PRRC_kwDOABII586Mv7sA",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\n+                    found.append(i)\n+            # We found remaining expected messages before encountering unexpected messages.\n+            if len(found) == len(expected_msgs):\n                 return\n+            # Remove the ones we found so far, so we only complain about remaining ones when timing out.\n+            for f in reversed(found):\n+                expected_msgs.pop(f)",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 24,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "can we do this without mutating the input arg?\r\n```python\r\nremaining = list(expected_msgs)\r\n...\r\nremaining = [m for m in remaining if m not in found]\r\n```",
      "created_at": "2025-09-18T23:28:43Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361375488",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361375488"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380779",
      "pull_request_review_id": 3241292554,
      "id": 2361380779,
      "node_id": "PRRC_kwDOABII586Mv8-r",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 17,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "what's the reason for regex iteration above and here if we're just escaping it anyway? We're not doing it in `busy_wait_for_debug_log`\r\nI have added\r\n```python\r\n            found = []\r\n            for i, expected_msg in enumerate(expected_msgs):\r\n                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\r\n                    found.append(i)\r\n            found2 = [i for i, m in enumerate(expected_msgs) if m in log]\r\n            assert found == found2, f\"Mismatch: {found} != {found2}\"\r\n```\r\nand ran the whole suite and it seems to be the same, maybe we can simplify it.\r\nNote that `found2` should likely be a `set` instead of a list, otherwise comparing the sizes may not make sense. It also helps with the `in` condition for the remaining values.",
      "created_at": "2025-09-18T23:34:19Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361380779",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 567,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380997",
      "pull_request_review_id": 3241292554,
      "id": 2361380997,
      "node_id": "PRRC_kwDOABII586Mv9CF",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "we don't actually need this here, can we move it closer to it actual usage? Or if we use a list/set comprehension we don't even need this line",
      "created_at": "2025-09-18T23:34:33Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361380997",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380997"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 559,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361431692",
      "pull_request_review_id": 3241292554,
      "id": 2361431692,
      "node_id": "PRRC_kwDOABII586MwJaM",
      "diff_hunk": "@@ -586,18 +590,21 @@ def busy_wait_for_debug_log(self, expected_msgs, timeout=60):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, \"rb\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n \n-            for expected_msg in expected_msgs:\n-                if expected_msg not in log:\n-                    found = False\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if expected_msg in log:\n+                    found.append(i)\n \n-            if found:\n+            if len(found) == len(expected_msgs):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 46,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Wouldn't this return if the same expected message appears multiple times in the log? I think we should collect the indexes into a set instead. Not sure that will keep the expected order (which we likely should), I haven't checked or thought about extensively.\r\n",
      "created_at": "2025-09-19T00:31:04Z",
      "updated_at": "2025-09-19T01:03:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361431692",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361431692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 602,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2362813877",
      "pull_request_review_id": 3244741286,
      "id": 2362813877,
      "node_id": "PRRC_kwDOABII586M1a21",
      "diff_hunk": "@@ -569,7 +571,7 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 27,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": 2360549564,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I prefer `!s` since it is closer to the original `str()`. `!r` seems more appropriate when one wants to copy the result into code, mirroring `repr()`, feverishly escaping backslashes etc:\r\n```python\r\n>>> repr(r'\\w')\r\n\"'\\\\\\\\w'\"\r\n>>> str(r'\\w')\r\n'\\\\w'\r\n```",
      "created_at": "2025-09-19T13:01:37Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2362813877",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2362813877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2362983549",
      "pull_request_review_id": 3244741286,
      "id": 2362983549,
      "node_id": "PRRC_kwDOABII586M2ER9",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": 2361373085,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "1) Agree `join_log` is more accurate, changed.\r\n2) It felt like the setup code was all before the `yield`.",
      "created_at": "2025-09-19T13:57:34Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2362983549",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2362983549"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364544756",
      "pull_request_review_id": 3244741286,
      "id": 2364544756,
      "node_id": "PRRC_kwDOABII586M8Bb0",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\n+                    found.append(i)\n+            # We found remaining expected messages before encountering unexpected messages.\n+            if len(found) == len(expected_msgs):\n                 return\n+            # Remove the ones we found so far, so we only complain about remaining ones when timing out.\n+            for f in reversed(found):\n+                expected_msgs.pop(f)",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 24,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": 2361375488,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agreed that it's nicer not modify inputs, done!\r\n\r\nI had the list comprehension of\r\n```python\r\nremaining = [e for e in remaining if e not in log]\r\n```\r\nThen I realized it was wasteful to keep searching if we already failed to find one of the expected messages, so I reverted the list comprehension and added a `break`.\r\n\r\nFound another way to probably get rid of `found` (not well tested). But it comes at the expense of copying the remaining enumerated `list` for each outer loop iteration, so holding off:\r\n```python\r\nfor i, expected_msg in reversed(list(enumerate(remaining_expected))):\r\n    if expected_msg in log:\r\n        remaining_expected.pop(i)\r\n    else:\r\n        break\r\n```",
      "created_at": "2025-09-19T21:13:25Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2364544756",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364544756"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364558825",
      "pull_request_review_id": 3244741286,
      "id": 2364558825,
      "node_id": "PRRC_kwDOABII586M8E3p",
      "diff_hunk": "@@ -586,18 +590,21 @@ def busy_wait_for_debug_log(self, expected_msgs, timeout=60):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, \"rb\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n \n-            for expected_msg in expected_msgs:\n-                if expected_msg not in log:\n-                    found = False\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if expected_msg in log:\n+                    found.append(i)\n \n-            if found:\n+            if len(found) == len(expected_msgs):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 46,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": 2361431692,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We only report one `found`-entry per found expected message if it exists in the log, doesn't matter if it exists twice in the log (the indexes are not into the log), so I think it should be alright.",
      "created_at": "2025-09-19T21:21:06Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2364558825",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364558825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 602,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364576723",
      "pull_request_review_id": 3244741286,
      "id": 2364576723,
      "node_id": "PRRC_kwDOABII586M8JPT",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 17,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": 2361380779,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "At first I thought there was some special property with `re.search(..., re.MULTILINE)`, but digging deeper I think not. Looking at the PR which added it, I found https://github.com/bitcoin/bitcoin/pull/14024#discussion_r212662890 which indicates that the original user of the function was passing in a search string with symbols that could be interpreted as a regex but shouldn't be. #13006 which spawned the issue mentioned regexps, so that's probably why it's in this unfortunate nerfed state.\r\n\r\nI agree on switch to `needle in haystack` form instead. Confirmed it to work by running `--extended` locally.\r\n\r\nThe inefficiency of `print_log` was also pointed out but dismissed: https://github.com/bitcoin/bitcoin/pull/14024#discussion_r212693677 - hopefully this PR is still acceptable.",
      "created_at": "2025-09-19T21:29:03Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2364576723",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364576723"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 567,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364601882",
      "pull_request_review_id": 3244741286,
      "id": 2364601882,
      "node_id": "PRRC_kwDOABII586M8PYa",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n             found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 18,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": 2360551867,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-09-19T21:44:22Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2364601882",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364601882"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 565,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364603250",
      "pull_request_review_id": 3244741286,
      "id": 2364603250,
      "node_id": "PRRC_kwDOABII586M8Pty",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "f18a3ca44b8addbeca6979ede90b9924a22e8447",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": 2361380997,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Moved.",
      "created_at": "2025-09-19T21:45:18Z",
      "updated_at": "2025-09-20T21:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2364603250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2364603250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 559,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379915262",
      "pull_request_review_id": 3268886010,
      "id": 2379915262,
      "node_id": "PRRC_kwDOABII586N2p_-",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 29,
      "original_position": 29,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Seems this was always eagerly evaluated since https://github.com/bitcoin/bitcoin/commit/fa3e9f7627784ee00980590e5bf044a0e1249999#diff-7f22a082e3a80ca2f212e36193f87dd80237035afedb7f15b116ef7fa265f3eeR245-R248 - the current approach of only calculating it once when the loop also terminates makes sense\r\n\r\nnit: I know it's a long line but I would still prefer this merged to reduce the noise. I'm fine either way:\r\n```suggestion\r\n                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{join_log(log)}\\n\\n')\r\n```",
      "created_at": "2025-09-25T17:57:43Z",
      "updated_at": "2025-09-25T18:04:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379915262",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379915262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": 565,
      "original_start_line": 565,
      "start_side": "RIGHT",
      "line": 566,
      "original_line": 566,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379920746",
      "pull_request_review_id": 3268886010,
      "id": 2379920746,
      "node_id": "PRRC_kwDOABII586N2rVq",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 34,
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "this basically pops until the last element is still in logs, stops otherwise, right?\n```suggestion\n        while remaining_expected and remaining_expected[-1] in log:\n            remaining_expected.pop()\n```",
      "created_at": "2025-09-25T18:00:15Z",
      "updated_at": "2025-09-25T18:04:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379920746",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379920746"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": 567,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 571,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379922589",
      "pull_request_review_id": 3268886010,
      "id": 2379922589,
      "node_id": "PRRC_kwDOABII586N2ryd",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break\n+            if len(remaining_expected) == 0:",
      "path": "test/functional/test_framework/test_node.py",
      "position": 1,
      "original_position": 35,
      "commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it would be slightly more pythonic to do\n\n```suggestion\n            if not remaining_expected:\n```",
      "created_at": "2025-09-25T18:00:55Z",
      "updated_at": "2025-09-25T18:04:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379922589",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379922589"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 572,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379926157",
      "pull_request_review_id": 3268886010,
      "id": 2379926157,
      "node_id": "PRRC_kwDOABII586N2sqN",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break\n+            if len(remaining_expected) == 0:\n                 return\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n+                                    f'not found in log:\\n\\n{join_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 40,
      "original_position": 42,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "that's not necessarily true, we have just stopped searching after the first failure, right?",
      "created_at": "2025-09-25T18:02:44Z",
      "updated_at": "2025-09-25T18:04:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379926157",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379926157"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": 575,
      "original_start_line": 577,
      "start_side": "RIGHT",
      "line": 576,
      "original_line": 576,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379958513",
      "pull_request_review_id": 3268946797,
      "id": 2379958513,
      "node_id": "PRRC_kwDOABII586N20jx",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break\n+            if len(remaining_expected) == 0:\n                 return\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n+                                    f'not found in log:\\n\\n{join_log(log)}\\n\\n')\n \n     @contextlib.contextmanager\n     def busy_wait_for_debug_log(self, expected_msgs, timeout=60):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 43,
      "original_position": 45,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": ">         Return:\n>            the number of log lines we encountered when matching\n\nThis doesn't seem to be the case anymore",
      "created_at": "2025-09-25T18:17:00Z",
      "updated_at": "2025-09-25T18:17:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2379958513",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379958513"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 579,
      "original_line": 579,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383490580",
      "pull_request_review_id": 3273948902,
      "id": 2383490580,
      "node_id": "PRRC_kwDOABII586OES4U",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break\n+            if len(remaining_expected) == 0:\n                 return\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n+                                    f'not found in log:\\n\\n{join_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 40,
      "original_position": 42,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": 2379926157,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for noticing this issue!\r\n\r\nLatest push inserts\r\n```python\r\nremaining_expected = [e for e in remaining_expected if e not in log]\r\n```\r\nbefore the error reporting for it to be correct, meaning we only need to do the full search on failure.",
      "created_at": "2025-09-26T21:02:26Z",
      "updated_at": "2025-09-26T21:21:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2383490580",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383490580"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": 575,
      "original_start_line": 577,
      "start_side": "RIGHT",
      "line": 576,
      "original_line": 576,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383490859",
      "pull_request_review_id": 3273948902,
      "id": 2383490859,
      "node_id": "PRRC_kwDOABII586OES8r",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 29,
      "original_position": 29,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": 2379915262,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Regarding nit: I sympathize with the way `busy_wait_for_debug_log()` on master puts the parameter to `_raise_assertion_error()` on it's own line, so I would be tempted to do that for all of them - which makes me realize: if only I broke the message in two lines, I could raise up the first half and still keep close to 80 char width - and we're back with the current approach. Left unchanged in latest push.",
      "created_at": "2025-09-26T21:02:34Z",
      "updated_at": "2025-09-26T21:21:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2383490859",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383490859"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": 565,
      "original_start_line": 565,
      "start_side": "RIGHT",
      "line": 566,
      "original_line": 566,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383497595",
      "pull_request_review_id": 3273948902,
      "id": 2383497595,
      "node_id": "PRRC_kwDOABII586OEUl7",
      "diff_hunk": "@@ -546,30 +546,36 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             unexpected_msgs = []\n         assert_equal(type(expected_msgs), list)\n         assert_equal(type(unexpected_msgs), list)\n+        remaining_expected = list(expected_msgs)\n \n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def join_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n-            found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+                if unexpected_msg in log:\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" '\n+                                                f'found in log:\\n\\n{join_log(log)}\\n\\n')\n+            while len(remaining_expected) > 0:\n+                if remaining_expected[-1] in log:\n+                    remaining_expected.pop()\n+                else:\n+                    break\n+            if len(remaining_expected) == 0:\n                 return\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n+                                    f'not found in log:\\n\\n{join_log(log)}\\n\\n')\n \n     @contextlib.contextmanager\n     def busy_wait_for_debug_log(self, expected_msgs, timeout=60):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 43,
      "original_position": 45,
      "commit_id": "a1f76230209629c5141984aaac1cc4ba7b4f761a",
      "original_commit_id": "6561ac312e1a43701e949255079397127ae7ffd9",
      "in_reply_to_id": 2379958513,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Added commit removing this from docstring with reference in commit message to ref commit where it was made incorrect.",
      "created_at": "2025-09-26T21:06:47Z",
      "updated_at": "2025-09-26T21:21:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2383497595",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2383497595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 579,
      "original_line": 579,
      "side": "RIGHT"
    }
  ]
}