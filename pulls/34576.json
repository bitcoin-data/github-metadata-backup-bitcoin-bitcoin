{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576",
    "id": 3277360664,
    "node_id": "PR_kwDOABII587DWI4Y",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34576",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34576.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34576.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34576",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34576/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/3295552c0a895fa650c0e0c67600c384fdbcde50",
    "number": 34576,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "threadpool: add SubmitMany",
    "user": {
      "login": "andrewtoth",
      "id": 237213,
      "node_id": "MDQ6VXNlcjIzNzIxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewtoth",
      "html_url": "https://github.com/andrewtoth",
      "followers_url": "https://api.github.com/users/andrewtoth/followers",
      "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
      "repos_url": "https://api.github.com/users/andrewtoth/repos",
      "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "The current `ThreadPool::Submit` is not very efficient when we have a use case where we need to submit multiple tasks immediately. The `Submit` method must take the lock for each task, and notifies only a single worker thread. This will cause lock contention with the awakened worker thread trying to take the lock and the caller trying to submit the next task.\r\n\r\nIntroduce `SubmitMany`, which takes the lock once and submits a vector of tasks, then notifies all worker threads after the lock is released.\r\n\r\nThis is needed for #31132 to be able to use `ThreadPool`.",
    "labels": [
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2026-02-12T17:39:40Z",
    "updated_at": "2026-02-20T12:34:44Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "1dff946ee772c6b7236657e3f339414b7daa4390",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "andrewtoth:threadpool_submitmany",
      "ref": "threadpool_submitmany",
      "sha": "3295552c0a895fa650c0e0c67600c384fdbcde50",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 156145027,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNTYxNDUwMjc=",
        "name": "bitcoin",
        "full_name": "andrewtoth/bitcoin",
        "owner": {
          "login": "andrewtoth",
          "id": 237213,
          "node_id": "MDQ6VXNlcjIzNzIxMw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/andrewtoth",
          "html_url": "https://github.com/andrewtoth",
          "followers_url": "https://api.github.com/users/andrewtoth/followers",
          "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
          "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
          "repos_url": "https://api.github.com/users/andrewtoth/repos",
          "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/andrewtoth/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/andrewtoth/bitcoin",
        "archive_url": "https://api.github.com/repos/andrewtoth/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/andrewtoth/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/andrewtoth/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/andrewtoth/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/andrewtoth/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/andrewtoth/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/andrewtoth/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/andrewtoth/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/andrewtoth/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/andrewtoth/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/andrewtoth/bitcoin/events",
        "forks_url": "https://api.github.com/repos/andrewtoth/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/andrewtoth/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/andrewtoth/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/andrewtoth/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/andrewtoth/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/andrewtoth/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/andrewtoth/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/andrewtoth/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/andrewtoth/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/andrewtoth/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:andrewtoth/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/andrewtoth/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/andrewtoth/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/andrewtoth/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/andrewtoth/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/andrewtoth/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/andrewtoth/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/andrewtoth/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/andrewtoth/bitcoin/hooks",
        "svn_url": "https://github.com/andrewtoth/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 298172,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-20T03:37:28Z",
        "created_at": "2018-11-05T01:43:59Z",
        "updated_at": "2025-11-13T15:07:23Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ee2065fdeaca91caaad9eb7daeeffe939441d804",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38919,
        "stargazers_count": 88193,
        "watchers_count": 88193,
        "size": 305452,
        "default_branch": "master",
        "open_issues_count": 719,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-20T11:13:08Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-20T11:25:22Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 101,
    "deletions": 3,
    "changed_files": 2,
    "commits": 1,
    "review_comments": 7,
    "comments": 2
  },
  "events": [
    {
      "event": "commented",
      "id": 3892385139,
      "node_id": "IC_kwDOABII587oARVz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3892385139",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T17:40:09Z",
      "updated_at": "2026-02-20T12:34:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/34576#pullrequestreview-3829793229) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34562](https://github.com/bitcoin/bitcoin/pull/34562) (ThreadPool follow-ups, proactive shutdown and HasReason dependency cleanup by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#issuecomment-3892385139",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34576"
    },
    {
      "event": "reviewed",
      "id": 3793426669,
      "node_id": "PRR_kwDOABII587iGxjt",
      "url": null,
      "actor": null,
      "commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T20:16:58Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#pullrequestreview-3793426669",
      "submitted_at": "2026-02-12T20:16:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
    },
    {
      "event": "reviewed",
      "id": 3816053425,
      "node_id": "PRR_kwDOABII587jdFqx",
      "url": null,
      "actor": null,
      "commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-17T20:22:33Z",
      "author_association": "MEMBER",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#pullrequestreview-3816053425",
      "submitted_at": "2026-02-17T20:22:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22925297913,
      "node_id": "HRFPE_lADOABII587qbpgQzwAAAAVWdEj5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22925297913",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "created_at": "2026-02-19T18:41:48Z"
    },
    {
      "event": "reviewed",
      "id": 3827933130,
      "node_id": "PRR_kwDOABII587kKZ_K",
      "url": null,
      "actor": null,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-19T20:32:40Z",
      "author_association": "MEMBER",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#pullrequestreview-3827933130",
      "submitted_at": "2026-02-19T20:32:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22935705128,
      "node_id": "HRFPE_lADOABII587qbpgQzwAAAAVXExYo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22935705128",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cdecfa733ac658e94f70cb0fbd0fee4a3457d1e6",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/cdecfa733ac658e94f70cb0fbd0fee4a3457d1e6",
      "created_at": "2026-02-20T02:55:43Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22936261442,
      "node_id": "HRFPE_lADOABII587qbpgQzwAAAAVXG5NC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936261442",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1593245b9d398d1ef5ccce05fc14b776b812d41e",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/1593245b9d398d1ef5ccce05fc14b776b812d41e",
      "created_at": "2026-02-20T03:32:14Z"
    },
    {
      "event": "commented",
      "id": 3931406703,
      "node_id": "IC_kwDOABII587qVIFv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3931406703",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:33:44Z",
      "updated_at": "2026-02-20T03:33:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @furszy and @willcl-ark. Taken your suggestions and rebased.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#issuecomment-3931406703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34576"
    },
    {
      "event": "mentioned",
      "id": 22936277954,
      "node_id": "MEE_lADOABII587qbpgQzwAAAAVXG9PC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936277954",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:33:45Z"
    },
    {
      "event": "subscribed",
      "id": 22936277968,
      "node_id": "SE_lADOABII587qbpgQzwAAAAVXG9PQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936277968",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:33:45Z"
    },
    {
      "event": "mentioned",
      "id": 22936277982,
      "node_id": "MEE_lADOABII587qbpgQzwAAAAVXG9Pe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936277982",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:33:46Z"
    },
    {
      "event": "subscribed",
      "id": 22936277994,
      "node_id": "SE_lADOABII587qbpgQzwAAAAVXG9Pq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936277994",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:33:46Z"
    },
    {
      "event": "unsubscribed",
      "id": 22936283597,
      "node_id": "UE_lADOABII587qbpgQzwAAAAVXG-nN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936283597",
      "actor": {
        "login": "nervana21",
        "id": 205626986,
        "node_id": "U_kgDODEGeag",
        "avatar_url": "https://avatars.githubusercontent.com/u/205626986?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nervana21",
        "html_url": "https://github.com/nervana21",
        "followers_url": "https://api.github.com/users/nervana21/followers",
        "following_url": "https://api.github.com/users/nervana21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nervana21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nervana21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nervana21/subscriptions",
        "organizations_url": "https://api.github.com/users/nervana21/orgs",
        "repos_url": "https://api.github.com/users/nervana21/repos",
        "events_url": "https://api.github.com/users/nervana21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nervana21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:34:10Z"
    },
    {
      "event": "labeled",
      "id": 22936287823,
      "node_id": "LE_lADOABII587qbpgQzwAAAAVXG_pP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936287823",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T03:34:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyOTU1NTJjMGE4OTVmYTY1MGMwZTBjNjc2MDBjMzg0ZmRiY2RlNTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3295552c0a895fa650c0e0c67600c384fdbcde50",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3295552c0a895fa650c0e0c67600c384fdbcde50",
      "tree": {
        "sha": "a9ba45f623fcfecf7ff42456c87bcc2ec532fbe2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a9ba45f623fcfecf7ff42456c87bcc2ec532fbe2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a9ba45f623fcfecf7ff42456c87bcc2ec532fbe2\nparent 739f75c0980ef30f676183323f4cb41fb9272b71\nauthor Andrew Toth <andrewstoth@gmail.com> 1770916610 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1771558645 -0500\n\nthreadpool: add SubmitMany\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmX1vUACgkQYAB6/Ik4\nsBh1hA/+PsWgBTjG5JrxwMLpZshdgoGyU/ioZc/sqJp/w2mewltofirrL8YLuUtD\n+1PzbBBnvxFz50hxodHB7MYCx24KYhUj5lzVHawuqAuCz2N3uWMiMjSv+TEOoqng\nv3tRX+jB9XUWRZkbFuFQF6ZS3H2TVscUuY2NwJuM7WNbGy1YqQhELI+BwazKiXaq\nxrYCnL6AEZud50ROzLokNv0YhWhDSL309zu4RyNE0cxqD99EztVEU3afj0pwr0KO\nNgL9e7rqtOPARJ6VjBrb7BcB1mbmDF2AuZX2MTnQf/23I7sygi/g7/0tqGt9hKDb\n3Ef2rxQ/vFqdfWK9/bMxJx7wZiKS0QHCVrRRBlCD2DZoESLEda+4ZJDwZ0LwpVpp\n5oQ3DE4n8Qcwhaj71nX+fQDsgNq5R5cmV1G/DU4V0WtS9HTtDCk1GmMkL3qptgH/\nM8W39/+swiCN5qArKbJ0FlcgQSdKRQxxb6AHUzd0BD9RNTqSlI8a2p9+TQTmPaC3\nG9QmEGBrbedyq+D5WaJ+YfaNrfKuEkxd4b/isKhoSiEP3zM5qDTKEZk6EdV65Cxs\nXGXXOChfaG1e8+HH7KLaJiuo+W2S9Cvc+NjRYUpfE9Z2mR+uhXy3bA9s2E5UnvwO\nvQ/FnJ7FhcPTdQZuFlgFi+ZupV+rJYQSxMSFdOqx00F68hxH37o=\n=Er9s\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/739f75c0980ef30f676183323f4cb41fb9272b71",
          "sha": "739f75c0980ef30f676183323f4cb41fb9272b71",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/739f75c0980ef30f676183323f4cb41fb9272b71"
        }
      ],
      "message": "threadpool: add SubmitMany",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-20T03:37:25Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-12T17:16:50Z"
      },
      "sha": "3295552c0a895fa650c0e0c67600c384fdbcde50"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22936340117,
      "node_id": "HRFPE_lADOABII587qbpgQzwAAAAVXHMaV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22936340117",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3295552c0a895fa650c0e0c67600c384fdbcde50",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/3295552c0a895fa650c0e0c67600c384fdbcde50",
      "created_at": "2026-02-20T03:37:29Z"
    },
    {
      "event": "reviewed",
      "id": 3829793229,
      "node_id": "PRR_kwDOABII587kRgHN",
      "url": null,
      "actor": null,
      "commit_id": "3295552c0a895fa650c0e0c67600c384fdbcde50",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-20T04:00:49Z",
      "author_association": "MEMBER",
      "body": "ACK 3295552c0a895fa650c0e0c67600c384fdbcde50",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#pullrequestreview-3829793229",
      "submitted_at": "2026-02-20T04:00:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2818873385",
      "pull_request_review_id": 3816053425,
      "id": 2818873385,
      "node_id": "PRRC_kwDOABII586oBJgp",
      "diff_hunk": "@@ -167,6 +168,42 @@ class ThreadPool\n         return future;\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * Returns a vector of `std::future`s that provide each task's result or\n+     * propagate any exception it throws, in the same order as the input vector.\n+     * Note: Ignoring the returned futures requires guarding tasks against\n+     * uncaught exceptions, as they would otherwise be silently discarded.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     */\n+    template <class F> [[nodiscard]] EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    auto SubmitMany(std::vector<F>&& fns)\n+    {\n+        using Result = std::invoke_result_t<F&>;\n+        std::vector<std::future<Result>> futures;\n+        if (fns.empty()) return futures;",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 30,
      "commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "original_commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This appears to behave *slightly* differently to `Submit`, which will throw when an empty `fn` is passed into an interrupted pool. Here, if an empty vector of `fn` is passed in, we short-circuit the throw and return an empty vector.\n\nNot sure if this matters, or if we want to prefer a throw or think returning an empty output to an empty input is more sensible.",
      "created_at": "2026-02-17T20:13:19Z",
      "updated_at": "2026-02-17T20:22:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2818873385",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2818873385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829541022",
      "pull_request_review_id": 3827807068,
      "id": 2829541022,
      "node_id": "PRRC_kwDOABII586op16e",
      "diff_hunk": "@@ -167,6 +168,42 @@ class ThreadPool\n         return future;\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * Returns a vector of `std::future`s that provide each task's result or\n+     * propagate any exception it throws, in the same order as the input vector.\n+     * Note: Ignoring the returned futures requires guarding tasks against\n+     * uncaught exceptions, as they would otherwise be silently discarded.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     */\n+    template <class F> [[nodiscard]] EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    auto SubmitMany(std::vector<F>&& fns)\n+    {\n+        using Result = std::invoke_result_t<F&>;\n+        std::vector<std::future<Result>> futures;\n+        if (fns.empty()) return futures;",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 30,
      "commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "original_commit_id": "af1196686f69fc73913efde0cffc3065e8f9610a",
      "in_reply_to_id": 2818873385,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed this check. I don't think anyone will be submitting empty vectors anyways.",
      "created_at": "2026-02-19T18:42:17Z",
      "updated_at": "2026-02-19T18:42:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2829541022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829541022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829645190",
      "pull_request_review_id": 3827933130,
      "id": 2829645190,
      "node_id": "PRRC_kwDOABII586oqPWG",
      "diff_hunk": "@@ -179,6 +179,48 @@ class ThreadPool\n         return {std::move(future)};\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * @param  fns Callables to execute asynchronously.\n+     * @return On success, a vector of futures in input order that provide each\n+     *         task's result or propagate any exception it throws.\n+     *         On failure, an error indicating why the batch was rejected:\n+     *         - SubmitError::Inactive: Pool has no workers (never started or already stopped).\n+     *         - SubmitError::Interrupted: Pool task acceptance has been interrupted.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     *\n+     * Thread-safe: Can be called from any thread, including within submitted\n+     * callables.\n+     *\n+     * @warning Ignoring the returned futures requires guarding tasks against\n+     *          uncaught exceptions, as they would otherwise be silently discarded.\n+     */\n+    template <class F>\n+    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "original_commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why the \"Many\" suffix? the vector argument makes that intent clear. We could overload Submit instead.",
      "created_at": "2026-02-19T19:02:23Z",
      "updated_at": "2026-02-19T20:32:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2829645190",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829645190"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829685647",
      "pull_request_review_id": 3827933130,
      "id": 2829685647,
      "node_id": "PRRC_kwDOABII586oqZOP",
      "diff_hunk": "@@ -179,6 +179,48 @@ class ThreadPool\n         return {std::move(future)};\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * @param  fns Callables to execute asynchronously.\n+     * @return On success, a vector of futures in input order that provide each\n+     *         task's result or propagate any exception it throws.\n+     *         On failure, an error indicating why the batch was rejected:\n+     *         - SubmitError::Inactive: Pool has no workers (never started or already stopped).\n+     *         - SubmitError::Interrupted: Pool task acceptance has been interrupted.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     *\n+     * Thread-safe: Can be called from any thread, including within submitted\n+     * callables.\n+     *\n+     * @warning Ignoring the returned futures requires guarding tasks against\n+     *          uncaught exceptions, as they would otherwise be silently discarded.\n+     */\n+    template <class F>\n+    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "original_commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "General question to think about (no need to answer here):\n\nIs there any use-case for submitting callables with different return types? Because if there is, then we are forced to use a variadic-based approach.",
      "created_at": "2026-02-19T19:11:20Z",
      "updated_at": "2026-02-19T20:32:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2829685647",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829685647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829797688",
      "pull_request_review_id": 3827933130,
      "id": 2829797688,
      "node_id": "PRRC_kwDOABII586oq0k4",
      "diff_hunk": "@@ -179,6 +179,48 @@ class ThreadPool\n         return {std::move(future)};\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * @param  fns Callables to execute asynchronously.\n+     * @return On success, a vector of futures in input order that provide each\n+     *         task's result or propagate any exception it throws.\n+     *         On failure, an error indicating why the batch was rejected:\n+     *         - SubmitError::Inactive: Pool has no workers (never started or already stopped).\n+     *         - SubmitError::Interrupted: Pool task acceptance has been interrupted.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     *\n+     * Thread-safe: Can be called from any thread, including within submitted\n+     * callables.\n+     *\n+     * @warning Ignoring the returned futures requires guarding tasks against\n+     *          uncaught exceptions, as they would otherwise be silently discarded.\n+     */\n+    template <class F>\n+    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        using Result = std::invoke_result_t<F&>;",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 28,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "original_commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "There is a mismatch between the function return type and this result type. I don't think no one sane would do something like:\r\n```\r\nstruct VerySaneCallable {\r\n    int operator()() &  { return 1; } \r\n    double operator()() && { return 2.0; }\r\n};\r\n``` \r\n\r\nBut it would be nice to align them.",
      "created_at": "2026-02-19T19:39:16Z",
      "updated_at": "2026-02-19T23:29:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2829797688",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2829797688"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": 204,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830023447",
      "pull_request_review_id": 3827933130,
      "id": 2830023447,
      "node_id": "PRRC_kwDOABII586orrsX",
      "diff_hunk": "@@ -179,6 +179,48 @@ class ThreadPool\n         return {std::move(future)};\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * @param  fns Callables to execute asynchronously.\n+     * @return On success, a vector of futures in input order that provide each\n+     *         task's result or propagate any exception it throws.\n+     *         On failure, an error indicating why the batch was rejected:\n+     *         - SubmitError::Inactive: Pool has no workers (never started or already stopped).\n+     *         - SubmitError::Interrupted: Pool task acceptance has been interrupted.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     *\n+     * Thread-safe: Can be called from any thread, including within submitted\n+     * callables.\n+     *\n+     * @warning Ignoring the returned futures requires guarding tasks against\n+     *          uncaught exceptions, as they would otherwise be silently discarded.\n+     */\n+    template <class F>\n+    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "original_commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "in_reply_to_id": 2829645190,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Also, some thoughts about this function:\r\n\r\n1) It should accept more types, not only a vector of callables. We don't know what the caller is using std::array/std::vector/std::list (or any other container with a range).\r\n2) It should reject L-values. The caller must std::move the container so they are not copying it.\r\n\r\nA patch that allows both points:\r\n\r\n```diff\r\ndiff --git a/src/util/threadpool.h b/src/util/threadpool.h\r\n--- a/src/util/threadpool.h\r\n+++ b/src/util/threadpool.h\r\n@@ -164,7 +164,10 @@\r\n      *          uncaught exceptions, as they would otherwise be silently discarded.\r\n      */\r\n     template <class F>\r\n-    [[nodiscard]] util::Expected<std::future<std::invoke_result_t<F>>, SubmitError> Submit(F&& fn) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n+    using Future = std::future<std::invoke_result_t<F>>;\r\n+\r\n+    template <class F>\r\n+    [[nodiscard]] util::Expected<Future<F>, SubmitError> Submit(F&& fn) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n     {\r\n         std::packaged_task<std::invoke_result_t<F>()> task{std::forward<F>(fn)};\r\n         auto future{task.get_future()};\r\n@@ -200,11 +203,13 @@\r\n      * @warning Ignoring the returned futures requires guarding tasks against\r\n      *          uncaught exceptions, as they would otherwise be silently discarded.\r\n      */\r\n-    template <class F>\r\n-    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n+    template <class F> using RangeValue = Future<std::ranges::range_value_t<F>>;\r\n+\r\n+    template <std::ranges::sized_range R>\r\n+    requires (!std::is_lvalue_reference_v<R>) // Reject l-values; caller must explicitly std::move the range\r\n+    [[nodiscard]] util::Expected<std::vector<RangeValue<R>>, SubmitError> SubmitMany(R&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n     {\r\n-        using Result = std::invoke_result_t<F&>;\r\n-        std::vector<std::future<Result>> futures;\r\n+        std::vector<RangeValue<R>> futures;\r\n         futures.reserve(fns.size());\r\n \r\n         {\r\n```\r\n\r\nIt would also be nice to expand `submit_many_tasks_complete_successfully` to use a different container, just to exercise the change. Could use `std::array` or `std::list`.",
      "created_at": "2026-02-19T20:32:25Z",
      "updated_at": "2026-02-19T20:33:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2830023447",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2830023447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2831185833",
      "pull_request_review_id": 3829712485,
      "id": 2831185833,
      "node_id": "PRRC_kwDOABII586owHep",
      "diff_hunk": "@@ -179,6 +179,48 @@ class ThreadPool\n         return {std::move(future)};\n     }\n \n+    /**\n+     * @brief Enqueues a batch of tasks for asynchronous execution.\n+     *\n+     * @param  fns Callables to execute asynchronously.\n+     * @return On success, a vector of futures in input order that provide each\n+     *         task's result or propagate any exception it throws.\n+     *         On failure, an error indicating why the batch was rejected:\n+     *         - SubmitError::Inactive: Pool has no workers (never started or already stopped).\n+     *         - SubmitError::Interrupted: Pool task acceptance has been interrupted.\n+     *\n+     * This is more efficient when submitting many tasks at once, since\n+     * the queue lock is only taken once internally and all worker threads are\n+     * notified. For single tasks, Submit() is preferred since only one worker\n+     * thread is notified.\n+     *\n+     * Thread-safe: Can be called from any thread, including within submitted\n+     * callables.\n+     *\n+     * @warning Ignoring the returned futures requires guarding tasks against\n+     *          uncaught exceptions, as they would otherwise be silently discarded.\n+     */\n+    template <class F>\n+    [[nodiscard]] util::Expected<std::vector<std::future<std::invoke_result_t<F>>>, SubmitError> SubmitMany(std::vector<F>&& fns) noexcept EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "path": "src/util/threadpool.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "original_commit_id": "c985542d8c64f05dda0c1ad4adc7e4aa72496ffd",
      "in_reply_to_id": 2829685647,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can we add a new overload if the need arises?",
      "created_at": "2026-02-20T03:34:15Z",
      "updated_at": "2026-02-20T03:34:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34576#discussion_r2831185833",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2831185833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34576"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 204,
      "side": "RIGHT"
    }
  ]
}