{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667",
    "id": 1004475086,
    "node_id": "PR_kwDOABII58473xLO",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/25667",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/25667.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/25667.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/bf9597606166323158bbf631137b82d41f39334f",
    "number": 25667,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "assumeutxo: snapshot initialization",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is part of the [assumeutxo project](https://github.com/bitcoin/bitcoin/projects/11) (parent PR: https://github.com/bitcoin/bitcoin/pull/15606)\r\n\r\n---\r\n\r\nHalf of the replacement for #24232. The original PR grew larger than expected throughout the review process.\r\n\r\nThis change adds the ability to initialize a snapshot-based chainstate during init if one is detected on disk. This is of course unused as of now (aside from in unittests) given that we haven't yet enabled actually loading snapshots. \r\n\r\nDon't be scared! There are some big move-only commits in here.\r\n\r\nAccompanying changes include: \r\n\r\n- moving the snapshot coinsdb directory from being called `chainstate_[base blockhash]` to `chainstate_snapshot`, since we only support one snapshot in use at a time. This simplifies some logic, but it necessitates writing that base blockhash out to a file within the coinsdb dir. See [discussion here](https://github.com/bitcoin/bitcoin/pull/24232#discussion_r832762880).\r\n- adding a simple fix in `FlushBlockFile()` that avoids a crash when attemping to flush to disk before `LoadBlockIndexDB()` is called, which happens when calling `MaybeRebalanceCaches()` during multiple chainstate init.\r\n- improving the unittest to allow testing with on-disk chainstates - necessary to test a simulated restart and re-initialization.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2022-07-21T17:18:54Z",
    "updated_at": "2022-12-23T20:50:07Z",
    "closed_at": "2022-10-13T14:20:57Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-10-13T14:20:57Z",
    "merge_commit_sha": "6912a28f08cabd306cafb93a2be421ae6014778d",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jamesob:2022-07-au.init-2",
      "ref": "2022-07-au.init-2",
      "sha": "bf9597606166323158bbf631137b82d41f39334f",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 42077031,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MjA3NzAzMQ==",
        "name": "bitcoin",
        "full_name": "jamesob/bitcoin",
        "owner": {
          "login": "jamesob",
          "id": 73197,
          "node_id": "MDQ6VXNlcjczMTk3",
          "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jamesob",
          "html_url": "https://github.com/jamesob",
          "followers_url": "https://api.github.com/users/jamesob/followers",
          "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
          "organizations_url": "https://api.github.com/users/jamesob/orgs",
          "repos_url": "https://api.github.com/users/jamesob/repos",
          "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jamesob/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jamesob/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jamesob/bitcoin",
        "archive_url": "https://api.github.com/repos/jamesob/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jamesob/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jamesob/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jamesob/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jamesob/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jamesob/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jamesob/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jamesob/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jamesob/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jamesob/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jamesob/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jamesob/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jamesob/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jamesob/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jamesob/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jamesob/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jamesob/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jamesob/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jamesob/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jamesob/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jamesob/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jamesob/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jamesob/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jamesob/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jamesob/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jamesob/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jamesob/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jamesob/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jamesob/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jamesob/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jamesob/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jamesob/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jamesob/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jamesob/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jamesob/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jamesob/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jamesob/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jamesob/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jamesob/bitcoin/hooks",
        "svn_url": "https://github.com/jamesob/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 252891,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-05-31T19:20:56Z",
        "created_at": "2015-09-07T22:18:03Z",
        "updated_at": "2023-05-05T06:31:51Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "29d540b7ada890dd588c4825d40c27c5e6f20061",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34348,
        "stargazers_count": 69856,
        "watchers_count": 69856,
        "size": 234261,
        "default_branch": "master",
        "open_issues_count": 631,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-09T10:08:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-09T11:33:55Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 662,
    "deletions": 186,
    "changed_files": 19,
    "commits": 13,
    "review_comments": 34,
    "comments": 10
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 7040211534,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAGjoRpO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7040211534",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-21T17:27:53Z"
    },
    {
      "event": "commented",
      "id": 1191798486,
      "node_id": "IC_kwDOABII585HCWbW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191798486",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-21T18:21:12Z",
      "updated_at": "2022-10-11T21:25:57Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26283](https://github.com/bitcoin/bitcoin/pull/26283) (p2p: Fill reconciliation sets and request reconciliation (Erlay) by naumenkogs)\n* [#25977](https://github.com/bitcoin/bitcoin/pull/25977) (refactor: Replace `std::optional<bilingual_str>` with `util::Result` by ryanofsky)\n* [#25862](https://github.com/bitcoin/bitcoin/pull/25862) (refactor, kernel: Remove gArgs accesses from dbwrapper and txdb by ryanofsky)\n* [#25704](https://github.com/bitcoin/bitcoin/pull/25704) (refactor: Remove almost all validation option globals by MarcoFalke)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n* [#23443](https://github.com/bitcoin/bitcoin/pull/23443) (p2p: Erlay support signaling by naumenkogs)\n* [#22663](https://github.com/bitcoin/bitcoin/pull/22663) (dbwrapper: properly destroy objects in case CDBWrapper ctor throws by Crypt-iQ)\n* [#19888](https://github.com/bitcoin/bitcoin/pull/19888) (rpc, test: Improve getblockstats for unspendables by fjahr)\n* [#17786](https://github.com/bitcoin/bitcoin/pull/17786) (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n* [#10443](https://github.com/bitcoin/bitcoin/pull/10443) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1191798486",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "labeled",
      "id": 7040808322,
      "node_id": "LE_lADOABII585OS30nzwAAAAGjqjWC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7040808322",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-21T19:08:04Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "labeled",
      "id": 7040808325,
      "node_id": "LE_lADOABII585OS30nzwAAAAGjqjWF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7040808325",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-21T19:08:04Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7041132512,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAGjryfg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7041132512",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-21T20:06:20Z"
    },
    {
      "event": "reviewed",
      "id": 1047965884,
      "node_id": "PRR_kwDOABII584-drC8",
      "url": null,
      "actor": null,
      "commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 15da925f2951eaadf81aea9d5b67ec1646581d30. All commits here except the last two were directly cherry-picked from previously reviewed #24232.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1047965884",
      "submitted_at": "2022-07-22T14:15:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "reviewed",
      "id": 1057524936,
      "node_id": "PRR_kwDOABII584_CIzI",
      "url": null,
      "actor": null,
      "commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK 15da925f, my comments on #24232 have been addressed.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1057524936",
      "submitted_at": "2022-08-01T16:55:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "commented",
      "id": 1201469507,
      "node_id": "IC_kwDOABII585HnPhD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1201469507",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-01T17:00:38Z",
      "updated_at": "2022-08-01T17:00:54Z",
      "author_association": "MEMBER",
      "body": "@dergoegge I think you could be interested to review the assumeutxo work. In case of future hypothetical integration of libutreexo in Core, I believe there would be intersecting code paths and data structure modified. It might also prepare for future [synergies](https://github.com/jamesob/assumeutxo-docs/tree/master/proposal#how-will-this-work-with-accumulators-uhs-or-utreexo-if-those-things-come-around) between utreexo and assumeutxo.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1201469507",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "mentioned",
      "id": 7103313617,
      "node_id": "MEE_lADOABII585OS30nzwAAAAGnY_bR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7103313617",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-01T17:00:38Z"
    },
    {
      "event": "subscribed",
      "id": 7103313624,
      "node_id": "SE_lADOABII585OS30nzwAAAAGnY_bY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7103313624",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-01T17:00:38Z"
    },
    {
      "event": "commented",
      "id": 1203150779,
      "node_id": "IC_kwDOABII585Htp-7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1203150779",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-02T19:51:52Z",
      "updated_at": "2022-08-02T19:51:52Z",
      "author_association": "MEMBER",
      "body": "Planning on diving deeply into this, thanks for splitting it up @jamesob!\r\n\r\nQuestions from going over the commits:\r\n\r\nQ1:  Is the intended layout:\r\n- `<datadir>`\r\n  - `chainstate`\r\n    - `*.ldb`\r\n    - `*.log`\r\n    - `CURRENT`\r\n    - `LOCK`\r\n    - `MANIFEST-*`\r\n  - `chainstate_snapshot`\r\n    - `base_blockhash`\r\n    - `*.ldb`\r\n    - `*.log`\r\n    - `CURRENT`\r\n    - `LOCK`\r\n    - `MANIFEST-*` \r\n\r\nQ2: The last 6 commits seem to be focused on unit tests, but it seems to me that the functionality being added here is better tested with functional tests. Is there something we need to test here that a functional test won't be able to do?",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1203150779",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "mentioned",
      "id": 7112884393,
      "node_id": "MEE_lADOABII585OS30nzwAAAAGn9gCp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7112884393",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-02T19:51:52Z"
    },
    {
      "event": "subscribed",
      "id": 7112884400,
      "node_id": "SE_lADOABII585OS30nzwAAAAGn9gCw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7112884400",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-02T19:51:52Z"
    },
    {
      "event": "reviewed",
      "id": 1059352598,
      "node_id": "PRR_kwDOABII584_JHAW",
      "url": null,
      "actor": null,
      "commit_id": "aa26b508fb3424169108aade3083a9f771dbcab2",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1059352598",
      "submitted_at": "2022-08-02T19:56:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "labeled",
      "id": 7116894286,
      "node_id": "LE_lADOABII585OS30nzwAAAAGoMzBO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7116894286",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-03T09:23:31Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1223418904,
      "node_id": "IC_kwDOABII585I6-QY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1223418904",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-23T01:47:06Z",
      "updated_at": "2022-08-23T01:47:06Z",
      "author_association": "MEMBER",
      "body": "This PR needs rebase.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1223418904",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7333082766,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAG1FfaO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7333082766",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T19:03:39Z"
    },
    {
      "event": "commented",
      "id": 1238548918,
      "node_id": "IC_kwDOABII585J0sG2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1238548918",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T19:09:21Z",
      "updated_at": "2022-09-06T19:09:21Z",
      "author_association": "MEMBER",
      "body": "Hi all, sorry for the delay. My spirit has been weak the last few months, and I took two weeks off to try and shake the burnout. \r\n\r\nI've addressed all feedback listed here and rebased.\r\n\r\n@dongcarl asks:\r\n\r\n> Q1: Is the intended layout:\r\n\r\nYep, it is.\r\n\r\n> Q2: The last 6 commits seem to be focused on unit tests, but it seems to me that the functionality being added here is better tested with functional tests. Is there something we need to test here that a functional test won't be able to do?\r\n\r\nWe can't have functional tests to exercise this behavior until we add `loadtxoutset` to the RPC interface, which will effectively reveal assumeutxo to end users before all the necessary changes have been made to make it usable. Plus, I think the unittests allow us to more easily express granular testcases and assertions.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1238548918",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "mentioned",
      "id": 7333114587,
      "node_id": "MEE_lADOABII585OS30nzwAAAAG1FnLb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7333114587",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T19:09:22Z"
    },
    {
      "event": "subscribed",
      "id": 7333114590,
      "node_id": "SE_lADOABII585OS30nzwAAAAG1FnLe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7333114590",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T19:09:22Z"
    },
    {
      "event": "unlabeled",
      "id": 7333207189,
      "node_id": "UNLE_lADOABII585OS30nzwAAAAG1F9yV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7333207189",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T19:25:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7333489684,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAG1HCwU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7333489684",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-06T20:14:30Z"
    },
    {
      "event": "reviewed",
      "id": 1098881912,
      "node_id": "PRR_kwDOABII585Bf5t4",
      "url": null,
      "actor": null,
      "commit_id": "f73ca14c2f26b74312d4a43cb7cbc622f12739b7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1098881912",
      "submitted_at": "2022-09-07T09:55:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7340459268,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAG1hoUE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7340459268",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-07T16:20:51Z"
    },
    {
      "event": "commented",
      "id": 1239651688,
      "node_id": "IC_kwDOABII585J45Vo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1239651688",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-07T16:59:39Z",
      "updated_at": "2022-09-07T16:59:46Z",
      "author_association": "MEMBER",
      "body": "utACK 1430518eeced979449c3b031bea02fd707b26d1a",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1239651688",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "reviewed",
      "id": 1105931238,
      "node_id": "PRR_kwDOABII585B6yvm",
      "url": null,
      "actor": null,
      "commit_id": "1430518eeced979449c3b031bea02fd707b26d1a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "left a question. Also, this no longer compiles because boost was removed from libtest_util",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1105931238",
      "submitted_at": "2022-09-13T14:51:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "labeled",
      "id": 7378348415,
      "node_id": "LE_lADOABII585OS30nzwAAAAG3yKl_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7378348415",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T16:34:25Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQxNGJlYmYxMDBhYWFhMjVjNzU1OGVlZWQ4YjVjNTM2ZGE5OTg4NWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d14bebf100aaaa25c7558eeed8b5c536da99885f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d14bebf100aaaa25c7558eeed8b5c536da99885f",
      "tree": {
        "sha": "ccebf20faa56670c317a72ff1af1debe9eba7e42",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ccebf20faa56670c317a72ff1af1debe9eba7e42"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29d540b7ada890dd588c4825d40c27c5e6f20061",
          "sha": "29d540b7ada890dd588c4825d40c27c5e6f20061",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/29d540b7ada890dd588c4825d40c27c5e6f20061"
        }
      ],
      "message": "db: add StoragePath to CDBWrapper/CCoinsViewDB\n\nThis is used in subsequent commits. It allows us to clean up UTXO\nsnapshot chainstate after background validation completes.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T16:38:06Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-02-01T21:22:00Z"
      },
      "sha": "d14bebf100aaaa25c7558eeed8b5c536da99885f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY5ZjE3MzVmMTM5YjZhMWYxYzdmZWE1MDcxN2ZmOTBkYzRiYTJiY2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce",
      "tree": {
        "sha": "e6ac4570d221ba23b3778ffd42a84e04eea24a80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6ac4570d221ba23b3778ffd42a84e04eea24a80"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d14bebf100aaaa25c7558eeed8b5c536da99885f",
          "sha": "d14bebf100aaaa25c7558eeed8b5c536da99885f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d14bebf100aaaa25c7558eeed8b5c536da99885f"
        }
      ],
      "message": "validation: rename snapshot chainstate dir\n\nThis changes the snapshot's leveldb chainstate dir name from\n`chainstate_[blockhash]` to `chainstate_snapshot`. This simplifies\nlater logic that loads snapshot data, and enforces the limitation\nof a single snapshot at any given time.\n\nSince we still need to persis the blockhash of the base block, we\nwrite that out to a file (`chainstate_snapshot/base_blockhash`) for\nlater use during initialization, so that we can reinitialize the\nsnapshot chainstate.\n\nCo-authored-by: Russell Yanofsky <russ@yanofsky.org>",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:12Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-04-20T18:59:02Z"
      },
      "sha": "f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI1MmFiZDFlOGJjNWNkZjQzNjhhZDU1ZTgyN2E4NzMyNDA1MzViMjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/252abd1e8bc5cdf4368ad55e827a873240535b28",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/252abd1e8bc5cdf4368ad55e827a873240535b28",
      "tree": {
        "sha": "2a1c9aa9ab01a4bb5951140d52b5c5720fce5ec9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2a1c9aa9ab01a4bb5951140d52b5c5720fce5ec9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce",
          "sha": "f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce"
        }
      ],
      "message": "init: add utxo snapshot detection\n\nAdd functionality for activating a snapshot-based chainstate if one is\ndetected on-disk.\n\nAlso cautiously initialize chainstate cache usages so that we don't\nsomehow blow past our cache allowances during initialization, then\nrebalance at the end of init.\n\nCo-authored-by: Russell Yanofsky <russ@yanofsky.org>",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:14Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-04-20T21:40:01Z"
      },
      "sha": "252abd1e8bc5cdf4368ad55e827a873240535b28"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0ZDE1OTAzMzEwNmNjNTk1Y2ZhODUyNjk1NjEwYmZlNDE5Yzk4OWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34d159033106cc595cfa852695610bfe419c989c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34d159033106cc595cfa852695610bfe419c989c",
      "tree": {
        "sha": "e6033c96591434dbf83df4ed9cf90e7b17311784",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6033c96591434dbf83df4ed9cf90e7b17311784"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/252abd1e8bc5cdf4368ad55e827a873240535b28",
          "sha": "252abd1e8bc5cdf4368ad55e827a873240535b28",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/252abd1e8bc5cdf4368ad55e827a873240535b28"
        }
      ],
      "message": "add utilities for deleting on-disk leveldb data\n\nUsed in later commits to remove leveldb directories for\n- invalid snapshot chainstates, and\n- background-vaildation chainstates that have finished serving their\n  purpose.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:25Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-04-29T13:02:02Z"
      },
      "sha": "34d159033106cc595cfa852695610bfe419c989c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFkNjdmZjM3N2MyYjI3MWNiNDY4M2RhMmZiMjVmZDI5NTU1N2Y3MzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad67ff377c2b271cb4683da2fb25fd295557f731",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ad67ff377c2b271cb4683da2fb25fd295557f731",
      "tree": {
        "sha": "43dfea6b6b3550913d61ace0c7ebb2be8cd4c55c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43dfea6b6b3550913d61ace0c7ebb2be8cd4c55c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34d159033106cc595cfa852695610bfe419c989c",
          "sha": "34d159033106cc595cfa852695610bfe419c989c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/34d159033106cc595cfa852695610bfe419c989c"
        }
      ],
      "message": "validation: remove snapshot datadirs upon validation failure\n\nIf a UTXO snapshot fails to validate, don't leave the resulting datadir\non disk as this will confuse initialization on next startup and we'll\nget an assertion error.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:25Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-08-17T20:23:02Z"
      },
      "sha": "ad67ff377c2b271cb4683da2fb25fd295557f731"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgxNTNiZDkyNDdkYWQzOTgyZDU0NDg4YmNkYjM5NjA0NzAzMTUyOTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8153bd9247dad3982d54488bcdb3960470315290",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8153bd9247dad3982d54488bcdb3960470315290",
      "tree": {
        "sha": "294d32393ae48eadc6238952ef8e2bfb38a03d0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/294d32393ae48eadc6238952ef8e2bfb38a03d0d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad67ff377c2b271cb4683da2fb25fd295557f731",
          "sha": "ad67ff377c2b271cb4683da2fb25fd295557f731",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ad67ff377c2b271cb4683da2fb25fd295557f731"
        }
      ],
      "message": "blockmanager: avoid undefined behavior during FlushBlockFile\n\nIf we call FlushBlockFile() without having intitialized the block index\nwith LoadBlockIndexDB(), we may be indexing into an empty vector.\n\nSpecifically this is an issue when we call MaybeRebalanceCaches() during\nchainstate init before the block index has been loaded, which calls\nFlushBlockFile().\n\nAlso add an assert to avoid undefined behavior.\n\nCo-authored-by: Russell Yanofsky <russ@yanofsky.org>",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:25Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-02-02T14:47:13Z"
      },
      "sha": "8153bd9247dad3982d54488bcdb3960470315290"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNhMjlkZmJmYjJjMTZhNTBkODU0ZjZmODE0MjhhNjhhYTkxODA1MDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a29dfbfb2c16a50d854f6f81428a68aa9180509",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3a29dfbfb2c16a50d854f6f81428a68aa9180509",
      "tree": {
        "sha": "bb3d2f985b0943276dab01327b3253a69230efaa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bb3d2f985b0943276dab01327b3253a69230efaa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8153bd9247dad3982d54488bcdb3960470315290",
          "sha": "8153bd9247dad3982d54488bcdb3960470315290",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8153bd9247dad3982d54488bcdb3960470315290"
        }
      ],
      "message": "move-only: test: make snapshot chainstate setup reusable\n\nFor use in next commit.\n\nMost easily reviewed with\n`--color-moved=dimmed_zebra --color-moved-ws=allow-indentation-change`.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:25Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-02-08T00:29:52Z"
      },
      "sha": "3a29dfbfb2c16a50d854f6f81428a68aa9180509"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwYjM1N2MyMTVlZDkwMDE0NWJkNzcwNTI1YTM0MWJhMGVkOWMwMjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b357c215ed900145bd770525a341ba0ed9c027",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/00b357c215ed900145bd770525a341ba0ed9c027",
      "tree": {
        "sha": "209fcde588b0c1d29370f5c8ddca01b9ab7cc101",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/209fcde588b0c1d29370f5c8ddca01b9ab7cc101"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a29dfbfb2c16a50d854f6f81428a68aa9180509",
          "sha": "3a29dfbfb2c16a50d854f6f81428a68aa9180509",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3a29dfbfb2c16a50d854f6f81428a68aa9180509"
        }
      ],
      "message": "validation: add ResetChainstates()\n\nNecessary for the following test commit.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:30:28Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-07-21T16:56:47Z"
      },
      "sha": "00b357c215ed900145bd770525a341ba0ed9c027"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNjMzYxMzkxYjhmNTk3MWViM2M3YjYyMGFhN2FkOWI0MzdjYzUxNWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3c361391b8f5971eb3c7b620aa7ad9b437cc515e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3c361391b8f5971eb3c7b620aa7ad9b437cc515e",
      "tree": {
        "sha": "f3aa5d9d5e42694806f51e404119829ae5892086",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f3aa5d9d5e42694806f51e404119829ae5892086"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b357c215ed900145bd770525a341ba0ed9c027",
          "sha": "00b357c215ed900145bd770525a341ba0ed9c027",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/00b357c215ed900145bd770525a341ba0ed9c027"
        }
      ],
      "message": "test: add reset_chainstate parameter for snapshot unittests\n\nThis CreateAndActivateUTXOSnapshot parameter is necessary once we\nperform snapshot completion within ABC, since the existing UpdateTip\ntest will fail because the IBD chain that has generated the snapshot\nwill exceed the base of the snapshot.\n\nBeing able to test snapshots being loaded into a mostly-uninitialized\ndatadir allows for more realistic unittest scenarios.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:31:21Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-02-08T20:56:16Z"
      },
      "sha": "3c361391b8f5971eb3c7b620aa7ad9b437cc515e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxZmM5MjQxYzA4YTAwZjFmNDA3ZjE1MzQ4NTNhNWNkZGJiYzBhMjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51fc9241c08a00f1f407f1534853a5cddbbc0a23",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/51fc9241c08a00f1f407f1534853a5cddbbc0a23",
      "tree": {
        "sha": "1428332067b8c6e09f6ca92922e89cf62ffb704b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1428332067b8c6e09f6ca92922e89cf62ffb704b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3c361391b8f5971eb3c7b620aa7ad9b437cc515e",
          "sha": "3c361391b8f5971eb3c7b620aa7ad9b437cc515e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3c361391b8f5971eb3c7b620aa7ad9b437cc515e"
        }
      ],
      "message": "test: allow on-disk coins and block tree dbs in tests\n\nUsed when testing cleanup of on-disk chainstate data for snapshot\ntestcases. Also necessary for simulating node restart in .cpp tests.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:31:23Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-04-13T19:16:26Z"
      },
      "sha": "51fc9241c08a00f1f407f1534853a5cddbbc0a23"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNjZWQ0ZTczMzZkOTNhMmRjODhlNGE2MWM0OTk0MTg4Nzc2NmJkNzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cced4e7336d93a2dc88e4a61c49941887766bd72",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cced4e7336d93a2dc88e4a61c49941887766bd72",
      "tree": {
        "sha": "a592d65460deb9bdf5687927e4d070f8dd132512",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a592d65460deb9bdf5687927e4d070f8dd132512"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51fc9241c08a00f1f407f1534853a5cddbbc0a23",
          "sha": "51fc9241c08a00f1f407f1534853a5cddbbc0a23",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/51fc9241c08a00f1f407f1534853a5cddbbc0a23"
        }
      ],
      "message": "test: move-only-ish: factor out LoadVerifyActivateChainstate()\n\nin TestingSetup(). This is used in the following commit to test\nreinitializing chainstates after snapshot validation and cleanup.\n\nBest reviewed with `git diff --color-moved=dimmed-zebra`.",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:31:23Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-04-28T14:57:25Z"
      },
      "sha": "cced4e7336d93a2dc88e4a61c49941887766bd72"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU0ZDc5OTUyODY5NmM1ZWRlMzhjMjU3YWZhZmZkMzY3OTE3ZTBkZTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4d799528696c5ede38c257afaffd367917e0de8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e4d799528696c5ede38c257afaffd367917e0de8",
      "tree": {
        "sha": "962c538c46b9163b1312575ffd72c18a996ecbe7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/962c538c46b9163b1312575ffd72c18a996ecbe7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cced4e7336d93a2dc88e4a61c49941887766bd72",
          "sha": "cced4e7336d93a2dc88e4a61c49941887766bd72",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cced4e7336d93a2dc88e4a61c49941887766bd72"
        }
      ],
      "message": "test: add testcases for snapshot initialization",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:31:23Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-02-08T00:56:31Z"
      },
      "sha": "e4d799528696c5ede38c257afaffd367917e0de8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJmOTU5NzYwNjE2NjMyMzE1OGJiZjYzMTEzN2I4MmQ0MWYzOTMzNGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bf9597606166323158bbf631137b82d41f39334f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bf9597606166323158bbf631137b82d41f39334f",
      "tree": {
        "sha": "d90971804a4c08e720ad0320e1e6e2e2a2f4b108",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d90971804a4c08e720ad0320e1e6e2e2a2f4b108"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4d799528696c5ede38c257afaffd367917e0de8",
          "sha": "e4d799528696c5ede38c257afaffd367917e0de8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e4d799528696c5ede38c257afaffd367917e0de8"
        }
      ],
      "message": "doc: add note about snapshot chainstate init",
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-13T17:31:37Z"
      },
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2022-09-06T18:51:38Z"
      },
      "sha": "bf9597606166323158bbf631137b82d41f39334f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7378739412,
      "node_id": "HRFPE_lADOABII585OS30nzwAAAAG3zqDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7378739412",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T17:32:29Z"
    },
    {
      "event": "commented",
      "id": 1245729555,
      "node_id": "IC_kwDOABII585KQFMT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245729555",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T17:36:27Z",
      "updated_at": "2022-09-13T17:36:27Z",
      "author_association": "MEMBER",
      "body": "Thanks for the feedback @MarcoFalke, all addressed.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1245729555",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "mentioned",
      "id": 7378764291,
      "node_id": "MEE_lADOABII585OS30nzwAAAAG3zwID",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7378764291",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T17:36:27Z"
    },
    {
      "event": "subscribed",
      "id": 7378764303,
      "node_id": "SE_lADOABII585OS30nzwAAAAG3zwIP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7378764303",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T17:36:28Z"
    },
    {
      "event": "unlabeled",
      "id": 7379234142,
      "node_id": "UNLE_lADOABII585OS30nzwAAAAG31i1e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7379234142",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-13T18:41:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1246368360,
      "node_id": "IC_kwDOABII585KShJo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246368360",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-14T07:39:06Z",
      "updated_at": "2022-09-14T07:39:06Z",
      "author_association": "MEMBER",
      "body": "utACK bf9597606166323158bbf631137b82d41f39334f",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1246368360",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "reviewed",
      "id": 1109975946,
      "node_id": "PRR_kwDOABII585CKOOK",
      "url": null,
      "actor": null,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK bf9597606\r\n\r\nChanges since last ACK:\r\n- `CChainState` -> `Chainstate`, after #24513\r\n- replacing `CAutoFile` usage in `utxo_snapshot.cpp` by `AutoFile`\r\n- commenting `SNAPSHOT_BLOCKHASH_FILENAME`\r\n- a new informative log L116 in `src/node/chainstate.cpp` \r\n- replacing `InitializeChainstate` by `ActivateExistingSnapshot` in tests\r\n- dropping the optional `snapshot_blockash` argument from `InitializeChainstate` and adding asserts\r\n- commenting `ActivateExistingSnapshot`\r\n- comment, lock simplification and minor code changes in unit tests ",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1109975946",
      "submitted_at": "2022-09-16T00:42:28Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "reviewed",
      "id": 1115846320,
      "node_id": "PRR_kwDOABII585Cgnaw",
      "url": null,
      "actor": null,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK bf9597606166323158bbf631137b82d41f39334f. Changes since last review: rebasing, switching from CAutoFile to AutoFile, adding comments, switching from BOOST_CHECK to Assert in test util, using chainman.GetMutex() in tests, destroying one ChainstateManager before creating a new one in tests",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1115846320",
      "submitted_at": "2022-09-21T17:36:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "reviewed",
      "id": 1064456639,
      "node_id": "PRR_kwDOABII584_clG_",
      "url": null,
      "actor": null,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK bf9597606166323158bbf631137b82d41f39334f",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1064456639",
      "submitted_at": "2022-09-25T20:39:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "commented",
      "id": 1267341291,
      "node_id": "IC_kwDOABII585Lihfr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1267341291",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-04T17:40:20Z",
      "updated_at": "2022-10-04T17:40:20Z",
      "author_association": "MEMBER",
      "body": "I'm counting 4 ACKs here - what more is needed to merge?",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1267341291",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "subscribed",
      "id": 7518818429,
      "node_id": "SE_lADOABII585OS30nzwAAAAHAKBB9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7518818429",
      "actor": {
        "login": "avabrookscrypto",
        "id": 88189662,
        "node_id": "MDQ6VXNlcjg4MTg5NjYy",
        "avatar_url": "https://avatars.githubusercontent.com/u/88189662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/avabrookscrypto",
        "html_url": "https://github.com/avabrookscrypto",
        "followers_url": "https://api.github.com/users/avabrookscrypto/followers",
        "following_url": "https://api.github.com/users/avabrookscrypto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/avabrookscrypto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/avabrookscrypto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/avabrookscrypto/subscriptions",
        "organizations_url": "https://api.github.com/users/avabrookscrypto/orgs",
        "repos_url": "https://api.github.com/users/avabrookscrypto/repos",
        "events_url": "https://api.github.com/users/avabrookscrypto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/avabrookscrypto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-04T17:48:08Z"
    },
    {
      "event": "reviewed",
      "id": 1131227292,
      "node_id": "PRR_kwDOABII585DbSic",
      "url": null,
      "actor": null,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM, I also verified that all commits compile and pass unit tests.\r\nLeft some minor/nit comments.",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1131227292",
      "submitted_at": "2022-10-05T13:04:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "commented",
      "id": 1272019491,
      "node_id": "IC_kwDOABII585L0Xoj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1272019491",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T19:30:50Z",
      "updated_at": "2022-10-07T19:30:50Z",
      "author_association": "MEMBER",
      "body": "I'm going to leave the nits as-is to avoid ACK churn unless maints feel they are blocking merge. I'll be very quick to review any followups that @aureleoules or @fjahr would like to do towards addressing them.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#issuecomment-1272019491",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25667"
    },
    {
      "event": "mentioned",
      "id": 7546025741,
      "node_id": "MEE_lADOABII585OS30nzwAAAAHBxzcN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7546025741",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T19:30:51Z"
    },
    {
      "event": "subscribed",
      "id": 7546025748,
      "node_id": "SE_lADOABII585OS30nzwAAAAHBxzcU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7546025748",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T19:30:51Z"
    },
    {
      "event": "mentioned",
      "id": 7546025761,
      "node_id": "MEE_lADOABII585OS30nzwAAAAHBxzch",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7546025761",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T19:30:51Z"
    },
    {
      "event": "subscribed",
      "id": 7546025771,
      "node_id": "SE_lADOABII585OS30nzwAAAAHBxzcr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7546025771",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T19:30:51Z"
    },
    {
      "event": "reviewed",
      "id": 1135647138,
      "node_id": "PRR_kwDOABII585DsJmi",
      "url": null,
      "actor": null,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK bf9597606166323158bbf631137b82d41f39334f",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1135647138",
      "submitted_at": "2022-10-10T08:30:43Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    },
    {
      "event": "merged",
      "id": 7581878398,
      "node_id": "ME_lADOABII585OS30nzwAAAAHD6kh-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7581878398",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6912a28f08cabd306cafb93a2be421ae6014778d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6912a28f08cabd306cafb93a2be421ae6014778d",
      "created_at": "2022-10-13T14:20:57Z"
    },
    {
      "event": "closed",
      "id": 7581878422,
      "node_id": "CE_lADOABII585OS30nzwAAAAHD6kiW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7581878422",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-13T14:20:57Z"
    },
    {
      "event": "referenced",
      "id": 7648533900,
      "node_id": "REFE_lADOABII585OS30nzwAAAAHH412M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7648533900",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6a24659c52322f7a74cb5bd914916b14458c38d9",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/6a24659c52322f7a74cb5bd914916b14458c38d9",
      "created_at": "2022-10-23T15:26:49Z"
    },
    {
      "event": "reviewed",
      "id": 1229397038,
      "node_id": "PRR_kwDOABII585JRxwu",
      "url": null,
      "actor": null,
      "commit_id": "34d159033106cc595cfa852695610bfe419c989c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#pullrequestreview-1229397038",
      "submitted_at": "2022-12-23T20:43:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/927693341",
      "pull_request_review_id": 1047965884,
      "id": 927693341,
      "node_id": "PRRC_kwDOABII5843S3od",
      "diff_hunk": "@@ -328,6 +354,31 @@ struct SnapshotTestSetup : TestChain100Setup {\n             loaded_snapshot_blockhash);\n         return std::make_tuple(&validation_chainstate, &snapshot_chainstate);\n     }\n+\n+    // Simulate a restart of the node by flushing all state to disk, clearing the\n+    // existing ChainstateManager, and unloading the block index.\n+    //\n+    // @returns a reference to the \"restarted\" ChainstateManager\n+    ChainstateManager& SimulateNodeRestart()\n+    {\n+        ChainstateManager& chainman = *Assert(m_node.chainman);\n+\n+        BOOST_TEST_MESSAGE(\"Simulating node restart\");\n+        {\n+            LOCK(::cs_main);\n+            for (CChainState* cs : chainman.GetAll()) {\n+                cs->ForceFlushStateToDisk();\n+            }\n+            chainman.ResetChainstates();\n+            BOOST_CHECK_EQUAL(chainman.GetAll().size(), 0);\n+            const ChainstateManager::Options chainman_opts{\n+                ::Params(),\n+                static_cast<int64_t(*)()>(::GetTime),\n+            };\n+            m_node.chainman.reset(new ChainstateManager(chainman_opts));",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": 378,
      "original_position": 90,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"test: add testcases for snapshot initialization\" (15da925f2951eaadf81aea9d5b67ec1646581d30)\r\n\r\nMight be a little more robust to destroy the old chainman before creating a new one. I.e. add another blank `chainman.reset()` call before this.",
      "created_at": "2022-07-22T14:11:53Z",
      "updated_at": "2022-07-22T14:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r927693341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/927693341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 382,
      "original_line": 382,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934682927",
      "pull_request_review_id": 1057524936,
      "id": 934682927,
      "node_id": "PRRC_kwDOABII5843tiEv",
      "diff_hunk": "@@ -31,10 +31,15 @@ ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSize\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(options.mempool);\n     chainman.m_total_coinstip_cache = cache_sizes.coins;\n     chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n+    // Load the fully validated chainstate.\n+    chainman.InitializeChainstate(options.mempool);\n+\n+    // Load a chain created from a UTXO snapshot, if any exist.\n+    chainman.DetectSnapshotChainstate(options.mempool);",
      "path": "src/node/chainstate.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Am I correct this is not documented in `design/assumeutxo.md` ? I think this is the case where the user already loaded a snapshot UTXO through `loadtxoutset`, a `chainstate_[SHA256 blockhash of snapshot base block]` has been created and the `bitcoind` process is restarted.\r\n\r\n(can be done in a follow-up)",
      "created_at": "2022-08-01T15:55:01Z",
      "updated_at": "2022-08-01T16:55:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r934682927",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934682927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 58,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934711915",
      "pull_request_review_id": 1057524936,
      "id": 934711915,
      "node_id": "PRRC_kwDOABII5843tpJr",
      "diff_hunk": "@@ -4720,6 +4708,46 @@ const AssumeutxoData* ExpectedAssumeutxo(\n     return nullptr;\n }\n \n+static bool DeleteCoinsDBFromDisk(const fs::path db_path, bool is_snapshot)",
      "path": "src/validation.cpp",
      "position": 48,
      "original_position": 56,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "note for reviewers: for now `is_snapshot` is always true as there is a single usage. This is not the case anymore with the remaining commits of the #24232 patchset.",
      "created_at": "2022-08-01T16:27:20Z",
      "updated_at": "2022-08-01T16:55:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r934711915",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934711915"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 4770,
      "original_line": 4770,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934720426",
      "pull_request_review_id": 1057524936,
      "id": 934720426,
      "node_id": "PRRC_kwDOABII5843trOq",
      "diff_hunk": "@@ -990,6 +984,15 @@ class ChainstateManager\n     /** Produce the necessary coinbase commitment for a block (modifies the hash, don't call for mined blocks). */\n     std::vector<unsigned char> GenerateCoinbaseCommitment(CBlock& block, const CBlockIndex* pindexPrev) const;\n \n+    //! When starting up, search the datadir for a chainstate based on a UTXO\n+    //! snapshot that is in the process of being validated.\n+    bool DetectSnapshotChainstate(CTxMemPool* mempool) EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    void ResetChainstates() EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    CChainState& ActivateExistingSnapshot(CTxMemPool* mempool, uint256 base_blockhash)",
      "path": "src/validation.h",
      "position": null,
      "original_position": 30,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "even if name is explicit, could be documented \"Switch active chainstate to snapshot one\" in case of future refactor to check function correctness (and `DetectSnapshotChainstate` could say it activates the snapshot if any)",
      "created_at": "2022-08-01T16:38:11Z",
      "updated_at": "2022-08-01T16:55:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r934720426",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934720426"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934727831",
      "pull_request_review_id": 1057524936,
      "id": 934727831,
      "node_id": "PRRC_kwDOABII5843ttCX",
      "diff_hunk": "@@ -33,6 +39,30 @@ class SnapshotMetadata\n \n     SERIALIZE_METHODS(SnapshotMetadata, obj) { READWRITE(obj.m_base_blockhash, obj.m_coins_count); }\n };\n+\n+//! The file in the snapshot chainstate dir which stores the base blockhash. This\n+//! is needed to reconstruct snapshot chainstates on init.\n+const fs::path SNAPSHOT_BLOCKHASH_FILENAME{\"base_blockhash\"};",
      "path": "src/node/utxo_snapshot.h",
      "position": 25,
      "original_position": 22,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "comment can be extended \"There should be a single snapshot at any given time\"",
      "created_at": "2022-08-01T16:47:54Z",
      "updated_at": "2022-08-01T16:55:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r934727831",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934727831"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 48,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934731872",
      "pull_request_review_id": 1057524936,
      "id": 934731872,
      "node_id": "PRRC_kwDOABII5843tuBg",
      "diff_hunk": "@@ -990,6 +984,15 @@ class ChainstateManager\n     /** Produce the necessary coinbase commitment for a block (modifies the hash, don't call for mined blocks). */\n     std::vector<unsigned char> GenerateCoinbaseCommitment(CBlock& block, const CBlockIndex* pindexPrev) const;\n \n+    //! When starting up, search the datadir for a chainstate based on a UTXO\n+    //! snapshot that is in the process of being validated.\n+    bool DetectSnapshotChainstate(CTxMemPool* mempool) EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    void ResetChainstates() EXCLUSIVE_LOCKS_REQUIRED(::cs_main);",
      "path": "src/validation.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "note to reviewers: this method is used in the remaining #24232 patchset.",
      "created_at": "2022-08-01T16:52:56Z",
      "updated_at": "2022-08-01T16:55:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r934731872",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934731872"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1054,
      "original_line": 1054,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935973938",
      "pull_request_review_id": 1059352598,
      "id": 935973938,
      "node_id": "PRRC_kwDOABII5843ydQy",
      "diff_hunk": "@@ -4708,6 +4708,46 @@ const AssumeutxoData* ExpectedAssumeutxo(\n     return nullptr;\n }\n \n+static bool DeleteCoinsDBFromDisk(const fs::path db_path, bool is_snapshot)\n+    EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\n+{\n+    AssertLockHeld(::cs_main);\n+\n+    if (is_snapshot) {\n+        fs::path base_blockhash_path = db_path / node::SNAPSHOT_BLOCKHASH_FILENAME;\n+\n+        if (fs::exists(base_blockhash_path)) {\n+            bool removed = fs::remove(base_blockhash_path);\n+            if (!removed) {\n+                LogPrintf(\"[snapshot] failed to remove file %s\\n\",\n+                          fs::PathToString(base_blockhash_path));\n+            }\n+        } else {\n+            LogPrintf(\"[snapshot] snapshot chainstate dir being removed lacks %s file\\n\",\n+                    fs::PathToString(node::SNAPSHOT_BLOCKHASH_FILENAME));\n+        }\n+    }\n+\n+    std::string path_str = fs::PathToString(db_path);\n+    LogPrintf(\"Removing leveldb dir at %s\\n\", path_str);\n+\n+    // We have to destruct before this call leveldb::DB in order to release the db\n+    // lock, otherwise `DestroyDB` will fail. See `leveldb::~DBImpl()`.\n+    const bool destroyed = dbwrapper::DestroyDB(path_str, {}).ok();",
      "path": "src/validation.cpp",
      "position": 73,
      "original_position": 29,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "aa26b508fb3424169108aade3083a9f771dbcab2",
      "in_reply_to_id": null,
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note to other reviewers: the call to `DestroyDB` will actually remove the entire directory, including the blockhash file if it still existed since we place the blockhash file inside what leveldb considers to be its directory, but it's probably better (more polite?) to remove it ourselves just so we can print nice errors.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/de3c46c93818c6e4000175bcdbf7dd332f54768d/src/leveldb/db/db_impl.cc#L1550",
      "created_at": "2022-08-02T19:56:04Z",
      "updated_at": "2022-08-03T01:57:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r935973938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935973938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": 4779,
      "original_start_line": 4720,
      "start_side": "RIGHT",
      "line": 4795,
      "original_line": 4795,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/939706708",
      "pull_request_review_id": 1064456639,
      "id": 939706708,
      "node_id": "PRRC_kwDOABII5844AslU",
      "diff_hunk": "@@ -9,6 +9,7 @@\n #include <coins.h>\n #include <dbwrapper.h>\n #include <sync.h>\n+#include <fs.h>",
      "path": "src/txdb.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "48354fba6353a5fce6593a49caaddf13648d5949",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Can be swapped with `sync.h` above to have alphabetical order",
      "created_at": "2022-08-07T18:38:04Z",
      "updated_at": "2022-09-25T20:39:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r939706708",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/939706708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 12,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964070932",
      "pull_request_review_id": 1098110998,
      "id": 964070932,
      "node_id": "PRRC_kwDOABII5845do4U",
      "diff_hunk": "@@ -328,6 +354,31 @@ struct SnapshotTestSetup : TestChain100Setup {\n             loaded_snapshot_blockhash);\n         return std::make_tuple(&validation_chainstate, &snapshot_chainstate);\n     }\n+\n+    // Simulate a restart of the node by flushing all state to disk, clearing the\n+    // existing ChainstateManager, and unloading the block index.\n+    //\n+    // @returns a reference to the \"restarted\" ChainstateManager\n+    ChainstateManager& SimulateNodeRestart()\n+    {\n+        ChainstateManager& chainman = *Assert(m_node.chainman);\n+\n+        BOOST_TEST_MESSAGE(\"Simulating node restart\");\n+        {\n+            LOCK(::cs_main);\n+            for (CChainState* cs : chainman.GetAll()) {\n+                cs->ForceFlushStateToDisk();\n+            }\n+            chainman.ResetChainstates();\n+            BOOST_CHECK_EQUAL(chainman.GetAll().size(), 0);\n+            const ChainstateManager::Options chainman_opts{\n+                ::Params(),\n+                static_cast<int64_t(*)()>(::GetTime),\n+            };\n+            m_node.chainman.reset(new ChainstateManager(chainman_opts));",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": 378,
      "original_position": 90,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": 927693341,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed, thanks.",
      "created_at": "2022-09-06T19:03:56Z",
      "updated_at": "2022-09-06T19:03:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r964070932",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964070932"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 382,
      "original_line": 382,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072176",
      "pull_request_review_id": 1098112709,
      "id": 964072176,
      "node_id": "PRRC_kwDOABII5845dpLw",
      "diff_hunk": "@@ -31,10 +31,15 @@ ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSize\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(options.mempool);\n     chainman.m_total_coinstip_cache = cache_sizes.coins;\n     chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n+    // Load the fully validated chainstate.\n+    chainman.InitializeChainstate(options.mempool);\n+\n+    // Load a chain created from a UTXO snapshot, if any exist.\n+    chainman.DetectSnapshotChainstate(options.mempool);",
      "path": "src/node/chainstate.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": 934682927,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This wasn't documented, but I've just added some related doc in this PR. There are more doc updates, of course, in the follow-on PR (#25740).",
      "created_at": "2022-09-06T19:05:31Z",
      "updated_at": "2022-09-06T19:05:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r964072176",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 58,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072299",
      "pull_request_review_id": 1098112889,
      "id": 964072299,
      "node_id": "PRRC_kwDOABII5845dpNr",
      "diff_hunk": "@@ -990,6 +984,15 @@ class ChainstateManager\n     /** Produce the necessary coinbase commitment for a block (modifies the hash, don't call for mined blocks). */\n     std::vector<unsigned char> GenerateCoinbaseCommitment(CBlock& block, const CBlockIndex* pindexPrev) const;\n \n+    //! When starting up, search the datadir for a chainstate based on a UTXO\n+    //! snapshot that is in the process of being validated.\n+    bool DetectSnapshotChainstate(CTxMemPool* mempool) EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    void ResetChainstates() EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    CChainState& ActivateExistingSnapshot(CTxMemPool* mempool, uint256 base_blockhash)",
      "path": "src/validation.h",
      "position": null,
      "original_position": 30,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": 934720426,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done, thanks.",
      "created_at": "2022-09-06T19:05:40Z",
      "updated_at": "2022-09-06T19:05:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r964072299",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072299"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072430",
      "pull_request_review_id": 1098113062,
      "id": 964072430,
      "node_id": "PRRC_kwDOABII5845dpPu",
      "diff_hunk": "@@ -33,6 +39,30 @@ class SnapshotMetadata\n \n     SERIALIZE_METHODS(SnapshotMetadata, obj) { READWRITE(obj.m_base_blockhash, obj.m_coins_count); }\n };\n+\n+//! The file in the snapshot chainstate dir which stores the base blockhash. This\n+//! is needed to reconstruct snapshot chainstates on init.\n+const fs::path SNAPSHOT_BLOCKHASH_FILENAME{\"base_blockhash\"};",
      "path": "src/node/utxo_snapshot.h",
      "position": 25,
      "original_position": 22,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "15da925f2951eaadf81aea9d5b67ec1646581d30",
      "in_reply_to_id": 934727831,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2022-09-06T19:05:49Z",
      "updated_at": "2022-09-06T19:05:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r964072430",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964072430"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 48,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964637337",
      "pull_request_review_id": 1098881912,
      "id": 964637337,
      "node_id": "PRRC_kwDOABII5845fzKZ",
      "diff_hunk": "@@ -77,7 +77,9 @@ original chainstate remains in use as active.\n Once the snapshot chainstate is loaded and validated, it is promoted to active\n chainstate and a sync to tip begins. A new chainstate directory is created in the\n datadir for the snapshot chainstate called\n-`chainstate_[SHA256 blockhash of snapshot base block]`.\n+`chainstate_[SHA256 blockhash of snapshot base block]`. When this directory is present",
      "path": "doc/design/assumeutxo.md",
      "position": null,
      "original_position": 5,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "f73ca14c2f26b74312d4a43cb7cbc622f12739b7",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "isn't this outdated now after d59db4ff4b585d2b86b68ea0db206ec1c0cc5022?",
      "created_at": "2022-09-07T09:55:54Z",
      "updated_at": "2022-09-07T09:55:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r964637337",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/964637337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/965061476",
      "pull_request_review_id": 1099495631,
      "id": 965061476,
      "node_id": "PRRC_kwDOABII5845hatk",
      "diff_hunk": "@@ -77,7 +77,9 @@ original chainstate remains in use as active.\n Once the snapshot chainstate is loaded and validated, it is promoted to active\n chainstate and a sync to tip begins. A new chainstate directory is created in the\n datadir for the snapshot chainstate called\n-`chainstate_[SHA256 blockhash of snapshot base block]`.\n+`chainstate_[SHA256 blockhash of snapshot base block]`. When this directory is present",
      "path": "doc/design/assumeutxo.md",
      "position": null,
      "original_position": 5,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "f73ca14c2f26b74312d4a43cb7cbc622f12739b7",
      "in_reply_to_id": 964637337,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, good catch.",
      "created_at": "2022-09-07T16:34:00Z",
      "updated_at": "2022-09-07T16:34:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r965061476",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/965061476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969714945",
      "pull_request_review_id": 1105931238,
      "id": 969714945,
      "node_id": "PRRC_kwDOABII5845zK0B",
      "diff_hunk": "@@ -219,6 +223,12 @@ class CDBWrapper\n \n     std::vector<unsigned char> CreateObfuscateKey() const;\n \n+    //! path to filesystem storage\n+    const fs::path m_path;\n+\n+    //! whether or not the database resides in memory\n+    bool m_is_memory;\n+",
      "path": "src/dbwrapper.h",
      "position": 20,
      "original_position": 20,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "75bb0c54b383e434695bf6bc1d60ef5bcd83cd70",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in 75bb0c54b383e434695bf6bc1d60ef5bcd83cd70:\r\n\r\nCan combine both into\r\n\r\n```cpp\r\n    //! path to filesystem storage or std::nullopt if database resides in memory\r\n    std::optional<fs::path> m_path;",
      "created_at": "2022-09-13T14:37:10Z",
      "updated_at": "2022-09-13T14:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969714945",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969714945"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": 226,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": 231,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969724670",
      "pull_request_review_id": 1105931238,
      "id": 969724670,
      "node_id": "PRRC_kwDOABII5845zNL-",
      "diff_hunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;\n+\n+    FILE* file{fsbridge::fopen(write_to, \"wb\")};\n+    CAutoFile afile{file, SER_DISK, CLIENT_VERSION};",
      "path": "src/node/utxo_snapshot.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d59db4ff4b585d2b86b68ea0db206ec1c0cc5022",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in d59db4ff4b585d2b86b68ea0db206ec1c0cc5022:\r\n\r\n```diff\r\ndiff --git a/src/node/utxo_snapshot.cpp b/src/node/utxo_snapshot.cpp\r\nindex 9c9947df95..2c5885198b 100644\r\n--- a/src/node/utxo_snapshot.cpp\r\n+++ b/src/node/utxo_snapshot.cpp\r\n@@ -25,7 +25,7 @@ bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\r\n     const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;\r\n \r\n     FILE* file{fsbridge::fopen(write_to, \"wb\")};\r\n-    CAutoFile afile{file, SER_DISK, CLIENT_VERSION};\r\n+    AutoFile afile{file};\r\n     if (afile.IsNull()) {\r\n         LogPrintf(\"[snapshot] failed to open base blockhash file for writing: %s\\n\",\r\n                   fs::PathToString(write_to));\r\n@@ -60,7 +60,7 @@ std::optional<uint256> ReadSnapshotBaseBlockhash(fs::path chaindir)\r\n \r\n     uint256 base_blockhash;\r\n     FILE* file{fsbridge::fopen(read_from, \"rb\")};\r\n-    CAutoFile afile{file, SER_DISK, CLIENT_VERSION};\r\n+    AutoFile afile{file};\r\n     if (afile.IsNull()) {\r\n         LogPrintf(\"[snapshot] failed to open base blockhash file for reading: %s\\n\",\r\n             read_from_str);\r\n",
      "created_at": "2022-09-13T14:45:11Z",
      "updated_at": "2022-09-13T14:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969724670",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969724670"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969727651",
      "pull_request_review_id": 1105931238,
      "id": 969727651,
      "node_id": "PRRC_kwDOABII5845zN6j",
      "diff_hunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;",
      "path": "src/node/utxo_snapshot.cpp",
      "position": 26,
      "original_position": 25,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d59db4ff4b585d2b86b68ea0db206ec1c0cc5022",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "question in https://github.com/bitcoin/bitcoin/commit/d59db4ff4b585d2b86b68ea0db206ec1c0cc5022: why can't the blockhash be read from the metadata in the dump?",
      "created_at": "2022-09-13T14:47:36Z",
      "updated_at": "2022-09-13T14:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969727651",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969727651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969731792",
      "pull_request_review_id": 1105931238,
      "id": 969731792,
      "node_id": "PRRC_kwDOABII5845zO7Q",
      "diff_hunk": "@@ -48,7 +62,39 @@ CreateAndActivateUTXOSnapshot(node::NodeContext& node, const fs::path root, F ma\n \n     malleation(auto_infile, metadata);\n \n-    return node.chainman->ActivateSnapshot(auto_infile, metadata, /*in_memory=*/true);\n+    if (reset_chainstate) {\n+        {\n+            // What follows is code to selectively reset chainstate data without\n+            // disturbing the existing BlockManager instance, which is needed to\n+            // recognize the headers chain previously generated by the chainstate we're\n+            // removing. Without those headers, we can't activate the snapshot below.\n+            //\n+            // This is a stripped-down version of node::LoadChainstate which\n+            // preserves the block index.\n+            LOCK(::cs_main);\n+            uint256 gen_hash = node.chainman->ActiveChainstate().m_chain[0]->GetBlockHash();\n+            node.chainman->ResetChainstates();\n+            node.chainman->InitializeChainstate(node.mempool.get());\n+            CChainState& chain = node.chainman->ActiveChainstate();\n+            BOOST_CHECK(chain.LoadGenesisBlock());",
      "path": "src/test/util/chainstate.h",
      "position": null,
      "original_position": 53,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "1430518eeced979449c3b031bea02fd707b26d1a",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            Assert(chain.LoadGenesisBlock());\r\n```\r\n\r\nmight be better to not continue execution when this fails?",
      "created_at": "2022-09-13T14:50:54Z",
      "updated_at": "2022-09-13T14:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969731792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969731792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969732428",
      "pull_request_review_id": 1105931238,
      "id": 969732428,
      "node_id": "PRRC_kwDOABII5845zPFM",
      "diff_hunk": "@@ -48,7 +62,39 @@ CreateAndActivateUTXOSnapshot(node::NodeContext& node, const fs::path root, F ma\n \n     malleation(auto_infile, metadata);\n \n-    return node.chainman->ActivateSnapshot(auto_infile, metadata, /*in_memory=*/true);\n+    if (reset_chainstate) {\n+        {\n+            // What follows is code to selectively reset chainstate data without\n+            // disturbing the existing BlockManager instance, which is needed to\n+            // recognize the headers chain previously generated by the chainstate we're\n+            // removing. Without those headers, we can't activate the snapshot below.\n+            //\n+            // This is a stripped-down version of node::LoadChainstate which\n+            // preserves the block index.\n+            LOCK(::cs_main);\n+            uint256 gen_hash = node.chainman->ActiveChainstate().m_chain[0]->GetBlockHash();\n+            node.chainman->ResetChainstates();\n+            node.chainman->InitializeChainstate(node.mempool.get());\n+            CChainState& chain = node.chainman->ActiveChainstate();\n+            BOOST_CHECK(chain.LoadGenesisBlock());\n+            // These cache values will be corrected shortly in `MaybeRebalanceCaches`.\n+            chain.InitCoinsDB(1 << 20, true, false, \"\");\n+            chain.InitCoinsCache(1 << 20);\n+            chain.CoinsTip().SetBestBlock(gen_hash);\n+            chain.setBlockIndexCandidates.insert(node.chainman->m_blockman.LookupBlockIndex(gen_hash));\n+            chain.LoadChainTip();\n+            node.chainman->MaybeRebalanceCaches();\n+        }\n+        BlockValidationState state;\n+        if (!node.chainman->ActiveChainstate().ActivateBestChain(state)) {\n+            throw std::runtime_error(strprintf(\"ActivateBestChain failed. (%s)\", state.ToString()));\n+        }\n+        BOOST_CHECK_EQUAL(",
      "path": "src/test/util/chainstate.h",
      "position": null,
      "original_position": 66,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "1430518eeced979449c3b031bea02fd707b26d1a",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        Assert(\r\n```",
      "created_at": "2022-09-13T14:51:26Z",
      "updated_at": "2022-09-13T14:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969732428",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969732428"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 92,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969850661",
      "pull_request_review_id": 1106120535,
      "id": 969850661,
      "node_id": "PRRC_kwDOABII5845zr8l",
      "diff_hunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;",
      "path": "src/node/utxo_snapshot.cpp",
      "position": 26,
      "original_position": 25,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d59db4ff4b585d2b86b68ea0db206ec1c0cc5022",
      "in_reply_to_id": 969727651,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "By \"dump\" do you mean the UTXO snapshot? If so, I don't think we can expect users to keep the snapshot on-hand after they've loaded it; it's essentially unnecessary at that point, and multiple GBs.",
      "created_at": "2022-09-13T16:31:51Z",
      "updated_at": "2022-09-13T16:31:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969850661",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969850661"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969857674",
      "pull_request_review_id": 1106130537,
      "id": 969857674,
      "node_id": "PRRC_kwDOABII5845ztqK",
      "diff_hunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;",
      "path": "src/node/utxo_snapshot.cpp",
      "position": 26,
      "original_position": 25,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d59db4ff4b585d2b86b68ea0db206ec1c0cc5022",
      "in_reply_to_id": 969727651,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, makes sense.",
      "created_at": "2022-09-13T16:39:07Z",
      "updated_at": "2022-09-13T16:39:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969857674",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969857674"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969909254",
      "pull_request_review_id": 1106202565,
      "id": 969909254,
      "node_id": "PRRC_kwDOABII5845z6QG",
      "diff_hunk": "@@ -219,6 +223,12 @@ class CDBWrapper\n \n     std::vector<unsigned char> CreateObfuscateKey() const;\n \n+    //! path to filesystem storage\n+    const fs::path m_path;\n+\n+    //! whether or not the database resides in memory\n+    bool m_is_memory;\n+",
      "path": "src/dbwrapper.h",
      "position": 20,
      "original_position": 20,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "75bb0c54b383e434695bf6bc1d60ef5bcd83cd70",
      "in_reply_to_id": 969714945,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think @ryanofsky brought this up earlier; while I agree it would be a good change, it will broaden the scope of this PR quite a bit because all uses of CDBWrapper will have to change, since `path` is currently a required argument. PR is already large, so this could be a follow-up.",
      "created_at": "2022-09-13T17:36:11Z",
      "updated_at": "2022-09-13T17:36:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r969909254",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969909254"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": 226,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": 231,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972513942",
      "pull_request_review_id": 1109968403,
      "id": 972513942,
      "node_id": "PRRC_kwDOABII584592KW",
      "diff_hunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(CChainState& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;\n+\n+    FILE* file{fsbridge::fopen(write_to, \"wb\")};\n+    CAutoFile afile{file, SER_DISK, CLIENT_VERSION};",
      "path": "src/node/utxo_snapshot.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d59db4ff4b585d2b86b68ea0db206ec1c0cc5022",
      "in_reply_to_id": 969724670,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it could be valuable to document `CAutoFile` in `streams.h`, there is no document to explain the diff compared to `AutoFile`. From my understanding, it's a wrapper to handle file pointer, without having to bother with serialization type and versioning.",
      "created_at": "2022-09-16T00:24:43Z",
      "updated_at": "2022-09-16T00:24:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r972513942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972513942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/979440778",
      "pull_request_review_id": 1064456639,
      "id": 979440778,
      "node_id": "PRRC_kwDOABII5846YRSK",
      "diff_hunk": "@@ -76,8 +76,9 @@ original chainstate remains in use as active.\n \n Once the snapshot chainstate is loaded and validated, it is promoted to active\n chainstate and a sync to tip begins. A new chainstate directory is created in the\n-datadir for the snapshot chainstate called\n-`chainstate_[SHA256 blockhash of snapshot base block]`.\n+datadir for the snapshot chainstate called `chainstate_snapshot`. When this directory",
      "path": "doc/design/assumeutxo.md",
      "position": 6,
      "original_position": 6,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "line 117 in this file still mentions `chainstate_[hash]`",
      "created_at": "2022-09-25T18:23:17Z",
      "updated_at": "2022-09-25T20:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r979440778",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/979440778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987780400",
      "pull_request_review_id": 1131227292,
      "id": 987780400,
      "node_id": "PRRC_kwDOABII58464FUw",
      "diff_hunk": "@@ -268,6 +278,14 @@ class CDBWrapper\n         return WriteBatch(batch, fSync);\n     }\n \n+    //! @returns filesystem path to the on-disk data.\n+    std::optional<fs::path> StoragePath() {\n+        if (m_is_memory) {\n+            return {};",
      "path": "src/dbwrapper.h",
      "position": 31,
      "original_position": 31,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "d14bebf100aaaa25c7558eeed8b5c536da99885f",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "d14bebf100aaaa25c7558eeed8b5c536da99885f\r\nalso missing `#include <optional>`\r\n```suggestion\r\n            return std::nullopt;\r\n```",
      "created_at": "2022-10-05T10:41:46Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987780400",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987780400"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 284,
      "original_line": 284,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987823149",
      "pull_request_review_id": 1131227292,
      "id": 987823149,
      "node_id": "PRRC_kwDOABII58464Pwt",
      "diff_hunk": "@@ -524,6 +524,16 @@ void BlockManager::FlushUndoFile(int block_file, bool finalize)\n void BlockManager::FlushBlockFile(bool fFinalize, bool finalize_undo)\n {\n     LOCK(cs_LastBlockFile);\n+\n+    if (m_blockfile_info.size() < 1) {",
      "path": "src/node/blockstorage.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "8153bd9247dad3982d54488bcdb3960470315290",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "8153bd9247dad3982d54488bcdb3960470315290\r\nnit: easier to read and guaranteed constant time\r\n```suggestion\r\n    if (m_blockfile_info.empty()) {\r\n```",
      "created_at": "2022-10-05T11:37:40Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987823149",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987823149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 528,
      "original_line": 528,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987830349",
      "pull_request_review_id": 1131227292,
      "id": 987830349,
      "node_id": "PRRC_kwDOABII58464RhN",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/utxo_snapshot.h>\n+\n+#include <fs.h>\n+#include <logging.h>\n+#include <streams.h>\n+#include <uint256.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+#include <cstdio>\n+#include <optional>\n+\n+namespace node {\n+\n+bool WriteSnapshotBaseBlockhash(Chainstate& snapshot_chainstate)\n+{\n+    AssertLockHeld(::cs_main);\n+    assert(snapshot_chainstate.m_from_snapshot_blockhash);\n+\n+    const std::optional<fs::path> chaindir = snapshot_chainstate.CoinsDB().StoragePath();\n+    assert(chaindir); // Sanity check that chainstate isn't in-memory.\n+    const fs::path write_to = *chaindir / node::SNAPSHOT_BLOCKHASH_FILENAME;\n+\n+    FILE* file{fsbridge::fopen(write_to, \"wb\")};\n+    AutoFile afile{file};\n+    if (afile.IsNull()) {\n+        LogPrintf(\"[snapshot] failed to open base blockhash file for writing: %s\\n\",\n+                  fs::PathToString(write_to));\n+        return false;\n+    }\n+    afile << *snapshot_chainstate.m_from_snapshot_blockhash;\n+\n+    if (afile.fclose() != 0) {\n+        LogPrintf(\"[snapshot] failed to close base blockhash file %s after writing\\n\",\n+                  fs::PathToString(write_to));\n+        return false;\n+    }\n+    return true;\n+}\n+\n+std::optional<uint256> ReadSnapshotBaseBlockhash(fs::path chaindir)",
      "path": "src/node/utxo_snapshot.cpp",
      "position": 45,
      "original_position": 45,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "f9f1735f139b6a1f1c7fea50717ff90dc4ba2bce\r\nnit\r\n```suggestion\r\nstd::optional<uint256> ReadSnapshotBaseBlockhash(const fs::path& chaindir)\r\n```",
      "created_at": "2022-10-05T11:47:28Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987830349",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987830349"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 45,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987833153",
      "pull_request_review_id": 1131227292,
      "id": 987833153,
      "node_id": "PRRC_kwDOABII58464SNB",
      "diff_hunk": "@@ -263,8 +274,12 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     }\n }\n \n-TestChain100Setup::TestChain100Setup(const std::string& chain_name, const std::vector<const char*>& extra_args)\n-    : TestingSetup{chain_name, extra_args}\n+TestChain100Setup::TestChain100Setup(\n+        const std::string& chain_name,\n+        const std::vector<const char*>& extra_args,\n+        const bool coins_db_in_memory,\n+        const bool block_tree_db_in_memory)\n+    : TestingSetup{CBaseChainParams::REGTEST, extra_args, coins_db_in_memory, block_tree_db_in_memory}",
      "path": "src/test/util/setup_common.cpp",
      "position": 55,
      "original_position": 55,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "51fc9241c08a00f1f407f1534853a5cddbbc0a23\r\nI believe it should be like this?\r\n```suggestion\r\n    : TestingSetup{chain_name, extra_args, coins_db_in_memory, block_tree_db_in_memory}\r\n```",
      "created_at": "2022-10-05T11:50:57Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987833153",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987833153"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987836736",
      "pull_request_review_id": 1131227292,
      "id": 987836736,
      "node_id": "PRRC_kwDOABII58464TFA",
      "diff_hunk": "@@ -390,4 +469,59 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_loadblockindex, TestChain100Setup)\n     BOOST_CHECK_EQUAL(cs2.setBlockIndexCandidates.size(), num_indexes);\n }\n \n+//! Ensure that snapshot chainstates initialize properly when found on disk.\n+BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_init, SnapshotTestSetup)\n+{\n+    this->SetupSnapshot();\n+\n+    ChainstateManager& chainman = *Assert(m_node.chainman);\n+\n+    fs::path snapshot_chainstate_dir = *node::FindSnapshotChainstateDir();\n+    BOOST_CHECK(fs::exists(snapshot_chainstate_dir));\n+    BOOST_CHECK_EQUAL(snapshot_chainstate_dir, gArgs.GetDataDirNet() / \"chainstate_snapshot\");\n+\n+    BOOST_CHECK(chainman.IsSnapshotActive());\n+    const uint256 snapshot_tip_hash = WITH_LOCK(chainman.GetMutex(),\n+        return chainman.ActiveTip()->GetBlockHash());\n+\n+    auto all_chainstates = chainman.GetAll();\n+    BOOST_CHECK_EQUAL(all_chainstates.size(), 2);\n+\n+    // Test that simulating a shutdown (resetting ChainstateManager) and then performing\n+    // chainstate reinitializing successfully cleans up the background-validation\n+    // chainstate data, and we end up with a single chainstate that is at tip.\n+    ChainstateManager& chainman_restarted = this->SimulateNodeRestart();\n+\n+    BOOST_TEST_MESSAGE(\"Performing Load/Verify/Activate of chainstate\");\n+\n+    // This call reinitializes the chainstates.\n+    this->LoadVerifyActivateChainstate();\n+\n+    {\n+        LOCK(chainman_restarted.GetMutex());\n+        BOOST_CHECK_EQUAL(chainman_restarted.GetAll().size(), 2);\n+        BOOST_CHECK(chainman_restarted.IsSnapshotActive());\n+        BOOST_CHECK(!chainman_restarted.IsSnapshotValidated());\n+\n+        BOOST_CHECK_EQUAL(chainman_restarted.ActiveTip()->GetBlockHash(), snapshot_tip_hash);\n+        BOOST_CHECK_EQUAL(chainman_restarted.ActiveHeight(), 210);\n+    }\n+\n+    BOOST_TEST_MESSAGE(\n+        \"Ensure we can mine blocks on top of the initialized snapshot chainstate\");\n+    mineBlocks(10);\n+    {\n+        LOCK(chainman_restarted.GetMutex());\n+        BOOST_CHECK_EQUAL(chainman_restarted.ActiveHeight(), 220);\n+\n+        // Background chainstate should be unaware of new blocks on the snapshot\n+        // chainstate.\n+        for (Chainstate* cs : chainman_restarted.GetAll()) {",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": 455,
      "original_position": 455,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "e4d799528696c5ede38c257afaffd367917e0de8\r\nnit\r\n```suggestion\r\n        for (const Chainstate* cs : chainman_restarted.GetAll()) {\r\n```",
      "created_at": "2022-10-05T11:55:45Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987836736",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987836736"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 519,
      "original_line": 519,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987837525",
      "pull_request_review_id": 1131227292,
      "id": 987837525,
      "node_id": "PRRC_kwDOABII58464TRV",
      "diff_hunk": "@@ -4780,6 +4767,46 @@ const AssumeutxoData* ExpectedAssumeutxo(\n     return nullptr;\n }\n \n+static bool DeleteCoinsDBFromDisk(const fs::path db_path, bool is_snapshot)",
      "path": "src/validation.cpp",
      "position": 48,
      "original_position": 48,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "34d159033106cc595cfa852695610bfe419c989c\r\nnit\r\n```suggestion\r\nstatic bool DeleteCoinsDBFromDisk(const fs::path& db_path, bool is_snapshot)\r\n```",
      "created_at": "2022-10-05T11:56:40Z",
      "updated_at": "2022-10-05T13:04:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r987837525",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/987837525"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 4770,
      "original_line": 4770,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056641313",
      "pull_request_review_id": 1229397038,
      "id": 1056641313,
      "node_id": "PRRC_kwDOABII584--xEh",
      "diff_hunk": "@@ -4767,6 +4767,46 @@ const AssumeutxoData* ExpectedAssumeutxo(\n     return nullptr;\n }\n \n+static bool DeleteCoinsDBFromDisk(const fs::path db_path, bool is_snapshot)\n+    EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\n+{\n+    AssertLockHeld(::cs_main);\n+\n+    if (is_snapshot) {\n+        fs::path base_blockhash_path = db_path / node::SNAPSHOT_BLOCKHASH_FILENAME;\n+\n+        if (fs::exists(base_blockhash_path)) {\n+            bool removed = fs::remove(base_blockhash_path);\n+            if (!removed) {\n+                LogPrintf(\"[snapshot] failed to remove file %s\\n\",",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "bf9597606166323158bbf631137b82d41f39334f",
      "original_commit_id": "34d159033106cc595cfa852695610bfe419c989c",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think this code is the intended behavior. This is redundant to the previous check 3 lines up. If `fs::remove` without a second parameter returns `false` it is only because the file does not exist. If it actually fails to remove an existing file it will throw an exception (see https://en.cppreference.com/w/cpp/filesystem/remove).\r\n\r\nIf intended behavior is to only log error and continue `fs::remove` should be wrapped in a try/catch block or passed a `std::error_code`.\r\n\r\nSee https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L326-L332.",
      "created_at": "2022-12-23T20:43:34Z",
      "updated_at": "2022-12-23T20:50:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25667#discussion_r1056641313",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056641313"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25667"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 4781,
      "original_line": 4781,
      "side": "RIGHT"
    }
  ]
}