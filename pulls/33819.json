{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819",
    "id": 2988877111,
    "node_id": "PR_kwDOABII586yJqU3",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33819",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33819.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33819.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/48f57bb35bbdbce509b8ef195de69e2a61a2511e",
    "number": 33819,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: getCoinbase() returns struct instead of raw tx",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "The first commit renames `getCoinbaseTx()` to `getCoinbaseRawTx()` to reflect that it returns a serialised transaction. This does not impact IPC clients, because they use the function name.\r\n\r\nThe second commit then introduces a replacement `getCoinbase()` that provides a struct with everything clients need to construct a coinbase. This avoids clients having to parse and manipulate our dummy transaction.\r\n\r\nDeprecate but don't remove `getCoinbaseRawTx()`, `getCoinbaseCommitment()` and `getWitnessCommitmentIndex()`.\r\n\r\nAfter this change we can drop these deprecated methods, which in turn would allow us to clear the dummy transaction from the `getBlock()` result. But that is left for a followup to keep this PR focussed. See https://github.com/Sjors/bitcoin/pull/106 for an approach.\r\n\r\nExpand the `interface_ipc.py` functional test to document its usage.\r\n\r\nCan be tested using:\r\n- https://github.com/stratum-mining/sv2-tp/pull/59",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2025-11-07T14:30:41Z",
    "updated_at": "2026-01-08T21:13:53Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "c0eeaf02ab817078e27e40025650770b589e2067",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2025/11/coinbase-template",
      "ref": "2025/11/coinbase-template",
      "sha": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 284219,
        "default_branch": "master",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-08T03:54:58Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2026-01-05T04:59:08Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "bd4f4782f23b59f8ddd608e1b5a3690e134f2a0e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38725,
        "stargazers_count": 87585,
        "watchers_count": 87585,
        "size": 301392,
        "default_branch": "master",
        "open_issues_count": 747,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-08T17:51:52Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-08T21:37:07Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 239,
    "deletions": 10,
    "changed_files": 9,
    "commits": 2,
    "review_comments": 76,
    "comments": 37
  },
  "events": [
    {
      "event": "labeled",
      "id": 20789256189,
      "node_id": "LE_lADOABII587WnQtZzwAAAATXIt_9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20789256189",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T14:30:45Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3502895616,
      "node_id": "IC_kwDOABII587QyfIA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3502895616",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T14:30:51Z",
      "updated_at": "2026-01-08T21:13:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33819.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3636441095), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3639214116) |\n| Concept ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517016509) |\n| Approach ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3545336207) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34184](https://github.com/bitcoin/bitcoin/pull/34184) (mining: add cooldown to createNewBlock() immediately after IBD by Sjors)\n* [#33966](https://github.com/bitcoin/bitcoin/pull/33966) (refactor: disentangle miner startup defaults from runtime options by Sjors)\n* [#33965](https://github.com/bitcoin/bitcoin/pull/33965) (mining: fix -blockreservedweight shadows IPC option by Sjors)\n* [#33922](https://github.com/bitcoin/bitcoin/pull/33922) (mining: add getMemoryLoad() and track template non-mempool memory footprint by Sjors)\n* [#33795](https://github.com/bitcoin/bitcoin/pull/33795) (test: Ignore error message give from python because of PYTHON_GIL by kevkevinpal)\n* [#33421](https://github.com/bitcoin/bitcoin/pull/33421) (node: add  `BlockTemplateCache` by ismaelsadeeq)\n* [#32420](https://github.com/bitcoin/bitcoin/pull/32420) (miner: drop dummy extraNonce in coinbase scriptSig for templates requested via IPC by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3502895616",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3502899702,
      "node_id": "IC_kwDOABII587QygH2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3502899702",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T14:31:33Z",
      "updated_at": "2025-11-07T14:32:02Z",
      "author_association": "MEMBER",
      "body": "Working on a matching [sv2-tp](https://github.com/stratum-mining/sv2-tp) pull request. It will first try `getCoinbase()` and if that fails it falls back to `getCoinbaseTx()`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3502899702",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3434498447,
      "node_id": "PRR_kwDOABII587MtkmP",
      "url": null,
      "actor": null,
      "commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-07T14:59:36Z",
      "author_association": "MEMBER",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3434498447",
      "submitted_at": "2025-11-07T14:59:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20792884374,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATXWjyW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20792884374",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/0dfe602281780ade7186feec2201886c4cfd6810",
      "created_at": "2025-11-07T16:52:21Z"
    },
    {
      "event": "commented",
      "id": 3503650032,
      "node_id": "IC_kwDOABII587Q1XTw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3503650032",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T16:55:09Z",
      "updated_at": "2025-11-07T16:55:09Z",
      "author_association": "MEMBER",
      "body": "It's ready for testing with:\r\n- https://github.com/stratum-mining/sv2-tp/pull/59\r\n\r\nI also pushed a small change that switches `ExtractCoinbaseTemplate` to take `CTransactionRef coinbase_tx` as its argument rather than a `CBlockTemplate`. It doesn't really make a difference here, but lets me copy-paste it to `sv2-tp` which doesn't have `CBlockTemplate`. ",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3503650032",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3504056653,
      "node_id": "IC_kwDOABII587Q26lN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3504056653",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T18:11:48Z",
      "updated_at": "2025-11-07T18:11:48Z",
      "author_association": "MEMBER",
      "body": "@plebhash can you try to see if it's easy for you to support both `getCoinbase()` and `getCoinbaseTx()` in https://github.com/stratum-mining/sv2-apps/pull/59, preferring the first and falling back to the latter if it doesn't exist?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3504056653",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20794657558,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATXdUsW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20794657558",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T18:11:50Z"
    },
    {
      "event": "subscribed",
      "id": 20794657694,
      "node_id": "SE_lADOABII587WnQtZzwAAAATXdUue",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20794657694",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-07T18:11:50Z"
    },
    {
      "event": "reviewed",
      "id": 3447995340,
      "node_id": "PRR_kwDOABII587NhDvM",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:08:31Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3447995340",
      "submitted_at": "2025-11-11T13:08:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "reviewed",
      "id": 3448003389,
      "node_id": "PRR_kwDOABII587NhFs9",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:11:01Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448003389",
      "submitted_at": "2025-11-11T13:11:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "commented",
      "id": 3516890731,
      "node_id": "IC_kwDOABII587Rn35r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3516890731",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:16:39Z",
      "updated_at": "2025-11-11T13:16:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "There is no direct C++ unit test for `getCoinbase`/`ExtractCoinbaseTemplate`, would it make sense to add one? Or is the interface test sufficient (`test/functional/interface_ipc.py`)?",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3516890731",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3448101541,
      "node_id": "PRR_kwDOABII587Nhdql",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:34:27Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448101541",
      "submitted_at": "2025-11-11T13:34:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20863087087,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATbiXHv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20863087087",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d926d31603316a10e3210f10480dd02bb34f667a",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/d926d31603316a10e3210f10480dd02bb34f667a",
      "created_at": "2025-11-11T13:38:00Z"
    },
    {
      "event": "reviewed",
      "id": 3448120957,
      "node_id": "PRR_kwDOABII587NhiZ9",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:39:22Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448120957",
      "submitted_at": "2025-11-11T13:39:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "commented",
      "id": 3516981508,
      "node_id": "IC_kwDOABII587RoOEE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3516981508",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:39:55Z",
      "updated_at": "2025-11-11T13:39:55Z",
      "author_association": "MEMBER",
      "body": "> There is no direct C++ unit test\r\n\r\nNo strong opinion on whether we need one.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3516981508",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3448131595,
      "node_id": "PRR_kwDOABII587NhlAL",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:42:00Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448131595",
      "submitted_at": "2025-11-11T13:42:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "reviewed",
      "id": 3448134406,
      "node_id": "PRR_kwDOABII587NhlsG",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:42:44Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448134406",
      "submitted_at": "2025-11-11T13:42:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "reviewed",
      "id": 3448136581,
      "node_id": "PRR_kwDOABII587NhmOF",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:43:14Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448136581",
      "submitted_at": "2025-11-11T13:43:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "reviewed",
      "id": 3448144125,
      "node_id": "PRR_kwDOABII587NhoD9",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:44:48Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448144125",
      "submitted_at": "2025-11-11T13:44:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "reviewed",
      "id": 3448158001,
      "node_id": "PRR_kwDOABII587Nhrcx",
      "url": null,
      "actor": null,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:47:56Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3448158001",
      "submitted_at": "2025-11-11T13:47:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "commented",
      "id": 3517016509,
      "node_id": "IC_kwDOABII587RoWm9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517016509",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:48:15Z",
      "updated_at": "2025-11-11T13:48:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK (d926d31603316a10e3210f10480dd02bb34f667a)\r\n\r\nThe added new method makes sense. The deprecating methods are only being marked in the header comments, they are kept, there is no formal plan for deprecation. But there is a fair plan for switching users, and keeping them is not an extra burden.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517016509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20863331879,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATbjS4n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20863331879",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0528e06a9f4fea0e251f1f87b6100b16dfc45353",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/0528e06a9f4fea0e251f1f87b6100b16dfc45353",
      "created_at": "2025-11-11T13:49:24Z"
    },
    {
      "event": "labeled",
      "id": 20863347503,
      "node_id": "LE_lADOABII587WnQtZzwAAAATbjWsv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20863347503",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:50:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3517024646,
      "node_id": "IC_kwDOABII587RoYmG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517024646",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:50:18Z",
      "updated_at": "2025-11-11T13:50:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19267405324/job/55086515663</sub>\n<sub>LLM reason ( experimental): Python lint failure (ruff): unused import detected in test/interface_ipc.py causing CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517024646",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20863486608,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATbj4qQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20863486608",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b2df78b56afafe59015ee39eb17b1654a2c95f9b",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/b2df78b56afafe59015ee39eb17b1654a2c95f9b",
      "created_at": "2025-11-11T13:55:50Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20863519263,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATbkAof",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20863519263",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8f7da7c3d640532ba0f366a4757331759b910370",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/8f7da7c3d640532ba0f366a4757331759b910370",
      "created_at": "2025-11-11T13:57:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20864759821,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATbovgN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20864759821",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5f3883b7969826df85d97b2b4c475cae6a545f17",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/5f3883b7969826df85d97b2b4c475cae6a545f17",
      "created_at": "2025-11-11T14:51:15Z"
    },
    {
      "event": "commented",
      "id": 3517285109,
      "node_id": "IC_kwDOABII587RpYL1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517285109",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T14:51:16Z",
      "updated_at": "2025-11-11T14:51:16Z",
      "author_association": "MEMBER",
      "body": "CI failed because it runs against master and #33575 has been merged, which added `interruptWait` at position `@11`. I rebased and bumped `getCoinbase()` to `@12`. ",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517285109",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3517687922,
      "node_id": "IC_kwDOABII587Rq6hy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517687922",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T16:18:23Z",
      "updated_at": "2025-11-11T16:18:23Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/19269384275/job/55093373232?pr=33819#step:7:3549:\r\n```bash\r\n Error:  node0 2025-11-11T15:38:48.659039Z [unknown] [validation.cpp:4535] [bool ChainstateManager::ProcessNewBlock(const std::shared_ptr<const CBlock> &, bool, bool, bool *)] [error] ProcessNewBlock: AcceptBlock FAILED (bad-version(0x00000000), rejected nVersion=0x00000000 block) \r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517687922",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3517820699,
      "node_id": "IC_kwDOABII587Rra8b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517820699",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T16:45:52Z",
      "updated_at": "2025-11-11T17:27:26Z",
      "author_association": "MEMBER",
      "body": "Odd, the invalid-version error is happening at the bottom of this block:\r\n\r\n```py\r\nself.log.debug(\"Submit a block with a bad version\")\r\nblock.nVersion = 0\r\nblock.solve()\r\nres = await mining.result.checkBlock(block.serialize(), check_opts)\r\nassert_equal(res.result, False)\r\nassert_equal(res.reason, \"bad-version(0x00000000)\")\r\nres = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\r\nassert_equal(res.result, False)\r\nself.log.debug(\"Submit a valid block\")\r\nblock.nVersion = original_version\r\nblock.solve()\r\nres = await mining.result.checkBlock(block.serialize(), check_opts)\r\nassert_equal(res.result, True)\r\n```\r\n\r\nIt's about the block `nVersion`, not the coinbase, so this PR shouldn't have changed that.\r\n\r\n---\r\n\r\nActually `FAILED (bad-version(0x00000000)` is not the reason the test fails, it's an expected error log message emitted by the node.\r\n\r\nThe actual error is a little further down: `bad-cb-height`, which seems more likely to be related to this PR.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3517820699",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20868677883,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATb3sD7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20868677883",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/80acabaf9353245f0839b18d9552ab39f595eda6",
      "created_at": "2025-11-11T18:01:44Z"
    },
    {
      "event": "commented",
      "id": 3518142243,
      "node_id": "IC_kwDOABII587Rspcj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3518142243",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:02:21Z",
      "updated_at": "2025-11-11T18:18:44Z",
      "author_association": "MEMBER",
      "body": "It turns out that using the `getCoinbase()` result directly in the Python test led to memory management related errors. Parts of the coinbase were dropped by the time of the second `checkBlock()`.\r\n\r\nThis probably happened once I extracted the coinbase specific checks into `build_coinbase_test`, which returns the coinbase `CTransaction` but presumably let go of the `getCoinbase()` result. \r\n\r\nRather than debug (our use of) PyCapnp, I just introduced a `@dataclass` for `CoinbaseTemplateData`, so we fully own (everything in) it.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3518142243",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3518350045,
      "node_id": "IC_kwDOABII587RtcLd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3518350045",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:56:40Z",
      "updated_at": "2025-11-11T18:56:40Z",
      "author_association": "NONE",
      "body": "> @plebhash can you try to see if it's easy for you to support both `getCoinbase()` and `getCoinbaseTx()` in [stratum-mining/sv2-apps#59](https://github.com/stratum-mining/sv2-apps/pull/59), preferring the first and falling back to the latter if it doesn't exist?\r\n\r\n@Sjors we're not using `getCoinbaseTx` on that code\r\n\r\nwe do `getBlock` and that provides everything we need, including relevant coinbase info",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3518350045",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20869771581,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATb73E9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20869771581",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:56:42Z"
    },
    {
      "event": "subscribed",
      "id": 20869771627,
      "node_id": "SE_lADOABII587WnQtZzwAAAATb73Fr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20869771627",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:56:42Z"
    },
    {
      "event": "mentioned",
      "id": 20869771651,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATb73GD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20869771651",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:56:42Z"
    },
    {
      "event": "subscribed",
      "id": 20869771668,
      "node_id": "SE_lADOABII587WnQtZzwAAAATb73GU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20869771668",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T18:56:42Z"
    },
    {
      "event": "unlabeled",
      "id": 20870220826,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAATb9kwa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20870220826",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T19:19:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3520618909,
      "node_id": "IC_kwDOABII587R2GGd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3520618909",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T08:23:26Z",
      "updated_at": "2025-11-12T08:26:16Z",
      "author_association": "MEMBER",
      "body": "> we do getBlock and that provides everything we need\r\n\r\nOk, that's not really how you're supposed to use it :-)\r\n\r\nIt does make a breaking change potentially unpainful.\r\n\r\nHowever there's another gotcha if we remove a method from the interface: there's no gaps allowed in the `.capnp` method numbering. This could be worked around as follows:\r\n\r\n```capnp\r\ninterface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\r\n    destroy @0 (context :Proxy.Context) -> ();\r\n    getBlockHeader @1 (context: Proxy.Context) -> (result: Data);\r\n    getBlock @2 (context: Proxy.Context) -> (result: Data);\r\n    getTxFees @3 (context: Proxy.Context) -> (result: List(Int64));\r\n    getTxSigops @4 (context: Proxy.Context) -> (result: List(Int64));\r\n    getCoinbase @5 (context: Proxy.Context) -> (result: CoinbaseTemplate);\r\n    # getCoinbaseTx @5 (context: Proxy.Context) -> (result: Data);\r\n    # getCoinbaseCommitment @6 (context: Proxy.Context) -> (result: Data);\r\n    getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\r\n    getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\r\n    submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\r\n    waitNext @10 (context: Proxy.Context, options: BlockWaitOptions) -> (result: BlockTemplate);\r\n    interruptWait @6() -> ();\r\n}\r\n```\r\n\r\nSo `@5` is assigned from `getCoinbaseTx` to `getCoinbase`, `@6` is changed from `getCoinbaseCommitment` to `interruptWait` (not in v30 and not yet in an sv2-tp release), but `getWitnessCommitmentIndex` is kept (but still deprecated and made to error).\r\n\r\nBut such an intermediate state seems needlessly confusing, so my first preference is still to not make a breaking change here, my second preference to completely break things, not this intermediate approach.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3520618909",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "labeled",
      "id": 20893687709,
      "node_id": "LE_lADOABII587WnQtZzwAAAATdXF-d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20893687709",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T16:56:26Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3524052025,
      "node_id": "IC_kwDOABII587SDMQ5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3524052025",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T21:44:46Z",
      "updated_at": "2025-11-12T21:56:05Z",
      "author_association": "NONE",
      "body": "> Ok, that's not really how you're supposed to use it :-)\n\nhmm I guess this would indeed be a misuse of the interface if my end goal was to get Coinbase Tx data, and nothing more.\n\nhowever, we **always need** to call `getBlock` specifically because it contains the `header` + `txdata` of the template... and as a byproduct, we happen to also get the Coinbase Tx data, which saves us one extra call to `getCoinbase`/`getCoinbaseTx`\n\nat some point we'll start exploring the so called \"Sv2 JD Coinbase-only mode\", in which case fetching `txdata` might become superfluous (or optional) and we can probably get away with `getBlockHeader` + `getCoinbase`/`getCoinbaseTx`\n\nbut it will take a while before we start exploring this avenue, so for now it's probably better for us to stick with `getBlock` (which I assume will remain stable?), instead of trying to use `getCoinbase`/`getCoinbaseTx` (which seems to be undergoing potentially breaking changes?)",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3524052025",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3454679064,
      "node_id": "PRR_kwDOABII587N6jgY",
      "url": null,
      "actor": null,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-12T21:44:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 80acabaf9353245f0839b18d9552ab39f595eda6. I left various suggestions below but none are critical. This seems like a thoughtful change that should make clients easier to write and be compatible with potential soft forks, without placing a lot of unnecessary requirements on them.\n\n---\n\nre: https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3520618909\n\n> However there's another gotcha if we remove a method from the interface: there's no gaps allowed in the .capnp method numbering. This could be worked around as follows\n\nAgree with you that workaround seems pretty confusing and would not recommend it.\n\nAlso agree with you in https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504862983 that it makes sense to deprecate rather than remove the old methods for the time being.\n\nWhen it actually comes time to remove the methods I think there are three potential approaches:\n\n1 - Bump the Init.makeMining() ordinal and return an error to old clients as soon as they connect. This way we are free to renumber everything in the Mining interface and make other backwards incompatible changes, because old clients will never gain access to the new interface.\n2 - Define some annotation like `$removed` that could return \"method not implemented\" or errors to clients that attempt to call them.\n3 - Just renumber the interface without caring about compatibility with old clients.\n\nI think approach (1) makes sense if there are other backwards incompatible changes we want to make and batch together. Otherwise approach (2) is probably preferable so clients like plebhash's that do not call the removed methods are not affected. Approach (3) is probably best to avoid, but it is an option. I also think it would be fine to keep the deprecated methods around indefinitely, since they are very simple, as long as they are renamed to discourage use in new code.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3454679064",
      "submitted_at": "2025-11-12T21:44:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "review_requested",
      "id": 20899387814,
      "node_id": "RRE_lADOABII587WnQtZzwAAAATds1mm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20899387814",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T21:44:56Z",
      "requested_reviewer": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "convert_to_draft",
      "id": 20940321899,
      "node_id": "CTDE_lADOABII587WnQtZzwAAAATgI_Rr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20940321899",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T10:46:57Z"
    },
    {
      "event": "commented",
      "id": 3532157521,
      "node_id": "IC_kwDOABII587SiHJR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3532157521",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T10:50:31Z",
      "updated_at": "2025-11-14T10:51:03Z",
      "author_association": "MEMBER",
      "body": "From https://github.com/bitcoin/bitcoin/issues/33777#issuecomment-3528997008 I gather that we should not reuse the method ordinals. Since cap&proto doesn't allow gaps, when dropping a deprecated method, it's best to just have them throw an error.\r\n\r\nIn https://github.com/bitcoin/bitcoin/issues/33777#issuecomment-3529071835 @ryanofsky suggested replacing the dummy coinbase with an empty transaction, so that clients are not tempted to use the dummy coinbase via `getBlock()` or `getCoinbaseTx()`.\r\n\r\nI think I'm going to combine these two observations and make this PR a breaking change. Marking as draft for now.\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3532157521",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20940413012,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATgJVhU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20940413012",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T10:50:33Z"
    },
    {
      "event": "subscribed",
      "id": 20940413041,
      "node_id": "SE_lADOABII587WnQtZzwAAAATgJVhx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20940413041",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T10:50:33Z"
    },
    {
      "event": "commented",
      "id": 3532419886,
      "node_id": "IC_kwDOABII587SjHMu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3532419886",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T12:02:09Z",
      "updated_at": "2025-11-14T12:02:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I think I'm going to combine these two observations and make this PR a breaking change. Marking as draft for now.\r\n\r\nThis seems ok, but isn't really what I would suggest. My suggestion would be for this PR to just introduce a new `getCoinBase()` method like it's doing and not remove other methods so existing mining clients do not immediately stop working. The other methods, which are all simple accessors, can easily be removed later.\r\n\r\nAdding a new method now and removing older methods later should make both PR's simpler and more focused. It would also let existing clients continue to work with the latest version of bitcoin while new clients are developed. The second PR removing the deprecated methods could also swap the coinbase TX with an empty one as suggested to avoid getBlock returning it.\r\n\r\nThe only additional thing I might consider doing in this PR (in a second commit) is renaming methods intended to be deprecated, as shown in the diff https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519222031. But even this could be overkill. It should be fine to just add `getCoinBase()` here and remove other ways of accessing coinbase info in a followup. Ok to take a different approach though. Just wanted to clarify my opinion.\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3532419886",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3534061801,
      "node_id": "IC_kwDOABII587SpYDp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3534061801",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-14T18:35:45Z",
      "updated_at": "2025-11-14T18:35:45Z",
      "author_association": "MEMBER",
      "body": "> The second PR removing the deprecated methods could also swap the coinbase TX with an empty one as suggested to avoid getBlock returning it.\r\n\r\nIt makes sense to split this idea over two PR's. I have a local branch already, but still need to split out the commits and get the commit order right.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3534061801",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3539952304,
      "node_id": "IC_kwDOABII587S_2Kw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3539952304",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T04:56:37Z",
      "updated_at": "2025-11-17T04:56:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Deprecate `getCoinbaseTx()` in favor of a new method that provides a struct with everything clients need to construct a coinbase. This is safer than providing a raw dummy coinbase that clients then have to manipulate.\r\n\r\nThat seems backwards to me:\r\n\r\n 1. Constructing a coinbase requires getting various consensus requirements correct, and new requirements may be added in future, such as the nlocktime requirement proposed in bip54. Why not keep all this logic in the node / template generator?\r\n 2. Isn't the point of the sv2 approach that mining software can just worry about adding random data, and leave worrying about consensus requirements up to the node software? The mining protocol is just sending a coinbase_tx_prefix, coinbase_tx_suffix and an extranonce, encoded as a prefix that's already filled in along with how many additional bytes are still available.\r\n\r\nThe only problem with having the template generator construct the coinbase that jumps out at me is that some miners want to have multiple payout addresses or additional OP_RETURN outputs in the coinbase; but isn't that easily solved just by passing those as a vector of scriptPubKey and amounts, rather than just a single `m_options.coinbase_output_script`, and adding them as outputs in `CreateNewBlock()`, then leaving `coinbase_output_script` for whatever funds remain?\r\n\r\nTaking the prefix+suffix+fixed-size-extranonce approach to its logical conclusion would perhaps also mean adding an option for how big the extranonce push should be, and using that instead of the OP_0 dummy, and returning the serialized coinbase tx plus the offset/size where the extranonce data is, but that seems fairly reasonable to me.\r\n\r\nThis doesn't match the [CoinbaseOutputConstraints](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#71-coinbaseoutputconstraints-client-server) and [NewTemplate](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client) messages in the sv2 spec, however it does seem to be a better match for the [AllocateMiningJob.Success](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol/#643-allocateminingjobtokensuccess-server-client) data retrieved from the server (ie, you know the coinbase outputs the pool wants before asking for a template) and the [DeclareMiningJob](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol/#644-declareminingjob-client-server) response (ie, the pool just gets the coinbase tx prefix/suffix). ie, this also seems like a way to simplify the sv2 spec?",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3539952304",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3540669363,
      "node_id": "IC_kwDOABII587TClOz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3540669363",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T09:02:45Z",
      "updated_at": "2025-11-17T09:02:45Z",
      "author_association": "MEMBER",
      "body": "@ajtowns the `CoinbaseTemplate` struct introduced by this PR closely matches the [NewTemplate message](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client) in Stratum v2. The main difference is that the `coinbase_tx_outputs` field of `NewTemplate` uses an ad hoc serialisation that I don't think we should embrace, so I keep the outputs in a vector.\r\n\r\nNote that the code in `ExtractCoinbaseTemplate()` was mostly copied from `sv2-tp`. So the main difference is that we now control how our dummy coinbase is \"mined\" for fields, rather that hope that clients implement it correctly.\r\n\r\n> Constructing a coinbase requires getting various consensus requirements correct, and new requirements may be added in future, such as the nlocktime requirement proposed in bip54.\r\n\r\nUnless we overhaul the sv2 [NewTemplate message](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client) it doesn't help if our code implements such a new rule correctly, because the IPC client (like sv2-tp) might ignore the new field when it takes apart the dummy coinbase.\r\n\r\nIn the short run, bip54 is already taken care of because `coinbase_tx_locktime` is a field (whereas `getblocktemplate` doesn't have this yet).\r\n\r\nIf a future soft fork adds a new consensus required field, we would have to add it to the `CoinbaseTemplate` struct (not a breaking change), inform Stratum v2 protocol designers that they need to add it to `NewTemplate` and any downstream tooling.\r\n\r\nHowever, I can't think of anything that we can add to the coinbase that's not covered by existing fields:\r\n\r\n- version is provided\r\n- a coinbase can only have one input\r\n  - its `prevhash` and `n` are pinned by consensus\r\n  - witness must be a single 32 byte push by consensus, we provide the value\r\n  - `scriptSig` (coinbase) prefix is provided (making it longer than 8 bytes is a breaking change in sv2)\r\n  - sequence is provided\r\n- all mandatory outputs are provided\r\n- lockTime is provided\r\n\r\nI like the idea of replacing `m_options.coinbase_output_script` with a vector. It would allow the client to add merge mining outputs and potentially avoid patching Bitcoin Core.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3540669363",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20981670855,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATimuPH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20981670855",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T09:02:47Z"
    },
    {
      "event": "subscribed",
      "id": 20981670877,
      "node_id": "SE_lADOABII587WnQtZzwAAAATimuPd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20981670877",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T09:02:47Z"
    },
    {
      "event": "commented",
      "id": 3541021155,
      "node_id": "IC_kwDOABII587TD7Hj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3541021155",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T10:29:22Z",
      "updated_at": "2025-11-17T10:29:22Z",
      "author_association": "MEMBER",
      "body": "@plebhash wrote:\r\n\r\n> however, we always need to call getBlock specifically because it contains the header + txdata of the template... and as a byproduct, we happen to also get the Coinbase Tx data, which saves us one extra call to getCoinbase/getCoinbaseTx\r\n\r\nRegarding the header, there's a separate `getHeader()` method.\r\n\r\nIt's true that you need txdata anyway, but you don't need it immediately. You need it when the pool asks using the `RequestTransactionData` message.\r\n\r\nWhen the node and the Template Provider run on the same machine, none of this matters. IPC round trips are very fast and it doesn't matter if you fetch the whole block via `getBlock()` and then extract the header, or if you first do `getHeader()` and do `getBlock()` later.\r\n\r\nThe interface design is mostly based on the Stratum v2 message design and that design in turn is built on the assumption that network latency _does_ matter. So you want to be able to very quickly construct and broadcast the `NewTemplate` message, while taking your time with `RequestTransactionData.Success` and getting a template approved by the pool.\r\n\r\n> but it will take a while before we start exploring this avenue, so for now it's probably better for us to stick with getBlock (which I assume will remain stable?\r\n\r\nThis pull request doesn't break `getBlock()`, but it's possible that v31 will break it by wiping the dummy coinbase (in a followup PR).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3541021155",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20983578317,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATit_7N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20983578317",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T10:29:24Z"
    },
    {
      "event": "subscribed",
      "id": 20983578368,
      "node_id": "SE_lADOABII587WnQtZzwAAAATit_8A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20983578368",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T10:29:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20985820701,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATi2jYd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20985820701",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a78c1e539199b2196318c19be69158dda90494f4",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/a78c1e539199b2196318c19be69158dda90494f4",
      "created_at": "2025-11-17T12:16:26Z"
    },
    {
      "event": "commented",
      "id": 3541552964,
      "node_id": "IC_kwDOABII587TF89E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3541552964",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T12:22:48Z",
      "updated_at": "2025-11-17T14:59:33Z",
      "author_association": "MEMBER",
      "body": "Rebased after #33745.\r\n\r\nI have a branch [2025/11/coinbase-template-break](https://github.com/bitcoin/bitcoin/compare/master...Sjors:bitcoin:2025/11/coinbase-template-break) that shows what I have in mind for dropping the deprecated methods and clearing the dummy coinbase. _Update:_ absorbed into https://github.com/Sjors/bitcoin/pull/106.\r\n\r\nAdditionally we can (deprecate and) drop `getCoinbaseCommitment()`, which that branch does but is somewhat orthogonal. I'll PR that as a followup. I plan to integrate the rest of the branch into https://github.com/Sjors/bitcoin/pull/106, which is a collecting of breaking changes that I have in mind.\r\n\r\nAlso added a release note and addressed the inline comments.\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3541552964",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20986470963,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATi5CIz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20986470963",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1586f7558ec70c5df4981c098535a210b7c51f7a",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1586f7558ec70c5df4981c098535a210b7c51f7a",
      "created_at": "2025-11-17T12:48:54Z"
    },
    {
      "event": "labeled",
      "id": 20986480857,
      "node_id": "LE_lADOABII587WnQtZzwAAAATi5EjZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20986480857",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T12:49:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3541678744,
      "node_id": "IC_kwDOABII587TGbqY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3541678744",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T12:49:43Z",
      "updated_at": "2025-11-17T12:49:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `previous releases`: https://github.com/bitcoin/bitcoin/actions/runs/19429286100/job/55584101649</sub>\n<sub>LLM reason ( experimental): Miner tests aborted (subprocess failure) causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3541678744",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20986636708,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATi5qmk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20986636708",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/eeba240bfa148050eaa588f737814f750bf2101f",
      "created_at": "2025-11-17T12:57:13Z"
    },
    {
      "event": "unlabeled",
      "id": 20986896559,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAATi6qCv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20986896559",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T13:09:57Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3541868920,
      "node_id": "IC_kwDOABII587THKF4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3541868920",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T13:35:14Z",
      "updated_at": "2025-11-17T13:35:14Z",
      "author_association": "MEMBER",
      "body": "Fixed MSan uninitialised `coinbase` complaint, which should also fix the `coinbase.value_remaining == 0' failure.\r\n\r\nI also switched `coinbase.version` from using `CURRENT_VERSION` to `version`.\r\n\r\nUpdated some comments above to make it clear that this PR does deprecate `getCoinbaseTx()` and `getWitnessCommitmentIndex()` and an additional remark about `getCoinbaseCommitment()`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3541868920",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "ready_for_review",
      "id": 20987487823,
      "node_id": "RFRE_lADOABII587WnQtZzwAAAATi86ZP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20987487823",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T13:35:18Z"
    },
    {
      "event": "unlabeled",
      "id": 20987662973,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAATi9lJ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20987662973",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T13:43:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3542515441,
      "node_id": "IC_kwDOABII587TJn7x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3542515441",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T15:38:49Z",
      "updated_at": "2025-11-17T17:27:49Z",
      "author_association": "NONE",
      "body": "@Sjors said:\r\n\r\n> It's true that you need txdata anyway, but you don't need it immediately. You need it when the pool asks using the RequestTransactionData message.\r\n\r\nnot really, we also need it for `NewTemplate.merkle_path`\r\n\r\nthat would be true if there were a `getMerklePath()` method for a given template, in which case we'd be able to do `getHeader()` + `getCoinbase()` + `getMerklePath()`\r\n\r\nbut with the current interface, `getBlock()` is the only way we can properly build a `NewTemplate` message",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3542515441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20990567510,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATjIqRW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20990567510",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T15:39:24Z"
    },
    {
      "event": "subscribed",
      "id": 20990567543,
      "node_id": "SE_lADOABII587WnQtZzwAAAATjIqR3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20990567543",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T15:39:24Z"
    },
    {
      "event": "commented",
      "id": 3543028239,
      "node_id": "IC_kwDOABII587TLlIP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3543028239",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T17:18:36Z",
      "updated_at": "2025-11-17T17:27:56Z",
      "author_association": "NONE",
      "body": "sorry, I should retract the message above\r\n\r\nI just realized there is a `getCoinbaseMerklePath`!\r\n\r\nso indeed, there's no need to do a `getBlock` every time!",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3543028239",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3473938010,
      "node_id": "PRR_kwDOABII587PEBZa",
      "url": null,
      "actor": null,
      "commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-17T17:58:17Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3473938010",
      "submitted_at": "2025-11-17T17:58:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "commented",
      "id": 3543241173,
      "node_id": "IC_kwDOABII587TMZHV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3543241173",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:37Z",
      "updated_at": "2025-11-17T18:10:04Z",
      "author_association": "NONE",
      "body": "> @plebhash can you try to see if it's easy for you to support both `getCoinbase()` and `getCoinbaseTx()` in [stratum-mining/sv2-apps#59](https://github.com/stratum-mining/sv2-apps/pull/59), preferring the first and falling back to the latter if it doesn't exist?\r\n\r\nok @Sjors second answer to this: \r\n\r\ncurrently, [`bitcoin-capnp-types`](https://github.com/2140-dev/bitcoin-capnp-types/blob/master/capnp/mining.capnp) only provides `getCoinbaseTx`\r\n\r\nwe would need @rustaceanrob to replicate what you have on https://github.com/Sjors/bitcoin/blob/2025/11/coinbase-template/src/ipc/capnp/mining.capnp in order to have both options available\r\n\r\nI'm working to remove the unnecessary `getBlock`, but for now the replacement will be `getBlockHeader` + `getCoinbaseTx` + `getCoinbaseMerklePath` (with no `getCoinbase` as first option)\r\n\r\n---\r\n\r\nmoreover, I'm not sure what to expect in case `getCoinbase` doesn't exist? I guess `capnp-rpc` would bubble up some kind of error? does @rustaceanrob know?\r\n\r\n",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3543241173",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 20994152174,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATjWVbu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152174",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:38Z"
    },
    {
      "event": "subscribed",
      "id": 20994152203,
      "node_id": "SE_lADOABII587WnQtZzwAAAATjWVcL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152203",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:39Z"
    },
    {
      "event": "mentioned",
      "id": 20994152228,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATjWVck",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152228",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:39Z"
    },
    {
      "event": "subscribed",
      "id": 20994152253,
      "node_id": "SE_lADOABII587WnQtZzwAAAATjWVc9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152253",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:39Z"
    },
    {
      "event": "mentioned",
      "id": 20994152286,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATjWVde",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152286",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:39Z"
    },
    {
      "event": "subscribed",
      "id": 20994152309,
      "node_id": "SE_lADOABII587WnQtZzwAAAATjWVd1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20994152309",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T18:08:39Z"
    },
    {
      "event": "commented",
      "id": 3545336207,
      "node_id": "IC_kwDOABII587TUYmP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3545336207",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T06:04:05Z",
      "updated_at": "2025-11-18T06:04:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Unless we overhaul the sv2 [NewTemplate message](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client) it doesn't help\r\n\r\nYes, I'm saying I think `NewTemplate` (and `CoinbaseOutputConstraints`) should be overhauled, to avoid sv2 software generating or modifying the coinbase, beyond adjusting the values in a reserved extranonce area of known/fixed size. (Parsing the coinbase tx is still necessary for the pool to determine whether to accept a `DeclareMiningJob` message, and I don't think that can be avoided)\r\n\r\nIf there's better ways (simpler, more robust, more forward compatible) of designing the APIs we offer, we shouldn't avoid offering a better API because of a flawed standard.\r\n\r\nOTOH, overhauling `NewTemplate` shouldn't be a blocker for supporting sv2 efficiently, so Approach ACK for this PR in the meantime.\r\n\r\n> However, I can't think of anything that we can add to the coinbase that's not covered by existing fields:\r\n\r\nYeah; it seems pretty robust, but just as `getblocktemplate` didn't think of everything, I don't think \"I can't think of anything missing\" should really be the goal here.\r\n\r\n> I like the idea of replacing `m_options.coinbase_output_script` with a vector. It would allow the client to add merge mining outputs and potentially avoid patching Bitcoin Core.\r\n\r\nYep. :+1:",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3545336207",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3546154209,
      "node_id": "IC_kwDOABII587TXgTh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3546154209",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T08:26:15Z",
      "updated_at": "2025-11-18T08:26:15Z",
      "author_association": "MEMBER",
      "body": "> OTOH, overhauling NewTemplate shouldn't be a blocker for supporting sv2 efficiently, so Approach ACK for this PR in the meantime.\r\n\r\nThanks, I opened https://github.com/stratum-mining/sv2-spec/issues/167 to continue that discussion.\r\n\r\n>> replacing m_options.coinbase_output_script with a vector.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/33890",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3546154209",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21007619982,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAATkJteO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21007619982",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "created_at": "2025-11-18T08:41:00Z"
    },
    {
      "event": "commented",
      "id": 3546216186,
      "node_id": "IC_kwDOABII587TXvb6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3546216186",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T08:42:21Z",
      "updated_at": "2025-11-18T08:42:21Z",
      "author_association": "MEMBER",
      "body": "I slightly simplified `ExtractCoinbaseTemplate` by having it assume that the dummy is always the first output. Also TIL about `| std::views::drop(1)`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3546216186",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3546665825,
      "node_id": "IC_kwDOABII587TZdNh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3546665825",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T10:11:58Z",
      "updated_at": "2025-11-18T10:11:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> moreover, I'm not sure what to expect in case getCoinbase doesn't exist? I guess capnp-rpc would bubble up some kind of error? does @rustaceanrob know?\r\n\r\nI would assume a new client requesting `getCoinbase` of an old server would result in the [`ErrorKind::Unimplemented`](https://docs.rs/capnp/0.23.0/capnp/enum.ErrorKind.html). In the case of this response then a `getCoinbaseTx` could be used as a fallback.\r\n\r\nAs far as updating the `capnp` files in the Rust types, I can do so on a development branch that you may point your `toml` at.",
      "user": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3546665825",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 21010287858,
      "node_id": "MEE_lADOABII587WnQtZzwAAAATkT4zy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21010287858",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T10:11:59Z"
    },
    {
      "event": "subscribed",
      "id": 21010287885,
      "node_id": "SE_lADOABII587WnQtZzwAAAATkT40N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21010287885",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T10:11:59Z"
    },
    {
      "event": "commented",
      "id": 3570652179,
      "node_id": "IC_kwDOABII587U09QT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3570652179",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T12:53:08Z",
      "updated_at": "2025-11-24T14:55:56Z",
      "author_association": "MEMBER",
      "body": "~If the important but breaking change in #33936 lands, then I might as well add the `getCoinbaseTx()` deletion here. It would be still be a separate commit, because it's useful to demonstrate equivalence before deletion.~",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3570652179",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "reviewed",
      "id": 3527399289,
      "node_id": "PRR_kwDOABII587SP9d5",
      "url": null,
      "actor": null,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T15:39:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 73553c809ef6517839c4d1b02b657e6fa401f8a8. I left some minor suggestions below but they are not important. Thanks for responding to all the previous ones.\n\nAJ's bigger suggestions https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3539952304 and https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3545336207 definitely make a lot of sense to me, and would seem be a simpler & more future-proof direction to go in. They seem directionally compatible with this change, though. They could be implemented by expanding the `BlockCreateOptions` struct and changing the `CoinbaseTemplate` struct to have `prefix` and `suffix` fields instead of `version`, `sequence`, etc fields, I think.\n\nI do have one question about the implementation of this PR, not the interface: It seems like the `ExtractCoinbaseTemplate` function would be unnecessary if you would add the \n`CoinbaseTemplate m_coinbase_template` field to the `CBlockTemplate` class instead of the `BlockTemplateImpl` class. Then the `BlockAssembler::CreateNewBlock` method could just fill the coinbase template out directly and not require another method to extract it later. Wonder if you considered this or think it might be a good idea.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3527399289",
      "submitted_at": "2025-12-02T15:39:48Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "review_requested",
      "id": 21309568925,
      "node_id": "RRE_lADOABII587WnQtZzwAAAAT2Jjed",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21309568925",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T15:39:55Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21331808700,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAT3eZG8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21331808700",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "created_at": "2025-12-03T12:36:19Z"
    },
    {
      "event": "renamed",
      "id": 21331817438,
      "node_id": "RTE_lADOABII587WnQtZzwAAAAT3ebPe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21331817438",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:36:47Z",
      "rename": {
        "from": "mining: add getCoinbase()",
        "to": "mining: getCoinbase() returns struct instead of raw tx "
      }
    },
    {
      "event": "renamed",
      "id": 21331823255,
      "node_id": "RTE_lADOABII587WnQtZzwAAAAT3ecqX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21331823255",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:37:06Z",
      "rename": {
        "from": "mining: getCoinbase() returns struct instead of raw tx ",
        "to": "mining: getCoinbase() returns struct instead of raw tx"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21332015657,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAT3fLop",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21332015657",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "60f74dd315811db427797a606f4b5611a8c59993",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/60f74dd315811db427797a606f4b5611a8c59993",
      "created_at": "2025-12-03T12:47:08Z"
    },
    {
      "event": "labeled",
      "id": 21332026763,
      "node_id": "LE_lADOABII587WnQtZzwAAAAT3fOWL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21332026763",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:47:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3606698591,
      "node_id": "IC_kwDOABII587W-dpf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3606698591",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:47:52Z",
      "updated_at": "2025-12-03T12:47:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `Windows-cross to x86_64, msvcrt`: https://github.com/bitcoin/bitcoin/actions/runs/19894055796/job/57019808575</sub>\n<sub>LLM reason ( experimental): C++ compilation failed because -Werror promoted missing-field-initializers in CoinbaseTxTemplate (miner.cpp), turning a warning into an error.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3606698591",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "commented",
      "id": 3606701833,
      "node_id": "IC_kwDOABII587W-ecJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3606701833",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:48:50Z",
      "updated_at": "2025-12-03T12:48:50Z",
      "author_association": "MEMBER",
      "body": "I got rid of `ExtractCoinbaseTemplate` in favour of having `CreateNewBlock()` produce the `CoinbaseTemplate` right as it constructs the dummy template. It's then stored on the `CBlockTemplate` as suggested by @ryanofsky.\r\n\r\nSince \"coinbase\" refers to the scriptSig of the coinbase _transaction_, I renamed some things:\r\n- `CoinbaseTemplate` -> `CoinbaseTxTemplate`\r\n- `getCoinbaseTx()` to `getCoinbaseRawTx()` (IPC clients are not affected by renames)\r\n- `getCoinbase()` to `getCoinbaseTx()`\r\n\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3606701833",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 21332049055,
      "node_id": "MEE_lADOABII587WnQtZzwAAAAT3fTyf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21332049055",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:48:52Z"
    },
    {
      "event": "subscribed",
      "id": 21332049095,
      "node_id": "SE_lADOABII587WnQtZzwAAAAT3fTzH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21332049095",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T12:48:52Z"
    },
    {
      "event": "unlabeled",
      "id": 21332992164,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAAT3i6Ck",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21332992164",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T13:32:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3536150722,
      "node_id": "PRR_kwDOABII587SxWDC",
      "url": null,
      "actor": null,
      "commit_id": "60f74dd315811db427797a606f4b5611a8c59993",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T17:30:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 60f74dd315811db427797a606f4b5611a8c59993. New comments and renaming both seem great, and it is nice to get rid of the extract function. PR feels much more straightforward now.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3536150722",
      "submitted_at": "2025-12-03T17:30:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21352576849,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAT4tndR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21352576849",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5761dac2f5481c27550483279a007c2b850bc990",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/5761dac2f5481c27550483279a007c2b850bc990",
      "created_at": "2025-12-04T08:27:31Z"
    },
    {
      "event": "commented",
      "id": 3610851815,
      "node_id": "IC_kwDOABII587XOTnn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3610851815",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T08:28:02Z",
      "updated_at": "2025-12-04T08:28:02Z",
      "author_association": "MEMBER",
      "body": "Applied both suggestions from @ryanofsky: https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3536150722",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3610851815",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "mentioned",
      "id": 21352587375,
      "node_id": "MEE_lADOABII587WnQtZzwAAAAT4tqBv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21352587375",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T08:28:03Z"
    },
    {
      "event": "subscribed",
      "id": 21352587394,
      "node_id": "SE_lADOABII587WnQtZzwAAAAT4tqCC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21352587394",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T08:28:03Z"
    },
    {
      "event": "reviewed",
      "id": 3541130613,
      "node_id": "PRR_kwDOABII587TEV11",
      "url": null,
      "actor": null,
      "commit_id": "5761dac2f5481c27550483279a007c2b850bc990",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-04T17:16:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 5761dac2f5481c27550483279a007c2b850bc990, with the two suggestions applied since last review.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3541130613",
      "submitted_at": "2025-12-04T17:16:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "labeled",
      "id": 21401381634,
      "node_id": "LE_lADOABII587WnQtZzwAAAAT7nysC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401381634",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T14:43:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21422544132,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAT84hUE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21422544132",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1bd6cae51fedeff62755e03ddcb9346b868f6d83",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1bd6cae51fedeff62755e03ddcb9346b868f6d83",
      "created_at": "2025-12-08T10:14:52Z"
    },
    {
      "event": "commented",
      "id": 3626113055,
      "node_id": "IC_kwDOABII587YIhgf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3626113055",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T10:15:01Z",
      "updated_at": "2025-12-08T10:15:01Z",
      "author_association": "MEMBER",
      "body": "Trivial rebase after #29641.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3626113055",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "unlabeled",
      "id": 21423740179,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAAT89FUT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21423740179",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T11:05:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3553451082,
      "node_id": "PRR_kwDOABII587TzVxK",
      "url": null,
      "actor": null,
      "commit_id": "1bd6cae51fedeff62755e03ddcb9346b868f6d83",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T18:19:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 1bd6cae51fedeff62755e03ddcb9346b868f6d83. Just rebased with no changes, to avoid trivial merge conflict.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3553451082",
      "submitted_at": "2025-12-08T18:19:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "labeled",
      "id": 21595702764,
      "node_id": "LE_lADOABII587WnQtZzwAAAAUHNEXs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21595702764",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T15:28:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3588964247,
      "node_id": "PRR_kwDOABII587V6z-X",
      "url": null,
      "actor": null,
      "commit_id": "1bd6cae51fedeff62755e03ddcb9346b868f6d83",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-17T18:03:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 1bd6cae51fedeff62755e03ddcb9346b868f6d83. Just rebasing again since last review to avoid minor conflict\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3588964247",
      "submitted_at": "2025-12-17T18:03:49Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1OWI0Y2RiNTc3MjkxN2VlMTNlNDg1NTJkNTE2NjIxNjAxMDRiNjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d59b4cdb5772917ee13e48552d51662160104b62",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d59b4cdb5772917ee13e48552d51662160104b62",
      "tree": {
        "sha": "ccf9d679e069b75a3d2135da7ccdb01caccf8edb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ccf9d679e069b75a3d2135da7ccdb01caccf8edb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ccf9d679e069b75a3d2135da7ccdb01caccf8edb\nparent 516ae5ede44a8a6abc59e90f9d89913e254524f4\nauthor Sjors Provoost <sjors@sprovoost.nl> 1764763287 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766136400 +0800\n\nmining: rename getCoinbaseTx() to ..RawTx()\n\nThis frees up the name getCoinbaseTx() for the next commit.\n\nChanging a function name does not impact IPC clients, as they only\nconsider the function signature and sequence number.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFGlQACgkQV/+b28ww\nEAnKgA//TIg7IL660d4ImZ8jx3kwJszJBBqAcyTb17mUt151mAbYMFBmfnlgX3hZ\nMC3oVe5xTZYfJvg89eiHUxA5O40IBUHPxIEcUfltm5+lXG975I0maQdmaxRAf/lF\nnqk/OOX2Ldb7Y1IgCX92NvTYEUptGlZQAclPTWjwU2/NMfikSzkVTmdUVztygFbp\nr7i2aURzOi6JPOlrx/UyTJIeA3zqpjJmBKAcussgJQsvEtggbtaO/ZlxBNhBCpMc\nUC5CA6N2UOfkEyKmvJ2vBmr40b/wz5MWDqYoSpM11/a57BYlk+p1DVEiyP+CmP1X\nHK4JXsTkC1fIoDZidbrC6EbDK6bgUDakpYeIdB15VzVS+SGZwu4FfmM5pEMMMNYm\nl+Bmq603Rder61+XmvRc7elHiygTOl1evhuyt3Xg60Mjdm2QL+HYWu5UnvAbM1sx\neuBZG+//OiMC89bybbOjZgI/ryZYF4fCfHd14GC6kkitcy406Tk0yRR7yWHBs8Vp\naqILFg0D0q7b+SHzw6iPk0vF+cxegTMICYsRS2lhIkLmLGBnA+j0H5CK8BZhQVzo\n/c4gDfyFVMeFIvDgbKapAwAjuwcCLLW9qq4kRyd/y/OwvzmqgfSXpFlat0EVDb71\nPixLlXO1lVdVf/CYzBjk6Xdlw61+g5YaeQW4Upu/si6slDjyxDI=\n=ElmN\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/516ae5ede44a8a6abc59e90f9d89913e254524f4",
          "sha": "516ae5ede44a8a6abc59e90f9d89913e254524f4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/516ae5ede44a8a6abc59e90f9d89913e254524f4"
        }
      ],
      "message": "mining: rename getCoinbaseTx() to ..RawTx()\n\nThis frees up the name getCoinbaseTx() for the next commit.\n\nChanging a function name does not impact IPC clients, as they only\nconsider the function signature and sequence number.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T09:26:40Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-03T12:01:27Z"
      },
      "sha": "d59b4cdb5772917ee13e48552d51662160104b62"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21666653708,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAULbuYM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21666653708",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "created_at": "2025-12-19T09:43:02Z"
    },
    {
      "event": "commented",
      "id": 3674322226,
      "node_id": "IC_kwDOABII587bAbUy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3674322226",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T09:43:29Z",
      "updated_at": "2025-12-19T09:43:29Z",
      "author_association": "MEMBER",
      "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/34003.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3674322226",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33819"
    },
    {
      "event": "unlabeled",
      "id": 21667374984,
      "node_id": "UNLE_lADOABII587WnQtZzwAAAAULeeeI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21667374984",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T10:17:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3624915228,
      "node_id": "PRR_kwDOABII587YD9Ec",
      "url": null,
      "actor": null,
      "commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-04T11:50:21Z",
      "author_association": "MEMBER",
      "body": "ACK 979805b81c81db4c83cf5d9ed716a5c88bf469b0\n\nThe commit message is helpful for my review. \n\nI still prefer that deprecated methods be removed once we have a replacement for them, for 1. better hygiene for the codebase. 2 Ensures we only maintain what should be used and our perceived valid approach for IPC clients. 3. Will prevent naive users from using deprecated method.\n\nHowever, others seem to prefer deprecating them first, then batch-removing them later.\n\nhttps://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3454679064 Option 2 is my second preferred option. The method names and numbering are kept, but we return an error when someone tries to use them\nIt would allow us to remove the implementation code and tests while maintaining the methods and numbering for the transition period (can even be kept indefinitely since no implementation and test to maintain, could also be deleted in batch).\n\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3624915228",
      "submitted_at": "2026-01-04T11:50:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "review_requested",
      "id": 21841004849,
      "node_id": "RRE_lADOABII587WnQtZzwAAAAUV00kx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21841004849",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-04T11:50:27Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ4ZjU3YmIzNWJiZGJjZTUwOWI4ZWYxOTVkZTY5ZTJhNjFhMjUxMWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "tree": {
        "sha": "c1b7b1ed5405910d1436e7f46873a70398a62586",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1b7b1ed5405910d1436e7f46873a70398a62586"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c1b7b1ed5405910d1436e7f46873a70398a62586\nparent d59b4cdb5772917ee13e48552d51662160104b62\nauthor Sjors Provoost <sjors@sprovoost.nl> 1767581517 +0700\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1767581517 +0700\n\nmining: add new getCoinbaseTx() returning a struct\n\nIntroduce a new method intended to replace getCoinbaseRawTx(), which\nprovides a struct with everything clients need to construct a coinbase.\nThis is safer than providing a raw dummy coinbase that clients then have\nto manipulate.\n\nThe CoinbaseTx data is populated during the dummy transaction generation\nand stored in struct CBlockTemplate.\n\nExpand the interface_ipc.py functional test to document its usage\nand ensure equivalence.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlbJ04ACgkQV/+b28ww\nEAnWOhAAp1kM3A1v6j17KDlCC35Jxk35lkI77muUb+Ae/M9U6hdOwQFZ6kl+qktN\njuGPAXiid6WpEixm1lraUP9CJQpXY8NOdxr0+uwGLEyCC1sh4fVe9fsiWTL8vT4E\nZdlcY5+AqVTKuFDGynx3A/SWCnFWCC8hfUFfhMCLhySL2v9dxwIgsiEt7mnFmBmA\nOzLTExiTeosPjRGgAAOHPcuKKqFZ02VMiXA32/9Ul6OpDhAb6Nemoh06x5tBw/VL\nuxIxLckz953YInlEMylr5CrZGrYGes+JMeHdR3VPu3B6M3+xGy4a7DEjepB1M06D\n/5Zhpr++Btt00Ug4DbvYzXRKDlQUmzGxTIbnNrcHQc75eYTru0UfitfxtqzULjUA\nj6wOtToPBeqqxH2ywHSH9VACbgIX4ieR50O8sM7+xaVIOjBHUbEbzcv/NeSOqIth\n78qg9MXD5aqb5ZGenze89ME6o7XA+TG9uDbw/ZSy1ZVUYB8ZEVzNhwujy0/Lprcs\n3C4R6vmESbgMXGICfSyzDFAUjgHfqw0EooNONCk/OeCKUfa9dTB58u1vXuU+yGCu\ngTluq5XoZRafvKGgw3j+etnaysjQTc6khDitMMUTrTPbhq5N++LNot6UaPQ4ua95\n8mHpSzenapmpfZm5ZudEYiSM0Se4B3p7TXC3ZDmwoRI87c/s7Wk=\n=nrUK\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d59b4cdb5772917ee13e48552d51662160104b62",
          "sha": "d59b4cdb5772917ee13e48552d51662160104b62",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d59b4cdb5772917ee13e48552d51662160104b62"
        }
      ],
      "message": "mining: add new getCoinbaseTx() returning a struct\n\nIntroduce a new method intended to replace getCoinbaseRawTx(), which\nprovides a struct with everything clients need to construct a coinbase.\nThis is safer than providing a raw dummy coinbase that clients then have\nto manipulate.\n\nThe CoinbaseTx data is populated during the dummy transaction generation\nand stored in struct CBlockTemplate.\n\nExpand the interface_ipc.py functional test to document its usage\nand ensure equivalence.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-01-05T02:51:57Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-01-05T02:51:57Z"
      },
      "sha": "48f57bb35bbdbce509b8ef195de69e2a61a2511e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21845233491,
      "node_id": "HRFPE_lADOABII587WnQtZzwAAAAUWE89T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21845233491",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "created_at": "2026-01-05T02:52:08Z"
    },
    {
      "event": "reviewed",
      "id": 3636441095,
      "node_id": "PRR_kwDOABII587Yv7AH",
      "url": null,
      "actor": null,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-07T19:19:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 48f57bb35bbdbce509b8ef195de69e2a61a2511e. Just rebased and addressed comments and dropped coinbase tx \"template\" suffix, which is a nice change",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3636441095",
      "submitted_at": "2026-01-07T19:19:09Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    },
    {
      "event": "review_requested",
      "id": 21906211190,
      "node_id": "RRE_lADOABII587WnQtZzwAAAAUZtkF2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21906211190",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-07T19:19:15Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3639214116,
      "node_id": "PRR_kwDOABII587Y6gAk",
      "url": null,
      "actor": null,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-08T12:38:36Z",
      "author_association": "MEMBER",
      "body": "code review ACK 48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#pullrequestreview-3639214116",
      "submitted_at": "2026-01-08T12:38:36Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504009667",
      "pull_request_review_id": 3434498447,
      "id": 2504009667,
      "node_id": "PRRC_kwDOABII586VQCfD",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Given [sv2-tp](https://github.com/stratum-mining/sv2-tp) and a few others are the users of this interface and they are still in development.\n\nI'd rather have any un-useful methods pruned.\nWhen we release a stable interface then we can start deprecating things to avoid breaking clients (As you mentioned in the tracking issue it is okay to make breaking changes so all these methods should be pruned and clients should update).",
      "created_at": "2025-11-07T14:58:42Z",
      "updated_at": "2025-11-07T14:59:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504009667",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504009667"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504094533",
      "pull_request_review_id": 3434603653,
      "id": 2504094533,
      "node_id": "PRRC_kwDOABII586VQXNF",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "There's a note in the tracking issue #33777 that we can drop these deprecated methods as soon as there's an important breaking change.\r\n\r\nEven for testing it's nice that current clients work against both v30 and master.",
      "created_at": "2025-11-07T15:16:41Z",
      "updated_at": "2025-11-07T15:16:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504094533",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504094533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504171090",
      "pull_request_review_id": 3434700346,
      "id": 2504171090,
      "node_id": "PRRC_kwDOABII586VQp5S",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, do you plan on deprecating it first and then removing it in a later release? On the contrary, I think it should be dropped as soon as we deem it unnecessary. Otherwise, well end up with interface methods that conflict with each other. It would also be easier to review the changes together, rather than keeping them all here with deprecation comments and later deleting them it will save us review cycle.\r\n\r\n> Even for testing it's nice that current clients works against both v30 and master.\r\n\r\nI think this is not big of deal, since you have a release that is against v30, your master should be  in sync with master which can easily update when breaking change occur.\r\n\r\n",
      "created_at": "2025-11-07T15:34:01Z",
      "updated_at": "2025-11-07T15:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504171090",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504171090"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504267008",
      "pull_request_review_id": 3434816270,
      "id": 2504267008,
      "node_id": "PRRC_kwDOABII586VRBUA",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> do you plan on deprecating it first and then removing it in a later release?\r\n\r\nNo, because the interface is marked experimental I think it's fine to drop it in any release we want. That might be as soon as v31, but we can also do it later.\r\n\r\n> your master should be in sync with master\r\n\r\n`sv2-tp` is used by people who only run v30, so it has to support both master and v30.\r\n\r\nIt can already handle _new_ methods by just trying them and falling back to old methods when they're missing. \r\n\r\nRecent versions of `sv2-tp` all work against v30, so I haven't had to push people to switch to a newer version either. But we start making breaking changes, then I have to start instructing users of Bitcoin Core master to use specific newer versions of `sv2-tp`.\r\n",
      "created_at": "2025-11-07T15:52:18Z",
      "updated_at": "2025-11-07T15:52:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504267008",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504267008"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504357664",
      "pull_request_review_id": 3434921273,
      "id": 2504357664,
      "node_id": "PRRC_kwDOABII586VRXcg",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for the context. I still think its fine to do it together. You can have a major release of `sv2-tp` that works with `v30` and minor releases that includes additional improvements to that the major releases that is compatible with v30.\r\n`sv2-tp` master should just be in sync with `bitcoin/bitcoin` master people that want to run that should build master from source.",
      "created_at": "2025-11-07T16:09:29Z",
      "updated_at": "2025-11-07T16:10:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504357664",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504357664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504559542",
      "pull_request_review_id": 3435166355,
      "id": 2504559542,
      "node_id": "PRRC_kwDOABII586VSIu2",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In the longer run it probably makes sense for `sv2-tp` to have one major release of sv2-tp for every major Bitcoin Core release, but current it doesn't have backports. Each release is a combination of bug fixes and new features. ",
      "created_at": "2025-11-07T16:50:25Z",
      "updated_at": "2025-11-07T16:50:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504559542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504559542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504658204",
      "pull_request_review_id": 3435290805,
      "id": 2504658204,
      "node_id": "PRRC_kwDOABII586VSg0c",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> In the longer run it probably makes sense for sv2-tp to have one major release of sv2-tp for every major Bitcoin Core release, but current it doesn't have backports. Each release is a combination of bug fixes and new features.\r\n\r\n\r\nHmm, fwiw I am approach NACK changes that introduce conflicting interface method that deprecate and don't prune on experimental interface that did not offer interface stability for the reason discussed above.\r\nHowever I am open minded to convincing otherwise and curious to know what other contributors think.",
      "created_at": "2025-11-07T17:14:22Z",
      "updated_at": "2025-11-07T17:14:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504658204",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504658204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504684591",
      "pull_request_review_id": 3435323285,
      "id": 2504684591,
      "node_id": "PRRC_kwDOABII586VSnQv",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The old methods are redundant, but they're not conflicting. Clients can use either and both have test coverage.\r\n\r\nFrom this projects perspective there's hardly any additional review burden when we prune deprecated methods in a later PR, that should be trivial.",
      "created_at": "2025-11-07T17:21:19Z",
      "updated_at": "2025-11-07T17:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504684591",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504684591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504862983",
      "pull_request_review_id": 3435551568,
      "id": 2504862983,
      "node_id": "PRRC_kwDOABII586VTS0H",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "To sum up what needs to happen if we delete instead of deprecate these old methods:\r\n\r\n1. `sv2-tp` needs a new release that includes https://github.com/stratum-mining/sv2-tp/pull/59 (no problem, will happen anyway)\r\n2. the SRI TP (draft) https://github.com/stratum-mining/sv2-apps/pull/59 needs to be updated to support both the old and new method (like `sv2-tp` does), sometime before v31 comes out (support for the old method can be dropped after v31 comes out, at the cost of dropping support for v30).\r\n  a) https://github.com/2140-dev/bitcoin-capnp-types needs to track 30.x and master\r\n4. the instructions at https://stratumprotocol.org/developers#run-template-provider need to be updated to specify a minimum template provider version (since it supports \"Bitcoin Core v30 _or newer_\")\r\n\r\nThings that should be unaffected:\r\n\r\n1. CI for https://github.com/stratum-mining/sv2-apps pins Bitcoin Core to a release (e.g. v30) so is not impacted by changes to master. As long as they bump the template provider version when bumping Bitcoin Core to v31 nothing should break.\r\n2. Miners who patch Bitcoin Core (e.g. for merge mining) and stick to the v30.x branch\r\n3. Any sv2 tutorial or Docker automation that pins Bitcoin Core to v30 (rather than master)\r\n\r\nNone of these things are hard, but I prefer to avoid the coordination overhead and reserve that for a more important change.",
      "created_at": "2025-11-07T18:09:08Z",
      "updated_at": "2025-11-07T18:24:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504862983",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2504862983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514179494",
      "pull_request_review_id": 3447995340,
      "id": 2514179494,
      "node_id": "PRRC_kwDOABII586V21Wm",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")\n+            coinbase_template = (await template.result.getCoinbase(ctx)).result\n+            coinbase = CTransaction()\n+            coinbase.version = coinbase_template.version\n+            coinbase.vin = [CTxIn()]\n+            coinbase.vin[0].prevout = NULL_OUTPOINT\n+            coinbase.vin[0].nSequence = coinbase_template.inputSequence\n+            # Typically a mining pool appends its name and an extraNonce\n+            coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\n+\n+            # We currently always provide a coinbase witness, even for empty\n+            # blocks, but this may change, so always check:\n+            has_witness = coinbase_template._has(\"witness\")\n+            if (has_witness):\n+                coinbase.wit.vtxinwit = [CTxInWitness()]\n+                coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\n+\n+            # First output is our payout\n+            coinbase.vout = [CTxOut()]\n             coinbase.vout[0].scriptPubKey = miniwallet.get_output_script()\n+            coinbase.vout[0].nValue = coinbase_template.valueRemaining\n+            # Add SegWit OP_RETURN. This is currently always present even for\n+            # empty blocks, but this may change.\n+            found_witness_op_return = False\n+            print(WITNESS_COMMITMENT_HEADER.hex())",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 57,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could you add a short text before the value to the printout? Or if this is a debug-leftover, remove it. ",
      "created_at": "2025-11-11T13:08:31Z",
      "updated_at": "2025-11-11T13:08:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514179494",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514179494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 226,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514186161",
      "pull_request_review_id": 3448003389,
      "id": 2514186161,
      "node_id": "PRRC_kwDOABII586V22-x",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 33,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe extract this part into a separate method; that can also serve as an example on how to build the cb tx from the getCoinbase() result, and leave the flow of this test more readable",
      "created_at": "2025-11-11T13:11:01Z",
      "updated_at": "2025-11-11T13:11:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514186161",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514186161"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514218703",
      "pull_request_review_id": 3448050817,
      "id": 2514218703,
      "node_id": "PRRC_kwDOABII586V2-7P",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")\n+            coinbase_template = (await template.result.getCoinbase(ctx)).result\n+            coinbase = CTransaction()\n+            coinbase.version = coinbase_template.version\n+            coinbase.vin = [CTxIn()]\n+            coinbase.vin[0].prevout = NULL_OUTPOINT\n+            coinbase.vin[0].nSequence = coinbase_template.inputSequence\n+            # Typically a mining pool appends its name and an extraNonce\n+            coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\n+\n+            # We currently always provide a coinbase witness, even for empty\n+            # blocks, but this may change, so always check:\n+            has_witness = coinbase_template._has(\"witness\")\n+            if (has_witness):\n+                coinbase.wit.vtxinwit = [CTxInWitness()]\n+                coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\n+\n+            # First output is our payout\n+            coinbase.vout = [CTxOut()]\n             coinbase.vout[0].scriptPubKey = miniwallet.get_output_script()\n+            coinbase.vout[0].nValue = coinbase_template.valueRemaining\n+            # Add SegWit OP_RETURN. This is currently always present even for\n+            # empty blocks, but this may change.\n+            found_witness_op_return = False\n+            print(WITNESS_COMMITMENT_HEADER.hex())",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 57,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514179494,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sorry that's leftover debugging code.",
      "created_at": "2025-11-11T13:21:37Z",
      "updated_at": "2025-11-11T13:21:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514218703",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514218703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 226,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514258528",
      "pull_request_review_id": 3448101541,
      "id": 2514258528,
      "node_id": "PRRC_kwDOABII586V3Ipg",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")\n+            coinbase_template = (await template.result.getCoinbase(ctx)).result\n+            coinbase = CTransaction()\n+            coinbase.version = coinbase_template.version\n+            coinbase.vin = [CTxIn()]\n+            coinbase.vin[0].prevout = NULL_OUTPOINT\n+            coinbase.vin[0].nSequence = coinbase_template.inputSequence\n+            # Typically a mining pool appends its name and an extraNonce\n+            coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\n+\n+            # We currently always provide a coinbase witness, even for empty\n+            # blocks, but this may change, so always check:\n+            has_witness = coinbase_template._has(\"witness\")\n+            if (has_witness):\n+                coinbase.wit.vtxinwit = [CTxInWitness()]\n+                coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\n+\n+            # First output is our payout\n+            coinbase.vout = [CTxOut()]\n             coinbase.vout[0].scriptPubKey = miniwallet.get_output_script()\n+            coinbase.vout[0].nValue = coinbase_template.valueRemaining\n+            # Add SegWit OP_RETURN. This is currently always present even for\n+            # empty blocks, but this may change.\n+            found_witness_op_return = False\n+            print(WITNESS_COMMITMENT_HEADER.hex())\n+            # Compare SegWit OP_RETURN to (deprecated) getCoinbaseCommitment()\n+            coinbase_commitment = (await template.result.getCoinbaseCommitment(ctx)).result\n+            for output_data in coinbase_template.outputs:\n+                output = CTxOut()\n+                output.deserialize(BytesIO(output_data))\n+                coinbase.vout.append(output)\n+                if output.scriptPubKey == coinbase_commitment:\n+                    found_witness_op_return = True\n+\n+            assert_equal(has_witness, found_witness_op_return)\n+",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 68,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In case of `has_witness`, `coinbase_commitment` and `coinbase_template.witness` could be directly compared here.",
      "created_at": "2025-11-11T13:34:27Z",
      "updated_at": "2025-11-11T13:34:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514258528",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514258528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 237,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514270707",
      "pull_request_review_id": 3448116521,
      "id": 2514270707,
      "node_id": "PRRC_kwDOABII586V3Lnz",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 33,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514186161,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-11T13:38:05Z",
      "updated_at": "2025-11-11T13:38:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514270707",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514270707"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514273574",
      "pull_request_review_id": 3448120049,
      "id": 2514273574,
      "node_id": "PRRC_kwDOABII586V3MUm",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")\n+            coinbase_template = (await template.result.getCoinbase(ctx)).result\n+            coinbase = CTransaction()\n+            coinbase.version = coinbase_template.version\n+            coinbase.vin = [CTxIn()]\n+            coinbase.vin[0].prevout = NULL_OUTPOINT\n+            coinbase.vin[0].nSequence = coinbase_template.inputSequence\n+            # Typically a mining pool appends its name and an extraNonce\n+            coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\n+\n+            # We currently always provide a coinbase witness, even for empty\n+            # blocks, but this may change, so always check:\n+            has_witness = coinbase_template._has(\"witness\")\n+            if (has_witness):\n+                coinbase.wit.vtxinwit = [CTxInWitness()]\n+                coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\n+\n+            # First output is our payout\n+            coinbase.vout = [CTxOut()]\n             coinbase.vout[0].scriptPubKey = miniwallet.get_output_script()\n+            coinbase.vout[0].nValue = coinbase_template.valueRemaining\n+            # Add SegWit OP_RETURN. This is currently always present even for\n+            # empty blocks, but this may change.\n+            found_witness_op_return = False\n+            print(WITNESS_COMMITMENT_HEADER.hex())\n+            # Compare SegWit OP_RETURN to (deprecated) getCoinbaseCommitment()\n+            coinbase_commitment = (await template.result.getCoinbaseCommitment(ctx)).result\n+            for output_data in coinbase_template.outputs:\n+                output = CTxOut()\n+                output.deserialize(BytesIO(output_data))\n+                coinbase.vout.append(output)\n+                if output.scriptPubKey == coinbase_commitment:\n+                    found_witness_op_return = True\n+\n+            assert_equal(has_witness, found_witness_op_return)\n+",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 68,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514258528,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think the comparison below should be enough, and I want to make it as simple as possible to later drop the deprecated method.",
      "created_at": "2025-11-11T13:39:05Z",
      "updated_at": "2025-11-11T13:39:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514273574",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514273574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 237,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514274303",
      "pull_request_review_id": 3448120957,
      "id": 2514274303,
      "node_id": "PRRC_kwDOABII586V3Mf_",
      "diff_hunk": "",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "As a progression towards `getCoinbase` & deprecation, this implementation could invoke `ExtractCoinbaseTemplate`, and return the `witness` field (after uint256 -> unsigned char array type conversion)",
      "created_at": "2025-11-11T13:39:21Z",
      "updated_at": "2025-11-11T13:45:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514274303",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514274303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 904,
      "original_line": 904,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514282845",
      "pull_request_review_id": 3448131595,
      "id": 2514282845,
      "node_id": "PRRC_kwDOABII586V3Old",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     *\n+     * @note deprecated: use the output field from getCoinbase()",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "d926d31603316a10e3210f10480dd02bb34f667a",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`getCoinbase()` returns a `CoinbaseTemplate` struct which has an `outputs` field, which itself is an array with zero or more elements.\r\n\r\n(I'll rename `output` to `outputs`)",
      "created_at": "2025-11-11T13:42:00Z",
      "updated_at": "2025-11-11T13:42:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514282845",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514282845"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514285202",
      "pull_request_review_id": 3448134406,
      "id": 2514285202,
      "node_id": "PRRC_kwDOABII586V3PKS",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     *\n+     * @note deprecated: use the output field from getCoinbase()",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n     * @note deprecated: use the outputs field from getCoinbase()\n```",
      "created_at": "2025-11-11T13:42:43Z",
      "updated_at": "2025-11-11T13:42:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514285202",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514285202"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514286773",
      "pull_request_review_id": 3448136581,
      "id": 2514286773,
      "node_id": "PRRC_kwDOABII586V3Pi1",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     *\n+     * @note deprecated: use the output field from getCoinbase()",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The `witness` field could also be used, isn't it?",
      "created_at": "2025-11-11T13:43:14Z",
      "updated_at": "2025-11-11T13:43:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514286773",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514286773"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514290067",
      "pull_request_review_id": 3448141861,
      "id": 2514290067,
      "node_id": "PRRC_kwDOABII586V3QWT",
      "diff_hunk": "",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514274303,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Refactoring these deprecated methods would add to the review burden. And there's still ongoing discussion above about whether this PR should even keep them",
      "created_at": "2025-11-11T13:44:20Z",
      "updated_at": "2025-11-11T13:44:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514290067",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514290067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 904,
      "original_line": 904,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514291696",
      "pull_request_review_id": 3448144125,
      "id": 2514291696,
      "node_id": "PRRC_kwDOABII586V3Qvw",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     *\n+     * @note deprecated: use the output field from getCoinbase()\n+     */\n     virtual std::vector<unsigned char> getCoinbaseCommitment() = 0;\n+    /**\n+     * Return which output in the dummy coinbase contains the SegWit OP_RETURN.\n+     *\n+     * @note deprecated. Scan outputs from getCoinbase() output field for the",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 21,
      "commit_id": "b2df78b56afafe59015ee39eb17b1654a2c95f9b",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n     * @note deprecated. Scan outputs from getCoinbase() outputs field for the\n```",
      "created_at": "2025-11-11T13:44:47Z",
      "updated_at": "2025-11-11T13:44:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514291696",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514291696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514301870",
      "pull_request_review_id": 3448158001,
      "id": 2514301870,
      "node_id": "PRRC_kwDOABII586V3TOu",
      "diff_hunk": "",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "As a progression towards `getCoinbase` & deprecation, this implementation could internally also do what is suggested in the deprecation node:\ninvoke `ExtractCoinbaseTemplate`, scan outputs for the SegWit marker, and return the index.",
      "created_at": "2025-11-11T13:47:56Z",
      "updated_at": "2025-11-11T13:47:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514301870",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514301870"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 909,
      "original_line": 909,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514303921",
      "pull_request_review_id": 3448160883,
      "id": 2514303921,
      "node_id": "PRRC_kwDOABII586V3Tux",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     *\n+     * @note deprecated: use the output field from getCoinbase()",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514286773,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This returns the full `scriptPubKey` as generated by `GenerateCoinbaseCommitment`. Although you can derive that from the `witness` field, I don't think one should.",
      "created_at": "2025-11-11T13:48:38Z",
      "updated_at": "2025-11-11T13:48:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514303921",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514303921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514313165",
      "pull_request_review_id": 3448172573,
      "id": 2514313165,
      "node_id": "PRRC_kwDOABII586V3V_N",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Let's also wait and see what comes out of https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514193806 because if I have to modify the signature of `submitSolution()` (to return a `CBlock`), that's the kind of breaking change I think is worth making.\r\n\r\n_Update_: no need to change `submitSolution()` ",
      "created_at": "2025-11-11T13:51:39Z",
      "updated_at": "2025-11-11T15:08:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514313165",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514313165"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514314492",
      "pull_request_review_id": 3448173865,
      "id": 2514314492,
      "node_id": "PRRC_kwDOABII586V3WT8",
      "diff_hunk": "@@ -188,10 +198,56 @@ async def async_routine():\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             template = await mining.result.createNewBlock(opts)\n             block = await self.parse_and_deserialize_block(template, ctx)\n-            coinbase = await self.parse_and_deserialize_coinbase_tx(template, ctx)\n-            balance = miniwallet.get_balance()\n+\n+            self.log.debug(\"Build coinbase transaction using getCoinbase()\")\n+            coinbase_template = (await template.result.getCoinbase(ctx)).result\n+            coinbase = CTransaction()\n+            coinbase.version = coinbase_template.version\n+            coinbase.vin = [CTxIn()]\n+            coinbase.vin[0].prevout = NULL_OUTPOINT\n+            coinbase.vin[0].nSequence = coinbase_template.inputSequence\n+            # Typically a mining pool appends its name and an extraNonce\n+            coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\n+\n+            # We currently always provide a coinbase witness, even for empty\n+            # blocks, but this may change, so always check:\n+            has_witness = coinbase_template._has(\"witness\")\n+            if (has_witness):\n+                coinbase.wit.vtxinwit = [CTxInWitness()]\n+                coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\n+\n+            # First output is our payout\n+            coinbase.vout = [CTxOut()]\n             coinbase.vout[0].scriptPubKey = miniwallet.get_output_script()\n+            coinbase.vout[0].nValue = coinbase_template.valueRemaining\n+            # Add SegWit OP_RETURN. This is currently always present even for\n+            # empty blocks, but this may change.\n+            found_witness_op_return = False\n+            print(WITNESS_COMMITMENT_HEADER.hex())\n+            # Compare SegWit OP_RETURN to (deprecated) getCoinbaseCommitment()\n+            coinbase_commitment = (await template.result.getCoinbaseCommitment(ctx)).result\n+            for output_data in coinbase_template.outputs:\n+                output = CTxOut()\n+                output.deserialize(BytesIO(output_data))\n+                coinbase.vout.append(output)\n+                if output.scriptPubKey == coinbase_commitment:\n+                    found_witness_op_return = True\n+\n+            assert_equal(has_witness, found_witness_op_return)\n+",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 68,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514258528,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "My reasoning was to add extra assurance that the deprecated and new method gives the same result, it's a simple test. But it's fine as it is.",
      "created_at": "2025-11-11T13:52:01Z",
      "updated_at": "2025-11-11T13:52:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514314492",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514314492"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 237,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519222031",
      "pull_request_review_id": 3454679064,
      "id": 2519222031,
      "node_id": "PRRC_kwDOABII586WKEcP",
      "diff_hunk": "@@ -42,8 +42,26 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "79e73b0947e0c42b5630b5ee199a6d9eae8f9464",
      "in_reply_to_id": 2504009667,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504009667\r\n\r\nI tend to agree with Sjors that keeping deprecated methods around for a release should not add much burden, since any followup removing the methods should be easy to review. And the alternative just deleting the methods would seem to impose real costs on developers of mining clients and on users: Users might be forced to update two pieces of software at the same time instead of one, and mining client developers would be under more time pressure to make changes and might have to resort to additional complexity like maintaining multiple branches of their software to be compatible with different bitcoin core versions, or needing to customize the `mining.capnp` file.\r\n\r\nI do want to a suggest a stronger way deprecating the methods though: They could be renamed to break source compatibility but keep binary compatibility. This would force mining interface clients to update their source code, but still allow them to call the deprecated methods, and still keep binary compatibility so existing client software would continue to work with newer bitcoin core releases.\r\n\r\nThis would require a change in the capnp file like:\r\n\r\n```diff\r\n--- a/src/ipc/capnp/mining.capnp\r\n+++ b/src/ipc/capnp/mining.capnp\r\n@@ -28,13 +28,15 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\r\n     getTxFees @3 (context: Proxy.Context) -> (result: List(Int64));\r\n     getTxSigops @4 (context: Proxy.Context) -> (result: List(Int64));\r\n     getCoinbase @12 (context: Proxy.Context) -> (result: CoinbaseTemplate);\r\n-    getCoinbaseTx @5 (context: Proxy.Context) -> (result: Data);\r\n-    getCoinbaseCommitment @6 (context: Proxy.Context) -> (result: Data);\r\n-    getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\r\n     getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\r\n     submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\r\n     waitNext @10 (context: Proxy.Context, options: BlockWaitOptions) -> (result: BlockTemplate);\r\n     interruptWait @11() -> ();\r\n+\r\n+    # Deprecated methods, use getCoinBase() instead!\r\n+    deprecatedGetCoinbaseTx @5 (context: Proxy.Context) -> (result: Data);\r\n+    deprecatedGetCoinbaseCommitment @6 (context: Proxy.Context) -> (result: Data);\r\n+    deprecatedGetWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\r\n }\r\n \r\n struct BlockCreateOptions $Proxy.wrap(\"node::BlockCreateOptions\") {\r\n```\r\n\r\nAnd the corresponding c++ methods (and python calls) would need to be renamed to match.",
      "created_at": "2025-11-12T17:39:43Z",
      "updated_at": "2025-11-12T21:49:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519222031",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519222031"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519478463",
      "pull_request_review_id": 3454679064,
      "id": 2519478463,
      "node_id": "PRRC_kwDOABII586WLDC_",
      "diff_hunk": "@@ -4,13 +4,35 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test the IPC (multiprocess) interface.\"\"\"\n import asyncio\n+from dataclasses import dataclass\n from io import BytesIO\n from pathlib import Path\n import shutil\n-from test_framework.messages import (CBlock, CTransaction, ser_uint256, COIN)\n+from typing import Optional\n+from test_framework.blocktools import NULL_OUTPOINT\n+from test_framework.messages import (\n+    CBlock,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+    CTxInWitness,\n+    ser_uint256,\n+    COIN,\n+)\n from test_framework.test_framework import (BitcoinTestFramework, assert_equal)\n from test_framework.wallet import MiniWallet\n \n+\n+@dataclass\n+class CoinbaseTemplateData:",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 25,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3518142243\r\n\r\n> It turns out that using the `getCoinbase()` result directly in the Python test led to memory management related errors. Parts of the coinbase were dropped by the time of the second `checkBlock()`.\r\n>\r\n> This probably happened once I extracted the coinbase specific checks into `build_coinbase_test`, which returns the coinbase `CTransaction` but presumably let go of the `getCoinbase()` result.\r\n>\r\n> Rather than debug (our use of) PyCapnp, I just introduced a `@dataclass` for `CoinbaseTemplateData`, so we fully own (everything in) it.\r\n\r\nI looked into the [diff](https://github.com/bitcoin/bitcoin/compare/5f3883b7969826df85d97b2b4c475cae6a545f17..80acabaf9353245f0839b18d9552ab39f595eda6) and [CI failure](https://github.com/bitcoin/bitcoin/actions/runs/19269384275/job/55093373232?pr=33819#step:7:2962) described here and found this change pretty confusing because I couldn't see how the dataclass would make any difference. Introducing a dataclass would seem to just move around the invalid references without changing them.\r\n\r\nThe actual fix seems to be in the `parse_and_deserialize_coinbase` function which adds `bytes` casts. The `bytes` casts do nothing on my system which uses pycapnp-2.0.0, but in the CI job which uses pycapnp-2.2.1, it looks like casts have the effect of converting `memoryview` objects into `bytes` objects (https://github.com/capnproto/pycapnp/pull/380), fixing the crash that happens in CI.\r\n\r\nI feel like the way the test works isn't very clear from looking at the code, and that the dataclass adds extra complexity. So a change like following could make sense:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/test/functional/interface_ipc.py\r\n+++ b/test/functional/interface_ipc.py\r\n@@ -4,7 +4,6 @@\r\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \"\"\"Test the IPC (multiprocess) interface.\"\"\"\r\n import asyncio\r\n-from dataclasses import dataclass\r\n from io import BytesIO\r\n from pathlib import Path\r\n import shutil\r\n@@ -23,16 +22,6 @@ from test_framework.test_framework import (BitcoinTestFramework, assert_equal)\r\n from test_framework.wallet import MiniWallet\r\n \r\n \r\n-@dataclass\r\n-class CoinbaseTemplateData:\r\n-    version: int\r\n-    inputSequence: int\r\n-    scriptSigPrefix: bytes\r\n-    witness: Optional[bytes]\r\n-    valueRemaining: int\r\n-    outputs: list[bytes]\r\n-    lockTime: int\r\n-\r\n # Test may be skipped and not have capnp installed\r\n try:\r\n     import capnp  # type: ignore[import] # noqa: F401\r\n@@ -106,21 +95,6 @@ class IPCInterfaceTest(BitcoinTestFramework):\r\n         tx.deserialize(coinbase_data)\r\n         return tx\r\n \r\n-    async def parse_and_deserialize_coinbase(self, block_template, ctx) -> CoinbaseTemplateData:\r\n-        template_capnp = (await block_template.result.getCoinbase(ctx)).result\r\n-        witness: Optional[bytes] = None\r\n-        if template_capnp._has(\"witness\"):\r\n-            witness = bytes(template_capnp.witness)\r\n-        return CoinbaseTemplateData(\r\n-            version=int(template_capnp.version),\r\n-            inputSequence=int(template_capnp.inputSequence),\r\n-            scriptSigPrefix=bytes(template_capnp.scriptSigPrefix),\r\n-            witness=witness,\r\n-            valueRemaining=int(template_capnp.valueRemaining),\r\n-            outputs=[bytes(output) for output in template_capnp.outputs],\r\n-            lockTime=int(template_capnp.lockTime),\r\n-        )\r\n-\r\n     def run_echo_test(self):\r\n         self.log.info(\"Running echo test\")\r\n         async def async_routine():\r\n@@ -137,21 +111,25 @@ class IPCInterfaceTest(BitcoinTestFramework):\r\n \r\n     async def build_coinbase_test(self, template, ctx, miniwallet):\r\n         self.log.debug(\"Build coinbase transaction using getCoinbase()\")\r\n-        coinbase_template = await self.parse_and_deserialize_coinbase(template, ctx)\r\n+        # Note: the coinbase_template struct will be garbage-collected when this\r\n+        # method returns, so it is important to copy any Data fields from it\r\n+        # which need to be accessed later using the bytes() cast. Starting with\r\n+        # pycapnp v2.2.0, Data fields have type `memoryview` and are ephemeral.\r\n+        coinbase_template = (await template.result.getCoinbase(ctx)).result\r\n         coinbase = CTransaction()\r\n         coinbase.version = coinbase_template.version\r\n         coinbase.vin = [CTxIn()]\r\n         coinbase.vin[0].prevout = NULL_OUTPOINT\r\n         coinbase.vin[0].nSequence = coinbase_template.inputSequence\r\n         # Typically a mining pool appends its name and an extraNonce\r\n-        coinbase.vin[0].scriptSig = coinbase_template.scriptSigPrefix\r\n+        coinbase.vin[0].scriptSig = bytes(coinbase_template.scriptSigPrefix) # copy data with bytes()\r\n \r\n         # We currently always provide a coinbase witness, even for empty\r\n         # blocks, but this may change, so always check:\r\n-        has_witness = coinbase_template.witness is not None\r\n+        has_witness = coinbase_template._has(\"witness\")\r\n         if has_witness:\r\n             coinbase.wit.vtxinwit = [CTxInWitness()]\r\n-            coinbase.wit.vtxinwit[0].scriptWitness.stack = [coinbase_template.witness]\r\n+            coinbase.wit.vtxinwit[0].scriptWitness.stack = [bytes(coinbase_template.witness)] # copy data with bytes()\r\n \r\n         # First output is our payout\r\n         coinbase.vout = [CTxOut()]\r\n```\r\n</p>\r\n</details>\r\n\r\nAlternately, if the current approach is preferred, it would at least be good to add some comments explaining the bytes() calls.",
      "created_at": "2025-11-12T19:08:41Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519478463",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519478463"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 26,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519494258",
      "pull_request_review_id": 3454679064,
      "id": 2519494258,
      "node_id": "PRRC_kwDOABII586WLG5y",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\r\n\r\nMight be good to assert that vin[0] exists",
      "created_at": "2025-11-12T19:14:39Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519494258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519494258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519522902",
      "pull_request_review_id": 3454679064,
      "id": 2519522902,
      "node_id": "PRRC_kwDOABII586WLN5W",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\r\n\r\nIt seems like if this change could break clients, it might be better to return an error than a template that violates their expectations. Maybe would suggest:\r\n\r\n```c++\r\nif (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\r\n  throw std::logic_error(\"Internal bug: coinbase data is inconsistent with CoinbaseTemplate definition. Data may be corrupt or definition may need to be updated\");\r\n}\r\n```\r\n\r\nOr could replace Assume with Assert, or log a warning. it just doesn't seem good to ignore the condition completely if it happens.",
      "created_at": "2025-11-12T19:25:35Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519522902",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519522902"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 596,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519524459",
      "pull_request_review_id": 3454679064,
      "id": 2519524459,
      "node_id": "PRRC_kwDOABII586WLORr",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 || witness_stack[0].size() == 32);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\r\n\r\nLooks like || should be &&. Alternately could use two Assert statements.",
      "created_at": "2025-11-12T19:26:15Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519524459",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519524459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519536804",
      "pull_request_review_id": 3454679064,
      "id": 2519536804,
      "node_id": "PRRC_kwDOABII586WLRSk",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 || witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.input_sequence = coinbase_tx->vin[0].nSequence;\n+\n+    // The first dummy coinbase output produced by CreateBlock() has an nValue\n+    // set to nFee + the Block Subsidy\n+    coinbase.value_remaining = coinbase_tx->vout[0].nValue;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 28,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\r\n\r\nWould seem good to assert `vout[0]` exists. Or maybe drop this line and unify with the loop below to make the relationship between `output` and `value_remaining` fields more direct.\r\n\r\n```c++\r\n    for (const auto& output : coinbase_tx->vout) {\r\n        if (!output.scriptPubKey.empty() && output.scriptPubKey[0] == OP_RETURN) {\r\n            coinbase.outputs.push_back(output);\r\n        } else {\r\n            coinbase.value_remaining += output.nValue:\r\n        }\r\n    }\r\n```",
      "created_at": "2025-11-12T19:30:52Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519536804",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519536804"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 613,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519564612",
      "pull_request_review_id": 3454679064,
      "id": 2519564612,
      "node_id": "PRRC_kwDOABII586WLYFE",
      "diff_hunk": "@@ -259,6 +259,17 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\n /* Waits for the connected tip to change until timeout has elapsed. During node initialization, this will wait until the tip is connected (regardless of `timeout`).\n  * Returns the current tip, or nullopt if the node is shutting down. */\n std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\n+\n+/*\n+ * Extract relevant fields from the dummy coinbase transaction in the template.\n+ *\n+ * Extracts only OP_RETURN coinbase outputs, i.e. the witness commitment. If\n+ * BlockAssembler::CreateNewBlock() is patched to add more OP_RETURN outputs\n+ * e.g. for merge mining, those will be included. The dummy output that spends\n+ * the full reward is excluded.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\r\n\r\nI think this comment might would be more helpful if moved to the `CoinbaseTemplate::output` field since it describes what that field contains. Also it should be visible there since that type is part of the external interface.",
      "created_at": "2025-11-12T19:41:00Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519564612",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519564612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 266,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519741863",
      "pull_request_review_id": 3454679064,
      "id": 2519741863,
      "node_id": "PRRC_kwDOABII586WMDWn",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 30,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nMaybe s/coinbase/coinbase input/, would feel a little clearer",
      "created_at": "2025-11-12T20:36:11Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519741863",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519741863"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 117,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519746515",
      "pull_request_review_id": 3454679064,
      "id": 2519746515,
      "node_id": "PRRC_kwDOABII586WMEfT",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nI'm a little confused by \"may move the witness reserved value\" in this comment. I would think a future soft fork could restrict this value but not move it anywhere. BIP 141 says the coinbase witness has to be a single 32-byte so it doesn't seem like there is more flexibility here.",
      "created_at": "2025-11-12T20:37:57Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519746515",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519746515"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519774754",
      "pull_request_review_id": 3454679064,
      "id": 2519774754,
      "node_id": "PRRC_kwDOABII586WMLYi",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nSeems like it would be more consistent to either drop the `input_` prefix from this field or add it to `script_sig_prefix` field. I'd slightly prefer dropping the `input_` field so `CoinbaseTemplate` field names just try to describe what the fields mean, not how the transaction needs to be physically constructed.",
      "created_at": "2025-11-12T20:47:58Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519774754",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519774754"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519779938",
      "pull_request_review_id": 3454679064,
      "id": 2519779938,
      "node_id": "PRRC_kwDOABII586WMMpi",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;",
      "path": "src/node/types.h",
      "position": 52,
      "original_position": 38,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nIMO `witness_reserved_value` would be a more descriptive name than just `witness`.",
      "created_at": "2025-11-12T20:49:59Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519779938",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519779938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 133,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519805319",
      "pull_request_review_id": 3454679064,
      "id": 2519805319,
      "node_id": "PRRC_kwDOABII586WMS2H",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs\n+    CAmount value_remaining;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nI think `block_reward` could be a more descriptive name than `value_remaining`",
      "created_at": "2025-11-12T20:59:25Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519805319",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519805319"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519816606",
      "pull_request_review_id": 3454679064,
      "id": 2519816606,
      "node_id": "PRRC_kwDOABII586WMVme",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs\n+    CAmount value_remaining;\n+    // To be included as the last outputs in the coinbase transaction,\n+    // e.g. the SegWit commitment.\n+    std::vector<CTxOut> outputs;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 43,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\nI think `required_outputs` could be a more descriptive name than `outputs` since this is not the full list of outputs.",
      "created_at": "2025-11-12T21:04:12Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519816606",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519816606"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 130,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519847236",
      "pull_request_review_id": 3454679064,
      "id": 2519847236,
      "node_id": "PRRC_kwDOABII586WMdFE",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 39,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (80acabaf9353245f0839b18d9552ab39f595eda6)\n\n\"outputs\" here seem a little vague and it might be worth clarifying this is referring to the required outputs below. Also may be good to clarify that \"non-zero\" outputs refers (I assume) to something theoretical, that there shouldn't currently be any outputs below with nonzero values?\n\nThis also make me wonder if it would be clearer to change the output field type from `std::vector<CTxOut>` to `std::vector<CScript>` and for the CoinbaseTemplate not to put any requirements on output amounts since BIP141 doesn't seem to care about them, and I would imagine any potential soft fork also not caring?",
      "created_at": "2025-11-12T21:17:17Z",
      "updated_at": "2025-11-12T21:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519847236",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2519847236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 126,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533559315",
      "pull_request_review_id": 3472070997,
      "id": 2533559315,
      "node_id": "PRRC_kwDOABII586XAwwT",
      "diff_hunk": "@@ -4,13 +4,35 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test the IPC (multiprocess) interface.\"\"\"\n import asyncio\n+from dataclasses import dataclass\n from io import BytesIO\n from pathlib import Path\n import shutil\n-from test_framework.messages import (CBlock, CTransaction, ser_uint256, COIN)\n+from typing import Optional\n+from test_framework.blocktools import NULL_OUTPOINT\n+from test_framework.messages import (\n+    CBlock,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+    CTxInWitness,\n+    ser_uint256,\n+    COIN,\n+)\n from test_framework.test_framework import (BitcoinTestFramework, assert_equal)\n from test_framework.wallet import MiniWallet\n \n+\n+@dataclass\n+class CoinbaseTemplateData:",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 25,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519478463,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it's good to have `parse_and_deserialize_coinbase` be safe to use, because we might eventually move it into the test framework as IPC coverage increases. I'll add some documentation.\r\n\r\nHaving `CoinbaseTemplateData` as a `@dataclass` also gives us type checking.",
      "created_at": "2025-11-17T10:37:07Z",
      "updated_at": "2025-11-17T10:42:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533559315",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533559315"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 26,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533615466",
      "pull_request_review_id": 3472140644,
      "id": 2533615466,
      "node_id": "PRRC_kwDOABII586XA-dq",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519522902,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't think miners use the full 100 bytes of `scriptSig` space, so if we slightly go over it, it shouldn't immediately result in invalid blocks. So it seems overkill to abort the template generation entirely.\r\n\r\nI'll log a warning.\r\n\r\nThe main purpose of this `Assume` is to remind ourselves to inform the mining ecosystem if we ever expand the scriptSig prefix substantially.",
      "created_at": "2025-11-17T10:55:45Z",
      "updated_at": "2025-11-17T10:56:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533615466",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533615466"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 596,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533642433",
      "pull_request_review_id": 3472174619,
      "id": 2533642433,
      "node_id": "PRRC_kwDOABII586XBFDB",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519522902,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I also clarified the comment that it might be a _silently_ breaking change. Although the spec requires `NewTemplate` to keep it at max 8 bytes, the serialisation supports up to 256 and a Template Provider implementation might just not check / enforce this.\r\n\r\nhttps://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client",
      "created_at": "2025-11-17T11:04:43Z",
      "updated_at": "2025-11-17T11:04:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533642433",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533642433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 596,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533657576",
      "pull_request_review_id": 3472193458,
      "id": 2533657576,
      "node_id": "PRRC_kwDOABII586XBIvo",
      "diff_hunk": "@@ -586,4 +586,43 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const CTransactionRef coinbase_tx)\n+{\n+    node::CoinbaseTemplate coinbase;\n+\n+    coinbase.version = coinbase_tx->CURRENT_VERSION;\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // breaking change for clients.\n+    Assume(coinbase.script_sig_prefix.size() <= 8);\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 || witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.input_sequence = coinbase_tx->vin[0].nSequence;\n+\n+    // The first dummy coinbase output produced by CreateBlock() has an nValue\n+    // set to nFee + the Block Subsidy\n+    coinbase.value_remaining = coinbase_tx->vout[0].nValue;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 28,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519536804,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'll go for the latter approach.",
      "created_at": "2025-11-17T11:10:16Z",
      "updated_at": "2025-11-17T11:10:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533657576",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533657576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 613,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533690075",
      "pull_request_review_id": 3472231403,
      "id": 2533690075,
      "node_id": "PRRC_kwDOABII586XBQrb",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519746515,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The BIP says:\r\n\r\n> For backward compatibility, the `Hash(new commitment|witness reserved value)` will go to the coinbase witness, and the witness reserved value will be recorded in another location specified by the future softfork. Any number of new commitment could be added in this way.\r\n\r\nSo we provide clients with the coinbase witness, which is not necessarily the \"witness reserved value\".\r\n\r\n",
      "created_at": "2025-11-17T11:22:03Z",
      "updated_at": "2025-11-17T11:22:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533690075",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533690075"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533708792",
      "pull_request_review_id": 3472253173,
      "id": 2533708792,
      "node_id": "PRRC_kwDOABII586XBVP4",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519774754,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'll drop `input_`",
      "created_at": "2025-11-17T11:28:24Z",
      "updated_at": "2025-11-17T11:28:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533708792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533708792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533732177",
      "pull_request_review_id": 3472284329,
      "id": 2533732177,
      "node_id": "PRRC_kwDOABII586XBa9R",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs\n+    CAmount value_remaining;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519805319,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That seems incorrect, because a pool (like Ocean or P2pool) might let you take part of the reward directly in an output.",
      "created_at": "2025-11-17T11:36:55Z",
      "updated_at": "2025-11-17T11:36:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533732177",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533732177"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533740877",
      "pull_request_review_id": 3472295625,
      "id": 2533740877,
      "node_id": "PRRC_kwDOABII586XBdFN",
      "diff_hunk": "@@ -259,6 +259,17 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\n /* Waits for the connected tip to change until timeout has elapsed. During node initialization, this will wait until the tip is connected (regardless of `timeout`).\n  * Returns the current tip, or nullopt if the node is shutting down. */\n std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\n+\n+/*\n+ * Extract relevant fields from the dummy coinbase transaction in the template.\n+ *\n+ * Extracts only OP_RETURN coinbase outputs, i.e. the witness commitment. If\n+ * BlockAssembler::CreateNewBlock() is patched to add more OP_RETURN outputs\n+ * e.g. for merge mining, those will be included. The dummy output that spends\n+ * the full reward is excluded.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519564612,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I added documentation there, but we also need it here. The `output` field is not limited to `OP_RETURN`, that's just a heuristic used by `ExtractCoinbaseTemplate`.\r\n\r\nThat heuristic won't work anymore if we add a way for clients to specify custom outputs when constructing a block, so it's important to document.",
      "created_at": "2025-11-17T11:40:40Z",
      "updated_at": "2025-11-17T11:40:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533740877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533740877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 266,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533772625",
      "pull_request_review_id": 3472335781,
      "id": 2533772625,
      "node_id": "PRRC_kwDOABII586XBk1R",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 39,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519847236,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Changed to \"minus any non-zero required outputs\" and a comment to point out that those don't exist atm.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533732177 above, I think having non-zero outputs is quite conceivable and it would be a shame if that requires another breaking change.\r\n\r\n> I would imagine any potential soft fork also not caring?\r\n\r\nDrivechains lock coins into a `scriptPubKey` where they can't be spent until they're pegged out. [BIP300](https://en.bitcoin.it/wiki/BIP_0300#M5_--_Deposit_BTC_to_Sidechain) doesn't use the coinbase for pegging in though.\r\n\r\nBut I could imagine a soft-fork where, from the perspective of old nodes, transactions pay outrageous fees which go to an anyone-can-spend address. From an upgraded node point of view, those \"fees\" are really outputs into a new consensus environment that doesn't use our UTXO model. Moving coins back into \"legacy\" UTXO's looks like taking a bit from the anyone-can-spend.",
      "created_at": "2025-11-17T11:52:13Z",
      "updated_at": "2025-11-17T12:00:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533772625",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2533772625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 126,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535036758",
      "pull_request_review_id": 3473938010,
      "id": 2535036758,
      "node_id": "PRRC_kwDOABII586XGZdW",
      "diff_hunk": "@@ -591,4 +591,49 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.sequence = coinbase_tx->vin[0].nSequence;\n+\n+    // Extract only OP_RETURN coinbase outputs (witness commitment, merge\n+    // mining, etc). BlockAssembler::CreateNewBlock adds a dummy output with\n+    // the full reward that we must exclude.\n+    for (const auto& output : coinbase_tx->vout) {\n+        if (!output.scriptPubKey.empty() && output.scriptPubKey[0] == OP_RETURN) {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "original_commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Even simpler would be to just rely on the fact that the dummy output is always at index 0. I didn't want to make that assumption in sv2-tp, but in our codebase it should be fine. It's also what I ended up doing in #33890.",
      "created_at": "2025-11-17T17:58:17Z",
      "updated_at": "2025-11-17T17:58:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2535036758",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535036758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 625,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2536880741",
      "pull_request_review_id": 3476202228,
      "id": 2536880741,
      "node_id": "PRRC_kwDOABII586XNbpl",
      "diff_hunk": "@@ -591,4 +591,49 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.sequence = coinbase_tx->vin[0].nSequence;\n+\n+    // Extract only OP_RETURN coinbase outputs (witness commitment, merge\n+    // mining, etc). BlockAssembler::CreateNewBlock adds a dummy output with\n+    // the full reward that we must exclude.\n+    for (const auto& output : coinbase_tx->vout) {\n+        if (!output.scriptPubKey.empty() && output.scriptPubKey[0] == OP_RETURN) {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "original_commit_id": "eeba240bfa148050eaa588f737814f750bf2101f",
      "in_reply_to_id": 2535036758,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done in the latest push.",
      "created_at": "2025-11-18T08:41:08Z",
      "updated_at": "2025-11-18T08:41:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2536880741",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2536880741"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 625,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579000680",
      "pull_request_review_id": 3527399289,
      "id": 2579000680,
      "node_id": "PRRC_kwDOABII586ZuG1o",
      "diff_hunk": "@@ -591,4 +594,44 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (73553c809ef6517839c4d1b02b657e6fa401f8a8)\r\n\r\nInstead of having a warning here it would seem better to document the compatibility concern directly in the code generating the scriptsig. This way, a potentially breaking change would be obvious just looking at this code and not rely on noticing a warning elsewhere. Also it would seem more future-proof for IPC documentation to just say that the final scriptsig needs to be <= 100 bytes, instead of trying to guarantee miners can always add 92 bytes. So would suggest a change like:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -168,6 +168,11 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\r\n     coinbaseTx.vout.resize(1);\r\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\r\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\r\n+    // Start the coinbase scriptSig with the block height as required by BIP34.\r\n+    // The trailing OP_0 is optional padding and could be removed without a\r\n+    // consensus change. Mining clients are expected to append extra data to\r\n+    // this prefix, so increasing its length would reduce the space they can use\r\n+    // and may break existing clients.\r\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\r\n     Assert(nHeight > 0);\r\n     coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);\r\n@@ -603,13 +608,6 @@ node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block\r\n     coinbase.version = coinbase_tx->version;\r\n     Assert(coinbase_tx->vin.size() == 1);\r\n     coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\r\n-    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\r\n-    // if a future softfork needs to commit more than BIP34) is a\r\n-    // (potentially silent) breaking change for clients.\r\n-    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\r\n-        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\r\n-                    coinbase.script_sig_prefix.size());\r\n-    }\r\n \r\n     if (coinbase_tx->HasWitness()) {\r\n         const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\r\n--- a/src/node/types.h\r\n+++ b/src/node/types.h\r\n@@ -108,9 +108,11 @@ struct CoinbaseTemplate {\r\n     /* nSequence for the only coinbase transaction input */\r\n     uint32_t sequence;\r\n     /**\r\n-     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\r\n-     * to be less than 8 bytes (not including the length byte). This allows\r\n-     * clients to add up to 92 bytes.\r\n+     * Prefix which needs to be placed at the beginning of the scriptSig.\r\n+     * Clients may append extra data to this as long as the overall scriptSig\r\n+     * size is 100 bytes or less, to avoid the block being rejected with\r\n+     * \"bad-cb-length\" error. Currently with BIP 34, the prefix should be less\r\n+     * than 8 bytes, but future soft forks could require longer prefixes.\r\n      */\r\n     CScript script_sig_prefix;\r\n     /**\r\n```\r\n</p>\r\n</details>",
      "created_at": "2025-12-01T22:55:48Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2579000680",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579000680"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 612,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579049804",
      "pull_request_review_id": 3527399289,
      "id": 2579049804,
      "node_id": "PRRC_kwDOABII586ZuS1M",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519746515,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533690075\r\n\r\n\r\n> The BIP says:\r\n> \r\n> > For backward compatibility, the `Hash(new commitment|witness reserved value)` will go to the coinbase witness, and the witness reserved value will be recorded in another location specified by the future softfork. Any number of new commitment could be added in this way.\r\n> \r\n> So we provide clients with the coinbase witness, which is not necessarily the \"witness reserved value\".\r\n\r\nWow, I see. So in BIP 141 terminology, instead of assigning meaning to the existing \"reserved value\" and introducing a new \"reserved value\", a future soft fork would be \"moving\" the reserved value.\r\n\r\nI still find comment confusing, though. Would suggest shortening to something like \"This is currently the BIP 141 witness reserved value, and can be chosen arbitrarily by the node, but future soft forks may constrain it.\"\r\n\r\n\r\n",
      "created_at": "2025-12-01T23:14:46Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2579049804",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579049804"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579073847",
      "pull_request_review_id": 3527399289,
      "id": 2579073847,
      "node_id": "PRRC_kwDOABII586ZuYs3",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;",
      "path": "src/node/types.h",
      "position": 52,
      "original_position": 38,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519779938,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533690075\r\n\r\n> IMO `witness_reserved_value` would be a more descriptive name than just `witness`.\r\n\r\nOther response https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533690075 explains why this name would be inconsistent with terminology of BIP141.",
      "created_at": "2025-12-01T23:28:23Z",
      "updated_at": "2025-12-02T15:41:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2579073847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2579073847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 133,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581294471",
      "pull_request_review_id": 3527399289,
      "id": 2581294471,
      "node_id": "PRRC_kwDOABII586Z222H",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs\n+    CAmount value_remaining;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519805319,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533732177\r\n\r\n> That seems incorrect, because a pool (like Ocean or P2pool) might let you take part of the reward directly in an output.\r\n\r\nHmm, it sounds like the idea here is maybe that pools will reuse this `CoinbaseTemplate` struct, and prepend their own outputs into `required_outputs` and subtract their own rewards from `value_remaining` leaving the individual miner to take the rest? I'm not sure how realistic it is to expect pools to reuse this struct but maybe something like `block_reward_remaining` or `available_reward` or `reward_remaining` could be a more descriptive name which is still compatible with that idea.",
      "created_at": "2025-12-02T13:52:36Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581294471",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581294471"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581390462",
      "pull_request_review_id": 3527399289,
      "id": 2581390462,
      "node_id": "PRRC_kwDOABII586Z3OR-",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 39,
      "commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519847236,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533772625\r\n\r\nThanks for spelling out the hypothetical here. The new comments are also nice and make intent more clear.",
      "created_at": "2025-12-02T14:17:35Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581390462",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581390462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 126,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581511244",
      "pull_request_review_id": 3527399289,
      "id": 2581511244,
      "node_id": "PRRC_kwDOABII586Z3rxM",
      "diff_hunk": "",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514301870,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2514301870\r\n\r\n> As a progression towards `getCoinbase` & deprecation, this implementation could internally also do what is suggested in the deprecation node: invoke `ExtractCoinbaseTemplate`, scan outputs for the SegWit marker, and return the index.\r\n\r\nI don't see a clean way to get the index from ExtractCoinbaseTemplate, but even if there were, calling `GetWitnessCommitmentIndex` seems like the simplest implementation of this method. Changing this might make more sense if the `GetWitnessCommitmentIndex` function was only called this one place and could be eliminated, but this isn't the case.",
      "created_at": "2025-12-02T14:47:55Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581511244",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581511244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 909,
      "original_line": 909,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581564930",
      "pull_request_review_id": 3527399289,
      "id": 2581564930,
      "node_id": "PRRC_kwDOABII586Z344C",
      "diff_hunk": "@@ -259,6 +259,17 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\n /* Waits for the connected tip to change until timeout has elapsed. During node initialization, this will wait until the tip is connected (regardless of `timeout`).\n  * Returns the current tip, or nullopt if the node is shutting down. */\n std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\n+\n+/*\n+ * Extract relevant fields from the dummy coinbase transaction in the template.\n+ *\n+ * Extracts only OP_RETURN coinbase outputs, i.e. the witness commitment. If\n+ * BlockAssembler::CreateNewBlock() is patched to add more OP_RETURN outputs\n+ * e.g. for merge mining, those will be included. The dummy output that spends\n+ * the full reward is excluded.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519564612,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533740877\r\n\r\n> I added documentation there, but we also need it here. The `output` field is not limited to `OP_RETURN`, that's just a heuristic used by `ExtractCoinbaseTemplate`.\r\n\r\nSeem like with latest update, this comment is no longer accurate and should be removed? I guess still I don't understand why it would be important to document the outputs field in this function declaration instead of only in the struct definition, but maybe that is moot now.",
      "created_at": "2025-12-02T14:57:49Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581564930",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581564930"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 266,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581576868",
      "pull_request_review_id": 3527399289,
      "id": 2581576868,
      "node_id": "PRRC_kwDOABII586Z37yk",
      "diff_hunk": "@@ -42,8 +42,24 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     */\n     virtual std::vector<unsigned char> getCoinbaseCommitment() = 0;",
      "path": "src/interfaces/mining.h",
      "position": 20,
      "original_position": 15,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (73553c809ef6517839c4d1b02b657e6fa401f8a8)\r\n\r\nWas it intentional not to include the \"note deprecated: use getCoinbase()\" comment on this method? Would be good to include if not.",
      "created_at": "2025-12-02T15:00:38Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581576868",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581576868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 55,
      "original_start_line": 53,
      "start_side": "RIGHT",
      "line": 60,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581603580",
      "pull_request_review_id": 3527399289,
      "id": 2581603580,
      "node_id": "PRRC_kwDOABII586Z4CT8",
      "diff_hunk": "@@ -591,4 +594,44 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.sequence = coinbase_tx->vin[0].nSequence;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (73553c809ef6517839c4d1b02b657e6fa401f8a8)\r\n\r\nNot important, but it would be nice if fields were extracted in same order they are declared: version, sequence, script_sig, etc.",
      "created_at": "2025-12-02T15:07:20Z",
      "updated_at": "2025-12-02T15:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2581603580",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581603580"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 622,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584962979",
      "pull_request_review_id": 3534863434,
      "id": 2584962979,
      "node_id": "PRRC_kwDOABII586aE2ej",
      "diff_hunk": "",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "original_commit_id": "0dfe602281780ade7186feec2201886c4cfd6810",
      "in_reply_to_id": 2514301870,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The latest push dropped `ExtractCoinbaseTemplate` entirely.",
      "created_at": "2025-12-03T12:41:35Z",
      "updated_at": "2025-12-03T12:41:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584962979",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584962979"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 909,
      "original_line": 909,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584980106",
      "pull_request_review_id": 3534883089,
      "id": 2584980106,
      "node_id": "PRRC_kwDOABII586aE6qK",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "b472d4a4ac4b73a40f41571bbb242f676f136ece",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519746515,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken",
      "created_at": "2025-12-03T12:47:11Z",
      "updated_at": "2025-12-03T12:47:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584980106",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584980106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584981169",
      "pull_request_review_id": 3534884361,
      "id": 2584981169,
      "node_id": "PRRC_kwDOABII586aE66x",
      "diff_hunk": "@@ -99,6 +102,35 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t input_sequence;\n+    /**\n+     * Bytes which are to be placed at the beginning of scriptSig. Guaranteed\n+     * to be less than 8 bytes (not including the length byte). This allows\n+     * clients to add up to 92 bytes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value. A future soft fork\n+     * may move the witness reserved value elsewhere, but there will still be a\n+     * coinbase witness.\n+     */\n+    std::optional<uint256> witness;\n+    // Block subsidy plus fees, minus any non-zero coinbase outputs\n+    CAmount value_remaining;",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "80acabaf9353245f0839b18d9552ab39f595eda6",
      "in_reply_to_id": 2519805319,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I renamed it to `block_reward_remaining`.\r\n\r\nMy understanding is that with merged-mining (see e.g. #33890) miners are expected to add their own outputs _after_ we give them a block template. These are typically 0 value `OP_RETURN` outputs, but - if the pool permits - they could be non-zero.\r\n\r\nIf we assume that nobody is going to patch Bitcoin Core to add outputs here (instead of downstream), then `block_reward` is accurate. For now...\r\n\r\nHowever, there's still the possibility of the hypothetical soft fork below: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2533772625\r\n\r\nIn that scenario part of the block reward is locked up and not available to miners.",
      "created_at": "2025-12-03T12:47:32Z",
      "updated_at": "2025-12-03T12:47:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584981169",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584981169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584983479",
      "pull_request_review_id": 3534887142,
      "id": 2584983479,
      "node_id": "PRRC_kwDOABII586aE7e3",
      "diff_hunk": "@@ -591,4 +594,44 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": 2579000680,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken, except:\r\n- I used stronger wording for the 8 byte guarantee\r\n- mention that OP_0 is historically an extranonce (which hopefully goes away, see https://github.com/bitcoin/bitcoin/pull/32420)",
      "created_at": "2025-12-03T12:48:18Z",
      "updated_at": "2025-12-03T12:48:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584983479",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584983479"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 612,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584984317",
      "pull_request_review_id": 3534887994,
      "id": 2584984317,
      "node_id": "PRRC_kwDOABII586aE7r9",
      "diff_hunk": "@@ -42,8 +42,24 @@ class BlockTemplate\n     // Sigop cost per transaction, not including coinbase transaction.\n     virtual std::vector<int64_t> getTxSigops() = 0;\n \n+    /** Return fields needed to construct a coinbase transaction */\n+    virtual node::CoinbaseTemplate getCoinbase() = 0;\n+    /**\n+     * Return dummy coinbase transaction.\n+     *\n+     * @note deprecated: use getCoinbase()\n+     **/\n     virtual CTransactionRef getCoinbaseTx() = 0;\n+    /**\n+     * Return scriptPubKey with SegWit OP_RETURN.\n+     */\n     virtual std::vector<unsigned char> getCoinbaseCommitment() = 0;",
      "path": "src/interfaces/mining.h",
      "position": 20,
      "original_position": 15,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": 2581576868,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added it back",
      "created_at": "2025-12-03T12:48:32Z",
      "updated_at": "2025-12-03T12:48:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584984317",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584984317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 55,
      "original_start_line": 53,
      "start_side": "RIGHT",
      "line": 60,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584984800",
      "pull_request_review_id": 3534888405,
      "id": 2584984800,
      "node_id": "PRRC_kwDOABII586aE7zg",
      "diff_hunk": "@@ -591,4 +594,44 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n     // avoid deadlocks.\n     return GetTip(chainman);\n }\n+\n+node::CoinbaseTemplate ExtractCoinbaseTemplate(const node::CBlockTemplate& block_template)\n+{\n+    CTransactionRef coinbase_tx{block_template.block.vtx[0]};\n+    node::CoinbaseTemplate coinbase{};\n+\n+    coinbase.version = coinbase_tx->version;\n+    Assert(coinbase_tx->vin.size() == 1);\n+    coinbase.script_sig_prefix = coinbase_tx->vin[0].scriptSig;\n+    // The CoinbaseTemplate interface guarantees a size limit. Raising it (e.g.\n+    // if a future softfork needs to commit more than BIP34) is a\n+    // (potentially silent) breaking change for clients.\n+    if (!Assume(coinbase.script_sig_prefix.size() <= 8)) {\n+        LogWarning(\"Unexpected %d byte scriptSig prefix size.\",\n+                    coinbase.script_sig_prefix.size());\n+    }\n+\n+    if (coinbase_tx->HasWitness()) {\n+        const auto& witness_stack{coinbase_tx->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase.witness = uint256(witness_stack[0]);\n+    }\n+\n+    coinbase.sequence = coinbase_tx->vin[0].nSequence;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "original_commit_id": "73553c809ef6517839c4d1b02b657e6fa401f8a8",
      "in_reply_to_id": 2581603580,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This should be better now.",
      "created_at": "2025-12-03T12:48:39Z",
      "updated_at": "2025-12-03T12:48:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2584984800",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584984800"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 622,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2585999526",
      "pull_request_review_id": 3536150722,
      "id": 2585999526,
      "node_id": "PRRC_kwDOABII586aIzim",
      "diff_hunk": "@@ -158,18 +158,52 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n \n     // Create coinbase transaction.\n     CMutableTransaction coinbaseTx;\n+\n+    // Construct coinbase transaction template in parallel\n+    CoinbaseTxTemplate coinbase_tx_template;\n+    coinbase_tx_template.version = coinbaseTx.version;\n+\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n     coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL; // Make sure timelock is enforced.\n+    coinbase_tx_template.sequence = coinbaseTx.vin[0].nSequence;\n+\n+    // Add an output that spends the full coinbase reward.\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n-    coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n+    // Block subsidy + fees\n+    const CAmount block_reward{nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus())};\n+    coinbaseTx.vout[0].nValue = block_reward;\n+    coinbase_tx_template.block_reward_remaining = block_reward;\n+\n+    // Start the coinbase scriptSig with the block height as required by BIP34.\n+    // The trailing OP_0 (historically an extranonce) is optional padding and\n+    // could be removed without a consensus change. Mining clients are expected\n+    // to append extra data to this prefix, so increasing its length would reduce\n+    // the space they can use and may break existing clients.\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    coinbase_tx_template.script_sig_prefix = coinbaseTx.vin[0].scriptSig;\n     Assert(nHeight > 0);\n     coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);\n+    coinbase_tx_template.lock_time = coinbaseTx.nLockTime;\n+\n     pblock->vtx[0] = MakeTransactionRef(std::move(coinbaseTx));\n     pblocktemplate->vchCoinbaseCommitment = m_chainstate.m_chainman.GenerateCoinbaseCommitment(*pblock, pindexPrev);\n \n+    const CTransactionRef& final_coinbase{pblock->vtx[0]};\n+    if (final_coinbase->HasWitness()) {\n+        const auto& witness_stack{final_coinbase->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase_tx_template.witness = uint256(witness_stack[0]);\n+    }\n+    if (const int witness_index = GetWitnessCommitmentIndex(*pblock); witness_index != NO_WITNESS_COMMITMENT) {\n+        coinbase_tx_template.required_outputs.push_back(final_coinbase->vout[witness_index]);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "original_commit_id": "60f74dd315811db427797a606f4b5611a8c59993",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add new getCoinbaseTx() returning a struct\" (60f74dd315811db427797a606f4b5611a8c59993)\r\n\r\nMaybe good to assert witness_index is between 0 and the vout size. Obviously it should be, but good to check array bounds since the index is coming from a different place.",
      "created_at": "2025-12-03T17:23:01Z",
      "updated_at": "2025-12-03T17:30:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2585999526",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2585999526"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 203,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586011866",
      "pull_request_review_id": 3536150722,
      "id": 2586011866,
      "node_id": "PRRC_kwDOABII586aI2ja",
      "diff_hunk": "@@ -158,18 +158,52 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n \n     // Create coinbase transaction.\n     CMutableTransaction coinbaseTx;\n+\n+    // Construct coinbase transaction template in parallel\n+    CoinbaseTxTemplate coinbase_tx_template;\n+    coinbase_tx_template.version = coinbaseTx.version;\n+\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n     coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL; // Make sure timelock is enforced.\n+    coinbase_tx_template.sequence = coinbaseTx.vin[0].nSequence;\n+\n+    // Add an output that spends the full coinbase reward.\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n-    coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n+    // Block subsidy + fees\n+    const CAmount block_reward{nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus())};\n+    coinbaseTx.vout[0].nValue = block_reward;\n+    coinbase_tx_template.block_reward_remaining = block_reward;\n+\n+    // Start the coinbase scriptSig with the block height as required by BIP34.\n+    // The trailing OP_0 (historically an extranonce) is optional padding and\n+    // could be removed without a consensus change. Mining clients are expected\n+    // to append extra data to this prefix, so increasing its length would reduce\n+    // the space they can use and may break existing clients.\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    coinbase_tx_template.script_sig_prefix = coinbaseTx.vin[0].scriptSig;\n     Assert(nHeight > 0);\n     coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);\n+    coinbase_tx_template.lock_time = coinbaseTx.nLockTime;\n+\n     pblock->vtx[0] = MakeTransactionRef(std::move(coinbaseTx));\n     pblocktemplate->vchCoinbaseCommitment = m_chainstate.m_chainman.GenerateCoinbaseCommitment(*pblock, pindexPrev);\n \n+    const CTransactionRef& final_coinbase{pblock->vtx[0]};\n+    if (final_coinbase->HasWitness()) {\n+        const auto& witness_stack{final_coinbase->vin[0].scriptWitness.stack};\n+        // Consensus requires the coinbase witness stack to have exactly one\n+        // element of 32 bytes.\n+        Assert(witness_stack.size() == 1 && witness_stack[0].size() == 32);\n+        coinbase_tx_template.witness = uint256(witness_stack[0]);\n+    }\n+    if (const int witness_index = GetWitnessCommitmentIndex(*pblock); witness_index != NO_WITNESS_COMMITMENT) {\n+        coinbase_tx_template.required_outputs.push_back(final_coinbase->vout[witness_index]);\n+    }\n+\n+    pblocktemplate->m_coinbase_tx_template = std::move(coinbase_tx_template);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 49,
      "commit_id": "60f74dd315811db427797a606f4b5611a8c59993",
      "original_commit_id": "60f74dd315811db427797a606f4b5611a8c59993",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add new getCoinbaseTx() returning a struct\" (60f74dd315811db427797a606f4b5611a8c59993)\r\n\r\nWould be nice to avoid the move and treat `pblock` and `coinbase_tx_template` local variables more consistently. Would suggest defining a reference like `CoinbaseTxTemplate& coinbase_tx_template{pblocktemplate->m_coinbase_tx_template}` above similar to `pblock`.",
      "created_at": "2025-12-03T17:27:20Z",
      "updated_at": "2025-12-03T17:31:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2586011866",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586011866"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 205,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659541409",
      "pull_request_review_id": 3624915228,
      "id": 2659541409,
      "node_id": "PRRC_kwDOABII586ehWGh",
      "diff_hunk": "@@ -893,6 +894,11 @@ class BlockTemplateImpl : public BlockTemplate\n         return m_block_template->block.vtx[0];\n     }\n \n+    CoinbaseTxTemplate getCoinbaseTx() override\n+    {\n+        return m_block_template->m_coinbase_tx_template;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 979805b \"mining: add new getCoinbaseTx() returning a struct\"\nWe refer to the value both as coinbase tx field and coinbase tx template, I'd rather we be specific and just use coinbase tx template anywhere.\nAlso the exposed IPC method name should be expose as getCoinbaseTemplate?",
      "created_at": "2026-01-04T09:45:26Z",
      "updated_at": "2026-01-04T11:50:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2659541409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659541409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 899,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659545880",
      "pull_request_review_id": 3624915228,
      "id": 2659545880,
      "node_id": "PRRC_kwDOABII586ehXMY",
      "diff_hunk": "@@ -51,3 +52,13 @@ struct BlockCheckOptions $Proxy.wrap(\"node::BlockCheckOptions\") {\n     checkMerkleRoot @0 :Bool $Proxy.name(\"check_merkle_root\");\n     checkPow @1 :Bool $Proxy.name(\"check_pow\");\n }\n+\n+struct CoinbaseTxTemplate $Proxy.wrap(\"node::CoinbaseTxTemplate\") {\n+    version @0 :UInt32 $Proxy.name(\"version\");\n+    sequence @1 :UInt32 $Proxy.name(\"sequence\");\n+    scriptSigPrefix @2 :Data $Proxy.name(\"script_sig_prefix\");\n+    witness @3 :Data $Proxy.name(\"witness\");\n+    blockRewardRemaining @4 :Int64 $Proxy.name(\"block_reward_remaining\");",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 26,
      "original_position": 18,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 979805b81c81db4c83cf5d9ed716a5c88bf469b0 \"mining: add new getCoinbaseTx() returning a struct\"\n\nWhy is this named blocks remaining?",
      "created_at": "2026-01-04T09:53:20Z",
      "updated_at": "2026-01-04T11:50:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2659545880",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659545880"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659586400",
      "pull_request_review_id": 3624915228,
      "id": 2659586400,
      "node_id": "PRRC_kwDOABII586ehhFg",
      "diff_hunk": "@@ -99,6 +102,48 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTxTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t sequence;\n+    /**\n+     * Prefix which needs to be placed at the beginning of the scriptSig.\n+     * Clients may append extra data to this as long as the overall scriptSig\n+     * size is 100 bytes or less, to avoid the block being rejected with\n+     * \"bad-cb-length\" error.\n+     *\n+     * Currently with BIP 34, the prefix is guaranteed to be less than 8 bytes,\n+     * but future soft forks could require longer prefixes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase input.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value, and can be chosen\n+     * arbitrarily by the node, but future soft forks may constrain it.\n+     */\n+    std::optional<uint256> witness;\n+    /**\n+     * Block subsidy plus fees, minus any non-zero required_outputs.\n+     *\n+     * Currently there are no non-zero required_outputs, so block_reward_remaining\n+     * is the entire block reward. See also required_outputs.\n+     */\n+    CAmount block_reward_remaining;\n+    /*\n+     * To be included as the last outputs in the coinbase transaction.\n+     * Currently this is only the witness commitment OP_RETURN, but future\n+     * softforks or a custom mining patch could add more.\n+     *\n+     * The dummy output that spends the full reward is excluded.\n+     */",
      "path": "src/node/types.h",
      "position": 66,
      "original_position": 55,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 979805b \"mining: add new getCoinbaseTx() returning a struct\"\n\nnit: Current comment is a bit speculative. I think we should just document existing rules and requirements.",
      "created_at": "2026-01-04T11:10:52Z",
      "updated_at": "2026-01-04T11:50:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2659586400",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659586400"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 137,
      "original_start_line": 132,
      "start_side": "RIGHT",
      "line": 147,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659587811",
      "pull_request_review_id": 3624915228,
      "id": 2659587811,
      "node_id": "PRRC_kwDOABII586ehhbj",
      "diff_hunk": "@@ -50,6 +50,11 @@ struct CBlockTemplate\n     /* A vector of package fee rates, ordered by the sequence in which\n      * packages are selected for inclusion in the block template.*/\n     std::vector<FeePerVSize> m_package_feerates;\n+    /*\n+     * Coinbase transaction template, so IPC clients don't have to parse the\n+     * dummy transaction directly.\n+     */",
      "path": "src/node/miner.h",
      "position": 7,
      "original_position": 7,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 979805b \"mining: add new getCoinbaseTx() returning a struct\"\n\n\n```suggestion\n/*\n     * Coinbase transaction template includes all the\n     * fields necessary to construct a consensus valid transaction.\n     */\n```",
      "created_at": "2026-01-04T11:13:21Z",
      "updated_at": "2026-01-04T11:50:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2659587811",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659587811"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 53,
      "original_start_line": 53,
      "start_side": "RIGHT",
      "line": 56,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660143622",
      "pull_request_review_id": 3625351411,
      "id": 2660143622,
      "node_id": "PRRC_kwDOABII586ejpIG",
      "diff_hunk": "@@ -51,3 +52,13 @@ struct BlockCheckOptions $Proxy.wrap(\"node::BlockCheckOptions\") {\n     checkMerkleRoot @0 :Bool $Proxy.name(\"check_merkle_root\");\n     checkPow @1 :Bool $Proxy.name(\"check_pow\");\n }\n+\n+struct CoinbaseTxTemplate $Proxy.wrap(\"node::CoinbaseTxTemplate\") {\n+    version @0 :UInt32 $Proxy.name(\"version\");\n+    sequence @1 :UInt32 $Proxy.name(\"sequence\");\n+    scriptSigPrefix @2 :Data $Proxy.name(\"script_sig_prefix\");\n+    witness @3 :Data $Proxy.name(\"witness\");\n+    blockRewardRemaining @4 :Int64 $Proxy.name(\"block_reward_remaining\");",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 26,
      "original_position": 18,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": 2659545880,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See this thread: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2519805319",
      "created_at": "2026-01-05T02:37:27Z",
      "updated_at": "2026-01-05T02:37:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2660143622",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660143622"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660158698",
      "pull_request_review_id": 3625365501,
      "id": 2660158698,
      "node_id": "PRRC_kwDOABII586ejszq",
      "diff_hunk": "@@ -50,6 +50,11 @@ struct CBlockTemplate\n     /* A vector of package fee rates, ordered by the sequence in which\n      * packages are selected for inclusion in the block template.*/\n     std::vector<FeePerVSize> m_package_feerates;\n+    /*\n+     * Coinbase transaction template, so IPC clients don't have to parse the\n+     * dummy transaction directly.\n+     */",
      "path": "src/node/miner.h",
      "position": 7,
      "original_position": 7,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": 2659587811,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Went for a slight variation since not all values are mandatory. More accurate is to say that they're set by our mining code.",
      "created_at": "2026-01-05T02:51:55Z",
      "updated_at": "2026-01-05T02:51:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2660158698",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660158698"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 53,
      "original_start_line": 53,
      "start_side": "RIGHT",
      "line": 56,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660159080",
      "pull_request_review_id": 3625365792,
      "id": 2660159080,
      "node_id": "PRRC_kwDOABII586ejs5o",
      "diff_hunk": "@@ -893,6 +894,11 @@ class BlockTemplateImpl : public BlockTemplate\n         return m_block_template->block.vtx[0];\n     }\n \n+    CoinbaseTxTemplate getCoinbaseTx() override\n+    {\n+        return m_block_template->m_coinbase_tx_template;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": 2659541409,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's a method _on_ a template, so calling it \"template\" made things more confusing.\r\n\r\nI ended up renaming `m_coinbase_tx_template` to `m_coinbase_tx` and also renamed the struct from `CoinbaseTxTemplate` to `CoinbaseTx`.\r\n\r\nThat way the serialised transaction is referred to as \"raw_tx\" and the struct as \"tx\" and we don't use the word \"template\" in two different ways.",
      "created_at": "2026-01-05T02:52:12Z",
      "updated_at": "2026-01-05T02:52:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2660159080",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660159080"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 899,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660161935",
      "pull_request_review_id": 3625368688,
      "id": 2660161935,
      "node_id": "PRRC_kwDOABII586ejtmP",
      "diff_hunk": "@@ -99,6 +102,48 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTxTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t sequence;\n+    /**\n+     * Prefix which needs to be placed at the beginning of the scriptSig.\n+     * Clients may append extra data to this as long as the overall scriptSig\n+     * size is 100 bytes or less, to avoid the block being rejected with\n+     * \"bad-cb-length\" error.\n+     *\n+     * Currently with BIP 34, the prefix is guaranteed to be less than 8 bytes,\n+     * but future soft forks could require longer prefixes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase input.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value, and can be chosen\n+     * arbitrarily by the node, but future soft forks may constrain it.\n+     */\n+    std::optional<uint256> witness;\n+    /**\n+     * Block subsidy plus fees, minus any non-zero required_outputs.\n+     *\n+     * Currently there are no non-zero required_outputs, so block_reward_remaining\n+     * is the entire block reward. See also required_outputs.\n+     */\n+    CAmount block_reward_remaining;\n+    /*\n+     * To be included as the last outputs in the coinbase transaction.\n+     * Currently this is only the witness commitment OP_RETURN, but future\n+     * softforks or a custom mining patch could add more.\n+     *\n+     * The dummy output that spends the full reward is excluded.\n+     */",
      "path": "src/node/types.h",
      "position": 66,
      "original_position": 55,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": 2659586400,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The reason it's a bit more elaborate is that otherwise people will be confused why this is an array.\r\n\r\nThe part about merged mining is not speculative, only the part about future soft-forks. But from the point of view of a client implementer this speculation is very important to keep in mind. They should not be lazy and only take the first element from the array. And by \"they\" I mean myself :-) https://github.com/stratum-mining/sv2-tp/pull/55",
      "created_at": "2026-01-05T02:55:13Z",
      "updated_at": "2026-01-05T02:55:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2660161935",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660161935"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 137,
      "original_start_line": 132,
      "start_side": "RIGHT",
      "line": 147,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669771373",
      "pull_request_review_id": 3636441095,
      "id": 2669771373,
      "node_id": "PRRC_kwDOABII586fIXpt",
      "diff_hunk": "@@ -99,6 +102,48 @@ struct BlockCheckOptions {\n     bool check_pow{true};\n };\n \n+struct CoinbaseTxTemplate {\n+    /* nVersion */\n+    uint32_t version;\n+    /* nSequence for the only coinbase transaction input */\n+    uint32_t sequence;\n+    /**\n+     * Prefix which needs to be placed at the beginning of the scriptSig.\n+     * Clients may append extra data to this as long as the overall scriptSig\n+     * size is 100 bytes or less, to avoid the block being rejected with\n+     * \"bad-cb-length\" error.\n+     *\n+     * Currently with BIP 34, the prefix is guaranteed to be less than 8 bytes,\n+     * but future soft forks could require longer prefixes.\n+     */\n+    CScript script_sig_prefix;\n+    /**\n+     * The first (and only) witness stack element of the coinbase input.\n+     *\n+     * Omitted for block templates without witness data.\n+     *\n+     * This is currently the BIP 141 witness reserved value, and can be chosen\n+     * arbitrarily by the node, but future soft forks may constrain it.\n+     */\n+    std::optional<uint256> witness;\n+    /**\n+     * Block subsidy plus fees, minus any non-zero required_outputs.\n+     *\n+     * Currently there are no non-zero required_outputs, so block_reward_remaining\n+     * is the entire block reward. See also required_outputs.\n+     */\n+    CAmount block_reward_remaining;\n+    /*\n+     * To be included as the last outputs in the coinbase transaction.\n+     * Currently this is only the witness commitment OP_RETURN, but future\n+     * softforks or a custom mining patch could add more.\n+     *\n+     * The dummy output that spends the full reward is excluded.\n+     */",
      "path": "src/node/types.h",
      "position": 66,
      "original_position": 55,
      "commit_id": "48f57bb35bbdbce509b8ef195de69e2a61a2511e",
      "original_commit_id": "979805b81c81db4c83cf5d9ed716a5c88bf469b0",
      "in_reply_to_id": 2659586400,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2659586400\r\n\r\n> nit: Current comment is a bit speculative. I think we should just document existing rules and requirements.\r\n\r\nAgree with sjors it is important to document things that may be required in the future even if they are not required now. But in case this is updated, it would be good to make the \"Currently...\" sentence a separate final paragraph. This way, all the fields would be documented in a consistent way with descriptions & requirements first, and information about specific values they currently contain last.",
      "created_at": "2026-01-07T19:15:08Z",
      "updated_at": "2026-01-07T19:19:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2669771373",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669771373"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33819"
        }
      },
      "start_line": 137,
      "original_start_line": 132,
      "start_side": "RIGHT",
      "line": 147,
      "original_line": 147,
      "side": "RIGHT"
    }
  ]
}