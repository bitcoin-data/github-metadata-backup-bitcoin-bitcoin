{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385",
    "id": 1951692366,
    "node_id": "PR_kwDOABII5850VHZO",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30385",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30385.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30385.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
    "number": 30385,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[WIP] p2p: send not_found msgs for unknown, pruned or unwilling to share blocks",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The 'not_found' message, introduced in protocol version 70001 (Bitcoin Core 0.8.0 - Feb 2013), serves as a response to a 'getdata' message when the receiving node does not have the requested data available for relay. Thus far, this has only been applied to transactions. This PR proposes extending its use to blocks as well.\r\n\r\nCurrently, when the remote peer does not have the requested block data, it ignores the 'getdata' inventory block request. This lack of response causes the requesting node to wait (and stall if the request was for an IBD block) for 10 minutes until the request timeout is triggered. As a result, the local node abruptly disconnects the peer due to perceived unresponsiveness in order to download the block from another source, even though the peer handled the message accordantly and may still be relaying other headers, blocks, and transactions properly.\r\n\r\nThis behavior is suboptimal for well-behaving nodes. Therefore, this PR proposes sending 'not_found' messages for blocks the remote peer does not know about or no longer stores, allowing the local node to promptly request them from another peer. Doing so will help prevent network synchronization stalling scenarios, allow us to shorten idle wait times (by reducing the block request timeout for peers supporting this feature), and ensure well-behaving peers remain connected.\r\n\r\nPending tasks:\r\n1. Write detailed commits description.\r\n2. Expand PR description\r\n    1. Describe feature negotiation message. Annotate all considered options.\r\n    2. Describe 'not_found' handler behavior for blocks closer to the tip vs historical ones.\r\n3. Create BIP for the new feature negotiation message.\r\n4. Think about increasing the peer's block download priority when it signals support for the feature.\r\n5. Think about disconnecting the peer when a known feature negotiation message is received prior to the version message.\r\n6. Complete TODOs in the code.",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-07-03T13:45:12Z",
    "updated_at": "2025-10-13T11:54:35Z",
    "closed_at": "2024-10-13T16:40:43Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "furszy:2024_p2p_notfound_block_v2",
      "ref": "2024_p2p_notfound_block_v2",
      "sha": "5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 438118,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-10T18:50:03Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2025-10-07T14:26:14Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "bd5d1688b4311e21c0e0ff89a3ae02ef7d0543b8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38019,
        "stargazers_count": 86122,
        "watchers_count": 86122,
        "size": 294775,
        "default_branch": "master",
        "open_issues_count": 826,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-13T11:30:31Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-10-13T10:58:51Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 506,
    "deletions": 25,
    "changed_files": 10,
    "commits": 9,
    "review_comments": 0,
    "comments": 8
  },
  "events": [
    {
      "event": "commented",
      "id": 2206116479,
      "node_id": "IC_kwDOABII586Dfqp_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2206116479",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T13:45:16Z",
      "updated_at": "2024-07-09T00:15:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30385).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30393](https://github.com/bitcoin/bitcoin/pull/30393) (refactor: use existing RNG object in ProcessGetBlockData by maflcko)\n* [#30364](https://github.com/bitcoin/bitcoin/pull/30364) (logging: Replace LogError and LogWarning with LogAlert by ryanofsky)\n* [#30233](https://github.com/bitcoin/bitcoin/pull/30233) (refactor: move m_is_inbound out of CNodeState by sr-gi)\n* [#28055](https://github.com/bitcoin/bitcoin/pull/28055) (Bugfix: net_processing: Restore \"Already requested\" error for FetchBlock by luke-jr)\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2206116479",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "labeled",
      "id": 13381027326,
      "node_id": "LE_lADOABII586OYHgszwAAAAMdkkX-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13381027326",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T13:45:18Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "renamed",
      "id": 13381027622,
      "node_id": "RTE_lADOABII586OYHgszwAAAAMdkkcm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13381027622",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T13:45:19Z",
      "rename": {
        "from": "p2p: send not_found msgs for unknown, pruned or unwilling to share blocks",
        "to": "[WIP] p2p: send not_found msgs for unknown, pruned or unwilling to share blocks"
      }
    },
    {
      "event": "commented",
      "id": 2206166538,
      "node_id": "IC_kwDOABII586Df24K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2206166538",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T13:59:07Z",
      "updated_at": "2024-07-03T13:59:07Z",
      "author_association": "MEMBER",
      "body": "> Currently, when the remote peer does not have the requested block data, it ignores the 'getdata' inventory block request. This lack of response causes the requesting node to wait (and stall if the request was for an IBD block) for 10 minutes until the request timeout is triggered.\r\n\r\nNodes advertise which blocks they have and what their current tip is, so the timeouts should only happen if the peer is misbehaving or if you disrespect the protocol by asking for things they don't have. Disconnection seems appropriate in both cases?\r\n\r\nWhat is the problem this is trying to solve?",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2206166538",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "commented",
      "id": 2206361109,
      "node_id": "IC_kwDOABII586DgmYV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2206361109",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T14:43:39Z",
      "updated_at": "2024-07-03T14:44:57Z",
      "author_association": "MEMBER",
      "body": "> Nodes advertise which blocks they have and what their current tip is, so the timeouts should only happen if the peer is misbehaving or if you disrespect the protocol by asking for things they don't have.\r\n\r\nWe don't ask all peers about all the blocks they know about. If the node is in the main-chain, most of the time we only know their last advertised header only.\r\nOnce we are headers-wise sync, the block downloading procedure download blocks from different peers. It has a window of 16 in-flight blocks per peer. The peer who advertised the header might not be the one who ends up providing the final block.\r\n\r\nThis open a window for other scenarios such peers not responding when you ask for an old block that isn't in the main chain (fingerprinting protection), not responding when you ask for a block deeper than the pruning threshold (to avoid leaking the prune-height) or for a block that was just pruned (erased in-between the inv roundtrip). Which doesn't necessarily represent a bad behaving peer.\r\n\r\nWhen this situations arises, well-behaving peers responding with a not_found will allow us to promptly request the block from another source instead of staying idle for 10 minutes and disconnect the well-behaving peer that is still in full compliance with the protocol specs. Preferring peers signaling this feature over others over time seems the correct path to follow to me.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2206361109",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "commented",
      "id": 2206384707,
      "node_id": "IC_kwDOABII586DgsJD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2206384707",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T14:48:57Z",
      "updated_at": "2024-07-03T14:48:57Z",
      "author_association": "MEMBER",
      "body": "> The peer who advertised the header might not be the one who ends up providing the final block.\r\n\r\nI don't think we ever ask for a block from a peer without that specific peer having announced the block or a descendant to us?\r\n\r\nI can imagine asking a peer for a block that is not on the main chain (due to a very recent reorg) or due to just being pruned, though I don't know how often this happens.\r\n\r\nI think this is generally a good change, but to judge how important it is, I think it's good to have numbers about whether this actually happens in production between honest nodes.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2206384707",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "commented",
      "id": 2206523377,
      "node_id": "IC_kwDOABII586DhN_x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2206523377",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T15:20:35Z",
      "updated_at": "2024-07-03T15:24:14Z",
      "author_association": "MEMBER",
      "body": "> > The peer who advertised the header might not be the one who ends up providing the final block.\r\n> \r\n> I don't think we ever ask for a block from a peer without that specific peer having announced the block or a descendant to us?\r\n\r\nYeah. I actually spent some time checking that specifically because it would allow an easy way to partition the network by sending only the new header tip, disconnecting and expect the peer requests it to someone else who does not have it etc..\r\n\r\nWhat I meant with the \"The peer who advertised the header might not be the one who ends up providing the final block\" is that providing a descendant of a block doesn't mean the peer has the block data in all circumstances. Thus why wrote those examples.\r\n\r\n>  I think it's good to have numbers about whether this actually happens in production between honest nodes.\r\n\r\nIdeally, yeah. But.. how would you get numbers when the disconnecting peer does not tell you the idle reason? Will think about this further.\r\n\r\nProtocol wise, and generally speaking here, I don't see why a connection should stay idle for 10 minutes when two honest peers are connected. There should always be a response, even more when the other peer continue sending all other messages accordantly.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2206523377",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjMGMyODUyNTg1MzBkYWQ1NTFiYmFkNzI2MzI1ZGU3MGYxMTNjMzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac0c285258530dad551bbad726325de70f113c37",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ac0c285258530dad551bbad726325de70f113c37",
      "tree": {
        "sha": "1e45054af5a108baf50cfb96d28efd44984f7adf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e45054af5a108baf50cfb96d28efd44984f7adf"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1e45054af5a108baf50cfb96d28efd44984f7adf\nparent 2f6dca4d1c01ee47275a4292f128d714736837a1\nauthor furszy <matiasfurszyfer@protonmail.com> 1719756762 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\np2p: negotiate NOT_FOUND support for blocks\n\nIntroduces a new p2p protocol message 'SENDNOTFOUND' sent during the\nhandshake phase to notify the remote peer we support receiving\n'notfound' messages for unknown blocks.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiOwug//clrHM9ZzRpo+6vSp9P56fxnBajSNNg39s5NdgPHJIvnbLsOIeE1AuMrw\niH2ApdbMAi+Rah5p1HKRtxQ75Nh2yZ7OGYHnULnTuXFKraykbEGcFLlbfC8501wR\nh2ABEvmQCq0p9fn7LUtw78Z5QoBCj/L6wOIMBCxuauBS2dgaPK3hVzeH4iMRH4r+\ndhq/zOCg+40NXWIBggyHiB7Wv5BuBW6MGJH8XC+vZ6bPLXPoJyi/+Ny/+xqGRbuh\nCqSD1gwpaTxWFfKIJczjeaqvzlwrt3eW1qZ+wjiRKg0LKvYRgfOQFNbsKnm7jgz6\nUl+/CGB6g/tpd0ODpjgPm78u9FHTBecH2sRV5y4Md0Tu5r2XNYadKVn1EGfLwla/\ny52lsbp6jYW2Z055bdMff4gtotJPxyn7bsh+ugk7yIFscEQl7zIjzSD1cvJZtB+Y\nKiDo4Bs+J/0pXQcMbLuDmVVwY2kENHOyiajmjKCE1KZO3PEZ54mZwKIpM6oBkhho\nQW1BGAVVZfL9vuG+oYb74LGk/8WVZ8Jft0u7Ao+gdCJ9kBhDe2ExC9/YnQA6Isqo\nAu9hW8pJoc91vIEz9OLq8FoCZdPWrKm4e85Muqj6OSMFs26LcvGNTJ47Uw30s4VE\nV4LdjwZi7wE7zdwHwU61wvzRyz+ZAS/FapZeaDp3QeyndQuouYg=\n=4vGr\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f6dca4d1c01ee47275a4292f128d714736837a1",
          "sha": "2f6dca4d1c01ee47275a4292f128d714736837a1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2f6dca4d1c01ee47275a4292f128d714736837a1"
        }
      ],
      "message": "p2p: negotiate NOT_FOUND support for blocks\n\nIntroduces a new p2p protocol message 'SENDNOTFOUND' sent during the\nhandshake phase to notify the remote peer we support receiving\n'notfound' messages for unknown blocks.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-30T14:12:42Z"
      },
      "sha": "ac0c285258530dad551bbad726325de70f113c37"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE1YzBmY2JhZjFkNDYwYTc1NTIzYzdhZjhjNzY4NWRmN2ZhODdhY2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5c0fcbaf1d460a75523c7af8c7685df7fa87acb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a5c0fcbaf1d460a75523c7af8c7685df7fa87acb",
      "tree": {
        "sha": "66d33f1b22311221de47722673f45a233bb821c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66d33f1b22311221de47722673f45a233bb821c3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 66d33f1b22311221de47722673f45a233bb821c3\nparent ac0c285258530dad551bbad726325de70f113c37\nauthor furszy <matiasfurszyfer@protonmail.com> 1719776528 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\nnet: move disconnection outside the 'getdata' handler\n\nNo-behavior change.\n\nThis will allow us to be consistent in terms of when the node\nwill disconnect and also let us send a 'notfound' for blocks\ninstead of disconnecting in a simpler manner.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiPy6A/+J8NU7Z6tPeq+Bl7Jw+XA6J3LS5J62oSK3QN3fv4NTuFOtQ11d/AFJlZw\nHmYGFAPluIzAEEUin6K0BpdrcfP+RkmO21aE0eg/+8bUT1lHs4uRgsPDFaDf07fC\nShElCQxDbxG/fn0hlKF6sGwBci+qxYETp4sjunJsqLtlLSoH7YywE/1QtF521uHa\nMGEfhZuCignh0Fw+aK8aM6Rpfocfxf3ifLf26/gKUGD0TutAWbRoNBXv+AzQRCaD\nc+AeUFlcP0paA9k0xOm1wHH3gn7Kc0CXH9O8qsoZ1ZJJjgak2DIaLrUDZDNxUqv1\nJhn3b2QYlt49viJyaB2fyjM7Ct0MFzC9Jz0MrXmF2hH2n4EPcgKdBx/19PRoRZcH\n4RDJeqLA1kKr28ZvHDMLp5ON+gAPPmGcH9qwtUZgv6SgG8N2nsinFzFlx9oprEy2\nlqtKJ6Vae3Zo3HALFoe2yAHphAXSNkyRKNBFeGDroFwikDLS/yL081e/s0vnVB0p\nUMC+tmSLBlWSy09CpwOsWj9iXBRfS59u2Hvj1utaXYevTBdsvhmWeL+oRbQS9frg\nNHR3GCy42arfP456/LKFa/mrYfFIYIMo0JWGApC88oM3qwNEn+O37Yy7WDG1aNKM\n2nfHr3oOEFK2li1agiov9YXX6V6/9QgDb+0Bzk5sEBDAEHyVO0M=\n=AWWZ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac0c285258530dad551bbad726325de70f113c37",
          "sha": "ac0c285258530dad551bbad726325de70f113c37",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ac0c285258530dad551bbad726325de70f113c37"
        }
      ],
      "message": "net: move disconnection outside the 'getdata' handler\n\nNo-behavior change.\n\nThis will allow us to be consistent in terms of when the node\nwill disconnect and also let us send a 'notfound' for blocks\ninstead of disconnecting in a simpler manner.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-30T19:42:08Z"
      },
      "sha": "a5c0fcbaf1d460a75523c7af8c7685df7fa87acb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4ZTM1MDJkMmE0NDM0YzA1MzdjNmQyYjc5YmI2YTJlMjA0MWJjM2Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f",
      "tree": {
        "sha": "922eae3ea9e6b9a2010ebd2589536164073ad369",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/922eae3ea9e6b9a2010ebd2589536164073ad369"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 922eae3ea9e6b9a2010ebd2589536164073ad369\nparent a5c0fcbaf1d460a75523c7af8c7685df7fa87acb\nauthor furszy <matiasfurszyfer@protonmail.com> 1719778017 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\np2p: send NOT_FOUND for unknown/pruned blocks\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiNDvg/+NLwk2MQb3Gp3L8Ou8h0TKkztGgeVyVTsqrmso0vcFHXVel1SFmaa1+8m\neeRid7XIG8Fewhf1Xj/73U9wdZPaQTgv6c2lndcz5JYIazxE4XaM7HcSEmQHwbyU\ne1UD+fIn83mkIKh3tXnj1gmE3VeJ5nefwou29YA/h/85RahhSil8dykQ1x7Y1Db1\nnaBvjBHNWT4lSgC/7R3HqlkJcZkqxK5G/hSUSSDhB0IzRSCT7+3xq5dgXY8WK5qD\nmiRvpHzRQoAKulTp6snkKmd9zHBoV+A2XEaU15/lhzC/7dd0V1iF0ORlOltP5w3M\nrru1qPGaA6VheaNDfAzppewtY1INUlufPsx8fczT+pGZvg1lU0ZhMFiVmogXITg9\n45E5lPObMaNIB7b7pVmW4cLWl9ycrdA28+wZpAf0nWcxNX7m3+PcIIBHN/DjdDgx\nYbW+KJcaLVbirSdtnLh2WkRtk1TDCzYeqpt4/8+3lL/LoWplD3/GKVRRYLuiGs5T\nC16mZ+rdac787WRWqaM49KAYm7Vsq0H0fyJijbLDQTCg2OMRCyW7/kETznlhfpvt\nUBCIl4KFw3iaVkTmPtWrgB57c/nI3hPxjxE7z0iO5ZCCMkyNzkz86v5s54nen+W2\nL75zWoxWTU8s5eH4zR6yDPJc7sjT4/MY59BP63WooK5Vb6pAikg=\n=FWKD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5c0fcbaf1d460a75523c7af8c7685df7fa87acb",
          "sha": "a5c0fcbaf1d460a75523c7af8c7685df7fa87acb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a5c0fcbaf1d460a75523c7af8c7685df7fa87acb"
        }
      ],
      "message": "p2p: send NOT_FOUND for unknown/pruned blocks",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-30T20:06:57Z"
      },
      "sha": "b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDliMmU3MGQxMWU4YjRkODU1NzU1YWMwZDkzMmRlZTdhMTRmZTlhOTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b2e70d11e8b4d855755ac0d932dee7a14fe9a92",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9b2e70d11e8b4d855755ac0d932dee7a14fe9a92",
      "tree": {
        "sha": "0723c80898c501a37d834d090af2277a71a54909",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0723c80898c501a37d834d090af2277a71a54909"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0723c80898c501a37d834d090af2277a71a54909\nparent b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f\nauthor furszy <matiasfurszyfer@protonmail.com> 1719756954 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\nDRAFT: disconnect when a negotiation msg is received prior to the version msg?\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiPqbA/8Cx//WAeZblrcr2BQSkUKZlEqmdbJ1/TYBQQxDfNWeHLvidP/48flrmrB\nbQDjbJKqmFEerhtNs24qTGZw/0zDvqlZUBNjMaPX5hHrbSip6iQG/doYf6Eo+Yi6\nuxwghAFMSqpqLPcW83XLI1mk4A4kOqrSnljrFAEt3Hb8tIiPvIQKk4tKiU5FdHoC\nApLTU9reSJOxTFzGnUGjgN46sgCIXYo9a4GKk4s63MTspXoBYu+5poh0MZDTWtql\nwHCKmQ72+M4VEPr772A5ME52Vf8vke5NjF9B+0r2z7zvt9VsTpOTxwdq4sc/tep4\nMt/Z6duPAC0ao+cLtJVstiLjxQYa9lnBFD7PtoRGFClz3zr523Ptt8NmS9Rn+8WB\nHpYS3uJNv5kmiMzZSie688CwUJcX1siEr2puBn6FH8NB876FDA4SpxmyiQSIuas9\nt0D/ZoDnaWiulCipBMN2wdV/J5LEYeBYyniOtSXKylmZ2fxxCmB/UN3vVyBBKAk2\nlrsQKQLgXb/z7G4GyqhG8bMH4dKulmJ+smKvt9UVOcgUTL+vtcnZJgmxJZFLtpEy\noauqke4uS36yetUWO9ITVxvpfO6X3SW2vMWUV564/LwJFbUo/pfv5dMC1mwJLH80\nMRjUDBywVRUGuVodT6YxVfee8KPDnLbAHk14utF/IyZ1np/N82I=\n=BOio\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f",
          "sha": "b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b8e3502d2a4434c0537c6d2b79bb6a2e2041bc3f"
        }
      ],
      "message": "DRAFT: disconnect when a negotiation msg is received prior to the version msg?",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-30T14:15:54Z"
      },
      "sha": "9b2e70d11e8b4d855755ac0d932dee7a14fe9a92"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmYzM3OTg1ZGQ1MjZhOWJjYTg2YThlYmEyMzJhMjNjODY2NDU2OGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cfc37985dd526a9bca86a8eba232a23c8664568e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cfc37985dd526a9bca86a8eba232a23c8664568e",
      "tree": {
        "sha": "570973dab2f8fee88cf93a3638d6dca0c4ae415e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/570973dab2f8fee88cf93a3638d6dca0c4ae415e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 570973dab2f8fee88cf93a3638d6dca0c4ae415e\nparent 9b2e70d11e8b4d855755ac0d932dee7a14fe9a92\nauthor furszy <matiasfurszyfer@protonmail.com> 1717536841 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\ntest: validate 'notfound' block responses\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiMbXxAAvZtOebovtLEKKwM9AoxQScmQRzfuYc6is1MvoqQsoFbrChSbBIrFPmJk\nEFBnqTdzCJWhWb2OtQKtowdCg5e9I7vz91W7QQqruq8W3ndCaoD2h3/dMPJpVqw9\nDTlaQo68PgARLht9K9NWAKgDA44feTQwSH0QN77jRIUSvHLCtmGsf0/KmqPPELBp\nhKzJ+Kd1HtQBj2jMdT2EDeuiIR63M6knulyn51+h/tbGhDsIl2Di3EI/QZSqIsbD\nvrPYnWQW8kBeyHedn/8WfZy/qBIV7jX3KsQKyxqevaM4lLSSU7+p2ZoLcdUkKis4\nw0fLLyxHv0jPtBxft/a1Yw2j7Mq3RmaspS/7JcbXOLJdgt2Bt5NxEyHVovaObE/l\nhcskBwyB/dde7NGnfLnZBAuafbhKEXF8Wkgn4er86n/U9jhsu//jURhfufIvxrkt\n9JZfcFL4ujL+Suz1zUfV3ZkJHdo+qcCjesEd4fGi5GVS6m7/e96gUZG+YRwl4D39\nw7xrUAWX8UbWsA0HDYWvyhH9/mse7YVOCYDETrtIO/CUqv8jws406jAyeIz/q8TA\ngEkduUTcz8cettbnq2dNiQYV7lTIfV1RDwGqzK8HIJ95tCW5+OcrVTZdt76/44Aw\nl7vKt/GUq7lTYdglOCRIcQetbJSi7yTn2f7FvOvHeno7W6vx+Qo=\n=3DZw\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b2e70d11e8b4d855755ac0d932dee7a14fe9a92",
          "sha": "9b2e70d11e8b4d855755ac0d932dee7a14fe9a92",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9b2e70d11e8b4d855755ac0d932dee7a14fe9a92"
        }
      ],
      "message": "test: validate 'notfound' block responses",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-04T21:34:01Z"
      },
      "sha": "cfc37985dd526a9bca86a8eba232a23c8664568e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlkNjFiZmQxMzVjMzA0ODcyNmI5YjZlNjAyYmM0NzA4MTUxZmY1NGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9d61bfd135c3048726b9b6e602bc4708151ff54d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9d61bfd135c3048726b9b6e602bc4708151ff54d",
      "tree": {
        "sha": "0ca343bb5ca5860672700d1369b34aeefe67c917",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0ca343bb5ca5860672700d1369b34aeefe67c917"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0ca343bb5ca5860672700d1369b34aeefe67c917\nparent cfc37985dd526a9bca86a8eba232a23c8664568e\nauthor furszy <matiasfurszyfer@protonmail.com> 1719605129 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132241 -0300\n\nnet: handle 'notfound' block msgs\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpEACgkQXdI8zGhq\npiPh+g/+JmKwyG1bSnCFPdg5Ikv+gXN/CH03KohqZWjLWfrRjk9YSQOR7BTRBnH8\nPt0hUj/GfdUdc0TDyuTuM1ILeBgefVcVsgt8WVFy6Cq6KXKEu6PzqoDfwj8sRb5T\nFkJqMxqIfXirb/5k/XuW1XRgTvrE9FxGTaWWydlbnQs1F9rOl0Z+zyMKHpTGHl1C\nlME/gBJmJcTnKVB5li8kQalOqRqWyRPHITgg2isdcKpM08rH3hBEkp9Jf0X/gET/\nHGr5H4Z08YoyVsnegkRiUBOIscBU4xspsE77Wb26z8SQkdWqcKPCjmV2Ze82/CC4\nbHeJB4QG+Rj1aynVocX4i8ogj+28DOufE3UA0K6TmvfLSptHZc27XVrwjEq8elpI\n2OZqgZu0MGSuIHOoG+RXh6E1dxAg7PjtuxobU6Etla9pAhHMT4zGozb2rJhCcGgj\nA7iawtFkwIVdpv+csm3gqeV5egefkhFuGWD1aHijFHMPVMZHkPxmZBpR4dfFh787\nQUJLcHK8fs5M8m21FoSiq3RcVvZoXCD4ijVEJjHTEX52jM8izLCIz6/Sb9ZgEC8R\ne3mW2693gXUhfqhSaQ5R8Qt7V56ohDhoN18m8mQXrEyJPSUaHe2A+pBC50DEGOM3\nRyavP4zB/W2q9ZxXIBgd4VByMttwFx7NBroC/HtL84ecAu5KrzU=\n=IEi5\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cfc37985dd526a9bca86a8eba232a23c8664568e",
          "sha": "cfc37985dd526a9bca86a8eba232a23c8664568e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cfc37985dd526a9bca86a8eba232a23c8664568e"
        }
      ],
      "message": "net: handle 'notfound' block msgs",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-28T20:05:29Z"
      },
      "sha": "9d61bfd135c3048726b9b6e602bc4708151ff54d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVlMTAyM2Q4M2RjNjdmZTk5NzBiZjdkMTRjNmI4ZDk3MzFlMDYyYTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e1023d83dc67fe9970bf7d14c6b8d9731e062a9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5e1023d83dc67fe9970bf7d14c6b8d9731e062a9",
      "tree": {
        "sha": "599d18cf9d3e577617286e0b483db3d174391d20",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/599d18cf9d3e577617286e0b483db3d174391d20"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 599d18cf9d3e577617286e0b483db3d174391d20\nparent 9d61bfd135c3048726b9b6e602bc4708151ff54d\nauthor furszy <matiasfurszyfer@protonmail.com> 1719605186 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132242 -0300\n\nDrop: note for the future\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpIACgkQXdI8zGhq\npiOdyg//fM/YwYI8d9mTU3VVUUQSSdsgfFby1rY1ahbZuMraYVBA81QeH82ocCFb\n+lfXnjwpw2Tjw8Et5VDVTtQECJuaAWn/LXIAaU1SGXeGU89WdXvMuZQuJvZDWE5l\nS1S3Vw5h2V9TwVJl8EjYyK0HHzmiDxfzLnhLr/0dshBUlX84dyK376HiFKX6FfAN\n5bX8fRpm51mOB1C/cqZiOptP4TJYTVWyzOuFCr6fyW8gQdhDG2hgPNVkl2B5DgT7\nhF9lny76ix2M33gxrWO25gxq4iJR/0wbVLFb9CrYXlf27XAIOUB5jWuXJF61Gx9+\nPEsU59ev/8CALJR3rVJ6PSxhYmGMYyACSes2rY1P1sUrpm+xI3hvEAMJtSyjO6QO\n67+BjK9oiuS/y+5ve7kxq0saR06o7MJFKaNoUjNQKe9ClH72g+TYyK2gYpyWSiUN\nAcQZX726SfoSzIVovHha02FbWBMdrbh8eUr0FqpEmzp/M8t+AoK7NGULZauFm3di\nuHQj84Bh6uvzcgRd6iepGlkaIOZoW0b6Kr8rlRaYZ/E57yfmD5XsxLWdchO0GNiw\nTN55rRXT01kaXKZB9k5CdzPfy+KjNrAEc18u0IHWuY/ffFHJxHTXRw9r7D55Zg/g\nhF+xZXB1MK6Nh/ItGPycU8jcZSOZ6CPyn8ALflMbVuH3EI3S8uI=\n=vyl6\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9d61bfd135c3048726b9b6e602bc4708151ff54d",
          "sha": "9d61bfd135c3048726b9b6e602bc4708151ff54d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9d61bfd135c3048726b9b6e602bc4708151ff54d"
        }
      ],
      "message": "Drop: note for the future",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-28T20:06:26Z"
      },
      "sha": "5e1023d83dc67fe9970bf7d14c6b8d9731e062a9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdhMzU0YTdiZTNjZTc2OTFiZThkY2Q3MzExNzFhZjYxMDFhOTE4NGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a354a7be3ce7691be8dcd731171af6101a9184f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7a354a7be3ce7691be8dcd731171af6101a9184f",
      "tree": {
        "sha": "247ee17c01fea41e1c1ce4d4bfd4887bec3be2bc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/247ee17c01fea41e1c1ce4d4bfd4887bec3be2bc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 247ee17c01fea41e1c1ce4d4bfd4887bec3be2bc\nparent 5e1023d83dc67fe9970bf7d14c6b8d9731e062a9\nauthor furszy <matiasfurszyfer@protonmail.com> 1719846568 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132242 -0300\n\nRPC: getpeerinfo, return peer missing blocks\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpIACgkQXdI8zGhq\npiOinxAApuR7tMkbEiBmfIttQ0TPeuAWqYrVU7fYndE76nij2O+oHOX4iGDd81Wo\nR9uM/aTGG9Rr+IOJbXS5G/f4RM3eI+Nh3artVn/RcM0T+EIbvX5li1FmwobLzi2i\npOocF62fh6tctmdWSIebnK7nYNUCo5B4dZnfiUK0KSXRO7yYM47Txh/9yhrVboCF\n/aFeoDEKw4y/fUHnaVdZoLjsWscdz7QbF5I/If3VOElBsnYXTKMtQstSfrxVXUi7\njHLwYpCeH+2BLGakB746SYlL/lcFcDxRU42dFtk8vmRqve3zSWc3LxGtGc3Dxw0G\nz5WM7u8p3II6nXywxu2CbSCaHjZdJi4S7M32kRA1CAVNkoeCp2u0MTGGsbsEobhl\nW16yKK+7NBupAT82/tQRDJXJl/LFO1WiVmvTeQTquzjEZCPSdzb3IWtt1ZtDIy7X\nM01eoS3qapuS8MwOWdAANUcYOIxSZ/B/8JGOOMOJRj88yGKtFe/bDTZux7HI7Y/U\n3EBuQSon2ymm7WGcDFhKXq3/L+APIb1/eBypy0cl3wwd07DnMeKnIhrvQrhRFL8B\nEu5Ss9eeKhJxsL9WwHXtX5f3NCvUFbPhI4VPvFbrMgyksienHjmCoCKxi72z1fka\nCn+s2S4DE698PqRcVDw7XNBLjimIGqWgMYqjmHXmPMBnqin6yaE=\n=/Grh\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e1023d83dc67fe9970bf7d14c6b8d9731e062a9",
          "sha": "5e1023d83dc67fe9970bf7d14c6b8d9731e062a9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5e1023d83dc67fe9970bf7d14c6b8d9731e062a9"
        }
      ],
      "message": "RPC: getpeerinfo, return peer missing blocks",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-01T15:09:28Z"
      },
      "sha": "7a354a7be3ce7691be8dcd731171af6101a9184f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDViNjMxN2M5YzhhYjk0NzJhMzdhZWQ3ZjE2MDhkOTRmZTUzZWYyM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "tree": {
        "sha": "5d786fbaf196a14b7a36b1b5bfae88188d9b7475",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5d786fbaf196a14b7a36b1b5bfae88188d9b7475"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5d786fbaf196a14b7a36b1b5bfae88188d9b7475\nparent 7a354a7be3ce7691be8dcd731171af6101a9184f\nauthor furszy <matiasfurszyfer@protonmail.com> 1719774196 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1720132242 -0300\n\ntest: coverage for 'notfound' handler\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmaHIpIACgkQXdI8zGhq\npiMLOBAApdhoLVATcOCPNWir2r2HDmGY06qcX5IUF5HKoARec1A18+UKMRegou8A\nrEbJGFna6bfUSsbmADeAOVq2h1I0boKA0FhIZkaYNFDRiYGN6RSqCJAOWKDa0ELp\nayfcZhgx0C9dLLwj/JVH+wZbvDI1azEkILHVPZoX8szRYgizA0V6dWpX7GZOriyH\nWa8NYMjf3uCKbjmXqmrKLP0yxxLEqhBqybyG/Q11ArCTDtZ2/R04iHA+GQdbY/ed\nMArbFe1Y9yAoZiWvRp3szlTkidz2BaIT7WMwFzkBwcOEBdD81/bXeFr6oqyeiQ44\nAOf30P4hato+ZsYuXHwa8xGLXD3Rz6l2oK0VSXMo229LewDqsnhW/HprxZXhFrBc\n0gSneVMtirt/avmMpDUHKarJpes59Q3yuv/ZsXM/F7XLdyPFN0tRtSs0GKXkyygi\nmOy0yptxYeLTy4b94iGoWUm9ExbvXBTxBo6OdEaPVX9fl66ZFYWgSLehyQMKR6BC\nooU/s7t59vqFCNP7wz4CMgKNtM53goLHlCXihTmz00SqKeLl3JC0vYM22aN+IIXG\nCJgyCcsLlBetbJWKbY4d2Mc3wboR4UaKir7lQQ49K924JWRPiKExpkVy8i9o8uZp\npEUKhhjgua0iNXFuxX3iyAGGE4cU2rT7tT9liHcqCJYpqgKcwgA=\n=vE4+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a354a7be3ce7691be8dcd731171af6101a9184f",
          "sha": "7a354a7be3ce7691be8dcd731171af6101a9184f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7a354a7be3ce7691be8dcd731171af6101a9184f"
        }
      ],
      "message": "test: coverage for 'notfound' handler",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-07-04T22:30:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-06-30T19:03:16Z"
      },
      "sha": "5b6317c9c8ab9472a37aed7f1608d94fe53ef23c"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13398913518,
      "node_id": "HRFPE_lADOABII586OYHgszwAAAAMeozHu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13398913518",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "created_at": "2024-07-04T22:31:10Z"
    },
    {
      "event": "commented",
      "id": 2217781815,
      "node_id": "IC_kwDOABII586EMKo3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2217781815",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T13:42:03Z",
      "updated_at": "2024-07-09T13:42:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2217781815",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "labeled",
      "id": 13440642034,
      "node_id": "LE_lADOABII586OYHgszwAAAAMhH-vy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13440642034",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-09T13:42:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2267125215,
      "node_id": "IC_kwDOABII586HIZXf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2267125215",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-03T20:11:45Z",
      "updated_at": "2024-08-03T20:22:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "I believed the current behavior was this:   If a node is non-pruned it will have all blocks, no issue.  If a node is pruned it will respond to requests for the last 288 which are protocol required and will *disconnect* any peer that asks for a block outside of the window.  Again, no issue.\r\n\r\nIf I'm mistaken about the current behavior, I think it should be changed to match that behavior because:\r\n\r\nIf you allow peers to probe exactly what blocks you have, it allows tracking nodes around the network as they change addresses and potentially exposing confidential information regarding which blocks were kept (e.g. if a node kept blocks containing transactions of relevance to them).\r\n\r\nThis was a specific consideration in the design of the limited flag, and is why there isn't some kind of fancy signaling about what blocks a node has or doesn't have.\r\n\r\nKind of separately, I think that sending \"not found\" is a regression to an older period of protocol development-- and that generally not founds have been replaced with not requesting things that won't be found and disconnecting when things are unexpected as disconnection is the strongest protection against accidentally jamming a peer (and yet still harmless if it caused by some kind of crazy race condition).  Not founds were indeed used in the past but they were found to be largely a counterproductive bandwidth waste, generally useless, and a source of vulnerabilities (particularly privacy ones).   So to a first approximation I think if you find yourself thinking sending a not found is a solution to a problem, you've got a mistake somewhere else.\r\n\r\n",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2267125215",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "reviewed",
      "id": 2239237401,
      "node_id": "PRR_kwDOABII586FeA0Z",
      "url": null,
      "actor": null,
      "commit_id": "5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-08-14T21:36:01Z",
      "author_association": "MEMBER",
      "body": "Thanks for the comment gmaxwell.\r\n\r\n> I think if you find yourself thinking sending a not found is a solution to a problem, you've got a mistake somewhere else.\r\n\r\nYeah, thats actually how this working path started #28120.\r\n\r\n> I believed the current behavior was this: If a node is non-pruned it will have all blocks, no issue. If a node is pruned it will respond to requests for the last 288 which are protocol required and will disconnect any peer that asks for a block outside of the window. Again, no issue.\r\n\r\nThose scenarios are ok, but what about the following ones:\r\n\r\n- For AssumeUTXO:\r\nAssumeUTXO nodes prioritize tip synchronization first, meaning they advertise knowledge of all blocks posterior to the snapshot base block hash. This causes honest peers trying to synchronize historical block from them to forcibly disconnect due to the lack of response while the AssumeUTXO node is synchronizing the tip chain or the background one. This scenario can be replicated just by running an AssumeUTXO node and connecting a new node -> test case exercising the disconnection can be found [here](https://github.com/furszy/bitcoin-core/commit/d1fd7ec4269a35afcc841d123b5c75e986e25457).\r\n\r\n  So, based on your comment, instead of implementing something like this, would your suggestion be to signal the AssumeUTXO sync state at the network level in some way? Because that sounds like signaling when (1) the node does not have the background chain and (2) when the node finishes syncing the background chain. Which sounds odd at first.\r\nProbably not a fingerprinting concern because AssumeUTXO nodes should already be distinguishable enough just by observing their block requests. But.. I'm not so sure about it.\r\n\r\n- High-Bandwidth Peers:\r\nBIP152 mentions the possibility of relaying PoW-valid headers before fully validating the block data. So, what if the block turns out to be invalid? the relayer will ignore any following-up request and lead to disconnection.\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#pullrequestreview-2239237401",
      "submitted_at": "2024-08-14T21:35:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385"
    },
    {
      "event": "commented",
      "id": 2295018823,
      "node_id": "IC_kwDOABII586IyzVH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2295018823",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-17T22:53:25Z",
      "updated_at": "2024-08-17T23:01:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "The assumeutxo node would just be a limited node, it'll offer the most recent blocks and none of the history. (it might have more history then it offers, as is the case of any other limited node.)  Signaling in a more fine grained manner would have little to no value to the network, but would enable tracking the node around as it moves from IP to IP.   In any case, it's no justification for not-found even that aside as we wouldn't want nodes wasting their resources to connect to one only to be told not-found.\r\n\r\nIf they were used at all, it would be via signaling and so you'd know what they had to offer.  The disadvantage of signing is all those tracking problems, but those problems exist for not-found too, so signaling is equivalent for privacy but avoids wasting time connecting to and requesting from things that can't help you.\r\n\r\nAn obvious way that might evolve is through the definition of a \"less limited peer\" that also has all the blocks in the current window of X blocks or whatnot.   This was evaluated when limited was defined, but measurements showed that all older blocks past a VERY short interval were fetched at equal probability which resulted in the current limited definition.   In a world where assumeutxo were in widespread use the fetching pattern would be different but the resulting fetching pattern would depend a lot on how assumeutxo values were chosen (as they need to be chosen in a way that avoids attack), and so at the time limited was defined it was decided to not presume anything about those future fetch patterns.\r\n\r\nI believe the security/decenteralization considerations for assumeutxo have still just been ignored for the time being, so I don't think there are any clear answers on what fetching patterns it could expect.  But it would be reasonable to assume that whatever they are they could be handled by a single additional node type.\r\n\r\n> High-Bandwidth Peers:\r\n> BIP152 mentions the possibility of relaying PoW-valid headers before fully validating the block data. So, what if the block > turns out to be invalid? the relayer will ignore any following-up request and lead to disconnection.\r\n\r\nThey don't relay just headers, they relay the block, which is why the BIP directs peers to not ban each other for sending an invalid block this way so long as it was POW valid.\r\n\r\n",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#issuecomment-2295018823",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30385"
    },
    {
      "event": "referenced",
      "id": 14118403207,
      "node_id": "REFE_lADOABII586OYHgszwAAAANJhbyH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14118403207",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "943449fae8fd87e09fa99d69ccf0c68f2ced7586",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/943449fae8fd87e09fa99d69ccf0c68f2ced7586",
      "created_at": "2024-09-03T16:50:59Z"
    },
    {
      "event": "referenced",
      "id": 14122283649,
      "node_id": "REFE_lADOABII586OYHgszwAAAANJwPKB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14122283649",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1f91abcc2c5d0b3aac20972398ab5d11de3cc217",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/1f91abcc2c5d0b3aac20972398ab5d11de3cc217",
      "created_at": "2024-09-03T23:29:56Z"
    },
    {
      "event": "referenced",
      "id": 14137907833,
      "node_id": "REFE_lADOABII586OYHgszwAAAANKr1p5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14137907833",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fafc73bc036792923ca64a112684abaf78f3b48e",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/fafc73bc036792923ca64a112684abaf78f3b48e",
      "created_at": "2024-09-04T21:45:58Z"
    },
    {
      "event": "reviewed",
      "id": 2281528955,
      "node_id": "PRR_kwDOABII586H_V57",
      "url": null,
      "actor": null,
      "commit_id": "5b6317c9c8ab9472a37aed7f1608d94fe53ef23c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-09-04T22:37:33Z",
      "author_association": "MEMBER",
      "body": "> The assumeutxo node would just be a limited node, it'll offer the most recent blocks and none of the history. (it might have more history then it offers, as is the case of any other limited node.)\r\n\r\nYeah, this was the piece I was missing. Thanks!\r\nFunny, I thought about a dynamically adjustable network signal but didn't consider reusing the limited service flag by enabling/disabling full-node service support based on the assumeUTXO background chain-sync status..\r\n\r\nCreated #30807 implementing it. It fixes the last honest peer disconnection scenario I had in mind.\r\n\r\n> > High-Bandwidth Peers:\r\n> > BIP152 mentions the possibility of relaying PoW-valid headers before fully validating the block data. So, what if the block > turns out to be invalid? the relayer will ignore any following-up request and lead to disconnection.\r\n> \r\n> They don't relay just headers, they relay the block, which is why the BIP directs peers to not ban each other for sending an invalid block this way so long as it was POW valid.\r\n\r\nYeah ok, great.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30385#pullrequestreview-2281528955",
      "submitted_at": "2024-09-04T22:37:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30385"
    },
    {
      "event": "referenced",
      "id": 14220272274,
      "node_id": "REFE_lADOABII586OYHgszwAAAANPmCKS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14220272274",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "349632e022da22a457a85650360b5be41fa500dc",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/349632e022da22a457a85650360b5be41fa500dc",
      "created_at": "2024-09-11T17:37:48Z"
    },
    {
      "event": "closed",
      "id": 14620083861,
      "node_id": "CE_lADOABII586OYHgszwAAAANnbMaV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14620083861",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-13T16:40:43Z"
    },
    {
      "event": "locked",
      "id": 20245654015,
      "node_id": "LOE_lADOABII586OYHgszwAAAAS2vCn_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20245654015",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-13T11:54:35Z"
    }
  ],
  "comments": []
}