{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471",
    "id": 1514289105,
    "node_id": "PR_kwDOABII585aQjfR",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28471",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28471.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28471.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/eb8f58f5e4a249d55338304099e8238896d2316d",
    "number": 28471,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Fix virtual size limit enforcement in transaction package context",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "(Alternative) Minimal subset of https://github.com/bitcoin/bitcoin/pull/28345 to:\r\n\r\n1) Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT which accounts for additional WU necessary to not exclude default chain limit transactions that would have been accepted individually. Avoids sigops vbyte confusion.\r\n2) pass correct vsize to chain limit evaluations in package context\r\n3) stop overly-large packages that have no existing mempool ancestors (also a bugfix by itself if someone sets non-standard chain limits)\r\n\r\nThis should fix the known issues while not blocking additional refactoring later.",
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-09-13T17:34:31Z",
    "updated_at": "2023-09-20T15:34:53Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "244a4f1243f3c227f87c81c43e541fe1c4286698",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "instagibbs:package_eval_sigops",
      "ref": "package_eval_sigops",
      "sha": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 13910191,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMzkxMDE5MQ==",
        "name": "bitcoin",
        "full_name": "instagibbs/bitcoin",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bitcoin",
        "archive_url": "https://api.github.com/repos/instagibbs/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bitcoin/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bitcoin/hooks",
        "svn_url": "https://github.com/instagibbs/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 220835,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-20T15:34:01Z",
        "created_at": "2013-10-27T20:56:53Z",
        "updated_at": "2022-12-28T23:57:23Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ff564c75e751db6cfaf2a5f1b8a3b471f510976f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35712,
        "stargazers_count": 71423,
        "watchers_count": 71423,
        "size": 240039,
        "default_branch": "master",
        "open_issues_count": 687,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-20T15:34:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-09-20T13:53:46Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 99,
    "deletions": 28,
    "changed_files": 8,
    "commits": 4,
    "review_comments": 56,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 1718044144,
      "node_id": "IC_kwDOABII585mZ0Xw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718044144",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T17:34:34Z",
      "updated_at": "2023-09-20T15:22:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1727530471) |\n| Stale ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635669939), [ariard](https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635769197) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28472](https://github.com/bitcoin/bitcoin/pull/28472) (Remove MemPoolAccept::m_limits to avoid mutating it in package evaluation by instagibbs)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1718044144",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T18:08:33Z",
      "updated_at": "2023-09-13T18:08:33Z",
      "source": {
        "issue": {
          "id": 1890612597,
          "node_id": "PR_kwDOABII585aB2AA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28450",
          "number": 28450,
          "state": "open",
          "state_reason": null,
          "title": "Add package evaluation fuzzer",
          "body": "This fuzzer target caught the issue in https://github.com/bitcoin/bitcoin/pull/28251 within 5 minutes on master branch, and an additional issue which I've applied a preliminary patch to cover.\r\n\r\nFuzzer target does the following:\r\n\r\n1) Picks mempool confgs, including max package size, count, mempool size, etc\r\n2) Generates 1 to 26 transactions with arbitrary coins/fees, the first N-1 spending only confirmed outpoints\r\n3) Nth transaction, if >1, sweeps all unconfirmed outpoints in mempool\r\n4) If N==1, it may submit it through single-tx submission path, to allow for more interesting topologies\r\n5) Otherwise submits through package submission interface\r\n6) Repeat 1-5  a few hundred times per mempool instance\r\n\r\nIn other words, it ends up building chains of txns in the mempool using parents-and-children packages, which is currently the topology supported on master.\r\n\r\nThe test itself is a direct rip of tx_pool.cpp, with a number of assertions removed because they were failing for unknown reasons, likely due to the notification changes of single tx submission to package, which is used to track addition/removal of transactions in the test. I'll continue working on re-adding these assertions for further invariant testing.",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28450",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28450",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28450.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28450.patch"
          },
          "created_at": "2023-09-11T14:10:48Z",
          "updated_at": "2023-09-20T15:45:23Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1626338420,
      "node_id": "PRR_kwDOABII585g7_R0",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, thanks for taking this over!",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626338420",
      "submitted_at": "2023-09-14T08:40:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "reviewed",
      "id": 1626349423,
      "node_id": "PRR_kwDOABII585g8B9v",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626349423",
      "submitted_at": "2023-09-14T08:42:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T08:54:06Z",
      "updated_at": "2023-09-14T08:54:06Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n**What should I review now?**\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28471 #28450 #28472\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up:\r\n\r\n**Mempool, Policy, Validation**\r\n- [x] Enable validation of multiple transactions in ATMP\r\n  - [x] Refactoring #21062, #22675, #23381\r\n  - [x] #20833\r\n  - [x] #21800\r\n  - [x] #22674\r\n- [x] #24152\r\n- [x] #24836 \r\n- [x] Avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool (currently only possible through reorgs and replacements after package CPFP). There are multiple options:\r\n   - Don't ever allow v1 and v2 txs below minrelaytxfee (#26933)\r\n   - Mine everything that makes it into in the mempool (default blockmintxfee to 0). Trim descendant packages <=0 fees, even when the mempool is not full (#27018)\r\n   - Other long-term improvements that address this problem, e.g. #27677.\r\n- [x] #28251\r\n- [ ] #28471\r\n- [ ] #28450\r\n- [ ] #28472\r\n- [ ] #26711\r\n- (Some existing DoS and incentive compatibility issues are addressed. It is safe to expose this interface on P2P)\r\n\r\n**Additional Policy**\r\n- [ ] Add v3 rules that make transactions/packages easier to work with (#25038)\r\n- [ ] Introduce a Miner Incentive Compatibility Score rule to RBF\r\n  - This is done for v3 transactions in #25038.\r\n  - Cluster-based mempool would allow this for all transactions: #27677.\r\n- [ ] Enable Package RBF for v3 transactions (#25038)\r\n- (Things like LN can sign things 0-fee, add fees at broadcast, and avoid pinning attacks. Assuming package relay is available.)\r\n- [ ] Add Ephemeral Anchors rules for v3 transactions (#26403)\r\n- (LN symmetry and other things can have 0-value anchors.)\r\n\r\n**P2P, Net Processing**\r\nFull implementation: #27742\r\n- [ ] BIP 331 (bitcoin/bips/pull/1382)\r\n- [ ] #28031\r\n  - [x] #28199\r\n  - [x] #28364\r\n  - [ ] #28481\r\n- (Orphan-handling is more robust)\r\n- [ ] (Milestone 2/3) Negotiate package relay support with peers, gated by config flag (`sendpackages`). Request ancestor package information for orphans (`MSG_ANCPKGINFO`, `ancpkginfo`).\r\n- (Assuming adoption, in most cases, package relay nodes never need to use txid-based relay)\r\n- [ ] (Milestone 3/3) Using package info, request (`getpkgtxns`), download (`pkgtxns`), and submit packages together.\r\n  - [ ] Introduce a mechanism for protecting orphan transactions from eviction.\r\n  - [ ] Avoid telling legacy peers about transactions that depend on below-fee-filter parents.\r\n- [ ] Default `-packagerelay` config flag to true.\r\n- (Assuming adoption, below-mempool min feerate CPFP'd transactions propagate.)",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 11,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2023-09-20T13:49:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1626396875,
      "node_id": "PRR_kwDOABII585g8NjL",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626396875",
      "submitted_at": "2023-09-14T08:58:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:50:30Z",
      "updated_at": "2023-09-14T10:50:30Z",
      "source": {
        "issue": {
          "id": 1500046485,
          "node_id": "PR_kwDOABII585FocrT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
          "number": 26711,
          "state": "open",
          "state_reason": null,
          "title": "validate package transactions with their in-package ancestor sets",
          "body": "Builds on #28471 #28450 #28472, please review those first.\r\n\r\nThis contains everything to make mempool/validation logic ready for package relay (see #27463).\r\n\r\nThe hope here is to end up with the incentive-compatible transactions in our mempool. Prior to this commit, if parents within the package relied on each other, we could end up (1) accepting a low-feerate child or (2) rejecting high-feerate parents. See the \"interdependent parents\" test case for a specific example.\r\n\r\nA description of the package validation logic: https://github.com/bitcoin/bitcoin/pull/26711#issuecomment-1647523520",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 21,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26711",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26711.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26711.patch"
          },
          "created_at": "2022-12-16T11:27:00Z",
          "updated_at": "2023-09-20T13:41:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1719231937,
      "node_id": "IC_kwDOABII585meWXB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719231937",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:59:02Z",
      "updated_at": "2023-09-14T10:59:02Z",
      "author_association": "MEMBER",
      "body": "Can you add tests for the bug fixes?",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1719231937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T19:34:53Z",
      "updated_at": "2023-09-14T19:34:53Z",
      "source": {
        "issue": {
          "id": 1895049059,
          "node_id": "PR_kwDOABII585aQ1WG",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28472",
          "number": 28472,
          "state": "closed",
          "state_reason": null,
          "title": "Remove MemPoolAccept::m_limits to avoid mutating it in package evaluation",
          "body": "Without remoing it, if we ever call `PreChecks()` multiple times for any reason during any one `MempoolAccept`, subsequent invocations may have incorrect limits, allowing longer/larger chains than should be allowed.\r\n\r\nCurrently this is only an issue with `submitpackage`, so this is not exposed on mainnet.",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28472",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28472",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28472.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28472.patch"
          },
          "closed_at": "2023-09-20T11:49:26Z",
          "created_at": "2023-09-13T18:33:27Z",
          "updated_at": "2023-09-20T11:49:27Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10376647921,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJqfxTx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10376647921",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:32:35Z"
    },
    {
      "event": "commented",
      "id": 1720109700,
      "node_id": "IC_kwDOABII585mhsqE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1720109700",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:34:32Z",
      "updated_at": "2023-09-14T20:34:32Z",
      "author_association": "MEMBER",
      "body": "> Can you add tests for the bug fixes?\r\n\r\nAdded.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1720109700",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "reviewed",
      "id": 1628558831,
      "node_id": "PRR_kwDOABII585hEdXv",
      "url": null,
      "actor": null,
      "commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM except worried about rounding and error strings. Also a few nits on the test.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1628558831",
      "submitted_at": "2023-09-15T10:10:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383504378,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq57P6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383504378",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:26:25Z"
    },
    {
      "event": "reviewed",
      "id": 1628960489,
      "node_id": "PRR_kwDOABII585hF_bp",
      "url": null,
      "actor": null,
      "commit_id": "0ad836975b435b3a26eb4008c65e976a64e08f04",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1628960489",
      "submitted_at": "2023-09-15T13:32:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383649588,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq6es0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383649588",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:40:06Z"
    },
    {
      "event": "reviewed",
      "id": 1629000702,
      "node_id": "PRR_kwDOABII585hGJP-",
      "url": null,
      "actor": null,
      "commit_id": "3a4adfbfa6a947721bf140a534fb2aefdf0922fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 3a4adfbfa6a947721bf140a534fb2aefdf0922fd with a doc nit",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1629000702",
      "submitted_at": "2023-09-15T13:56:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383834151,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq7Lwn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383834151",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:57:44Z"
    },
    {
      "event": "commented",
      "id": 1721330494,
      "node_id": "IC_kwDOABII585mmWs-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721330494",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z",
      "updated_at": "2023-09-15T13:59:14Z",
      "author_association": "MEMBER",
      "body": "Could we get a review from maybe @luke-jr or @ariard?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1721330494",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "mentioned",
      "id": 10383849686,
      "node_id": "MEE_lADOABII585w8ugDzwAAAAJq7PjW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849686",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "subscribed",
      "id": 10383849700,
      "node_id": "SE_lADOABII585w8ugDzwAAAAJq7Pjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849700",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "mentioned",
      "id": 10383849714,
      "node_id": "MEE_lADOABII585w8ugDzwAAAAJq7Pjy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849714",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "subscribed",
      "id": 10383849729,
      "node_id": "SE_lADOABII585w8ugDzwAAAAJq7PkB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849729",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:00:34Z",
      "updated_at": "2023-09-15T14:00:34Z",
      "source": {
        "issue": {
          "id": 906098291,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjU3MTMyNDg2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
          "number": 22097,
          "state": "closed",
          "state_reason": null,
          "title": "validation: Move package acceptance size limit from KvB to WU",
          "body": "Class of second-layers applications interested by the package acceptance API are mostly relying on trustless chain of transactions which are necessarily made of segwit input. As such, most of them are making their internal propagation sanity checks and feerate computations already in weight units (at least I can confirm for Lightning, it's mandatory in the spec to announce `feerate_per_kw` to your counterparty).\r\n\r\nTo reduce odds of bugs in second-layers implementations, such as the one mentioned in #13283, this PR changes the package acceptance size limit from kilo-bytes to weight units.\r\n\r\nE.g an internal Lightning onchain logic with an already-computed package weight of 404_002 (100_000 bytes of regular fields, 4002 bytes of witness fields), dividing by WITNESS_SCALE_FACTOR, obtaining 101_000 virtual bytes, checking against MAX_PACKAGE_SIZE and then wrongly evaluating the package as valid for mempool acceptance.\r\n\r\nIt also matches our max transaction size check already expressed in weight units (`MAX_STANDARD_TX_WEIGHT`).",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22097",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22097.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22097.patch"
          },
          "closed_at": "2022-07-09T00:00:02Z",
          "created_at": "2021-05-28T21:37:41Z",
          "updated_at": "2023-09-15T14:00:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 10383884171,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq7X-L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383884171",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:02:12Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "reviewed",
      "id": 1629076299,
      "node_id": "PRR_kwDOABII585hGbtL",
      "url": null,
      "actor": null,
      "commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1629076299",
      "submitted_at": "2023-09-15T14:25:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "labeled",
      "id": 10384193095,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq8jZH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384193095",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:30:16Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10384571691,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq9_0r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384571691",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:04:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10384622922,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq-MVK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384622922",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:09:43Z"
    },
    {
      "event": "labeled",
      "id": 10384624074,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq-MnK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384624074",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:09:48Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10386118570,
      "node_id": "UNLE_lADOABII585w8ugDzwAAAAJrD5eq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10386118570",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T17:58:44Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 10412819607,
      "node_id": "RRE_lADOABII585w8ugDzwAAAAJspwSX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10412819607",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-19T16:19:05Z",
      "requested_reviewer": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 10412819633,
      "node_id": "RRE_lADOABII585w8ugDzwAAAAJspwSx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10412819633",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-19T16:19:05Z",
      "requested_reviewer": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 1726233439,
      "node_id": "IC_kwDOABII585m5Dtf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726233439",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-19T17:58:13Z",
      "updated_at": "2023-09-19T17:58:13Z",
      "author_association": "MEMBER",
      "body": "Concept ACK on replacing `MAX_PACKAGE_SIZE` to `MAX_PACKAGE_WEIGHT` and other changes sounds good to me, will code review more soon.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1726233439",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "reviewed",
      "id": 1635188756,
      "node_id": "PRR_kwDOABII585hdwAU",
      "url": null,
      "actor": null,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635188756",
      "submitted_at": "2023-09-20T09:55:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "reviewed",
      "id": 1635249883,
      "node_id": "PRR_kwDOABII585hd-7b",
      "url": null,
      "actor": null,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635249883",
      "submitted_at": "2023-09-20T10:00:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "reviewed",
      "id": 1635371928,
      "node_id": "PRR_kwDOABII585hecuY",
      "url": null,
      "actor": null,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635371928",
      "submitted_at": "2023-09-20T11:02:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "commented",
      "id": 1727530471,
      "node_id": "IC_kwDOABII585m-AXn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1727530471",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T11:23:03Z",
      "updated_at": "2023-09-20T11:23:03Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1727530471",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUzMzY2MGM1OGFkNWEyMTg2NzFhOWJjMTUzNzI5OWIxZDY3YmI1NWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/533660c58ad5a218671a9bc1537299b1d67bb55d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/533660c58ad5a218671a9bc1537299b1d67bb55d",
      "tree": {
        "sha": "778fdb31bdb83477dd84c6b44ead3ba8435a6dfa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/778fdb31bdb83477dd84c6b44ead3ba8435a6dfa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3966b0a0b6b5e6110ba8106c04af1067fc6219bc",
          "sha": "3966b0a0b6b5e6110ba8106c04af1067fc6219bc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3966b0a0b6b5e6110ba8106c04af1067fc6219bc"
        }
      ],
      "message": "Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT to avoid vbyte confusion\n\nWhile allowing submitted packages to be slightly larger than what\nmay be allowed in the mempool to allow simpler reasoning\nabout contextual-less checks vs chain limits.",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-20T12:10:30Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-13T17:13:57Z"
      },
      "sha": "533660c58ad5a218671a9bc1537299b1d67bb55d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJjMDEzZmU4ZTNkMGJhZTJhYjc2NmE4MjQ4MjE5YWEzYzllMzQ0ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc013fe8e3d0bae2ab766a8248219aa3c9e344df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bc013fe8e3d0bae2ab766a8248219aa3c9e344df",
      "tree": {
        "sha": "f425ce366fea94e990ee24092151682d2f5f2258",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f425ce366fea94e990ee24092151682d2f5f2258"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/533660c58ad5a218671a9bc1537299b1d67bb55d",
          "sha": "533660c58ad5a218671a9bc1537299b1d67bb55d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/533660c58ad5a218671a9bc1537299b1d67bb55d"
        }
      ],
      "message": "Bugfix: Pass correct virtual size to CheckPackageLimits",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-20T12:13:18Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-08-26T00:09:16Z"
      },
      "sha": "bc013fe8e3d0bae2ab766a8248219aa3c9e344df"
    },
    {
      "event": "reviewed",
      "id": 1635474133,
      "node_id": "PRR_kwDOABII585he1rV",
      "url": null,
      "actor": null,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635474133",
      "submitted_at": "2023-09-20T12:21:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10422630150,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJtPLcG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10422630150",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T12:34:48Z"
    },
    {
      "event": "commented",
      "id": 1727637331,
      "node_id": "IC_kwDOABII585m-adT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1727637331",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T12:35:52Z",
      "updated_at": "2023-09-20T12:35:52Z",
      "author_association": "MEMBER",
      "body": "rebased on latest master with all suggestions included (will discuss @ariard note)",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1727637331",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "mentioned",
      "id": 10422641828,
      "node_id": "MEE_lADOABII585w8ugDzwAAAAJtPOSk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10422641828",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T12:35:52Z"
    },
    {
      "event": "subscribed",
      "id": 10422641843,
      "node_id": "SE_lADOABII585w8ugDzwAAAAJtPOSz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10422641843",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T12:35:53Z"
    },
    {
      "event": "reviewed",
      "id": 1635669939,
      "node_id": "PRR_kwDOABII585hflez",
      "url": null,
      "actor": null,
      "commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 5c48501e9f1a3da5307b1bee08396598398311e8",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635669939",
      "submitted_at": "2023-09-20T13:39:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "reviewed",
      "id": 1635769197,
      "node_id": "PRR_kwDOABII585hf9tt",
      "url": null,
      "actor": null,
      "commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK 5c48501e9f\r\n\r\nTest coverage sounds it can be better.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1635769197",
      "submitted_at": "2023-09-20T14:28:51Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFhNTc5ZjlkMDEyNTZiMGIyNTcwMTY4NDk2ZDEyOWE4YjIwMDliMzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a579f9d01256b0b2570168496d129a8b2009b35",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1a579f9d01256b0b2570168496d129a8b2009b35",
      "tree": {
        "sha": "c0e278acbdce40a6d82b16ea6f4ed0ecc0935286",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c0e278acbdce40a6d82b16ea6f4ed0ecc0935286"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc013fe8e3d0bae2ab766a8248219aa3c9e344df",
          "sha": "bc013fe8e3d0bae2ab766a8248219aa3c9e344df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bc013fe8e3d0bae2ab766a8248219aa3c9e344df"
        }
      ],
      "message": "Handle over-sized (in virtual bytes) packages with no in-mempool ancestors",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-20T14:34:09Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-11T13:55:39Z"
      },
      "sha": "1a579f9d01256b0b2570168496d129a8b2009b35"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10424728683,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJtXLxr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10424728683",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T15:22:19Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGViOGY1OGY1ZTRhMjQ5ZDU1MzM4MzA0MDk5ZTgyMzg4OTZkMjMxNmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb8f58f5e4a249d55338304099e8238896d2316d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eb8f58f5e4a249d55338304099e8238896d2316d",
      "tree": {
        "sha": "1debb8e611725058679a3e8cc801c605a52b2c92",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1debb8e611725058679a3e8cc801c605a52b2c92"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a579f9d01256b0b2570168496d129a8b2009b35",
          "sha": "1a579f9d01256b0b2570168496d129a8b2009b35",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1a579f9d01256b0b2570168496d129a8b2009b35"
        }
      ],
      "message": "Add functional test to catch too large vsize packages",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-20T15:33:53Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-14T20:29:55Z"
      },
      "sha": "eb8f58f5e4a249d55338304099e8238896d2316d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10424871476,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJtXuo0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10424871476",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T15:34:06Z"
    },
    {
      "event": "labeled",
      "id": 10424872511,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJtXu4_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10424872511",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T15:34:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325590380",
      "pull_request_review_id": 1626338420,
      "id": 1325590380,
      "node_id": "PRRC_kwDOABII585PAuds",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KB` total size",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "45b71639aee09bea75f521ebc86be9698ef655b7",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would it be simpler / easier to understand if we just said there's a maximum weight `MAX_PACKAGE_WEIGHT=404000`?",
      "created_at": "2023-09-14T08:38:38Z",
      "updated_at": "2023-09-14T08:40:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325590380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325590380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325595634",
      "pull_request_review_id": 1626349423,
      "id": 1325595634,
      "node_id": "PRRC_kwDOABII585PAvvy",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Needs test coverage, maybe in test/functional/mempool_sigoplimit.py? Or a unit test for `CheckPackageLimits`?",
      "created_at": "2023-09-14T08:42:20Z",
      "updated_at": "2023-09-14T08:42:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325595634",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325595634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325620063",
      "pull_request_review_id": 1626396875,
      "id": 1325620063,
      "node_id": "PRRC_kwDOABII585PA1tf",
      "diff_hunk": "",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps include a note in the e4640da4bcacb513c7b602ff3127f65963c3bba4 commit message that you're specifically trying to catch when total package *sigop-adjusted* vsize. Might be helpful to a future git-blamer who may think this code is redundant with the other package size checks.",
      "created_at": "2023-09-14T08:58:41Z",
      "updated_at": "2023-09-14T08:58:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325620063",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325620063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488688",
      "pull_request_review_id": 1627711659,
      "id": 1326488688,
      "node_id": "PRRC_kwDOABII585PEJxw",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": 1325595634,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added in mempool_sigoplimit.py since this change threads through a few layers",
      "created_at": "2023-09-14T20:34:54Z",
      "updated_at": "2023-09-14T20:34:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326488688",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488688"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488898",
      "pull_request_review_id": 1627711950,
      "id": 1326488898,
      "node_id": "PRRC_kwDOABII585PEJ1C",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KB` total size",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "45b71639aee09bea75f521ebc86be9698ef655b7",
      "in_reply_to_id": 1325590380,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "did MAX_PACKAGE_KWEIGHT=404",
      "created_at": "2023-09-14T20:35:07Z",
      "updated_at": "2023-09-14T20:35:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326488898",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488898"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326489211",
      "pull_request_review_id": 1627712498,
      "id": 1326489211,
      "node_id": "PRRC_kwDOABII585PEJ57",
      "diff_hunk": "",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": 1325620063,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-14T20:35:27Z",
      "updated_at": "2023-09-14T20:35:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326489211",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326489211"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327038069",
      "pull_request_review_id": 1628558831,
      "id": 1327038069,
      "node_id": "PRRC_kwDOABII585PGP51",
      "diff_hunk": "@@ -15,8 +15,11 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n+/** Default maximum total weight of transactions in a package in KWu and (non-virtual) KB\n+    to allow for context-less checks. */\n+static constexpr uint32_t MAX_PACKAGE_KWEIGHT = 404;\n+static constexpr uint32_t MAX_PACKAGE_SIZE{MAX_PACKAGE_KWEIGHT / WITNESS_SCALE_FACTOR};\n+static_assert(MAX_PACKAGE_SIZE == 101);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 10,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "86eb12aec1110dcf506846d1dbe4dc58b8254612",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "86eb12aec1110dcf506846d1dbe4dc58b8254612\r\n\r\nMight it be better to not define a `MAX_PACKAGE_SIZE` and just do weight instead? I'd be worried about rounding errors as they can add up as we round for each transaction's `GetVirtualTransactionSize()`.\r\n\r\nI suggest just doing a `MAX_PACKAGE_WEIGHT_KWU` and changing packages.cpp to sum `GetTransactionWeight` instead.",
      "created_at": "2023-09-15T09:21:42Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327038069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327038069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327061651",
      "pull_request_review_id": 1628558831,
      "id": 1327061651,
      "node_id": "PRRC_kwDOABII585PGVqT",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 58,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\n\r\nWorth checking + explaining the numbers?\r\n```suggestion\r\n        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\r\n        assert parent_individual_testres[\"allowed\"]\r\n        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\r\n        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\r\n```",
      "created_at": "2023-09-15T09:43:06Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327061651",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327061651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327063987",
      "pull_request_review_id": 1628558831,
      "id": 1327063987,
      "node_id": "PRRC_kwDOABII585PGWOz",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+\n+        # Transactions are tiny in weight\n+        assert_greater_than(500, len(tx_parent.serialize()) + len(tx_child.serialize()))",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 66,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\nmaybe use the actual weight getter instead\r\n```suggestion\r\n        assert_greater_than(2000, tx_parent.get_weight() + tx_child.get_weight())\r\n```",
      "created_at": "2023-09-15T09:45:24Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327063987",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327063987"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327068385",
      "pull_request_review_id": 1628558831,
      "id": 1327068385,
      "node_id": "PRRC_kwDOABII585PGXTh",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 65,
      "original_position": 63,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\n\r\nAdd comment explaining why the error message is different between testmempoolaccept and submitpackage\r\n```suggestion\r\n        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\r\n       assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\r\n       assert tx_parent.rehash() in self.nodes[0].getrawmempool()\r\n```",
      "created_at": "2023-09-15T09:49:40Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327068385",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327068385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 172,
      "original_line": 172,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327086508",
      "pull_request_review_id": 1628558831,
      "id": 1327086508,
      "node_id": "PRRC_kwDOABII585PGbus",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (entry_count > static_cast<uint64_t>(limits.ancestor_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many ancestors in package %u [limit: %u]\", entry_count, limits.ancestor_count))};\n+    } else if (entry_count > static_cast<uint64_t>(limits.descendant_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many descendants in package %u [limit: %u]\", entry_count, limits.descendant_count))};\n+    } else if (entry_size > limits.ancestor_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds ancestor size limit %u [limit: %u]\", entry_size, limits.ancestor_size_vbytes))};\n+    } else if (entry_size > limits.descendant_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds descendant size limit for tx %u [limit: %u]\", entry_size, limits.descendant_size_vbytes))};",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e\r\n\r\nWhy is this in `CalculateAncestorsAndCheckLimits` instead of `CheckPackageLimits`? Would be faster to check this before calculating `staged_ancestors`.\r\n\r\nAlso I wonder if this could be a confusing error string due to how we're checking. e.g. descendant limit < ancestor limit, so a child-with-24-parents package hits \"too many descendants\" even if everyone has a descendant count of 1 or 2.\r\n\r\nPerhaps more clear is \"package count exceeds ancestor count limit,\" \"package vsize exceeds ancestor count limit,\" etc.",
      "created_at": "2023-09-15T10:07:03Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327086508",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327086508"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 169,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288224",
      "pull_request_review_id": 1628954787,
      "id": 1327288224,
      "node_id": "PRRC_kwDOABII585PHM-g",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 65,
      "original_position": 63,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327068385,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:26Z",
      "updated_at": "2023-09-15T13:26:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288224",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 172,
      "original_line": 172,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288287",
      "pull_request_review_id": 1628954898,
      "id": 1327288287,
      "node_id": "PRRC_kwDOABII585PHM_f",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+\n+        # Transactions are tiny in weight\n+        assert_greater_than(500, len(tx_parent.serialize()) + len(tx_child.serialize()))",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 66,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327063987,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:30Z",
      "updated_at": "2023-09-15T13:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288287",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288287"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288376",
      "pull_request_review_id": 1628955021,
      "id": 1327288376,
      "node_id": "PRRC_kwDOABII585PHNA4",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 58,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327061651,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:34Z",
      "updated_at": "2023-09-15T13:26:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288376",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288442",
      "pull_request_review_id": 1628955130,
      "id": 1327288442,
      "node_id": "PRRC_kwDOABII585PHNB6",
      "diff_hunk": "@@ -15,8 +15,11 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n+/** Default maximum total weight of transactions in a package in KWu and (non-virtual) KB\n+    to allow for context-less checks. */\n+static constexpr uint32_t MAX_PACKAGE_KWEIGHT = 404;\n+static constexpr uint32_t MAX_PACKAGE_SIZE{MAX_PACKAGE_KWEIGHT / WITNESS_SCALE_FACTOR};\n+static_assert(MAX_PACKAGE_SIZE == 101);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 10,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "86eb12aec1110dcf506846d1dbe4dc58b8254612",
      "in_reply_to_id": 1327038069,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done.",
      "created_at": "2023-09-15T13:26:37Z",
      "updated_at": "2023-09-15T13:26:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288442",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327291876",
      "pull_request_review_id": 1628960489,
      "id": 1327291876,
      "node_id": "PRRC_kwDOABII585PHN3k",
      "diff_hunk": "@@ -47,7 +48,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total (non-virtual) size cannot exceed MAX_PACKAGE_KWU / WITNESS_SCALE_FACTOR.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 0774c39e86ca52b747ace02f367617f4d6d88305\r\n\r\ntotal weight",
      "created_at": "2023-09-15T13:29:29Z",
      "updated_at": "2023-09-15T13:32:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327291876",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327291876"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327293199",
      "pull_request_review_id": 1628960489,
      "id": 1327293199,
      "node_id": "PRRC_kwDOABII585PHOMP",
      "diff_hunk": "@@ -122,7 +122,7 @@ BOOST_FIXTURE_TEST_CASE(package_validation_tests, TestChain100Setup)\n \n     // A single, giant transaction submitted through ProcessNewPackage fails on single tx policy.\n     CTransactionRef giant_ptx = create_placeholder_tx(999, 999);\n-    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > MAX_PACKAGE_SIZE * 1000);\n+    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1000);",
      "path": "src/test/txpackage_tests.cpp",
      "position": 25,
      "original_position": 25,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 0774c39e86ca52b747ace02f367617f4d6d88305\r\n\r\nshould this be checking against `MAX_PACKAGE_KWU`?",
      "created_at": "2023-09-15T13:30:36Z",
      "updated_at": "2023-09-15T13:32:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327293199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327293199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327297684",
      "pull_request_review_id": 1628969173,
      "id": 1327297684,
      "node_id": "PRRC_kwDOABII585PHPSU",
      "diff_hunk": "@@ -122,7 +122,7 @@ BOOST_FIXTURE_TEST_CASE(package_validation_tests, TestChain100Setup)\n \n     // A single, giant transaction submitted through ProcessNewPackage fails on single tx policy.\n     CTransactionRef giant_ptx = create_placeholder_tx(999, 999);\n-    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > MAX_PACKAGE_SIZE * 1000);\n+    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1000);",
      "path": "src/test/txpackage_tests.cpp",
      "position": 25,
      "original_position": 25,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": 1327293199,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> fails on single tx policy\r\n\r\nit's a single tx test check, not a package limit check? :shrug: ",
      "created_at": "2023-09-15T13:33:54Z",
      "updated_at": "2023-09-15T13:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327297684",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327297684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327305214",
      "pull_request_review_id": 1628981564,
      "id": 1327305214,
      "node_id": "PRRC_kwDOABII585PHRH-",
      "diff_hunk": "@@ -47,7 +48,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total (non-virtual) size cannot exceed MAX_PACKAGE_KWU / WITNESS_SCALE_FACTOR.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": 1327291876,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "pushed cleanups",
      "created_at": "2023-09-15T13:40:09Z",
      "updated_at": "2023-09-15T13:40:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327305214",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327305214"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327317351",
      "pull_request_review_id": 1629000702,
      "id": 1327317351,
      "node_id": "PRRC_kwDOABII585PHUFn",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_WEIGHT_KWU=404` total weight",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "66f6868c4331d3c289221441130e6c1fb61bc60c",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "66f6868c4331d3c289221441130e6c1fb61bc60c\r\n\r\nthis says `MAX_PACKAGE_WEIGHT_KWU` but the variable is named `MAX_PACKAGE_KWU`",
      "created_at": "2023-09-15T13:49:44Z",
      "updated_at": "2023-09-15T13:56:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327317351",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327317351"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327323660",
      "pull_request_review_id": 1629010475,
      "id": 1327323660,
      "node_id": "PRRC_kwDOABII585PHVoM",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (entry_count > static_cast<uint64_t>(limits.ancestor_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many ancestors in package %u [limit: %u]\", entry_count, limits.ancestor_count))};\n+    } else if (entry_count > static_cast<uint64_t>(limits.descendant_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many descendants in package %u [limit: %u]\", entry_count, limits.descendant_count))};\n+    } else if (entry_size > limits.ancestor_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds ancestor size limit %u [limit: %u]\", entry_size, limits.ancestor_size_vbytes))};\n+    } else if (entry_size > limits.descendant_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds descendant size limit for tx %u [limit: %u]\", entry_size, limits.descendant_size_vbytes))};",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e",
      "in_reply_to_id": 1327086508,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:54:50Z",
      "updated_at": "2023-09-15T13:54:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327323660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327323660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 169,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327327092",
      "pull_request_review_id": 1629015991,
      "id": 1327327092,
      "node_id": "PRRC_kwDOABII585PHWd0",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_WEIGHT_KWU=404` total weight",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "66f6868c4331d3c289221441130e6c1fb61bc60c",
      "in_reply_to_id": 1327317351,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-09-15T13:57:44Z",
      "updated_at": "2023-09-15T13:57:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327327092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327327092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327365279",
      "pull_request_review_id": 1629076299,
      "id": 1327365279,
      "node_id": "PRRC_kwDOABII585PHfyf",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_KWU=404` total weight\n    (#20833)\n \n    - *Rationale*: This is already enforced as mempool ancestor/descendant limits. If",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 8,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah hold on, avoiding rounding is good but it does mean that this limit is effectively a few Wu smaller than the default ancestor size limit. (https://github.com/bitcoin/bitcoin/pull/22097#issuecomment-859901930 and https://github.com/bitcoin/bitcoin/pull/22097#issuecomment-862627568) so this statement is untrue.\r\n\r\nI think having this limit denominated in Wu is good and it should be distinct from the ancestor package limits anyway. But I agree with those comments that maybe it's best to not make this limit more restrictive than normal ancestor limits.\r\n\r\nWe can bake in the rounding so this limit is 404000Wu + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR -1) = 404075Wu.\r\n\r\nAlso I think the primary Rationale (if you could edit this bullet point please) should be \"We want package size to be as small as possible to mitigate DoS via package validation. However, we want to make sure that the limit does not restrict ancestor packages that would be allowed if submitted individually.\"",
      "created_at": "2023-09-15T14:25:48Z",
      "updated_at": "2023-09-15T14:34:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327365279",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327365279"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327428231",
      "pull_request_review_id": 1629174147,
      "id": 1327428231,
      "node_id": "PRRC_kwDOABII585PHvKH",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_KWU=404` total weight\n    (#20833)\n \n    - *Rationale*: This is already enforced as mempool ancestor/descendant limits. If",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 8,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "in_reply_to_id": 1327365279,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed up as suggested, and fixed some inverted static asserts.\r\n\r\nI thought about calling it 405KWU and calling it a day, but I think that would make code history more difficult, so instead stayed precisely as calculated.",
      "created_at": "2023-09-15T15:05:48Z",
      "updated_at": "2023-09-15T15:05:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327428231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327428231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331347144",
      "pull_request_review_id": 1635188756,
      "id": 1331347144,
      "node_id": "PRRC_kwDOABII585PWr7I",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 1f25d0e629820a885a9425d8e0115087f8183cb3 \"Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT to avoid vbyte confusion\"\r\n\r\nSince weight to vsize is rounded up, this limit does not need to move up. The total weight will never be more than `vsize * WITNESS_SCALE_FACTOR`. So 404,000 weight units is the correct conversion here.",
      "created_at": "2023-09-20T09:29:05Z",
      "updated_at": "2023-09-20T09:55:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331347144",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331347144"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331357176",
      "pull_request_review_id": 1635204949,
      "id": 1331357176,
      "node_id": "PRRC_kwDOABII585PWuX4",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_KWU=404` total weight\n    (#20833)\n \n    - *Rationale*: This is already enforced as mempool ancestor/descendant limits. If",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 8,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "in_reply_to_id": 1327365279,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, those comments are incorrect. The rounding *does* mean that this weight limit across multiple transactions is different from the ancestor size limits, but it makes the package limits *less* restrictive, not more restrictive. That's totally fine. No change needed, we can just keep 404,000Wu.",
      "created_at": "2023-09-20T09:37:25Z",
      "updated_at": "2023-09-20T09:37:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331357176",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331357176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331357593",
      "pull_request_review_id": 1635188756,
      "id": 1331357593,
      "node_id": "PRRC_kwDOABII585PWueZ",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);\n+static_assert(MAX_PACKAGE_WEIGHT == 404'075);\n+static_assert(MAX_PACKAGE_WEIGHT >= MAX_STANDARD_TX_WEIGHT);\n \n-// If a package is submitted, it must be within the mempool's ancestor/descendant limits. Since a\n-// submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n+// If a package is to be evaluated, it must be at least as large as the mempool's ancestor/descendant limits,\n+// otherwise transactions that would be individually accepted may be rejected in a package erroneously.\n+// Since a submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n // of the child), package limits are ultimately bounded by mempool package limits. Ensure that the\n-// defaults reflect this constraint.\n+// defaults reflect this constraint, including weight to vbyte rounding down.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 22,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 1f25d0e629820a885a9425d8e0115087f8183cb3 \"Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT to avoid vbyte confusion\"\r\n\r\nWeight to vsize rounds up, not down.",
      "created_at": "2023-09-20T09:37:45Z",
      "updated_at": "2023-09-20T09:55:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331357593",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331357593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331358919",
      "pull_request_review_id": 1635188756,
      "id": 1331358919,
      "node_id": "PRRC_kwDOABII585PWuzH",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);\n+static_assert(MAX_PACKAGE_WEIGHT == 404'075);\n+static_assert(MAX_PACKAGE_WEIGHT >= MAX_STANDARD_TX_WEIGHT);\n \n-// If a package is submitted, it must be within the mempool's ancestor/descendant limits. Since a\n-// submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n+// If a package is to be evaluated, it must be at least as large as the mempool's ancestor/descendant limits,\n+// otherwise transactions that would be individually accepted may be rejected in a package erroneously.\n+// Since a submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n // of the child), package limits are ultimately bounded by mempool package limits. Ensure that the\n-// defaults reflect this constraint.\n+// defaults reflect this constraint, including weight to vbyte rounding down.\n static_assert(DEFAULT_DESCENDANT_LIMIT >= MAX_PACKAGE_COUNT);\n static_assert(DEFAULT_ANCESTOR_LIMIT >= MAX_PACKAGE_COUNT);\n-static_assert(DEFAULT_ANCESTOR_SIZE_LIMIT_KVB >= MAX_PACKAGE_SIZE);\n-static_assert(DEFAULT_DESCENDANT_SIZE_LIMIT_KVB >= MAX_PACKAGE_SIZE);\n+static_assert(MAX_PACKAGE_WEIGHT >=\n+    DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * WITNESS_SCALE_FACTOR * 1000 + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1));\n+static_assert(MAX_PACKAGE_WEIGHT >=\n+    DEFAULT_DESCENDANT_SIZE_LIMIT_KVB * WITNESS_SCALE_FACTOR * 1000 + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1));",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 1f25d0e629820a885a9425d8e0115087f8183cb3 \"Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT to avoid vbyte confusion\"\r\n\r\nI think these will be wrong with the weight corrected. Converting vsize to weight may overshoot the weight limit even if the actual weight limit is correct. I think the descendant and ancestor size limits will need to be changed to weight as well?",
      "created_at": "2023-09-20T09:38:49Z",
      "updated_at": "2023-09-20T09:55:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331358919",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331358919"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 33,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331385652",
      "pull_request_review_id": 1635249883,
      "id": 1331385652,
      "node_id": "PRRC_kwDOABII585PW1U0",
      "diff_hunk": "@@ -133,6 +136,48 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\n+        assert parent_individual_testres[\"allowed\"]\n+        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\n+        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+\n+        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 65,
      "original_position": 68,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 97d53ff4c3ede1d1fdc6d93386f14c230b03b98d \"Add functional test to catch too large vsize packages\"\r\n\r\nCan you add a comment explaining what this test is actually testing for? It's not clear to me why `testmempoolaccept` would behave differently from `submitpackage`, and how observing this difference in behavior is useful in a test.",
      "created_at": "2023-09-20T10:00:46Z",
      "updated_at": "2023-09-20T10:00:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331385652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331385652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 172,
      "original_line": 172,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331462324",
      "pull_request_review_id": 1635371928,
      "id": 1331462324,
      "node_id": "PRRC_kwDOABII585PXIC0",
      "diff_hunk": "@@ -47,7 +54,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total weight cannot exceed MAX_PACKAGE_KWU.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 39,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `MAX_PACKAGE_KWU` doesn't exist anymore",
      "created_at": "2023-09-20T11:02:17Z",
      "updated_at": "2023-09-20T11:02:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331462324",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331462324"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331527769",
      "pull_request_review_id": 1635474133,
      "id": 1331527769,
      "node_id": "PRRC_kwDOABII585PXYBZ",
      "diff_hunk": "@@ -47,7 +54,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total weight cannot exceed MAX_PACKAGE_KWU.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 39,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "should say `MAX_PACKAGE_WEIGHT`",
      "created_at": "2023-09-20T12:04:02Z",
      "updated_at": "2023-09-20T12:21:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331527769",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331527769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331547605",
      "pull_request_review_id": 1635474133,
      "id": 1331547605,
      "node_id": "PRRC_kwDOABII585PXc3V",
      "diff_hunk": "@@ -197,13 +197,29 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     const Limits& limits,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(limits.ancestor_count)) {",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think those new package limits are debatable in themselves. If a node operator is setting lower `limitancestorcount` / `limitdescendantcount` (e.g 12), a reasonable behavior when weâ€™re accepting over-size package (e.g 25 elements) could be to accept the 12th first component of the package.\r\n\r\nI think those new checks are preventing this or at the very least we should document mempool options on the new constraint theyâ€™re bringing on package evaluation from my understanding.",
      "created_at": "2023-09-20T12:21:37Z",
      "updated_at": "2023-09-20T12:21:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331547605",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331547605"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563638",
      "pull_request_review_id": 1635531029,
      "id": 1331563638,
      "node_id": "PRRC_kwDOABII585PXgx2",
      "diff_hunk": "@@ -47,7 +54,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total weight cannot exceed MAX_PACKAGE_KWU.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 39,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": 1331462324,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:35:02Z",
      "updated_at": "2023-09-20T12:35:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331563638",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563638"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563713",
      "pull_request_review_id": 1635531157,
      "id": 1331563713,
      "node_id": "PRRC_kwDOABII585PXgzB",
      "diff_hunk": "@@ -133,6 +136,48 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\n+        assert parent_individual_testres[\"allowed\"]\n+        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\n+        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+\n+        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 65,
      "original_position": 68,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": 1331385652,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:35:06Z",
      "updated_at": "2023-09-20T12:35:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331563713",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563713"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 172,
      "original_line": 172,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563800",
      "pull_request_review_id": 1635531307,
      "id": 1331563800,
      "node_id": "PRRC_kwDOABII585PXg0Y",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);\n+static_assert(MAX_PACKAGE_WEIGHT == 404'075);\n+static_assert(MAX_PACKAGE_WEIGHT >= MAX_STANDARD_TX_WEIGHT);\n \n-// If a package is submitted, it must be within the mempool's ancestor/descendant limits. Since a\n-// submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n+// If a package is to be evaluated, it must be at least as large as the mempool's ancestor/descendant limits,\n+// otherwise transactions that would be individually accepted may be rejected in a package erroneously.\n+// Since a submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n // of the child), package limits are ultimately bounded by mempool package limits. Ensure that the\n-// defaults reflect this constraint.\n+// defaults reflect this constraint, including weight to vbyte rounding down.\n static_assert(DEFAULT_DESCENDANT_LIMIT >= MAX_PACKAGE_COUNT);\n static_assert(DEFAULT_ANCESTOR_LIMIT >= MAX_PACKAGE_COUNT);\n-static_assert(DEFAULT_ANCESTOR_SIZE_LIMIT_KVB >= MAX_PACKAGE_SIZE);\n-static_assert(DEFAULT_DESCENDANT_SIZE_LIMIT_KVB >= MAX_PACKAGE_SIZE);\n+static_assert(MAX_PACKAGE_WEIGHT >=\n+    DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * WITNESS_SCALE_FACTOR * 1000 + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1));\n+static_assert(MAX_PACKAGE_WEIGHT >=\n+    DEFAULT_DESCENDANT_SIZE_LIMIT_KVB * WITNESS_SCALE_FACTOR * 1000 + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1));",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": 1331358919,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:35:11Z",
      "updated_at": "2023-09-20T12:35:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331563800",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563800"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 33,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563938",
      "pull_request_review_id": 1635531534,
      "id": 1331563938,
      "node_id": "PRRC_kwDOABII585PXg2i",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);\n+static_assert(MAX_PACKAGE_WEIGHT == 404'075);\n+static_assert(MAX_PACKAGE_WEIGHT >= MAX_STANDARD_TX_WEIGHT);\n \n-// If a package is submitted, it must be within the mempool's ancestor/descendant limits. Since a\n-// submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n+// If a package is to be evaluated, it must be at least as large as the mempool's ancestor/descendant limits,\n+// otherwise transactions that would be individually accepted may be rejected in a package erroneously.\n+// Since a submitted package must be child-with-unconfirmed-parents (all of the transactions are an ancestor\n // of the child), package limits are ultimately bounded by mempool package limits. Ensure that the\n-// defaults reflect this constraint.\n+// defaults reflect this constraint, including weight to vbyte rounding down.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 22,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": 1331357593,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:35:17Z",
      "updated_at": "2023-09-20T12:35:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331563938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331563938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331564028",
      "pull_request_review_id": 1635531682,
      "id": 1331564028,
      "node_id": "PRRC_kwDOABII585PXg38",
      "diff_hunk": "@@ -15,18 +15,25 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This includes room for weight to vsize rounding error\n+    for all included package transactions to not block transactions that would have all\n+    been accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000 +  MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR - 1);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "1f25d0e629820a885a9425d8e0115087f8183cb3",
      "in_reply_to_id": 1331347144,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:35:22Z",
      "updated_at": "2023-09-20T12:35:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331564028",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331564028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331570329",
      "pull_request_review_id": 1635541874,
      "id": 1331570329,
      "node_id": "PRRC_kwDOABII585PXiaZ",
      "diff_hunk": "@@ -197,13 +197,29 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     const Limits& limits,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(limits.ancestor_count)) {",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": 1331547605,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CheckPackageLimits is only called in \"AcceptMultipleTransactions\", in other words, we already will try to submit these first parts when they make economic sense.\r\n\r\nWe should probably do something about the naming of functions at some point to delineate better when they are called, but I'll consider that future work.",
      "created_at": "2023-09-20T12:40:43Z",
      "updated_at": "2023-09-20T12:40:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331570329",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331570329"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331573917",
      "pull_request_review_id": 1635547694,
      "id": 1331573917,
      "node_id": "PRRC_kwDOABII585PXjSd",
      "diff_hunk": "@@ -47,7 +54,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total weight cannot exceed MAX_PACKAGE_KWU.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 39,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": 1331527769,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T12:43:44Z",
      "updated_at": "2023-09-20T12:43:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331573917",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331573917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331648608",
      "pull_request_review_id": 1635669939,
      "id": 1331648608,
      "node_id": "PRRC_kwDOABII585PX1hg",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 55,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 5c48501e9f1a3da5307b1bee08396598398311e8: it would be cleaner to move some of this into a `create_multisig_tx` helper to deduplicate the multisig insertion code and make it more difficult to accidentally use a variable from before the tx changes.",
      "created_at": "2023-09-20T13:37:33Z",
      "updated_at": "2023-09-20T13:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331648608",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331648608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 146,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331650015",
      "pull_request_review_id": 1635669939,
      "id": 1331650015,
      "node_id": "PRRC_kwDOABII585PX13f",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 45,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 5c48501e9f1a3da5307b1bee08396598398311e8: you can also just do this\r\n```suggestion\r\n        tx_parent_utxo[\"txid\"] = tx_parent.rehash()\r\n```",
      "created_at": "2023-09-20T13:38:32Z",
      "updated_at": "2023-09-20T13:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331650015",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331650015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 151,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331651136",
      "pull_request_review_id": 1635669939,
      "id": 1331651136,
      "node_id": "PRRC_kwDOABII585PX2JA",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\n+        assert parent_individual_testres[\"allowed\"]\n+        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\n+        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\n+\n+        # But together, it's exceeding limits in the *package* context. If sigops adjusted vsize wasn't being checked\n+        # here, it would get farther in validation and give too-long-mempool-chain error instead.",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 64,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 5c48501e9f1a3da5307b1bee08396598398311e8\r\n\r\n```suggestion\r\n        # here, it would get further in validation and give too-long-mempool-chain error instead.\r\n```",
      "created_at": "2023-09-20T13:39:19Z",
      "updated_at": "2023-09-20T13:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331651136",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331651136"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331678727",
      "pull_request_review_id": 1635718067,
      "id": 1331678727,
      "node_id": "PRRC_kwDOABII585PX84H",
      "diff_hunk": "@@ -197,13 +197,29 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     const Limits& limits,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(limits.ancestor_count)) {",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "in_reply_to_id": 1331547605,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "From my understanding of offline discussions with PR author, those limits will be only considered when the individual transactions are not satisfying the mempool min fee on their own and they serve as an upper bound check on the max number of elements in the transaction.\r\n\r\nYes documentation and naming of functions can be improved in the future.",
      "created_at": "2023-09-20T13:57:25Z",
      "updated_at": "2023-09-20T13:57:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331678727",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331678727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331711213",
      "pull_request_review_id": 1635769197,
      "id": 1331711213,
      "node_id": "PRRC_kwDOABII585PYEzt",
      "diff_hunk": "@@ -15,18 +15,22 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This must allow a superset of sigops\n+    weighted vsize limited transactions to not disallow transactions we would\n+    have otherwise accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000;",
      "path": "src/policy/packages.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Playing with the boundary values `403â€™999` or `404â€™001` doesnâ€™t break `package_sanitization_tests` as one could expect.",
      "created_at": "2023-09-20T14:19:02Z",
      "updated_at": "2023-09-20T14:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331711213",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331711213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331714462",
      "pull_request_review_id": 1635769197,
      "id": 1331714462,
      "node_id": "PRRC_kwDOABII585PYFme",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Following diff doesnâ€™t sound to break functional test `mempool_sigoplimit.py`.\r\n```\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 324292c055..21571b9e8a 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -205,7 +205,7 @@ bool CTxMemPool::CheckPackageLimits(const Package& package,\r\n     // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\r\n     if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\r\n         errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\r\n-        return false;\r\n+        return true;\r\n     } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\r\n         errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\r\n         return false;\r\n```",
      "created_at": "2023-09-20T14:21:08Z",
      "updated_at": "2023-09-20T14:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331714462",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331714462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 208,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331721139",
      "pull_request_review_id": 1635769197,
      "id": 1331721139,
      "node_id": "PRRC_kwDOABII585PYHOz",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;\n+    } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\n+        errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same here\r\n```\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 324292c055..a9d8355aa3 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -208,7 +208,7 @@ bool CTxMemPool::CheckPackageLimits(const Package& package,\r\n         return false;\r\n     } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\r\n         errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\r\n-        return false;\r\n+        return true;\r\n     } else if (total_vsize > m_limits.ancestor_size_vbytes) {\r\n         errString = strprintf(\"package size %u exceeds ancestor size limit [limit: %u]\", total_vsize, m_limits.ancestor_size_vbytes);\r\n         return false;\r\n```",
      "created_at": "2023-09-20T14:25:35Z",
      "updated_at": "2023-09-20T14:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331721139",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331721139"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 211,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331723889",
      "pull_request_review_id": 1635769197,
      "id": 1331723889,
      "node_id": "PRRC_kwDOABII585PYH5x",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;\n+    } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\n+        errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\n+        return false;\n+    } else if (total_vsize > m_limits.ancestor_size_vbytes) {\n+        errString = strprintf(\"package size %u exceeds ancestor size limit [limit: %u]\", total_vsize, m_limits.ancestor_size_vbytes);\n+        return false;\n+    } else if (total_vsize > m_limits.descendant_size_vbytes) {\n+        errString = strprintf(\"package size %u exceeds descendant size limit [limit: %u]\", total_vsize, m_limits.descendant_size_vbytes);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same here\r\n\r\n```\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 324292c055..20456e250c 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -214,7 +214,7 @@ bool CTxMemPool::CheckPackageLimits(const Package& package,\r\n         return false;\r\n     } else if (total_vsize > m_limits.descendant_size_vbytes) {\r\n         errString = strprintf(\"package size %u exceeds descendant size limit [limit: %u]\", total_vsize, m_limits.descendant_size_vbytes);\r\n-        return false;\r\n+        return true;\r\n     }\r\n``` \r\n(Mutating the third check on ancestor size vbytes break the functional test)",
      "created_at": "2023-09-20T14:27:20Z",
      "updated_at": "2023-09-20T14:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331723889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331723889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 217,
      "original_line": 217,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331725353",
      "pull_request_review_id": 1635769197,
      "id": 1331725353,
      "node_id": "PRRC_kwDOABII585PYIQp",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 36,
      "original_position": 35,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "A log info is nice like \r\n\r\n```\r\ndiff --git a/test/functional/mempool_sigoplimit.py b/test/functional/mempool_sigoplimit.py\r\nindex aef4602c16..f94af9da73 100755\r\n--- a/test/functional/mempool_sigoplimit.py\r\n+++ b/test/functional/mempool_sigoplimit.py\r\n@@ -140,6 +140,7 @@ class BytesPerSigOpTest(BitcoinTestFramework):\r\n         # Make a 2-transaction package which fails vbyte checks even though\r\n         # separately they would work.\r\n         self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\r\n+        self.log.info(\"Test sigops package\")\r\n \r\n         _, pubkey = generate_keypair()\r\n         amount_for_bare = 50000\r\n```",
      "created_at": "2023-09-20T14:28:18Z",
      "updated_at": "2023-09-20T14:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331725353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331725353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 143,
      "original_line": 143,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803409",
      "pull_request_review_id": 1635918354,
      "id": 1331803409,
      "node_id": "PRRC_kwDOABII585PYbUR",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\n+        assert parent_individual_testres[\"allowed\"]\n+        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\n+        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\n+\n+        # But together, it's exceeding limits in the *package* context. If sigops adjusted vsize wasn't being checked\n+        # here, it would get farther in validation and give too-long-mempool-chain error instead.",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 64,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331651136,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T15:22:23Z",
      "updated_at": "2023-09-20T15:22:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331803409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 171,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803504",
      "pull_request_review_id": 1635918501,
      "id": 1331803504,
      "node_id": "PRRC_kwDOABII585PYbVw",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 45,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331650015,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T15:22:27Z",
      "updated_at": "2023-09-20T15:22:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331803504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 151,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803590",
      "pull_request_review_id": 1635918645,
      "id": 1331803590,
      "node_id": "PRRC_kwDOABII585PYbXG",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 55,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331648608,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-20T15:22:31Z",
      "updated_at": "2023-09-20T15:22:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331803590",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331803590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 146,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331804025",
      "pull_request_review_id": 1635919429,
      "id": 1331804025,
      "node_id": "PRRC_kwDOABII585PYbd5",
      "diff_hunk": "@@ -133,6 +136,49 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 36,
      "original_position": 35,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331725353,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-09-20T15:22:47Z",
      "updated_at": "2023-09-20T15:22:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331804025",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331804025"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 143,
      "original_line": 143,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331807326",
      "pull_request_review_id": 1635924877,
      "id": 1331807326,
      "node_id": "PRRC_kwDOABII585PYcRe",
      "diff_hunk": "@@ -15,18 +15,22 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n-static_assert(MAX_PACKAGE_SIZE * WITNESS_SCALE_FACTOR * 1000 >= MAX_STANDARD_TX_WEIGHT);\n+/** Default maximum total weight of transactions in a package in weight\n+    to allow for context-less checks. This must allow a superset of sigops\n+    weighted vsize limited transactions to not disallow transactions we would\n+    have otherwise accepted individually. */\n+static constexpr uint32_t MAX_PACKAGE_WEIGHT = 404'000;",
      "path": "src/policy/packages.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331711213,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "should break if you make it significantly larger, I think, since it's making txns that aren't 1 WU. leaving as is for now",
      "created_at": "2023-09-20T15:25:05Z",
      "updated_at": "2023-09-20T15:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331807326",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331807326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331820743",
      "pull_request_review_id": 1635948132,
      "id": 1331820743,
      "node_id": "PRRC_kwDOABII585PYfjH",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331714462,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "going to reserve for follow-up test writing",
      "created_at": "2023-09-20T15:34:42Z",
      "updated_at": "2023-09-20T15:34:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331820743",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331820743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 208,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331820872",
      "pull_request_review_id": 1635948397,
      "id": 1331820872,
      "node_id": "PRRC_kwDOABII585PYflI",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;\n+    } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\n+        errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331721139,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "going to reserve for follow-up test writing",
      "created_at": "2023-09-20T15:34:46Z",
      "updated_at": "2023-09-20T15:34:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331820872",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331820872"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 211,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331821018",
      "pull_request_review_id": 1635948756,
      "id": 1331821018,
      "node_id": "PRRC_kwDOABII585PYfna",
      "diff_hunk": "@@ -197,12 +197,28 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const int64_t total_vsize,\n                                     std::string &errString) const\n {\n+    size_t pack_size = package.size();\n+\n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (pack_size > static_cast<uint64_t>(m_limits.ancestor_count)) {\n+        errString = strprintf(\"package count %u exceeds ancestor count limit [limit: %u]\", pack_size, m_limits.ancestor_count);\n+        return false;\n+    } else if (pack_size > static_cast<uint64_t>(m_limits.descendant_count)) {\n+        errString = strprintf(\"package count %u exceeds descendant count limit [limit: %u]\", pack_size, m_limits.descendant_count);\n+        return false;\n+    } else if (total_vsize > m_limits.ancestor_size_vbytes) {\n+        errString = strprintf(\"package size %u exceeds ancestor size limit [limit: %u]\", total_vsize, m_limits.ancestor_size_vbytes);\n+        return false;\n+    } else if (total_vsize > m_limits.descendant_size_vbytes) {\n+        errString = strprintf(\"package size %u exceeds descendant size limit [limit: %u]\", total_vsize, m_limits.descendant_size_vbytes);\n+        return false;",
      "path": "src/txmempool.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "eb8f58f5e4a249d55338304099e8238896d2316d",
      "original_commit_id": "5c48501e9f1a3da5307b1bee08396598398311e8",
      "in_reply_to_id": 1331723889,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "going to reserve for follow-up test writing",
      "created_at": "2023-09-20T15:34:53Z",
      "updated_at": "2023-09-20T15:34:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1331821018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331821018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 217,
      "original_line": 217,
      "side": "RIGHT"
    }
  ]
}