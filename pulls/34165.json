{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165",
    "id": 3133212525,
    "node_id": "PR_kwDOABII5866wQdt",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34165",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34165.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34165.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/cae6d895f8a8cf5f57e05519536fda5d62b10841",
    "number": 34165,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "coins: don't mutate main cache when connecting block",
    "user": {
      "login": "andrewtoth",
      "id": 237213,
      "node_id": "MDQ6VXNlcjIzNzIxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewtoth",
      "html_url": "https://github.com/andrewtoth",
      "followers_url": "https://api.github.com/users/andrewtoth/followers",
      "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
      "repos_url": "https://api.github.com/users/andrewtoth/repos",
      "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This is a slightly modified version of the first few commits of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nWhen accessing coins via the `CCoinsViewCache`, methods like `GetCoin` can call `FetchCoin` which actually mutate `cacheCoins` internally to cache entries when they are pulled from the backing db. This is generally a performance improvement for single threaded access patterns, but it precludes us from accessing entries in a `CCoinsViewCache` from multiple threads without a lock.\r\n\r\nAnother aspect is that when we use the resettable `CCoinsViewCache` view backed by the main cache for use in `ConnectBlock()`, we will insert entries into the main cache even if the block is determined to be invalid. This is not the biggest concern, since an invalid block requires proof-of-work. But, an attacker could craft multiple invalid blocks to fill the main cache. This would make us `Flush` the cache more often than necessary. Obviously this would be very expensive to do on mainnet.\r\n\r\nIntroduce `CoinsViewOverlay`, a `CCoinsViewCache` subclass that reads coins without mutating the underlying cache via `FetchCoin()`.\r\n\r\nAdd `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\r\n\r\nThis is the foundation for async input fetching, where worker threads must not mutate shared state.\r\n",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2025-12-28T20:32:34Z",
    "updated_at": "2026-02-19T08:49:02Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "43b5fa212a2e3d7c0f1582c82d21d4b06dc1e04c",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "andrewtoth:dont-mutate-cache",
      "ref": "dont-mutate-cache",
      "sha": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 156145027,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNTYxNDUwMjc=",
        "name": "bitcoin",
        "full_name": "andrewtoth/bitcoin",
        "owner": {
          "login": "andrewtoth",
          "id": 237213,
          "node_id": "MDQ6VXNlcjIzNzIxMw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/andrewtoth",
          "html_url": "https://github.com/andrewtoth",
          "followers_url": "https://api.github.com/users/andrewtoth/followers",
          "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
          "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
          "repos_url": "https://api.github.com/users/andrewtoth/repos",
          "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/andrewtoth/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/andrewtoth/bitcoin",
        "archive_url": "https://api.github.com/repos/andrewtoth/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/andrewtoth/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/andrewtoth/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/andrewtoth/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/andrewtoth/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/andrewtoth/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/andrewtoth/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/andrewtoth/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/andrewtoth/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/andrewtoth/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/andrewtoth/bitcoin/events",
        "forks_url": "https://api.github.com/repos/andrewtoth/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/andrewtoth/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/andrewtoth/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/andrewtoth/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/andrewtoth/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/andrewtoth/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/andrewtoth/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/andrewtoth/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/andrewtoth/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/andrewtoth/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/andrewtoth/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:andrewtoth/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/andrewtoth/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/andrewtoth/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/andrewtoth/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/andrewtoth/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/andrewtoth/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/andrewtoth/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/andrewtoth/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/andrewtoth/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/andrewtoth/bitcoin/hooks",
        "svn_url": "https://github.com/andrewtoth/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 296488,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-13T02:31:27Z",
        "created_at": "2018-11-05T01:43:59Z",
        "updated_at": "2025-11-13T15:07:23Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38915,
        "stargazers_count": 88179,
        "watchers_count": 88179,
        "size": 305231,
        "default_branch": "master",
        "open_issues_count": 726,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-19T00:43:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-19T08:55:40Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 386,
    "deletions": 38,
    "changed_files": 10,
    "commits": 6,
    "review_comments": 111,
    "comments": 22
  },
  "events": [
    {
      "event": "labeled",
      "id": 21771410954,
      "node_id": "LE_lADOABII587geGK_zwAAAAURrV4K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21771410954",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-28T20:32:37Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 3695028300,
      "node_id": "IC_kwDOABII587cPahM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3695028300",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-28T20:32:40Z",
      "updated_at": "2026-02-19T08:49:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34165.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3905465222), [sipa](https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3822197313), [sedited](https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3824244838) |\n| Stale ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3778934085), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3780508142) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34132](https://github.com/bitcoin/bitcoin/pull/34132) (coins: drop error catcher, centralize fatal read handling by l0rinc)\n* [#34124](https://github.com/bitcoin/bitcoin/pull/34124) (refactor: make `CCoinsView` a pure virtual interface by l0rinc)\n* [#31132](https://github.com/bitcoin/bitcoin/pull/31132) (validation: fetch block inputs on parallel threads 3x faster IBD by andrewtoth)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3695028300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "reviewed",
      "id": 3623089900,
      "node_id": "PRR_kwDOABII587X8_bs",
      "url": null,
      "actor": null,
      "commit_id": "9739ce6b10314b098b16886418781275548dbdcc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-02T18:50:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "The implementation talks about block connection but the implementation was added to block disconnect. I don't yet know if we should apply it there or not, but I find it very likely that we should do it for block connection.\r\nA lot of tests were added for testing the new cache in isolation and they all passed while it was applied to the wrong place as far as I can tell.\r\n\r\nWe should add a new integration test that actually checks that invalid blocks don't pollute the underlying cache:\r\n```patch\r\ndiff --git a/src/test/validation_chainstate_tests.cpp b/src/test/validation_chainstate_tests.cpp\r\n--- a/src/test/validation_chainstate_tests.cpp\t(revision 20f0b8304d089d641060f693d3284e69524fbcbe)\r\n+++ b/src/test/validation_chainstate_tests.cpp\t(date 1767360120004)\r\n@@ -3,10 +3,12 @@\r\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n //\r\n #include <chainparams.h>\r\n+#include <consensus/amount.h>\r\n #include <consensus/validation.h>\r\n #include <node/kernel_notifications.h>\r\n #include <random.h>\r\n #include <rpc/blockchain.h>\r\n+#include <script/script.h>\r\n #include <sync.h>\r\n #include <test/util/chainstate.h>\r\n #include <test/util/coins.h>\r\n@@ -63,6 +65,30 @@\r\n     }\r\n }\r\n \r\n+BOOST_FIXTURE_TEST_CASE(connect_tip_does_not_cache_inputs_on_failed_connect, TestChain100Setup)\r\n+{\r\n+    Chainstate& chainstate = Assert(m_node.chainman)->ActiveChainstate();\r\n+\r\n+    COutPoint outpoint;\r\n+    {\r\n+        LOCK(cs_main);\r\n+        outpoint = AddTestCoin(m_rng, chainstate.CoinsTip());\r\n+        chainstate.CoinsTip().Flush(/*will_reuse_cache=*/false);\r\n+    }\r\n+\r\n+    CMutableTransaction tx;\r\n+    tx.vin.emplace_back(outpoint);\r\n+    tx.vout.emplace_back(MAX_MONEY, CScript{} << OP_TRUE);\r\n+\r\n+    const auto tip{WITH_LOCK(cs_main, return chainstate.m_chain.Tip()->GetBlockHash())};\r\n+    CBlock block = CreateBlock({tx}, CScript{} << OP_TRUE, chainstate);\r\n+    Assert(m_node.chainman)->ProcessNewBlock(std::make_shared<CBlock>(block), true, true, nullptr);\r\n+\r\n+    LOCK(cs_main);\r\n+    BOOST_CHECK_EQUAL(tip, chainstate.m_chain.Tip()->GetBlockHash()); // block rejected\r\n+    BOOST_CHECK(!chainstate.CoinsTip().HaveCoinInCache(outpoint));    // input not cached\r\n+}\r\n+\r\n //! Test UpdateTip behavior for both active and background chainstates.\r\n //!\r\n //! When run on the background chainstate, UpdateTip should do a subset\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\n--- a/src/validation.cpp\t(revision 20f0b8304d089d641060f693d3284e69524fbcbe)\r\n+++ b/src/validation.cpp\t(date 1767360154724)\r\n@@ -3102,7 +3102,7 @@\r\n     LogDebug(BCLog::BENCH, \"  - Load block from disk: %.2fms\\n\",\r\n              Ticks<MillisecondsDouble>(time_2 - time_1));\r\n     {\r\n-        CCoinsViewCache view(&CoinsTip());\r\n+        CoinsViewCacheNonMutating view(&CoinsTip());\r\n         bool rv = ConnectBlock(*block_to_connect, state, pindexNew, view);\r\n         if (m_chainman.m_options.signals) {\r\n             m_chainman.m_options.signals->BlockChecked(block_to_connect, state);\r\n```\r\n\r\nConcept ACK (edited to remove the nack).",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3623089900",
      "submitted_at": "2026-01-02T13:28:49Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21828410981,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUVEx5l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21828410981",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7cd938b16ac031d1a03a2551bef1e33991586887",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/7cd938b16ac031d1a03a2551bef1e33991586887",
      "created_at": "2026-01-02T14:59:07Z"
    },
    {
      "event": "commented",
      "id": 3705536098,
      "node_id": "IC_kwDOABII587c3f5i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3705536098",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T15:00:46Z",
      "updated_at": "2026-01-02T15:00:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you @l0rinc, I have taken your integration test. I had unit tests for this behavior but the integration test is a great idea.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3705536098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 21828428452,
      "node_id": "MEE_lADOABII587geGK_zwAAAAUVE2Kk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21828428452",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T15:00:48Z"
    },
    {
      "event": "subscribed",
      "id": 21828428465,
      "node_id": "SE_lADOABII587geGK_zwAAAAUVE2Kx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21828428465",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T15:00:48Z"
    },
    {
      "event": "referenced",
      "id": 21830726717,
      "node_id": "REFE_lADOABII587geGK_zwAAAAUVNnQ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21830726717",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d3a7723aa8c0467ca4de45ead076db3f4170a2a7",
      "commit_url": "https://api.github.com/repos/l0rinc/DrahtBot/commits/d3a7723aa8c0467ca4de45ead076db3f4170a2a7",
      "created_at": "2026-01-02T18:43:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21837549734,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUVnpCm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837549734",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "410a01460f0897ed5c938ab437b8086f1fffecdc",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/410a01460f0897ed5c938ab437b8086f1fffecdc",
      "created_at": "2026-01-03T19:01:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21837652092,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUVoCB8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837652092",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7a6e6160cbdc4a0a9e5c7afac3c73e7ce1221e94",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/7a6e6160cbdc4a0a9e5c7afac3c73e7ce1221e94",
      "created_at": "2026-01-03T19:21:58Z"
    },
    {
      "event": "labeled",
      "id": 21837654722,
      "node_id": "LE_lADOABII587geGK_zwAAAAUVoCrC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837654722",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T19:22:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3707294486,
      "node_id": "IC_kwDOABII587c-NMW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707294486",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T19:22:37Z",
      "updated_at": "2026-01-03T19:22:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `macOS native`: https://github.com/bitcoin/bitcoin/actions/runs/20681569759/job/59376499348</sub>\n<sub>LLM reason (âœ¨ experimental): Blockchain tests aborted due to a DisconnectTip failure during tip/disconnect handling (BLOCK_FAILED_VALID), causing the CI run to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3707294486",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "unlabeled",
      "id": 21837946886,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAUVpKAG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837946886",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T20:39:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21837998867,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUVpWsT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837998867",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9a37b19538a423ea1e15f85700cff5b9a7ea2e3c",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/9a37b19538a423ea1e15f85700cff5b9a7ea2e3c",
      "created_at": "2026-01-03T20:54:04Z"
    },
    {
      "event": "reviewed",
      "id": 3624557779,
      "node_id": "PRR_kwDOABII587YClzT",
      "url": null,
      "actor": null,
      "commit_id": "9a37b19538a423ea1e15f85700cff5b9a7ea2e3c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-03T20:59:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "I'll run a reindex-chainstate on these to see how they behave - as long as they don't slow down anything, I would be fine with them.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3624557779",
      "submitted_at": "2026-01-03T20:59:09Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21843019121,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUV8gVx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21843019121",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "created_at": "2026-01-04T19:54:39Z"
    },
    {
      "event": "referenced",
      "id": 21843717038,
      "node_id": "REFE_lADOABII587geGK_zwAAAAUV_Kuu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21843717038",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "15c56be893e5fbf57c3c761fe4814906a0171aa3",
      "commit_url": "https://api.github.com/repos/l0rinc/DrahtBot/commits/15c56be893e5fbf57c3c761fe4814906a0171aa3",
      "created_at": "2026-01-04T22:47:09Z"
    },
    {
      "event": "reviewed",
      "id": 3628136296,
      "node_id": "PRR_kwDOABII587YQPdo",
      "url": null,
      "actor": null,
      "commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-05T20:37:46Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3628136296",
      "submitted_at": "2026-01-05T20:37:46Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21964109990,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUdKbim",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21964109990",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "created_at": "2026-01-10T15:34:46Z"
    },
    {
      "event": "commented",
      "id": 3733769971,
      "node_id": "IC_kwDOABII587ejM7z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3733769971",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-11T00:53:39Z",
      "updated_at": "2026-01-11T00:53:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Ran a `reindex-chainstate`, no measurable change compared to master: ðŸ‘\r\n\r\nACK 2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3733769971",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "reviewed",
      "id": 3697832211,
      "node_id": "PRR_kwDOABII587caHET",
      "url": null,
      "actor": null,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T14:50:45Z",
      "author_association": "MEMBER",
      "body": "Nice carve-out from #31132.\r\n\r\nLeft a comment about whether we want to add a CoinsViewErrorCatcher wrapper for PeekCoin, but otherwise looks good to me.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3697832211",
      "submitted_at": "2026-01-23T14:50:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22264693921,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUvFESh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22264693921",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "created_at": "2026-01-24T16:25:20Z"
    },
    {
      "event": "commented",
      "id": 3795054037,
      "node_id": "IC_kwDOABII587iM-3V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3795054037",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-24T16:45:08Z",
      "updated_at": "2026-01-24T16:45:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for your review @willcl-ark. Addressed https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2721462578 and https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2721476346, and added `noexcept` to `PeekCoin`.\r\n\r\n`git diff 2e67c5b604d2cf2e56db6b5d2906391d22113941..3a2cfbea1957f1eed6d97b6f8924f13100e11b1c`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3795054037",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22264849459,
      "node_id": "MEE_lADOABII587geGK_zwAAAAUvFqQz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22264849459",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-24T16:45:10Z"
    },
    {
      "event": "subscribed",
      "id": 22264849469,
      "node_id": "SE_lADOABII587geGK_zwAAAAUvFqQ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22264849469",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-24T16:45:10Z"
    },
    {
      "event": "commented",
      "id": 3797209009,
      "node_id": "IC_kwDOABII587iVM-x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3797209009",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-25T20:40:28Z",
      "updated_at": "2026-01-25T20:40:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I have taken your integration test.\r\n\r\nWas it removed since?",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3797209009",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "reviewed",
      "id": 3704233057,
      "node_id": "PRR_kwDOABII587cyhxh",
      "url": null,
      "actor": null,
      "commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-25T21:05:37Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3704233057",
      "submitted_at": "2026-01-25T21:05:37Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22278106560,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUv4O3A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278106560",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0ab4fca17353546abb8f5552c0c94a4b093b4d15",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/0ab4fca17353546abb8f5552c0c94a4b093b4d15",
      "created_at": "2026-01-26T00:01:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22278111828,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUv4QJU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278111828",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/8e074187a57220c596eb124091714302903a07cc",
      "created_at": "2026-01-26T00:02:09Z"
    },
    {
      "event": "labeled",
      "id": 22278115130,
      "node_id": "LE_lADOABII587geGK_zwAAAAUv4Q86",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278115130",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T00:02:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3797439043,
      "node_id": "IC_kwDOABII587iWFJD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3797439043",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T00:10:50Z",
      "updated_at": "2026-01-26T00:10:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "@l0rinc thanks for your review. I have taken most of your suggestions. I have added the integration test back as a separate commit.\r\n\r\n`git diff 3a2cfbea1957f1eed6d97b6f8924f13100e11b1c..8e074187a57220c596eb124091714302903a07cc`\r\n",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3797439043",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22278175152,
      "node_id": "MEE_lADOABII587geGK_zwAAAAUv4fmw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278175152",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T00:10:52Z"
    },
    {
      "event": "subscribed",
      "id": 22278175181,
      "node_id": "SE_lADOABII587geGK_zwAAAAUv4fnN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278175181",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T00:10:52Z"
    },
    {
      "event": "unlabeled",
      "id": 22278601998,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAUv6H0O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22278601998",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T01:00:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3706829514,
      "node_id": "PRR_kwDOABII587c8brK",
      "url": null,
      "actor": null,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-26T16:48:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for fixing it so quickly. \r\nI think we should remove the `noexcept` from `GetCoinFromBase` as well because the underlying `PeekCoin` -> `GetCoin` path can still throw.\r\nAnd since `PeekCoin` **does** actually call `GetCoin`, I think we need to update the PR description and comments and commit messages to accurately reflect that we're using `PeekCoin` to avoid `FetchCoin`'s `try_emplace` on the parent.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3706829514",
      "submitted_at": "2026-01-26T16:47:45Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22307060936,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAUxmrzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22307060936",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2f100b16b7bb09572ed3b04aa1484523af7509d9",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/2f100b16b7bb09572ed3b04aa1484523af7509d9",
      "created_at": "2026-01-27T05:02:19Z"
    },
    {
      "event": "commented",
      "id": 3803134477,
      "node_id": "IC_kwDOABII587irzoN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3803134477",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T05:03:59Z",
      "updated_at": "2026-01-27T05:03:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks again for your review @l0rinc. I took most of your suggestions. I also re-added `CCoinsViewErrorCatcher::PeekCoin` (thanks @willcl-ark).\r\n\r\n`git diff 8e074187a57220c596eb124091714302903a07cc..2f100b16b7bb09572ed3b04aa1484523af7509d9`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3803134477",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22307084852,
      "node_id": "MEE_lADOABII587geGK_zwAAAAUxmxo0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22307084852",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T05:04:01Z"
    },
    {
      "event": "subscribed",
      "id": 22307084863,
      "node_id": "SE_lADOABII587geGK_zwAAAAUxmxo_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22307084863",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T05:04:01Z"
    },
    {
      "event": "mentioned",
      "id": 22307084879,
      "node_id": "MEE_lADOABII587geGK_zwAAAAUxmxpP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22307084879",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T05:04:01Z"
    },
    {
      "event": "subscribed",
      "id": 22307084888,
      "node_id": "SE_lADOABII587geGK_zwAAAAUxmxpY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22307084888",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T05:04:01Z"
    },
    {
      "event": "commented",
      "id": 3804058832,
      "node_id": "IC_kwDOABII587ivVTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3804058832",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T09:22:06Z",
      "updated_at": "2026-01-27T09:22:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2f100b16b7bb09572ed3b04aa1484523af7509d9\r\n\r\nIntegration test was added to validate on a higher level that rejected blocks don't cache, error catcher (temporarily?) extended with `PeekCoin`, doc updated to clarify that `FetchCoin` fills the cache, and test helpers are hidden behind anonymous namespace to avoid pollution.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3804058832",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22390800811,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU2mIGr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22390800811",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0e45e759e0197f01b82689298a164d442264fc8a",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/0e45e759e0197f01b82689298a164d442264fc8a",
      "created_at": "2026-01-29T23:18:14Z"
    },
    {
      "event": "commented",
      "id": 3820911734,
      "node_id": "IC_kwDOABII587jvnx2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3820911734",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T23:24:58Z",
      "updated_at": "2026-01-29T23:24:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased due to #34164.\r\nMake `m_connect_block_view` be a `CoinsViewCacheNonMutating` instead of creating an ephemeral `CoinsViewCacheNonMutating`.\r\n\r\n`git range-diff ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb..2f100b16b7bb09572ed3b04aa1484523af7509d9 6750744eb32da428b0a44c6eaab69e5741a25167..0e45e759e0197f01b82689298a164d442264fc8a`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3820911734",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22391122480,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU2nWow",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22391122480",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "created_at": "2026-01-29T23:39:55Z"
    },
    {
      "event": "labeled",
      "id": 22391129478,
      "node_id": "LE_lADOABII587geGK_zwAAAAU2nYWG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22391129478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T23:40:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3820957780,
      "node_id": "IC_kwDOABII587jvzBU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3820957780",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T23:40:54Z",
      "updated_at": "2026-01-29T23:40:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/actions/runs/21498245018/job/61938643008</sub>\n<sub>LLM reason (âœ¨ experimental): Clang-tidy failed due to a bugprone-argument-comment error in validation_chainstate_tests.cpp (commented argument name mismatches the function parameter).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3820957780",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "unlabeled",
      "id": 22392305948,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAU2r3kc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22392305948",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T00:57:41Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3727267956,
      "node_id": "PRR_kwDOABII587eKZh0",
      "url": null,
      "actor": null,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-30T09:42:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 77b1f5a3a3bba44651aa5da5926a37d6eca9e863\n\nThe rebase since my last ack reordered the code a bit to work with the reusable `m_connect_block_view`.\nI have re-reviewed every commit, left small nits, LGTM!",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3727267956",
      "submitted_at": "2026-01-30T09:42:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3732451057,
      "node_id": "PRR_kwDOABII587eeK7x",
      "url": null,
      "actor": null,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T13:43:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\n\r\nNot wasting cache space for a potentially invalid block seems like another nice improvement in of itself.",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3732451057",
      "submitted_at": "2026-01-31T13:43:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22433129899,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU5HmWr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433129899",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c7e719127ebd37c85c2290b08b609781facb2b20",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/c7e719127ebd37c85c2290b08b609781facb2b20",
      "created_at": "2026-01-31T20:27:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22433239282,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU5IBDy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433239282",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "created_at": "2026-01-31T20:35:47Z"
    },
    {
      "event": "labeled",
      "id": 22433246586,
      "node_id": "LE_lADOABII587geGK_zwAAAAU5IC16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433246586",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:36:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3829299530,
      "node_id": "IC_kwDOABII587kPnlK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3829299530",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:37:19Z",
      "updated_at": "2026-01-31T20:37:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the reviews @sedited and @l0rinc. I have taken all of your suggestions.\r\n- Renamed `CoinsViewCacheNonMutating` to `CoinsViewOverlay` and updated the docstring.\r\n- Updated docstring on `m_connect_block_view`.\r\n- Updated text in commit message.\r\n- Added more `BOOST_CHECK`s in tests.\r\n- Added `CoinsViewOverlay` fuzz target.\r\n\r\n`git diff 77b1f5a3a3bba44651aa5da5926a37d6eca9e863..b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40`\r\n",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3829299530",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22433262264,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU5IGq4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433262264",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:37:20Z"
    },
    {
      "event": "subscribed",
      "id": 22433262341,
      "node_id": "SE_lADOABII587geGK_zwAAAAU5IGsF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433262341",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:37:20Z"
    },
    {
      "event": "mentioned",
      "id": 22433262401,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU5IGtB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433262401",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:37:20Z"
    },
    {
      "event": "subscribed",
      "id": 22433262434,
      "node_id": "SE_lADOABII587geGK_zwAAAAU5IGti",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433262434",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:37:21Z"
    },
    {
      "event": "commented",
      "id": 3829303527,
      "node_id": "IC_kwDOABII587kPojn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3829303527",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:41:15Z",
      "updated_at": "2026-01-31T20:41:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40\r\n\r\nSince last ack changed all `*Mutating` suffixed to `*Overlay` (in filenames, code, PR description and commit messages), added `HaveCoin` and `GetCoin` assert to the new tests and asserted the outcome of `ProcessNewBlock` in test.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3829303527",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "review_requested",
      "id": 22433315978,
      "node_id": "RRE_lADOABII587geGK_zwAAAAU5ITyK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433315978",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:41:21Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3733472570,
      "node_id": "PRR_kwDOABII587eiEU6",
      "url": null,
      "actor": null,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T20:48:26Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3733472570",
      "submitted_at": "2026-01-31T20:48:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "review_requested",
      "id": 22433395904,
      "node_id": "RRE_lADOABII587geGK_zwAAAAU5InTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433395904",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T20:48:29Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "unlabeled",
      "id": 22434027769,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAU5LBj5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434027769",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T21:48:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22434187945,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU5Loqp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434187945",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/2f9b52fa348242db475f4aff1fee951fc74e934e",
      "created_at": "2026-01-31T22:06:42Z"
    },
    {
      "event": "commented",
      "id": 3829449379,
      "node_id": "IC_kwDOABII587kQMKj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3829449379",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:08:13Z",
      "updated_at": "2026-01-31T22:08:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks again @sedited and @l0rinc. I removed `noexcept` from `GetCoinFromBase`.\r\n\r\n`git diff b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40..2f9b52fa348242db475f4aff1fee951fc74e934e`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3829449379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22434204065,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU5Lsmh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434204065",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:08:14Z"
    },
    {
      "event": "subscribed",
      "id": 22434204086,
      "node_id": "SE_lADOABII587geGK_zwAAAAU5Lsm2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434204086",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:08:14Z"
    },
    {
      "event": "mentioned",
      "id": 22434204108,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU5LsnM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434204108",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:08:15Z"
    },
    {
      "event": "subscribed",
      "id": 22434204125,
      "node_id": "SE_lADOABII587geGK_zwAAAAU5Lsnd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22434204125",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:08:15Z"
    },
    {
      "event": "commented",
      "id": 3829454383,
      "node_id": "IC_kwDOABII587kQNYv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3829454383",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T22:11:04Z",
      "updated_at": "2026-01-31T22:11:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2f9b52fa348242db475f4aff1fee951fc74e934e",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3829454383",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "review_requested",
      "id": 22448713218,
      "node_id": "RRE_lADOABII587geGK_zwAAAAU6DC4C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22448713218",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-01T21:13:08Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3739398004,
      "node_id": "PRR_kwDOABII587e4q90",
      "url": null,
      "actor": null,
      "commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T13:38:50Z",
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3739398004",
      "submitted_at": "2026-02-02T13:38:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22512609245,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU92yfd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22512609245",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "created_at": "2026-02-03T23:40:17Z"
    },
    {
      "event": "commented",
      "id": 3844438572,
      "node_id": "IC_kwDOABII587lJXos",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3844438572",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T23:53:52Z",
      "updated_at": "2026-02-03T23:53:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for your review @sipa. I've taken your suggestions.\r\n\r\n- Moved `CoinsViewOverlay` to `coins.h` instead of its own file.\r\n- Use a `CCoinsViewCache` subclass as a middle layer in the `CoinsViewOverlay` fuzz target. The subclass `MutationGuardCoinsViewCache` asserts that nothing mutates the internal `cacheCoins` except calls to `Flush` and `Sync`. Had to add some try/catch blocks to handle `CCoinsViewCache` as the backing layer and move code that directly mutates the backing layer.\r\n\r\n`git diff 2f9b52fa348242db475f4aff1fee951fc74e934e..2790e6e71f62eb0a7a5f239d1f8ea933be526d88`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3844438572",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22512808870,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU93jOm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22512808870",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T23:53:53Z"
    },
    {
      "event": "subscribed",
      "id": 22512808887,
      "node_id": "SE_lADOABII587geGK_zwAAAAU93jO3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22512808887",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T23:53:53Z"
    },
    {
      "event": "reviewed",
      "id": 3751479287,
      "node_id": "PRR_kwDOABII587fmwf3",
      "url": null,
      "actor": null,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-04T16:32:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Most of the change seems fine to me, but I don't like the new fuzzers as they are, we're testing more invalid states now.\nInstead of catching `std::logic_error` we should investigate where our setup wasn't realistic and fix that instead of just yolo-mutating the state in ways that the production code cannot. The tests should help increase our confidence in the code, catching `std::logic_error` won't help with that.\nLanding https://github.com/bitcoin/bitcoin/pull/34124 and https://github.com/bitcoin/bitcoin/pull/33018 could probably help a bit in that regard.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3751479287",
      "submitted_at": "2026-02-04T16:32:37Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22538690200,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAU_aR6Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22538690200",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "created_at": "2026-02-04T19:42:17Z"
    },
    {
      "event": "commented",
      "id": 3849497441,
      "node_id": "IC_kwDOABII587lcqth",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3849497441",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T20:07:05Z",
      "updated_at": "2026-02-04T20:07:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for your review @l0rinc - I've taken all your suggestions. I'm not sure #34124 or #33018 would change this PR. They seem like orthogonal improvements.\r\n\r\n`git diff 2790e6e71f62eb0a7a5f239d1f8ea933be526d88..70e93a10b7fad61483bc9044b483460a7faaa1b8`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3849497441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22539200241,
      "node_id": "MEE_lADOABII587geGK_zwAAAAU_cObx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22539200241",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T20:07:06Z"
    },
    {
      "event": "subscribed",
      "id": 22539200274,
      "node_id": "SE_lADOABII587geGK_zwAAAAU_cOcS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22539200274",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T20:07:06Z"
    },
    {
      "event": "reviewed",
      "id": 3753164499,
      "node_id": "PRR_kwDOABII587ftL7T",
      "url": null,
      "actor": null,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-04T20:28:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "lightly tested + code review ACK 70e93a10b7fad61483bc9044b483460a7faaa1b8\n\nI couldn't test the fuzz locally on a mac, but played around with the rest, LGTM.\nI hope we can clean up the fuzzer in the future to have even fewer invalid states, but this is a lot better than before.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3753164499",
      "submitted_at": "2026-02-04T20:28:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3770998831,
      "node_id": "PRR_kwDOABII587gxOAv",
      "url": null,
      "actor": null,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T03:38:43Z",
      "author_association": "MEMBER",
      "body": "ACK 70e93a10b7fad61483bc9044b483460a7faaa1b8, with a small suggestion",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3770998831",
      "submitted_at": "2026-02-09T03:38:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3774222144,
      "node_id": "PRR_kwDOABII587g9g9A",
      "url": null,
      "actor": null,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T16:16:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3774222144",
      "submitted_at": "2026-02-09T16:16:49Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3778934085,
      "node_id": "PRR_kwDOABII587hPfVF",
      "url": null,
      "actor": null,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-10T13:23:24Z",
      "author_association": "MEMBER",
      "body": "tACK 70e93a10b7fad61483bc9044b483460a7faaa1b8\n\nHad this branch reindex 50k blocks and then left it to run overnight for a few newly-seen blocks without issue. The code changes generally look good to me, and the rationale (as a building block of #31132) makes sense.\n\nI did not run any of the fuzz tests.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3778934085",
      "submitted_at": "2026-02-10T13:23:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3780508142,
      "node_id": "PRR_kwDOABII587hVfnu",
      "url": null,
      "actor": null,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-10T20:09:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 70e93a10b7fad61483bc9044b483460a7faaa1b8. Behavior change seems very good and I did not see any problems with the implementation. But it does seem like it could be simplified. Like I don't understand why this wouldn't just add a bool use_peek option to `CCoinsViewCache` instead of introducing a new `CoinsViewOverlay` class and `GetCoinFromBase` override. Also I don't understand why `CoinsViewOverlay` seems to be tested in some different and more complicated ways than  `CCoinsViewCache`. (Details in comments below.)\n\nI could be missing some context, and this PR does have a lot of acks so may not be worth changing. But I suspect various simplifications and cleanups could be possible here, and maybe done in followups.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3780508142",
      "submitted_at": "2026-02-10T20:09:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "commented",
      "id": 3880538319,
      "node_id": "IC_kwDOABII587nTFDP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3880538319",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T20:29:03Z",
      "updated_at": "2026-02-10T20:29:03Z",
      "author_association": "MEMBER",
      "body": "Those seem like very useful review comments, @ryanofsky. I'm happy to re-review if any of them were to be addressed in this PR.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3880538319",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22685710284,
      "node_id": "MEE_lADOABII587geGK_zwAAAAVILHfM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22685710284",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T20:29:04Z"
    },
    {
      "event": "subscribed",
      "id": 22685710316,
      "node_id": "SE_lADOABII587geGK_zwAAAAVILHfs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22685710316",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T20:29:04Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22721135862,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAVKSQT2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22721135862",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/6ca865fb2bd82b1034c6946d27640999f8135c89",
      "created_at": "2026-02-12T01:38:27Z"
    },
    {
      "event": "commented",
      "id": 3888188557,
      "node_id": "IC_kwDOABII587nwQyN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3888188557",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T01:39:39Z",
      "updated_at": "2026-02-12T01:39:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for your review @ryanofsky! I have taken some of your suggestions and left clarifying comments for others.\r\n\r\n`git diff 70e93a10b7fad61483bc9044b483460a7faaa1b8..6ca865fb2bd82b1034c6946d27640999f8135c89`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3888188557",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22721151445,
      "node_id": "MEE_lADOABII587geGK_zwAAAAVKSUHV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22721151445",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T01:39:41Z"
    },
    {
      "event": "subscribed",
      "id": 22721151472,
      "node_id": "SE_lADOABII587geGK_zwAAAAVKSUHw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22721151472",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T01:39:41Z"
    },
    {
      "event": "reviewed",
      "id": 3789764345,
      "node_id": "PRR_kwDOABII587h4zb5",
      "url": null,
      "actor": null,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T09:25:31Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3789764345",
      "submitted_at": "2026-02-12T09:25:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3789770973,
      "node_id": "PRR_kwDOABII587h41Dd",
      "url": null,
      "actor": null,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T09:26:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3789770973",
      "submitted_at": "2026-02-12T09:26:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3789773245,
      "node_id": "PRR_kwDOABII587h41m9",
      "url": null,
      "actor": null,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T09:27:20Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3789773245",
      "submitted_at": "2026-02-12T09:27:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22737975535,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAVLSfjv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22737975535",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1dea8f5d46f9486a0eafc0b166e82739c34e17ff",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/1dea8f5d46f9486a0eafc0b166e82739c34e17ff",
      "created_at": "2026-02-12T14:54:41Z"
    },
    {
      "event": "reviewed",
      "id": 3791570600,
      "node_id": "PRR_kwDOABII587h_sao",
      "url": null,
      "actor": null,
      "commit_id": "1dea8f5d46f9486a0eafc0b166e82739c34e17ff",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T15:03:00Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3791570600",
      "submitted_at": "2026-02-12T15:03:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22738263740,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAVLTl68",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738263740",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "890215cfb952ba1a5b99d246c9c071e6dc4bde02",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/890215cfb952ba1a5b99d246c9c071e6dc4bde02",
      "created_at": "2026-02-12T15:03:47Z"
    },
    {
      "event": "labeled",
      "id": 22738277865,
      "node_id": "LE_lADOABII587geGK_zwAAAAVLTpXp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738277865",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:04:17Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22738345232,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAVLT50Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738345232",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5b524f311ed74a751040494735b9a47f5c16f0b2",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/5b524f311ed74a751040494735b9a47f5c16f0b2",
      "created_at": "2026-02-12T15:06:33Z"
    },
    {
      "event": "commented",
      "id": 3891604254,
      "node_id": "IC_kwDOABII587n9Sse",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891604254",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:26:30Z",
      "updated_at": "2026-02-12T15:26:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @l0rinc and @maflcko, updated to use `PeekCoin` by default and delegate to it if `GetCoin` is not overridden.\r\n\r\n`git diff 6ca865fb2bd82b1034c6946d27640999f8135c89..5b524f311ed74a751040494735b9a47f5c16f0b2`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3891604254",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22738950263,
      "node_id": "MEE_lADOABII587geGK_zwAAAAVLWNh3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738950263",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:26:32Z"
    },
    {
      "event": "subscribed",
      "id": 22738950317,
      "node_id": "SE_lADOABII587geGK_zwAAAAVLWNit",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738950317",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:26:32Z"
    },
    {
      "event": "mentioned",
      "id": 22738950381,
      "node_id": "MEE_lADOABII587geGK_zwAAAAVLWNjt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738950381",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:26:32Z"
    },
    {
      "event": "subscribed",
      "id": 22738950416,
      "node_id": "SE_lADOABII587geGK_zwAAAAVLWNkQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738950416",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:26:32Z"
    },
    {
      "event": "unlabeled",
      "id": 22741030741,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAVLeJdV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22741030741",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T16:35:08Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3793697280,
      "node_id": "PRR_kwDOABII587iHzoA",
      "url": null,
      "actor": null,
      "commit_id": "5b524f311ed74a751040494735b9a47f5c16f0b2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T22:14:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review 5b524f311ed74a751040494735b9a47f5c16f0b2. Thanks for the updates and explanations. Since last review, `GetCoin` was changed to delegate to `PeekCoin` instead of the reverse, which resolves my original concern about `PeekCoin` implementations unintentionally modifying the cache, but raises other concerns (see below). Other than that, some comments were just moved and added, some code moved between commits, and GetCoinFromBase was renamed (thanks!).\n\nIf my concerns about `GetCoin` calling `PeekCoin` aren't real or aren't important, would be happy to re-ack. Otherwise it might be better to go back to the previous approach, or just make these methods pure-virtual and accept a little boilerplate in the subclasses.\n\nAt a very high level, I will say the approach of making sure connect block code does not modify the cache by passing a different coinsview at runtime does not seem ideal to me. More ideal would be for the coins view to have a const method for looking up without modifying the cache, and a non-const method for looking up with caching, and the connect block code would be changed directly to use non-caching lookups, and the compiler would enforce this because it is passed a const view. Still, this runtime implementation seems like an improvement over status quo, and I'm probably not seeing the bigger picture here since these changes are used in follow up PRs",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3793697280",
      "submitted_at": "2026-02-12T22:14:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY5YjAxYWYwZWI5MDE3YTZhZTdjYTMxMzRjOWRjZjg5ZTc0ZGJmYTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8",
      "tree": {
        "sha": "56760c6664de26e2ff3735d6a28df1fee4927fc3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/56760c6664de26e2ff3735d6a28df1fee4927fc3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 56760c6664de26e2ff3735d6a28df1fee4927fc3\nparent 6750744eb32da428b0a44c6eaab69e5741a25167\nauthor Andrew Toth <andrewstoth@gmail.com> 1766559610 +0200\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\ncoins: add PeekCoin()\n\nIntroduce a helper to look up a Coin through a stack of CCoinsViewCache layers without populating parent caches.\n\nThis is useful for ephemeral views (e.g. during ConnectBlock) that want to avoid polluting CoinsTip() when validating invalid blocks.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\nCo-authored-by: Pieter Wuille <pieter@wuille.net>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBjD2BAAub7WCM2UxhWzJ9HUkZS3/c5+RtKwMqSVQq1UlP3ZXOd7H8GW+fGnDxvq\nJXdSTH+Qi9qH6O0sSzbkW4OmIUBIUtAA04w+u/Pv1HPJSXvnIPF/XrBZYrVCswTM\n1Itp6hdoxlfEh45JC4yOFz0IT+2g9xq6mHNPa+cQq3ODO9o03wLwZ6ap0j4CZG2R\nm83L6gGkYELptjagNBME91Wkhod+NAsR2NtVtOnE1K0FujIK1rbejG+J/B9Wo+E0\nciqKOYDyCxJ6OfglQWpALdZXUsOWx10LZ9W5RXyDEkO+xqhBtomBuEyPtp7ve7dW\n3cE7eZMsmSHnKH3UQpvWoXS/eFFmoc8TpQM73m9G+HV19wXHe8NofD+mSEtLurvn\nOfdhsAhBhL/WGW11ToNtITUiv5oarO7kt3I20Lb3+RGxgtZzRmBYQAqX9tWe45HE\nTBwxzv15NG1u1sjDfZPpjVxB7dtbnJRx5IG8cpt9X5aDNEcaApK5Hg2i67anibcO\n13s1eD0d/8QHlCMyCvSElxTYeKMf/1IABRqyDRh/AtgwLft5Lesm03QWasNyaLQc\nAb7nXiDBHI+ZX4w1uCaclSOkCbDdWMrw07muHVusyK+3BN/W8UXrqxlmdQXm/Fb9\nf9tGZT1FQExSsRisFX/bR/Hg8Fs6IX/rMXNH8ddf85ZhVVhswi0=\n=jnB7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6750744eb32da428b0a44c6eaab69e5741a25167",
          "sha": "6750744eb32da428b0a44c6eaab69e5741a25167",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6750744eb32da428b0a44c6eaab69e5741a25167"
        }
      ],
      "message": "coins: add PeekCoin()\n\nIntroduce a helper to look up a Coin through a stack of CCoinsViewCache layers without populating parent caches.\n\nThis is useful for ephemeral views (e.g. during ConnectBlock) that want to avoid polluting CoinsTip() when validating invalid blocks.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\nCo-authored-by: Pieter Wuille <pieter@wuille.net>\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2025-12-24T07:00:10Z"
      },
      "sha": "69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY3YzBkMTc5OGU2MTQ3ZjQ4ZDRiYWZjMmM5ZTVmZjMwZjJhNjIzNDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/67c0d1798e6147f48d4bafc2c9e5ff30f2a62340",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/67c0d1798e6147f48d4bafc2c9e5ff30f2a62340",
      "tree": {
        "sha": "d64543e736ba3a5baa887f13baa69a5305641a42",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d64543e736ba3a5baa887f13baa69a5305641a42"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d64543e736ba3a5baa887f13baa69a5305641a42\nparent 69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8\nauthor Andrew Toth <andrewstoth@gmail.com> 1770859731 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\ncoins: introduce CoinsViewOverlay\n\nIntroduce `CoinsViewOverlay`, a `CCoinsViewCache` subclass that reads\ncoins without mutating the underlying cache via `FetchCoin()`.\n\nUse `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\n\nThis is the foundation for async input fetching, where worker threads must not\nmutate shared state.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBjJYQ//buZl3l/Af2tu4JynKnqzZjjVy1rYZxUJfx+GcAsRsm5tv6fUlrWlir6x\n+TVJxBjuT4P08e7niY7kOe4UIybpv8hWSEgqDJsGJQqciEuDs5euTaiaTgkAnQQu\n9ET01PEd/NJUVS2w6kEFfeCv8m6vvgeQeH6I7Ubr+pzxWXsSE0B0eAQNSYRq338R\nNNdWYRinn69M1JFrwZah+Cfx22vlayJtKXPKpVnCfdP9CKpwSe9RfwH1rblHEOxF\nnrPkIqNRyJgMzeG24+sINagKVcW+EIlHOq9nw3OE/o3M2PGUhwwqir1QSA/i00re\ntfXtQ8iI0kczy5cJrov6XWGRNVQeT7wX2hQAscgqVzk+3uCO4q9bJvFgycXoMFp1\na1u9FJDjGij8U/GtKdIZvy3y7MPc5lst/UkUSjppqQX816Dc41H4cMKjod/vZJOv\nkdV3Ff9lvbdHuEA4AaftG3Qh3xFTDcvbmYJ1ZkrHcQEdhCtQd52KSCoVN5xqOWRb\nFerN2r1ss4Cue8D4IWH3U23rN2lUMR/UhC83HzX5x8uibxWQiblUGcI4MlVMdtnS\nMn4PEV00rFFSjQGIelER/DJI8T3VUiqAgqeYO0hRBZr4aEoSIxZ1W3yL9LHDS5bK\nwmepynuYw/fQ+IFGXH5zZ7FDmdGzxMd2v4wS+KMzTLtuUl7nUGc=\n=lfum\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8",
          "sha": "69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/69b01af0eb9017a6ae7ca3134c9dcf89e74dbfa8"
        }
      ],
      "message": "coins: introduce CoinsViewOverlay\n\nIntroduce `CoinsViewOverlay`, a `CCoinsViewCache` subclass that reads\ncoins without mutating the underlying cache via `FetchCoin()`.\n\nUse `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\n\nThis is the foundation for async input fetching, where worker threads must not\nmutate shared state.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-12T01:28:51Z"
      },
      "sha": "67c0d1798e6147f48d4bafc2c9e5ff30f2a62340"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDczZTk5YTU5NjY1NTUxMjQzZDZkYmUwM2EwZTliYWE5Y2FiMDQ2Yjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73e99a59665551243d6dbe03a0e9baa9cab046b9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/73e99a59665551243d6dbe03a0e9baa9cab046b9",
      "tree": {
        "sha": "f744c5c5b66ba73e40e37c7c0eba7a5f427e1e78",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f744c5c5b66ba73e40e37c7c0eba7a5f427e1e78"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f744c5c5b66ba73e40e37c7c0eba7a5f427e1e78\nparent 67c0d1798e6147f48d4bafc2c9e5ff30f2a62340\nauthor Andrew Toth <andrewstoth@gmail.com> 1770859856 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\ncoins: don't mutate main cache when connecting block\n\nUse `CoinsViewOverlay` when connecting blocks in `ConnectTip`.\n\nAdd a new integration test to verify that using\nCoinsViewOverlay does not mutate the main cache\nduring validation for an invalid block.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBj04w/8D91L/J+8Nj042Zoyka9R1Nq5gmaKsVGAENKeE9cdjy+OqMziImfb7PZ+\nqf35mosApL46AdNgdYh3KPyKc9N3vJranzobtlhgi6+s6JcFGkUpGoU8liDZzELE\nPvwi7eqF0K37X8up8KlI/jNDp6Vdby7dp6Jv66iDvZRxByqk2iuVZF+ihuZbel82\nmLvmMAcmbFHydSz6UM0TvYCaBDAOKWSIrfMNyvUtILzLyU4CI40iN9O/iW/RJHeG\nWXhIQRPgotUNd5icWGbRPK+Tq0Icz28kYXsLGIQ33/kEfHRlK3431GPB42DlJnqO\n5kq7CYVlfKO6iPQY5fedP/nHN+iVXd1LtuBpuKlDtsHLW8JwKA2sB8p1iXUWN/tb\nESf9Y49LROti5VBqGMASLXUlUsjccFGEYJr1lhe2vij4qlC807p27LHaZWXcJ+RE\n9hE1c2PiBXOyqVORGzb1h5y4bCgXqW0wTA9c5PKpoEVEIHiGiatXLFhXo6shWU8N\npg4Ob8/Dxh0LyRsY266r9maW9322rWGTGAOKA0AO6SbDQnP7NC4d3IZhFirV0kED\neMhNEb1vtQXA7VusA4E7GK11va2BCqG15MJHbFN6DItZyoMT+ElhYEz7gvoyLG5S\njxR1OmF+skE1/tUJtFqPSjRaOSsf7ebAnZ2ZOqM6RJ/veh9rWhI=\n=hIIE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/67c0d1798e6147f48d4bafc2c9e5ff30f2a62340",
          "sha": "67c0d1798e6147f48d4bafc2c9e5ff30f2a62340",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/67c0d1798e6147f48d4bafc2c9e5ff30f2a62340"
        }
      ],
      "message": "coins: don't mutate main cache when connecting block\n\nUse `CoinsViewOverlay` when connecting blocks in `ConnectTip`.\n\nAdd a new integration test to verify that using\nCoinsViewOverlay does not mutate the main cache\nduring validation for an invalid block.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-12T01:30:56Z"
      },
      "sha": "73e99a59665551243d6dbe03a0e9baa9cab046b9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg5ODI0ZmIyN2IyMjhhMTJkNWMyZjYzMTA2YzJhNGQ3OTNlNzMxMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/89824fb27b228a12d5c2f63106c2a4d793e73107",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/89824fb27b228a12d5c2f63106c2a4d793e73107",
      "tree": {
        "sha": "d9d028e4cf97198a7819dd05137056bfb785379b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d9d028e4cf97198a7819dd05137056bfb785379b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d9d028e4cf97198a7819dd05137056bfb785379b\nparent 73e99a59665551243d6dbe03a0e9baa9cab046b9\nauthor Andrew Toth <andrewstoth@gmail.com> 1766765639 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\nfuzz: pass coins_view_cache to TestCoinsView in coins_view\n\nRefactor TestCoinsView() to accept the cache as a parameter instead of\ncreating it internally. This prepares for adding a CoinsViewOverlay\nfuzz target that needs to pass in a different cache type.\n\nThis is a non-functional change.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBieVw//aICP7ffOpKKPgG0+IGJAQM8Dw7VQbnJQS9oyuxfy6m/xOckCHXsPwspj\ng2AwJu5L+Xd0X9IC8U1xDkwnOOYxWZO09IPTH83Gbu4HYyikqJXNcizaw0CE/H9F\nXvaw3m3X/BxOA5XsJ2glhuM9iLvw1QNzZqiZjz+mC/hhvuPteRdeAl5/KkpyYpJM\nX8CI+IImf3rgN80R9g6yq4Ro0qAAXsf4HzInuzNU5JAmIgW/HxSwZRrzNjyf3cM7\n6E7Z0/SGx2n3jpUYXlYnAyirZO2qe4I8LNhjLpH/Uue5WYPLnBySUecS9Zd+95nl\nB7k7AcBQGtdym2QQApwf4NVvo1448j8AoDOyG69ANxGCcTHd40+eegPDhH+gfDbI\ndAjYuOsEkTrlMXz93qpBtTPJteWPmpmSjCaBfS0266/0njrLNd0xO8XmP7Jb6Wf5\nju51NuM63WvnvPYCwZF4a6Xe6LmCbTVFyosa0TT5dZFKb/H/mIEe7OD9JHRSPKto\naPpzDvBltFjBvOIyXsokl7talibTCdGYLLE6EG8dKpa7rqXCgxV2F78h3oSoZJr9\nPGSxlnbGMSOnfGlNr0knn1wlmHsQJCO1m3G5JdPhN0xj3vCVre8Mux/nKMVqLHHT\nn/lho0VJbMLN9U0YDIoTiBCfvwhuYicGbdU82Tg7QENbFGNptFo=\n=w49g\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73e99a59665551243d6dbe03a0e9baa9cab046b9",
          "sha": "73e99a59665551243d6dbe03a0e9baa9cab046b9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/73e99a59665551243d6dbe03a0e9baa9cab046b9"
        }
      ],
      "message": "fuzz: pass coins_view_cache to TestCoinsView in coins_view\n\nRefactor TestCoinsView() to accept the cache as a parameter instead of\ncreating it internally. This prepares for adding a CoinsViewOverlay\nfuzz target that needs to pass in a different cache type.\n\nThis is a non-functional change.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2025-12-26T16:13:59Z"
      },
      "sha": "89824fb27b228a12d5c2f63106c2a4d793e73107"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg2ZWRhODhjOGU0ODZlYjFkYjcyNGU2MDk0OGY3MTM0OWQwNTBlMWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/86eda88c8e486eb1db724e60948f71349d050e1d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/86eda88c8e486eb1db724e60948f71349d050e1d",
      "tree": {
        "sha": "bbe73bace1c63cc8b280d974ed17d1b4b2e33100",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bbe73bace1c63cc8b280d974ed17d1b4b2e33100"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bbe73bace1c63cc8b280d974ed17d1b4b2e33100\nparent 89824fb27b228a12d5c2f63106c2a4d793e73107\nauthor Andrew Toth <andrewstoth@gmail.com> 1770159504 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\nfuzz: move backend mutating block to end of coins_view\n\nRefactor TestCoinsView() to move code that directly modifies\nbackend_coins_view to the end of the function.\nThis prepares for a CoinsViewOverlay fuzz target that asserts\nthe backend_coins_view is not mutated by any methods before\nBatchWrite is called.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBgLNw/8CsLaK/Kpp5UIOqX6fn3Yn/ouOe69Iu2BF5/XsOlatInw52esWF444xuo\nFcTyX+KkKi93HE8ygwoS7c4F0JThm3fGKYBvHt1FbVq89NfOhusT2wWBWBRyOSwh\nkVTBOSlrIH0WNCAi2SHzqIt+pLiPa0vWy4I9wJxTa0WBn1IPCKmwkYGpoekb9stM\nmEdk+yyufQKHGPP5dTs3aHQ4QwGAORuMhiRZays5oaqJJeQTZ3Rv9rMS0PnWmlgF\nfN1JKgbsbZK8RNcPT48ExIXTmyTW1i/zQ65vSzWIMBQtFv8KfcITBd+SQ3aOzPAK\nJahncOlgAFv8nlEdxKORI8MG8MzjWqan7HpaOExodDoNhg/GLwF0lqKoVKKKgEHN\ngHr72Ub/VF0VdiKWqUl15eHBFF6UAi/LBQNRNdl85l3mSrjBGRs8DnHRxoxnfkj8\nqnmxYHJhfcWdfbsHDuQeYYd3jYi0nkx4LWU+VETjE4P7ri+q6kXehGhFhiSLRGPQ\n1vH69o3JbHZNEUce2zvEAJo8uDLm/IF9E6kDbWdqXNVv2ruNNo3glGC92xX0xoRF\n0A3bXlBxLvfmH+8cj0m7guJhvElepItXTnfxq7EN7x7DwKthIKuydgpSRLQQzrMj\n1jvBzAprzJeV78+fXkHjL3DTJEixQfrQWnAgZJWX0rEGM4lujis=\n=lc29\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/89824fb27b228a12d5c2f63106c2a4d793e73107",
          "sha": "89824fb27b228a12d5c2f63106c2a4d793e73107",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/89824fb27b228a12d5c2f63106c2a4d793e73107"
        }
      ],
      "message": "fuzz: move backend mutating block to end of coins_view\n\nRefactor TestCoinsView() to move code that directly modifies\nbackend_coins_view to the end of the function.\nThis prepares for a CoinsViewOverlay fuzz target that asserts\nthe backend_coins_view is not mutated by any methods before\nBatchWrite is called.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-03T22:58:24Z"
      },
      "sha": "86eda88c8e486eb1db724e60948f71349d050e1d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNhZTZkODk1ZjhhOGNmNWY1N2UwNTUxOTUzNmZkYTVkNjJiMTA4NDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "tree": {
        "sha": "591c3d9d245c56de88b8a7edd3d380e92a72f4ee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/591c3d9d245c56de88b8a7edd3d380e92a72f4ee"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 591c3d9d245c56de88b8a7edd3d380e92a72f4ee\nparent 86eda88c8e486eb1db724e60948f71349d050e1d\nauthor Andrew Toth <andrewstoth@gmail.com> 1769891732 -0500\ncommitter Andrew Toth <andrewstoth@gmail.com> 1770949883 -0500\n\nfuzz: add target for CoinsViewOverlay\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEISytpz6vNK/yCogaYAB6/Ik4sBgFAmmOjPsACgkQYAB6/Ik4\nsBjp1g/9FhxWE9FZu5wsqkWftGMfrZ/kCky9u/PSUH33dB0Lmy6wLKfYuMSo6FAG\nWxo4+K0FFz+Kc2b6SN+rjMeZbgVRRT8uuFRRrrv+18cQs8G6lyWcrNmuV3hnhSjl\n3DOsEBeKeJKglxP6Vt7Y52f5f1EjptW6hJZLJz7OardTPTw3RP5eAe3zTfZBwoWo\n9UhyrTmDQxmEE0kk2guyX9B9Mk6Kc8xnQMgbzgRq15NT7oxzKNZILECEwVi7itCn\nyvFPgIwlvxGROYCIA7MnT+VTBiPmtPLjJe/Db1MlTqInlK2LAqUvmaKe3MPzEMN8\nT5SSGEMKN89satzVP7soTMegNUpQDkL2gKOjHiTqjvBmTcmnjWxdFRHyCj6MCTrO\nShI3WzlMv+oK//8RWai3E01j7CNjq3yubg+lTZ3NJcJB2LzuMhcu41LRHCmYr8X1\nCnsdYsYJxaVWc8qp2SBS/OkMXO28lmW0e0jkVfGFSuTTdnyvIhzl351OVDP7zp3E\n6YE0nIoekmSopEdiJ0ma+J6vApVmw0Wv90SwOVKHLprm4JB//Yi33Mq3tSjDUpQ1\nrlJTEzOGZEd50OKOJ9I49GMtVY87qh3AQ7bcUs5kVewu2yA/ygqlscFkkgiTGa55\n2d0i6rac4/ISFP/pBdwGcULiJZ/B2eKQ/CtP1wQgphSvCMsvbKI=\n=mjsL\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/86eda88c8e486eb1db724e60948f71349d050e1d",
          "sha": "86eda88c8e486eb1db724e60948f71349d050e1d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/86eda88c8e486eb1db724e60948f71349d050e1d"
        }
      ],
      "message": "fuzz: add target for CoinsViewOverlay\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-02-13T02:31:23Z"
      },
      "author": {
        "name": "Andrew Toth",
        "email": "andrewstoth@gmail.com",
        "date": "2026-01-31T20:35:32Z"
      },
      "sha": "cae6d895f8a8cf5f57e05519536fda5d62b10841"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22753645840,
      "node_id": "HRFPE_lADOABII587geGK_zwAAAAVMORUQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22753645840",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "commit_url": "https://api.github.com/repos/andrewtoth/bitcoin/commits/cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "created_at": "2026-02-13T02:31:29Z"
    },
    {
      "event": "commented",
      "id": 3894486102,
      "node_id": "IC_kwDOABII587oISRW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3894486102",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-13T02:35:02Z",
      "updated_at": "2026-02-13T02:35:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks again for your review @ryanofsky. I reverted the change to `PeekCoin`. From the previously well ACK'd 70e93a10b7fad61483bc9044b483460a7faaa1b8, the changes are:\r\n\r\n- rename `GetCoinFromBase` -> `FetchCoinFromBase`\r\n- remove the last commit, which touched an unrelated part of the fuzz `coins_view` target.\r\n- added coverage for `PeekCoin` in `coinscache_sim`.\r\n- Added and improved more comments throughout.\r\n\r\n`git diff 70e93a10b7fad61483bc9044b483460a7faaa1b8..cae6d895f8a8cf5f57e05519536fda5d62b10841`",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3894486102",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "mentioned",
      "id": 22753688336,
      "node_id": "MEE_lADOABII587geGK_zwAAAAVMObsQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22753688336",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-13T02:35:03Z"
    },
    {
      "event": "subscribed",
      "id": 22753688371,
      "node_id": "SE_lADOABII587geGK_zwAAAAVMObsz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22753688371",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-13T02:35:04Z"
    },
    {
      "event": "labeled",
      "id": 22755002623,
      "node_id": "LE_lADOABII587geGK_zwAAAAVMTcj_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22755002623",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-13T04:12:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "closed",
      "id": 22793987363,
      "node_id": "CE_lADOABII587geGK_zwAAAAVOoKUj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22793987363",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T19:27:48Z"
    },
    {
      "event": "reopened",
      "id": 22793987573,
      "node_id": "REE_lADOABII587geGK_zwAAAAVOoKX1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22793987573",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T19:27:50Z"
    },
    {
      "event": "unlabeled",
      "id": 22794853363,
      "node_id": "UNLE_lADOABII587geGK_zwAAAAVOrdvz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22794853363",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T20:55:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3905465222,
      "node_id": "IC_kwDOABII587oyKuG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3905465222",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T23:33:04Z",
      "updated_at": "2026-02-15T23:33:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK cae6d895f8a8cf5f57e05519536fda5d62b10841\r\n\r\nThere was some back-and-forth here since my last review.\r\nLeft some nits, I'm fine with it as-is, would prefer for https://github.com/bitcoin/bitcoin/pull/34124 to land first to make this change a bit cleaner, but I don't mind rebasing that either.\r\nIt's better than before, but it's not our last coins related refactor :)",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#issuecomment-3905465222",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34165"
    },
    {
      "event": "review_requested",
      "id": 22810240423,
      "node_id": "RRE_lADOABII587geGK_zwAAAAVPmKWn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22810240423",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T23:33:12Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22810240554,
      "node_id": "RRE_lADOABII587geGK_zwAAAAVPmKYq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22810240554",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T23:33:12Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22810240714,
      "node_id": "RRE_lADOABII587geGK_zwAAAAVPmKbK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22810240714",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T23:33:13Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22810240909,
      "node_id": "RRE_lADOABII587geGK_zwAAAAVPmKeN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22810240909",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-15T23:33:15Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3805665338,
      "node_id": "PRR_kwDOABII587i1dg6",
      "url": null,
      "actor": null,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-15T23:33:17Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3805665338",
      "submitted_at": "2026-02-15T23:33:17Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3822197313,
      "node_id": "PRR_kwDOABII587j0hpB",
      "url": null,
      "actor": null,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-18T20:58:48Z",
      "author_association": "MEMBER",
      "body": "reACK cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3822197313",
      "submitted_at": "2026-02-18T20:58:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    },
    {
      "event": "reviewed",
      "id": 3824244838,
      "node_id": "PRR_kwDOABII587j8Vhm",
      "url": null,
      "actor": null,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-19T08:48:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#pullrequestreview-3824244838",
      "submitted_at": "2026-02-19T08:48:57Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657681365",
      "pull_request_review_id": 3623089900,
      "id": 2657681365,
      "node_id": "PRRC_kwDOABII586eaP_V",
      "diff_hunk": "@@ -2978,7 +2979,7 @@ bool Chainstate::DisconnectTip(BlockValidationState& state, DisconnectedBlockTra\n     // Apply the block atomically to the chain state.\n     const auto time_start{SteadyClock::now()};\n     {\n-        CCoinsViewCache view(&CoinsTip());\n+        CoinsViewCacheNonMutating view(&CoinsTip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 13,
      "commit_id": "9739ce6b10314b098b16886418781275548dbdcc",
      "original_commit_id": "9739ce6b10314b098b16886418781275548dbdcc",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I tried understanding why this was added to `DisconnectTip`, since every indication was that this is about block connection:\r\n> * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\r\n\r\nSo how are the new tests passing if the implementation is completely broken? It seems we're only testing `CoinsViewCacheNonMutating` in isolation but there are no tests added to check it's actual integration.",
      "created_at": "2026-01-02T13:01:04Z",
      "updated_at": "2026-01-02T13:28:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2657681365",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657681365"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2982,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657863730",
      "pull_request_review_id": 3623301877,
      "id": 2657863730,
      "node_id": "PRRC_kwDOABII586ea8gy",
      "diff_hunk": "@@ -2978,7 +2979,7 @@ bool Chainstate::DisconnectTip(BlockValidationState& state, DisconnectedBlockTra\n     // Apply the block atomically to the chain state.\n     const auto time_start{SteadyClock::now()};\n     {\n-        CCoinsViewCache view(&CoinsTip());\n+        CoinsViewCacheNonMutating view(&CoinsTip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 13,
      "commit_id": "9739ce6b10314b098b16886418781275548dbdcc",
      "original_commit_id": "9739ce6b10314b098b16886418781275548dbdcc",
      "in_reply_to_id": 2657681365,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This was an oopsie.\r\nAdded `CoinsViewCacheNonMutating` to `ConnectBlock` and removed from `DisconnectBlock`.",
      "created_at": "2026-01-02T15:00:09Z",
      "updated_at": "2026-01-02T15:00:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2657863730",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657863730"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2982,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659143724",
      "pull_request_review_id": 3624557779,
      "id": 2659143724,
      "node_id": "PRRC_kwDOABII586ef1As",
      "diff_hunk": "@@ -0,0 +1,143 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    Txid prevhash{Txid::FromUint256(uint256{1})};\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        prevhash = tx.GetHash();",
      "path": "src/test/coinsviewcachenonmutating_tests.cpp",
      "position": 1,
      "original_position": 37,
      "commit_id": "9a37b19538a423ea1e15f85700cff5b9a7ea2e3c",
      "original_commit_id": "7a6e6160cbdc4a0a9e5c7afac3c73e7ce1221e94",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This seems like a leftover.",
      "created_at": "2026-01-03T20:49:54Z",
      "updated_at": "2026-01-03T20:59:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2659143724",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659143724"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659145764",
      "pull_request_review_id": 3624557779,
      "id": 2659145764,
      "node_id": "PRRC_kwDOABII586ef1gk",
      "diff_hunk": "@@ -0,0 +1,143 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept",
      "path": "src/test/coinsviewcachenonmutating_tests.cpp",
      "position": 1,
      "original_position": 23,
      "commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "original_commit_id": "7a6e6160cbdc4a0a9e5c7afac3c73e7ce1221e94",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I understand that we want this to be realistic, but we could simplify considerably if we just returned the outpoints here:\n```C++\nstatic std::vector<COutPoint> CreateOutpoints() noexcept\n{\n    static constexpr uint32_t NUM_OUTPOINTS{100};\n    std::vector<COutPoint> outpoints;\n    outpoints.reserve(NUM_OUTPOINTS);\n\n    for (const auto i : std::views::iota(uint32_t{1}, NUM_OUTPOINTS + 1)) {\n        outpoints.emplace_back(Txid::FromUint256(uint256(i)), /*nIn=*/0);\n    }\n\n    return outpoints;\n}\n```\n\nIf you disagree, just resolve without a comment.",
      "created_at": "2026-01-03T20:54:49Z",
      "updated_at": "2026-01-03T20:59:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2659145764",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2659145764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662558942",
      "pull_request_review_id": 3628136296,
      "id": 2662558942,
      "node_id": "PRRC_kwDOABII586es2ze",
      "diff_hunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via FetchCoin, so base will not be mutated before Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the FetchCoin private method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    CCoinsMap::iterator FetchCoin(const COutPoint& outpoint) const override\n+    {\n+        auto [ret, inserted]{cacheCoins.try_emplace(outpoint)};\n+        if (!inserted) return ret;",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "original_commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, we're we're duplicating the `FetchCoin` implementation here - and also making it virtual which introduces a slight regression on the hot path.\nCould we extract only the part that changes?\nI think we can simplify it by adding a virtual `GetCoinFromBase` which either calls `base->GetCoin(outpoint)` (default impl) or in `CoinsViewCacheNonMutating` it could be overwritten with the new `base->PeekCoin(outpoint)`. That way only the `if (inserted)` branch would pay for virtual dispatch and there would be no duplicated `FetchCoin` logic, something like:\n```patch\ndiff --git a/src/coins.cpp b/src/coins.cpp\n--- a/src/coins.cpp\t(revision 85b20448640f8209e453019c3e1494c1ae229d74)\n+++ b/src/coins.cpp\t(revision c3b34ec796a3fd6e34e0dfb862c61bc298ba8d6f)\n@@ -59,10 +59,15 @@\n     return memusage::DynamicUsage(cacheCoins) + cachedCoinsUsage;\n }\n \n+std::optional<Coin> CCoinsViewCache::GetCoinFromBase(const COutPoint& outpoint) const\n+{\n+    return base->GetCoin(outpoint);\n+}\n+\n CCoinsMap::iterator CCoinsViewCache::FetchCoin(const COutPoint &outpoint) const {\n     const auto [ret, inserted] = cacheCoins.try_emplace(outpoint);\n     if (inserted) {\n-        if (auto coin{base->GetCoin(outpoint)}) {\n+        if (auto coin{GetCoinFromBase(outpoint)}) {\n             ret->second.coin = std::move(*coin);\n             cachedCoinsUsage += ret->second.coin.DynamicMemoryUsage();\n             if (ret->second.coin.IsSpent()) { // TODO GetCoin cannot return spent coins\ndiff --git a/src/coins.h b/src/coins.h\n--- a/src/coins.h\t(revision 85b20448640f8209e453019c3e1494c1ae229d74)\n+++ b/src/coins.h\t(revision c3b34ec796a3fd6e34e0dfb862c61bc298ba8d6f)\n@@ -382,6 +382,8 @@\n     /* Cached dynamic memory usage for the inner Coin objects. */\n     mutable size_t cachedCoinsUsage{0};\n \n+    virtual std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const;\n+\n public:\n     CCoinsViewCache(CCoinsView *baseIn, bool deterministic = false);\n \n@@ -489,7 +491,7 @@\n      * @note this is marked const, but may actually append to `cacheCoins`, increasing\n      * memory usage.\n      */\n-    virtual CCoinsMap::iterator FetchCoin(const COutPoint &outpoint) const;\n+    CCoinsMap::iterator FetchCoin(const COutPoint &outpoint) const;\n };\n \n //! Utility function to add all of a transaction's outputs to a cache.\ndiff --git a/src/coinsviewcachenonmutating.h b/src/coinsviewcachenonmutating.h\n--- a/src/coinsviewcachenonmutating.h\t(revision 85b20448640f8209e453019c3e1494c1ae229d74)\n+++ b/src/coinsviewcachenonmutating.h\t(revision c3b34ec796a3fd6e34e0dfb862c61bc298ba8d6f)\n@@ -9,28 +9,16 @@\n #include <primitives/transaction.h>\n \n /**\n- * CCoinsViewCache subclass that does not call GetCoin on base via FetchCoin, so base will not be mutated before Flush.\n+ * CCoinsViewCache subclass that does not call GetCoin on base, so base will not be mutated before Flush.\n  * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n- * It provides the same interface as CCoinsViewCache, overriding the FetchCoin private method.\n+ * It provides the same interface as CCoinsViewCache, overriding GetCoinFromBase().\n  */\n class CoinsViewCacheNonMutating : public CCoinsViewCache\n {\n private:\n-    CCoinsMap::iterator FetchCoin(const COutPoint& outpoint) const override\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const override\n     {\n-        auto [ret, inserted]{cacheCoins.try_emplace(outpoint)};\n-        if (!inserted) return ret;\n-\n-        // TODO: Remove spent checks once we no longer return spent coins in coinscache_sim CoinsViewBottom.\n-        if (auto coin{base->PeekCoin(outpoint)}; coin && !coin->IsSpent()) {\n-            ret->second.coin = std::move(*coin);\n-        } else {\n-            cacheCoins.erase(ret);\n-            return cacheCoins.end();\n-        }\n-\n-        cachedCoinsUsage += ret->second.coin.DynamicMemoryUsage();\n-        return ret;\n+        return base->PeekCoin(outpoint);\n     }\n \n public:\n```",
      "created_at": "2026-01-05T19:21:58Z",
      "updated_at": "2026-01-05T20:37:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2662558942",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662558942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662620903",
      "pull_request_review_id": 3628136296,
      "id": 2662620903,
      "node_id": "PRRC_kwDOABII586etF7n",
      "diff_hunk": "@@ -3098,7 +3099,7 @@ bool Chainstate::ConnectTip(\n     LogDebug(BCLog::BENCH, \"  - Load block from disk: %.2fms\\n\",\n              Ticks<MillisecondsDouble>(time_2 - time_1));\n     {\n-        CCoinsViewCache view(&CoinsTip());\n+        CoinsViewCacheNonMutating view(&CoinsTip());",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 13,
      "commit_id": "2f100b16b7bb09572ed3b04aa1484523af7509d9",
      "original_commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "here or in a follow-up we could add this to `TestBlockValidity` as well, where it would be even more relevant since itâ€™s invoked with without PoW checks (so your PR arguments apply here even more)",
      "created_at": "2026-01-05T19:48:37Z",
      "updated_at": "2026-01-05T20:37:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2662620903",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662620903"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662733404",
      "pull_request_review_id": 3628136296,
      "id": 2662733404,
      "node_id": "PRRC_kwDOABII586ethZc",
      "diff_hunk": "@@ -0,0 +1,140 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        block.vtx.push_back(MakeTransactionRef(tx));\n+    }\n+\n+    return block;\n+}\n+\n+void PopulateView(const CBlock& block, CCoinsView& view, bool spent = false)\n+{\n+    CCoinsViewCache cache{&view};\n+    cache.SetBestBlock(uint256::ONE);\n+\n+    for (const auto& tx : block.vtx | std::views::drop(1)) {\n+        for (const auto& in : tx->vin) {\n+            Coin coin{};\n+            if (!spent) coin.out.nValue = 1;\n+            cache.EmplaceCoinInternalDANGER(COutPoint{in.prevout}, std::move(coin));\n+        }\n+    }\n+\n+    cache.Flush();\n+}\n+\n+void CheckCache(const CBlock& block, const CCoinsViewCache& cache)\n+{\n+    uint32_t counter{0};\n+\n+    for (const auto& tx : block.vtx) {\n+        if (tx->IsCoinBase()) {\n+            BOOST_CHECK(!cache.HaveCoinInCache(tx->vin[0].prevout));\n+        } else {\n+            for (const auto& in : tx->vin) {\n+                const auto& outpoint{in.prevout};\n+                const auto& first{cache.AccessCoin(outpoint)};\n+                const auto& second{cache.AccessCoin(outpoint)};\n+                BOOST_CHECK_EQUAL(&first, &second);\n+                ++counter;\n+                BOOST_CHECK(cache.HaveCoinInCache(outpoint));\n+            }\n+        }\n+    }\n+    BOOST_CHECK_EQUAL(cache.GetCacheSize(), counter);\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_db)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    PopulateView(block, db);\n+    CCoinsViewCache main_cache{&db};\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    CheckCache(block, view);\n+    // Check that no coins have been moved up to main cache from db\n+    for (const auto& tx : block.vtx) {\n+        for (const auto& in : tx->vin) {\n+            BOOST_CHECK(!main_cache.HaveCoinInCache(in.prevout));\n+        }\n+    }\n+}",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 106,
      "original_position": 92,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Checked the coverage of this and compared it with the suggested `CCoinsViewCache::GetCoinFromBase` - existing `FetchCoin` is covered that way.\nWe could extend the coverage with `HaveCoin()`/`GetCoin()` as well, to check that they also do not populate the parent cache when reading inputs from disk, and that flushing an ephemeral `CoinsViewCacheNonMutating` layer propagates spentness to its parent:\n```patch\ndiff --git a/src/test/coinsviewcachenonmutating_tests.cpp b/src/test/coinsviewcachenonmutating_tests.cpp\n--- a/src/test/coinsviewcachenonmutating_tests.cpp\t(revision c3b34ec796a3fd6e34e0dfb862c61bc298ba8d6f)\n+++ b/src/test/coinsviewcachenonmutating_tests.cpp\t(revision 3e8676d49ecf9e3c12cd641ce655e74f85f3a6e6)\n@@ -82,6 +82,13 @@\n     PopulateView(block, db);\n     CCoinsViewCache main_cache{&db};\n     CoinsViewCacheNonMutating view{&main_cache};\n+    const auto& outpoint{block.vtx[1]->vin[0].prevout};\n+\n+    BOOST_CHECK(view.HaveCoin(outpoint));\n+    BOOST_CHECK(view.GetCoin(outpoint).has_value());\n+    BOOST_CHECK(!main_cache.HaveCoinInCache(outpoint));\n+\n     CheckCache(block, view);\n     // Check that no coins have been moved up to main cache from db\n     for (const auto& tx : block.vtx) {\n@@ -89,6 +96,12 @@\n             BOOST_CHECK(!main_cache.HaveCoinInCache(in.prevout));\n         }\n     }\n+\n+    view.SetBestBlock(uint256::ONE);\n+    BOOST_CHECK(view.SpendCoin(outpoint));\n+    view.Flush();\n+    BOOST_CHECK(!main_cache.PeekCoin(outpoint).has_value());\n }\n \n BOOST_AUTO_TEST_CASE(fetch_inputs_from_cache)\n```\n",
      "created_at": "2026-01-05T20:35:53Z",
      "updated_at": "2026-01-05T20:37:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2662733404",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2662733404"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": 81,
      "original_start_line": 78,
      "start_side": "RIGHT",
      "line": 106,
      "original_line": 92,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2678764767",
      "pull_request_review_id": 3646995468,
      "id": 2678764767,
      "node_id": "PRRC_kwDOABII586fqrTf",
      "diff_hunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via FetchCoin, so base will not be mutated before Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the FetchCoin private method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    CCoinsMap::iterator FetchCoin(const COutPoint& outpoint) const override\n+    {\n+        auto [ret, inserted]{cacheCoins.try_emplace(outpoint)};\n+        if (!inserted) return ret;",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "original_commit_id": "7fab35c24d7a88d45710491e275f2aaf6532e7d0",
      "in_reply_to_id": 2662558942,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice, done.",
      "created_at": "2026-01-10T15:40:37Z",
      "updated_at": "2026-01-10T15:40:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2678764767",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2678764767"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721462578",
      "pull_request_review_id": 3697832211,
      "id": 2721462578,
      "node_id": "PRRC_kwDOABII586iNjky",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Do we want to add a `CCoinsViewErrorCatcher` overrid for `PeekCoin` as we do for [`GetCoin` and `HaveCoin`](https://github.com/andrewtoth/bitcoin/blob/2e67c5b604d2cf2e56db6b5d2906391d22113941/src/coins.cpp#L380-L406) or is this omitted intentionally?",
      "created_at": "2026-01-23T14:35:58Z",
      "updated_at": "2026-01-23T14:50:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2721462578",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721462578"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721476346",
      "pull_request_review_id": 3697832211,
      "id": 2721476346,
      "node_id": "PRRC_kwDOABII586iNm76",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the FetchCoin private method.",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\"overriding the GetCoinFromBase method.\"?",
      "created_at": "2026-01-23T14:39:12Z",
      "updated_at": "2026-01-23T14:50:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2721476346",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721476346"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2724347964",
      "pull_request_review_id": 3701986936,
      "id": 2724347964,
      "node_id": "PRRC_kwDOABII586iYkA8",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good catch :smile:! Added, thanks.",
      "created_at": "2026-01-24T16:44:02Z",
      "updated_at": "2026-01-24T16:44:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2724347964",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2724347964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2724358983",
      "pull_request_review_id": 3702028045,
      "id": 2724358983,
      "node_id": "PRRC_kwDOABII586iYmtH",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Note that `CCoinsViewErrorCatcher` will be removed in https://github.com/bitcoin/bitcoin/pull/34132. So whichever is merged first will have to rebase.",
      "created_at": "2026-01-24T16:53:29Z",
      "updated_at": "2026-01-24T16:53:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2724358983",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2724358983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725907704",
      "pull_request_review_id": 3704233057,
      "id": 2725907704,
      "node_id": "PRRC_kwDOABII586iegz4",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Not sure I understand why this was needed, the only way this has database access is through `GetCoin`:\r\n```\r\n\tframe #0: 0x000000010381616c test_bitcoin`CCoinsViewDB::GetCoin(this=0x0000000109549fe0, outpoint=0x000000016dc24a6c) const at txdb.cpp:70:14\r\n    frame #1: 0x000000010419da40 test_bitcoin`CCoinsView::PeekCoin(this=0x0000000109549fe0, outpoint=0x000000016dc24a6c) const at coins.cpp:17:93\r\n    frame #2: 0x000000010419dea0 test_bitcoin`CCoinsViewBacked::PeekCoin(this=0x000000010954a028, outpoint=0x000000016dc24a6c) const at coins.cpp:36:18\r\n    frame #3: 0x00000001041a3ee4 test_bitcoin`CCoinsViewErrorCatcher::PeekCoin(COutPoint const&) const::$_0::operator()(this=0x000000016dc23918) const at coins.cpp:413:87\r\n    frame #4: 0x00000001041a12e0 test_bitcoin`std::__1::optional<Coin> ExecuteBackedWrapper<std::__1::optional<Coin>, CCoinsViewErrorCatcher::PeekCoin(COutPoint const&) const::$_0>(func=(unnamed class) @ 0x000000016dc23918, err_callbacks=size=0) at coins.cpp:387:16\r\n    frame #5: 0x00000001041a1250 test_bitcoin`CCoinsViewErrorCatcher::PeekCoin(this=0x000000010954a028, outpoint=0x000000016dc24a6c) const at coins.cpp:413:12\r\n    frame #6: 0x000000010419e2d0 test_bitcoin`CCoinsViewCache::PeekCoin(this=0x000000010954aae0, outpoint=0x000000016dc24a6c) const at coins.cpp:51:18\r\n    frame #7: 0x0000000102640b38 test_bitcoin`CoinsViewCacheNonMutating::GetCoinFromBase(this=0x000000016dc251e8, outpoint=0x000000016dc24a6c) const at coinsviewcachenonmutating.h:22:22\r\n    frame #8: 0x000000010419e8b8 test_bitcoin`CCoinsViewCache::FetchCoin(this=0x000000016dc251e8, outpoint=0x000000016dc24a6c) const at coins.cpp:73:23\r\n    frame #9: 0x000000010419f994 test_bitcoin`CCoinsViewCache::HaveCoin(this=0x000000016dc251e8, outpoint=0x000000016dc24a6c) const at coins.cpp:189:36\r\n```\r\nand without this error catcher we're basically getting the same:\r\n```\r\n\tframe #0: 0x000000010447616c test_bitcoin`CCoinsViewDB::GetCoin(this=0x000000010a14aaf0, outpoint=0x000000016cfc4a6c) const at txdb.cpp:70:14\r\n    frame #1: 0x0000000104dfda40 test_bitcoin`CCoinsView::PeekCoin(this=0x000000010a14aaf0, outpoint=0x000000016cfc4a6c) const at coins.cpp:19:12\r\n    frame #2: 0x0000000104dfdea0 test_bitcoin`CCoinsViewBacked::PeekCoin(this=0x000000010a14ab38, outpoint=0x000000016cfc4a6c) const at coins.cpp:39:18\r\n    frame #3: 0x0000000104dfe2d0 test_bitcoin`CCoinsViewCache::PeekCoin(this=0x0000000846008c00, outpoint=0x000000016cfc4a6c) const at coins.cpp:54:18\r\n    frame #4: 0x00000001032a0b38 test_bitcoin`CoinsViewCacheNonMutating::GetCoinFromBase(this=0x000000016cfc51e8, outpoint=0x000000016cfc4a6c) const at coinsviewcachenonmutating.h:22:22\r\n    frame #5: 0x0000000104dfe8b8 test_bitcoin`CCoinsViewCache::FetchCoin(this=0x000000016cfc51e8, outpoint=0x000000016cfc4a6c) const at coins.cpp:76:23\r\n    frame #6: 0x0000000104dff994 test_bitcoin`CCoinsViewCache::HaveCoin(this=0x000000016cfc51e8, outpoint=0x000000016cfc4a6c) const at coins.cpp:192:36\r\n```\r\n(except that the frames are a lot cleaner)",
      "created_at": "2026-01-25T20:46:54Z",
      "updated_at": "2026-01-25T21:05:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725907704",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725907704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725917004",
      "pull_request_review_id": 3704233057,
      "id": 2725917004,
      "node_id": "PRRC_kwDOABII586iejFM",
      "diff_hunk": "@@ -14,6 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const noexcept { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I have mixed feelings about adding `noexcept` here, since DB reads can still throw `dbwrapper_error` - which should be fatal, but `noexcept` muddies it a bit since this can theoretically `std::terminate` before `CCoinsViewErrorCatcher` has a chance to react.\n\nInstead of adding it only here (and not to the equivalent `GetCoin`), I suggest we add it only after https://github.com/bitcoin/bitcoin/pull/34132 is merged (I can add it there as a last commit if you agree it belongs there)",
      "created_at": "2026-01-25T20:59:28Z",
      "updated_at": "2026-01-25T21:05:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725917004",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725917004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725917466",
      "pull_request_review_id": 3704233057,
      "id": 2725917466,
      "node_id": "PRRC_kwDOABII586iejMa",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        block.vtx.push_back(MakeTransactionRef(tx));\n+    }\n+\n+    return block;\n+}\n+\n+void PopulateView(const CBlock& block, CCoinsView& view, bool spent = false)\n+{\n+    CCoinsViewCache cache{&view};\n+    cache.SetBestBlock(uint256::ONE);\n+\n+    for (const auto& tx : block.vtx | std::views::drop(1)) {\n+        for (const auto& in : tx->vin) {\n+            Coin coin{};\n+            if (!spent) coin.out.nValue = 1;\n+            cache.EmplaceCoinInternalDANGER(COutPoint{in.prevout}, std::move(coin));\n+        }\n+    }\n+\n+    cache.Flush();\n+}\n+\n+void CheckCache(const CBlock& block, const CCoinsViewCache& cache)\n+{\n+    uint32_t counter{0};\n+\n+    for (const auto& tx : block.vtx) {\n+        if (tx->IsCoinBase()) {\n+            BOOST_CHECK(!cache.HaveCoinInCache(tx->vin[0].prevout));\n+        } else {\n+            for (const auto& in : tx->vin) {\n+                const auto& outpoint{in.prevout};\n+                const auto& first{cache.AccessCoin(outpoint)};\n+                const auto& second{cache.AccessCoin(outpoint)};\n+                BOOST_CHECK_EQUAL(&first, &second);\n+                ++counter;\n+                BOOST_CHECK(cache.HaveCoinInCache(outpoint));\n+            }\n+        }\n+    }\n+    BOOST_CHECK_EQUAL(cache.GetCacheSize(), counter);\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_db)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    PopulateView(block, db);\n+    CCoinsViewCache main_cache{&db};\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    const auto& outpoint{block.vtx[1]->vin[0].prevout};\n+\n+    BOOST_CHECK(view.HaveCoin(outpoint));\n+    BOOST_CHECK(view.GetCoin(outpoint).has_value());\n+    BOOST_CHECK(!main_cache.HaveCoinInCache(outpoint));\n+\n+    CheckCache(block, view);\n+    // Check that no coins have been moved up to main cache from db\n+    for (const auto& tx : block.vtx) {\n+        for (const auto& in : tx->vin) {\n+            BOOST_CHECK(!main_cache.HaveCoinInCache(in.prevout));\n+        }\n+    }\n+\n+    view.SetBestBlock(uint256::ONE);\n+    BOOST_CHECK(view.SpendCoin(outpoint));\n+    view.Flush();\n+    BOOST_CHECK(!main_cache.PeekCoin(outpoint).has_value());\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_cache)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 111,
      "original_position": 108,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "would it make sense to have at least one that's not in memory, just to have some variety?",
      "created_at": "2026-01-25T21:00:08Z",
      "updated_at": "2026-01-25T21:05:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725917466",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725917466"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 111,
      "original_line": 108,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725918044",
      "pull_request_review_id": 3704233057,
      "id": 2725918044,
      "node_id": "PRRC_kwDOABII586iejVc",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        block.vtx.push_back(MakeTransactionRef(tx));\n+    }\n+\n+    return block;\n+}\n+\n+void PopulateView(const CBlock& block, CCoinsView& view, bool spent = false)",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 42,
      "original_position": 41,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: these helpers could go to anonymous namespace to avoid global linkage in the test binary.",
      "created_at": "2026-01-25T21:01:00Z",
      "updated_at": "2026-01-25T21:05:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725918044",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725918044"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725919735",
      "pull_request_review_id": 3704233057,
      "id": 2725919735,
      "node_id": "PRRC_kwDOABII586iejv3",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase private method.",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "0ab4fca17353546abb8f5552c0c94a4b093b4d15",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "GetCoinFromBase is protected now: https://github.com/bitcoin/bitcoin/pull/34165/changes#diff-095ce1081a930998a10b37358fae5499ac47f8cb6f25f5df5d88e920a54e0341R386",
      "created_at": "2026-01-25T21:03:26Z",
      "updated_at": "2026-01-25T21:05:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725919735",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2725919735"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726039192",
      "pull_request_review_id": 3704334887,
      "id": 2726039192,
      "node_id": "PRRC_kwDOABII586ifA6Y",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah true, it is not needed. So, reverted adding it. This way we won't conflict with #34132.",
      "created_at": "2026-01-26T00:02:38Z",
      "updated_at": "2026-01-26T00:02:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2726039192",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726039192"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726039348",
      "pull_request_review_id": 3704335012,
      "id": 2726039348,
      "node_id": "PRRC_kwDOABII586ifA80",
      "diff_hunk": "@@ -14,6 +14,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const noexcept { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": 2725917004,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed noexcept for PeekCoin.",
      "created_at": "2026-01-26T00:02:51Z",
      "updated_at": "2026-01-26T00:02:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2726039348",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726039348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726043535",
      "pull_request_review_id": 3704339159,
      "id": 2726043535,
      "node_id": "PRRC_kwDOABII586ifB-P",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+static CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        block.vtx.push_back(MakeTransactionRef(tx));\n+    }\n+\n+    return block;\n+}\n+\n+void PopulateView(const CBlock& block, CCoinsView& view, bool spent = false)\n+{\n+    CCoinsViewCache cache{&view};\n+    cache.SetBestBlock(uint256::ONE);\n+\n+    for (const auto& tx : block.vtx | std::views::drop(1)) {\n+        for (const auto& in : tx->vin) {\n+            Coin coin{};\n+            if (!spent) coin.out.nValue = 1;\n+            cache.EmplaceCoinInternalDANGER(COutPoint{in.prevout}, std::move(coin));\n+        }\n+    }\n+\n+    cache.Flush();\n+}\n+\n+void CheckCache(const CBlock& block, const CCoinsViewCache& cache)\n+{\n+    uint32_t counter{0};\n+\n+    for (const auto& tx : block.vtx) {\n+        if (tx->IsCoinBase()) {\n+            BOOST_CHECK(!cache.HaveCoinInCache(tx->vin[0].prevout));\n+        } else {\n+            for (const auto& in : tx->vin) {\n+                const auto& outpoint{in.prevout};\n+                const auto& first{cache.AccessCoin(outpoint)};\n+                const auto& second{cache.AccessCoin(outpoint)};\n+                BOOST_CHECK_EQUAL(&first, &second);\n+                ++counter;\n+                BOOST_CHECK(cache.HaveCoinInCache(outpoint));\n+            }\n+        }\n+    }\n+    BOOST_CHECK_EQUAL(cache.GetCacheSize(), counter);\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_db)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    PopulateView(block, db);\n+    CCoinsViewCache main_cache{&db};\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    const auto& outpoint{block.vtx[1]->vin[0].prevout};\n+\n+    BOOST_CHECK(view.HaveCoin(outpoint));\n+    BOOST_CHECK(view.GetCoin(outpoint).has_value());\n+    BOOST_CHECK(!main_cache.HaveCoinInCache(outpoint));\n+\n+    CheckCache(block, view);\n+    // Check that no coins have been moved up to main cache from db\n+    for (const auto& tx : block.vtx) {\n+        for (const auto& in : tx->vin) {\n+            BOOST_CHECK(!main_cache.HaveCoinInCache(in.prevout));\n+        }\n+    }\n+\n+    view.SetBestBlock(uint256::ONE);\n+    BOOST_CHECK(view.SpendCoin(outpoint));\n+    view.Flush();\n+    BOOST_CHECK(!main_cache.PeekCoin(outpoint).has_value());\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_cache)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 111,
      "original_position": 108,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "3a2cfbea1957f1eed6d97b6f8924f13100e11b1c",
      "in_reply_to_id": 2725917466,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure about this. These are unit tests specific to the `CoinsViewCacheNonMutating`, not for the `CCoinsViewDB`. We should probably have unit tests specific to `CCoinsViewDB` and test them for in-memory and not.",
      "created_at": "2026-01-26T00:08:56Z",
      "updated_at": "2026-01-26T00:08:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2726043535",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2726043535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 111,
      "original_line": 108,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728275219",
      "pull_request_review_id": 3706829514,
      "id": 2728275219,
      "node_id": "PRRC_kwDOABII586ini0T",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think we should also remove the `noexcept` from this for the same reasons: https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2725917004",
      "created_at": "2026-01-26T16:19:04Z",
      "updated_at": "2026-01-26T16:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728275219",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728275219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728301335",
      "pull_request_review_id": 3706829514,
      "id": 2728301335,
      "node_id": "PRRC_kwDOABII586inpMX",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Is it fair to state that `GetCoin` is not called when in fact what we're avoiding is `FetchCoin`\nhttps://github.com/bitcoin/bitcoin/blob/1cc58d3a0c653ac30df04d1010a3cf84c6bc307a/src/coins.cpp#L52-L53\n\nBut we *are* calling `GetCoin` from `PeekCoin`, see:\n```bash\n  frame #0: 0x000000010447616c test_bitcoin`CCoinsViewDB::GetCoin(this=0x000000010a14aaf0, outpoint=0x000000016cfc4a6c) const at txdb.cpp:70:14                                                  \n  frame #1: 0x0000000104dfda40 test_bitcoin`CCoinsView::PeekCoin(this=0x000000010a14aaf0, outpoint=0x000000016cfc4a6c) const at coins.cpp:19:12                                                  \n  frame #2: 0x0000000104dfdea0 test_bitcoin`CCoinsViewBacked::PeekCoin(this=0x000000010a14ab38, outpoint=0x000000016cfc4a6c) const at coins.cpp:39:18                                            \n  frame #3: 0x0000000104dfe2d0 test_bitcoin`CCoinsViewCache::PeekCoin(this=0x0000000846008c00, outpoint=0x000000016cfc4a6c) const at coins.cpp:54:18 \n```\n\n```suggestion\n * CCoinsViewCache subclass that uses PeekCoin instead of GetCoin when fetching from base, avoiding FetchCoin mutation on parent cache layers.\n```\n(obviously a few other changes are needed besides this line, if you agree with my observation)",
      "created_at": "2026-01-26T16:25:03Z",
      "updated_at": "2026-01-26T16:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728301335",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728301335"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728478422",
      "pull_request_review_id": 3707063122,
      "id": 2728478422,
      "node_id": "PRRC_kwDOABII586ioUbW",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728275219,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can you clarify the reasoning in the parent comment please?\r\n\r\n> since DB reads can still throw dbwrapper_error - which should be fatal, but noexcept muddies it a bit since this can theoretically std::terminate before CCoinsViewErrorCatcher has a chance to react.\r\n\r\nI'm not sure I understand this. The db reads will be caught by the error catcher and we abort before returning here.",
      "created_at": "2026-01-26T17:08:13Z",
      "updated_at": "2026-01-26T17:08:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728478422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728478422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728484550",
      "pull_request_review_id": 3707070241,
      "id": 2728484550,
      "node_id": "PRRC_kwDOABII586ioV7G",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That comment update is an improvement. What other changes are needed?",
      "created_at": "2026-01-26T17:09:42Z",
      "updated_at": "2026-01-26T17:09:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728484550",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728484550"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728604236",
      "pull_request_review_id": 3707206140,
      "id": 2728604236,
      "node_id": "PRRC_kwDOABII586iozJM",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728275219,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I might be completely wrong here, but based on previous frames:\r\n```\r\nframe #0: 0x000000010381616c test_bitcoin`CCoinsViewDB::GetCoin(this=0x0000000109549fe0, outpoint=0x000000016dc24a6c) const at txdb.cpp:70:14\r\nframe #1: 0x000000010419da40 test_bitcoin`CCoinsView::PeekCoin(this=0x0000000109549fe0, outpoint=0x000000016dc24a6c) const at coins.cpp:17:93\r\nframe #2: 0x000000010419dea0 test_bitcoin`CCoinsViewBacked::PeekCoin(this=0x000000010954a028, outpoint=0x000000016dc24a6c) const at coins.cpp:36:18\r\nframe #3: 0x00000001041a3ee4 test_bitcoin`CCoinsViewErrorCatcher::PeekCoin(COutPoint const&) const::$_0::operator()(this=0x000000016dc23918) const at coins.cpp:413:87\r\nframe #4: 0x00000001041a12e0 test_bitcoin`std::__1::optional<Coin> ExecuteBackedWrapper<std::__1::optional<Coin>, CCoinsViewErrorCatcher::PeekCoin(COutPoint const&) const::$_0>(func=(unnamed class) @ 0x000000016dc23918, err_callbacks=size=0) at coins.cpp:387:16\r\nframe #5: 0x00000001041a1250 test_bitcoin`CCoinsViewErrorCatcher::PeekCoin(this=0x000000010954a028, outpoint=0x000000016dc24a6c) const at coins.cpp:413:12\r\nframe #6: 0x000000010419e2d0 test_bitcoin`CCoinsViewCache::PeekCoin(this=0x000000010954aae0, outpoint=0x000000016dc24a6c) const at coins.cpp:51:18\r\n```\r\n\r\nit seemed to me the error catcher can be earlier in the stack (not sure it applies to `GetCoinFromBase` as well), so it cannot catch calls that convert the exceptions to `std::terminate` on later child-frames - but if it doesn't, please ignore this.",
      "created_at": "2026-01-26T17:42:42Z",
      "updated_at": "2026-01-26T17:42:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728604236",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728604236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728608839",
      "pull_request_review_id": 3707212131,
      "id": 2728608839,
      "node_id": "PRRC_kwDOABII586io0RH",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can you please check PR description and commit messages? I have just finished the reviews, can only do it myself tomorrow.",
      "created_at": "2026-01-26T17:43:41Z",
      "updated_at": "2026-01-26T17:43:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728608839",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728608839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728653332",
      "pull_request_review_id": 3707264773,
      "id": 2728653332,
      "node_id": "PRRC_kwDOABII586io_IU",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "They all look ok to me, they mention not calling `FetchCoin` instead of `GetCoin`.",
      "created_at": "2026-01-26T17:56:30Z",
      "updated_at": "2026-01-26T18:04:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728653332",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728653332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728690651",
      "pull_request_review_id": 3707312538,
      "id": 2728690651,
      "node_id": "PRRC_kwDOABII586ipIPb",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> the const methods like GetCoin actually mutate cacheCoins internally\r\n\r\nI think these should also be updated, since it not all GetCoin implementations that are doing that, e.g. the database GetCoin doesn't, which is what PeekCoin is calling",
      "created_at": "2026-01-26T18:08:07Z",
      "updated_at": "2026-01-26T18:08:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728690651",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728690651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728730206",
      "pull_request_review_id": 3707365033,
      "id": 2728730206,
      "node_id": "PRRC_kwDOABII586ipR5e",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think that sentence is pretty clear that it is describing the behavior of `CCoinsViewCache` and not `CCoinsView` subclasses in general. What would you prefer it gets changed to?",
      "created_at": "2026-01-26T18:18:43Z",
      "updated_at": "2026-01-26T18:18:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728730206",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728730206"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728771225",
      "pull_request_review_id": 3707414816,
      "id": 2728771225,
      "node_id": "PRRC_kwDOABII586ipb6Z",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Oh hmm it seems I misunderstood. From your frames @l0rinc it looks like we don't go through the error catcher all the way down to CCoinsViewDB::GetCoin. So, if `CCoinsViewDB::GetCoin` throws there it will bubble up all the way to `CCoinsViewCache::HaveCoin` caller and not abort inside the catcher as intended. Does that make sense?\r\n\r\nI will re-add the `PeekCoin` override in the error catcher.",
      "created_at": "2026-01-26T18:32:11Z",
      "updated_at": "2026-01-26T18:32:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2728771225",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728771225"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729014318",
      "pull_request_review_id": 3707714279,
      "id": 2729014318,
      "node_id": "PRRC_kwDOABII586iqXQu",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's just that GetCoin isn't necessarily a problem, the eventual FetchCoin call is:\r\n```patch\r\n-When accessing coins via the CCoinsViewCache, the const methods like GetCoin actually mutate cacheCoins internally to cache entries when they are pulled from the backing db.\r\n+When accessing coins via the CCoinsViewCache, methods like GetCoin can call FetchCoin which actually mutate cacheCoins internally to cache entries when they are pulled from the backing db.\r\n```",
      "created_at": "2026-01-26T19:51:43Z",
      "updated_at": "2026-01-26T19:51:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2729014318",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729014318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729146397",
      "pull_request_review_id": 3707872468,
      "id": 2729146397,
      "node_id": "PRRC_kwDOABII586iq3gd",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You're right, we need it temporarily until https://github.com/bitcoin/bitcoin/pull/34132/changes#diff-cafbe1353eff6084b73fd3b6c3dee603e0827348fdd2fe12dfad1e01003a84edR69 migrates it to `CCoinsViewDB` - so we can add it here for safety and we can hopefully remove it in #34132 again.\r\nBut even in that case I wouldn't add `noexcept` to `PeekCoin` and `GetCoinFromBase` here - only after the database `GetCoin` is itself a `noexcept` (will add that to #34132).",
      "created_at": "2026-01-26T20:30:45Z",
      "updated_at": "2026-01-26T20:30:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2729146397",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729146397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730264200",
      "pull_request_review_id": 3709131001,
      "id": 2730264200,
      "node_id": "PRRC_kwDOABII586ivIaI",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728301335,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2026-01-27T05:04:10Z",
      "updated_at": "2026-01-27T05:04:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2730264200",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730264200"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730268602",
      "pull_request_review_id": 3709135428,
      "id": 2730268602,
      "node_id": "PRRC_kwDOABII586ivJe6",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that does not call GetCoin on base via GetCoinFromBase, so base will not be mutated before\n+ * Flush.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "8e074187a57220c596eb124091714302903a07cc",
      "in_reply_to_id": 2728275219,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "From the frames you are showing, `CCoinsViewCache::PeekCoin` goes through `CCoinsViewErrorCatcher::PeekCoin` which will catch whatever is thrown in `CCoinsViewDB::GetCoin`. `GetCoinFromBase` is only available in `CCoinsViewCache`, which calls through `CCoinsViewErrorCatcher` for both `GetCoin` and `PeekCoin` and will therefore never throw an exception.",
      "created_at": "2026-01-27T05:06:33Z",
      "updated_at": "2026-01-27T05:06:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2730268602",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730268602"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730270875",
      "pull_request_review_id": 3709138275,
      "id": 2730270875,
      "node_id": "PRRC_kwDOABII586ivKCb",
      "diff_hunk": "@@ -38,6 +40,14 @@ void CCoinsViewBacked::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& h\n std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n+std::optional<Coin> CCoinsViewCache::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "2e67c5b604d2cf2e56db6b5d2906391d22113941",
      "original_commit_id": "725c7503450f9e891306d5cec0911f5cf1335d80",
      "in_reply_to_id": 2721462578,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I've removed `noexcept` from `PeekCoin` but opted to keep it for `GetCoinFromBase` (see https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2730268602).",
      "created_at": "2026-01-27T05:07:47Z",
      "updated_at": "2026-01-27T05:07:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2730270875",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730270875"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 44,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745413847",
      "pull_request_review_id": 3727267956,
      "id": 2745413847,
      "node_id": "PRRC_kwDOABII586jo7DX",
      "diff_hunk": "@@ -491,7 +492,7 @@ class CoinsViews {\n \n     //! Temporary CCoinsViewCache layered on top of m_cacheview and passed to ConnectBlock().",
      "path": "src/validation.h",
      "position": 1,
      "original_position": 10,
      "commit_id": "a83ff982c75f2dfbee675166085f1f0fb05adfb7",
      "original_commit_id": "a83ff982c75f2dfbee675166085f1f0fb05adfb7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: since we've changed it from `CCoinsViewCache` to  `CoinsViewCacheNonMutating`, it doesn't sound right to call this by its parent class.\nAnd in terms of object lifetime it's not exactly temporary.\n```suggestion\n    //! Reused CoinsViewCacheNonMutating layered on top of m_cacheview and passed to ConnectBlock().\n```\n",
      "created_at": "2026-01-30T09:34:31Z",
      "updated_at": "2026-01-30T09:42:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2745413847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745413847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 493,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745417357",
      "pull_request_review_id": 3727267956,
      "id": 2745417357,
      "node_id": "PRRC_kwDOABII586jo76N",
      "diff_hunk": "",
      "path": "src/test/validation_chainstate_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863\nnit: \"does indeed not mutate\" sounds a bit weird in the commit message",
      "created_at": "2026-01-30T09:35:25Z",
      "updated_at": "2026-01-30T09:42:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2745417357",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745417357"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749519223",
      "pull_request_review_id": 3732451057,
      "id": 2749519223,
      "node_id": "PRRC_kwDOABII586j4lV3",
      "diff_hunk": "@@ -63,6 +65,30 @@ BOOST_AUTO_TEST_CASE(validation_chainstate_resize_caches)\n     }\n }\n \n+BOOST_FIXTURE_TEST_CASE(connect_tip_does_not_cache_inputs_on_failed_connect, TestChain100Setup)\n+{\n+    Chainstate& chainstate{Assert(m_node.chainman)->ActiveChainstate()};\n+\n+    COutPoint outpoint;\n+    {\n+        LOCK(cs_main);\n+        outpoint = AddTestCoin(m_rng, chainstate.CoinsTip());\n+        chainstate.CoinsTip().Flush(/*reallocate_cache=*/false);\n+    }\n+\n+    CMutableTransaction tx;\n+    tx.vin.emplace_back(outpoint);\n+    tx.vout.emplace_back(MAX_MONEY, CScript{} << OP_TRUE);\n+\n+    const auto tip{WITH_LOCK(cs_main, return chainstate.m_chain.Tip()->GetBlockHash())};\n+    const CBlock block{CreateBlock({tx}, CScript{} << OP_TRUE, chainstate)};\n+    Assert(m_node.chainman)->ProcessNewBlock(std::make_shared<CBlock>(block), true, true, nullptr);",
      "path": "src/test/validation_chainstate_tests.cpp",
      "position": 1,
      "original_position": 34,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it would be good to wrap this in a `BOOST_CHECK` to ensure that the block was processed correctly (or rather accepted), but is rejected later.",
      "created_at": "2026-01-31T12:39:36Z",
      "updated_at": "2026-01-31T13:43:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2749519223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749519223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 85,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749530209",
      "pull_request_review_id": 3732451057,
      "id": 2749530209,
      "node_id": "PRRC_kwDOABII586j4oBh",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that uses PeekCoin instead of GetCoin when fetching from base, avoiding FetchCoin mutation\n+ * on parent cache layers.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 17,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "a83ff982c75f2dfbee675166085f1f0fb05adfb7",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: This name feels a bit misleading, since we can still flush from it among other things, but I don't have a better option either. Maybe expand the comment a bit to clarify that it still populates its own cache and can flush its state back?",
      "created_at": "2026-01-31T12:48:09Z",
      "updated_at": "2026-01-31T13:43:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2749530209",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749530209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749571199",
      "pull_request_review_id": 3732451057,
      "id": 2749571199,
      "node_id": "PRRC_kwDOABII586j4yB_",
      "diff_hunk": "@@ -0,0 +1,161 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <coinsviewcachenonmutating.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewcachenonmutating_tests)\n+\n+namespace {\n+\n+CBlock CreateBlock() noexcept\n+{\n+    static constexpr auto NUM_TXS{100};\n+    CBlock block;\n+    CMutableTransaction coinbase;\n+    coinbase.vin.emplace_back();\n+    block.vtx.push_back(MakeTransactionRef(coinbase));\n+\n+    for (const auto i : std::views::iota(1, NUM_TXS)) {\n+        CMutableTransaction tx;\n+        Txid txid{Txid::FromUint256(uint256(i))};\n+        tx.vin.emplace_back(txid, 0);\n+        block.vtx.push_back(MakeTransactionRef(tx));\n+    }\n+\n+    return block;\n+}\n+\n+void PopulateView(const CBlock& block, CCoinsView& view, bool spent = false)\n+{\n+    CCoinsViewCache cache{&view};\n+    cache.SetBestBlock(uint256::ONE);\n+\n+    for (const auto& tx : block.vtx | std::views::drop(1)) {\n+        for (const auto& in : tx->vin) {\n+            Coin coin{};\n+            if (!spent) coin.out.nValue = 1;\n+            cache.EmplaceCoinInternalDANGER(COutPoint{in.prevout}, std::move(coin));\n+        }\n+    }\n+\n+    cache.Flush();\n+}\n+\n+void CheckCache(const CBlock& block, const CCoinsViewCache& cache)\n+{\n+    uint32_t counter{0};\n+\n+    for (const auto& tx : block.vtx) {\n+        if (tx->IsCoinBase()) {\n+            BOOST_CHECK(!cache.HaveCoinInCache(tx->vin[0].prevout));\n+        } else {\n+            for (const auto& in : tx->vin) {\n+                const auto& outpoint{in.prevout};\n+                const auto& first{cache.AccessCoin(outpoint)};\n+                const auto& second{cache.AccessCoin(outpoint)};\n+                BOOST_CHECK_EQUAL(&first, &second);\n+                ++counter;\n+                BOOST_CHECK(cache.HaveCoinInCache(outpoint));\n+            }\n+        }\n+    }\n+    BOOST_CHECK_EQUAL(cache.GetCacheSize(), counter);\n+}\n+\n+} // namespace\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_db)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    PopulateView(block, db);\n+    CCoinsViewCache main_cache{&db};\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    const auto& outpoint{block.vtx[1]->vin[0].prevout};\n+\n+    BOOST_CHECK(view.HaveCoin(outpoint));\n+    BOOST_CHECK(view.GetCoin(outpoint).has_value());\n+    BOOST_CHECK(!main_cache.HaveCoinInCache(outpoint));\n+\n+    CheckCache(block, view);\n+    // Check that no coins have been moved up to main cache from db\n+    for (const auto& tx : block.vtx) {\n+        for (const auto& in : tx->vin) {\n+            BOOST_CHECK(!main_cache.HaveCoinInCache(in.prevout));\n+        }\n+    }\n+\n+    view.SetBestBlock(uint256::ONE);\n+    BOOST_CHECK(view.SpendCoin(outpoint));\n+    view.Flush();\n+    BOOST_CHECK(!main_cache.PeekCoin(outpoint).has_value());\n+}\n+\n+BOOST_AUTO_TEST_CASE(fetch_inputs_from_cache)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    CCoinsViewCache main_cache{&db};\n+    PopulateView(block, main_cache);\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    CheckCache(block, view);\n+\n+    const auto& outpoint{block.vtx[1]->vin[0].prevout};\n+    view.SetBestBlock(uint256::ONE);\n+    BOOST_CHECK(view.SpendCoin(outpoint));\n+    view.Flush();\n+    BOOST_CHECK(!main_cache.PeekCoin(outpoint).has_value());\n+}\n+\n+// Test for the case where a block spends coins that are spent in the cache, but\n+// the spentness has not been flushed to the db.\n+BOOST_AUTO_TEST_CASE(fetch_no_double_spend)\n+{\n+    const auto block{CreateBlock()};\n+    CCoinsViewDB db{{.path = \"\", .cache_bytes = 1_MiB, .memory_only = true}, {}};\n+    PopulateView(block, db);\n+    CCoinsViewCache main_cache{&db};\n+    // Add all inputs as spent already in cache\n+    PopulateView(block, main_cache, /*spent=*/true);\n+    CoinsViewCacheNonMutating view{&main_cache};\n+    for (const auto& tx : block.vtx) {\n+        for (const auto& in : tx->vin) {\n+            const auto& c{view.AccessCoin(in.prevout)};\n+            BOOST_CHECK(c.IsSpent());",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 138,
      "original_position": 139,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "a83ff982c75f2dfbee675166085f1f0fb05adfb7",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: How about checking that `HaveCoin` and `GetCoin` also return nothing here (and same with the other test below)?",
      "created_at": "2026-01-31T13:40:46Z",
      "updated_at": "2026-01-31T13:43:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2749571199",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749571199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 138,
      "original_line": 139,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749981276",
      "pull_request_review_id": 3733452612,
      "id": 2749981276,
      "node_id": "PRRC_kwDOABII586j6WJc",
      "diff_hunk": "@@ -0,0 +1,29 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWCACHENONMUTATING_H\n+#define BITCOIN_COINSVIEWCACHENONMUTATING_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache subclass that uses PeekCoin instead of GetCoin when fetching from base, avoiding FetchCoin mutation\n+ * on parent cache layers.\n+ * Only used in ConnectBlock to pass as an ephemeral view that can be reset if the block is invalid.\n+ * It provides the same interface as CCoinsViewCache, overriding the GetCoinFromBase protected method.\n+ */\n+class CoinsViewCacheNonMutating : public CCoinsViewCache",
      "path": "src/coinsviewcachenonmutating.h",
      "position": 1,
      "original_position": 17,
      "commit_id": "77b1f5a3a3bba44651aa5da5926a37d6eca9e863",
      "original_commit_id": "a83ff982c75f2dfbee675166085f1f0fb05adfb7",
      "in_reply_to_id": 2749530209,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I updated the name to `CoinsViewOverlay`. This will also work with the parent PR #31132 so we don't have to rename it there.",
      "created_at": "2026-01-31T20:29:54Z",
      "updated_at": "2026-01-31T20:29:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2749981276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749981276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997433",
      "pull_request_review_id": 3733472570,
      "id": 2749997433,
      "node_id": "PRRC_kwDOABII586j6aF5",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "original_commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Meant to comment this in the earlier review:\r\nAre we sure we don't want this function to allow to throw? Or is this still left over from when `PeekCoin` was noexcept before?",
      "created_at": "2026-01-31T20:48:25Z",
      "updated_at": "2026-01-31T20:48:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2749997433",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750007004",
      "pull_request_review_id": 3733482273,
      "id": 2750007004,
      "node_id": "PRRC_kwDOABII586j6cbc",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "original_commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "in_reply_to_id": 2749997433,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2730270875",
      "created_at": "2026-01-31T20:59:15Z",
      "updated_at": "2026-01-31T20:59:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2750007004",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750007004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750068658",
      "pull_request_review_id": 3733550810,
      "id": 2750068658,
      "node_id": "PRRC_kwDOABII586j6rey",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "original_commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "in_reply_to_id": 2749997433,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Mmh, I still feel like it is bit of an anti-pattern. In my mind a `CCoinsViewCache` instantiation should not necessarily know that its base class' `GetCoin` member function is not allowed to throw either (though I realize in practice  it doesn't).",
      "created_at": "2026-01-31T21:41:58Z",
      "updated_at": "2026-01-31T21:41:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2750068658",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750068658"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750080986",
      "pull_request_review_id": 3733587931,
      "id": 2750080986,
      "node_id": "PRRC_kwDOABII586j6ufa",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "original_commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "in_reply_to_id": 2749997433,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Isn't that the point of such a specifier that we explicitly promise something that would be hard to deduce otherwise?",
      "created_at": "2026-01-31T21:51:04Z",
      "updated_at": "2026-01-31T21:51:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2750080986",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750080986"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750087386",
      "pull_request_review_id": 3733619072,
      "id": 2750087386,
      "node_id": "PRRC_kwDOABII586j6wDa",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache\n+{\n+private:\n+    std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const noexcept override",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "original_commit_id": "b798ecb2f2a50a180fe0e79fc8ac84ab6da02c40",
      "in_reply_to_id": 2749997433,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I would say so in some circumstances, but in a virtual class that has its member functions commonly overridden by other components that seems like an anti-pattern.",
      "created_at": "2026-01-31T21:56:32Z",
      "updated_at": "2026-01-31T21:56:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2750087386",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750087386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754335709",
      "pull_request_review_id": 3739398004,
      "id": 2754335709,
      "node_id": "PRRC_kwDOABII586kK9Pd",
      "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COINSVIEWOVERLAY_H\n+#define BITCOIN_COINSVIEWOVERLAY_H\n+\n+#include <coins.h>\n+#include <primitives/transaction.h>\n+\n+/**\n+ * CCoinsViewCache overlay that avoids populating/mutating parent cache layers on cache misses.\n+ *\n+ * This is achieved by fetching coins from the base view using PeekCoin() instead of GetCoin(),\n+ * so intermediate CCoinsViewCache layers are not filled.\n+ *\n+ * Used during ConnectBlock() as an ephemeral, resettable top-level view that is flushed only\n+ * on success, so invalid blocks don't pollute the underlying cache.\n+ */\n+class CoinsViewOverlay : public CCoinsViewCache",
      "path": "src/coinsviewoverlay.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "e91c8a2b8400927a460feff47d9d481aeac39b6a",
      "original_commit_id": "e91c8a2b8400927a460feff47d9d481aeac39b6a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: don't mutate main cache when connecting block\"\n\nNit: just put this in `coins.h`.",
      "created_at": "2026-02-02T13:28:46Z",
      "updated_at": "2026-02-02T13:38:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2754335709",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754335709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754383328",
      "pull_request_review_id": 3739398004,
      "id": 2754383328,
      "node_id": "PRRC_kwDOABII586kLI3g",
      "diff_hunk": "@@ -327,3 +328,11 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n     CCoinsViewCache coins_view_cache{&backend_coins_view, /*deterministic=*/true};\n     TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/true);\n }\n+\n+FUZZ_TARGET(coins_view_async, .init = initialize_coins_view)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    CCoinsView backend_coins_view;\n+    CoinsViewOverlay coins_view_cache{&backend_coins_view, /*determinsistic=*/true};\n+    TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/false);",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "original_commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"fuzz: add target for CoinsViewOverlay\"\n\nCan this test verify that `CoinsViewOverlay` operations indeed do not modify the parent cache?",
      "created_at": "2026-02-02T13:38:45Z",
      "updated_at": "2026-02-02T13:38:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2754383328",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754383328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2761539779",
      "pull_request_review_id": 3748243084,
      "id": 2761539779,
      "node_id": "PRRC_kwDOABII586kmcDD",
      "diff_hunk": "@@ -327,3 +328,11 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n     CCoinsViewCache coins_view_cache{&backend_coins_view, /*deterministic=*/true};\n     TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/true);\n }\n+\n+FUZZ_TARGET(coins_view_async, .init = initialize_coins_view)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    CCoinsView backend_coins_view;\n+    CoinsViewOverlay coins_view_cache{&backend_coins_view, /*determinsistic=*/true};\n+    TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/false);",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "original_commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "in_reply_to_id": 2754383328,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added `MutationGuardCoinsViewCache` subclass in the fuzz target. Now we use that as the middle layer and `CoinsViewOverlay` at the top. The mutation guard asserts in `BatchWrite` that `cacheCoins` has not been mutated since the last call to `BatchWrite` (or empty initial state). So, if the fuzzer manages to mutate `cacheCoins` in the middle layer by some other method then calls `Flush` or `Sync` on the overlay it will fail the assertion.",
      "created_at": "2026-02-03T23:50:17Z",
      "updated_at": "2026-02-03T23:50:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2761539779",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2761539779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764308020",
      "pull_request_review_id": 3751400232,
      "id": 2764308020,
      "node_id": "PRRC_kwDOABII586kw_40",
      "diff_hunk": "@@ -327,3 +328,11 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n     CCoinsViewCache coins_view_cache{&backend_coins_view, /*deterministic=*/true};\n     TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/true);\n }\n+\n+FUZZ_TARGET(coins_view_async, .init = initialize_coins_view)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    CCoinsView backend_coins_view;\n+    CoinsViewOverlay coins_view_cache{&backend_coins_view, /*determinsistic=*/true};\n+    TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/false);",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "original_commit_id": "2f9b52fa348242db475f4aff1fee951fc74e934e",
      "in_reply_to_id": 2754383328,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for this idea. I've fuzzed it overnight (~50 million iterations) with no issues.\r\nThe parent PR (#31132 which I fuzzed for weeks) verified no mutation via thread sanitizer. Since it was multithreaded, it would break if there was multithreaded mutation of the backing `cacheCoins`. But, since it was multithreaded it was not a deterministic check. This is a great improvement!",
      "created_at": "2026-02-04T14:30:01Z",
      "updated_at": "2026-02-04T14:30:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764308020",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764308020"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764375763",
      "pull_request_review_id": 3751479287,
      "id": 2764375763,
      "node_id": "PRRC_kwDOABII586kxQbT",
      "diff_hunk": "@@ -35,18 +36,67 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            CacheCoinSnapshot s;\n+            s.outpoint = outpoint;\n+            s.dirty = entry.IsDirty();\n+            s.fresh = entry.IsFresh();\n+            s.coin = entry.coin;\n+            snapshot.push_back(std::move(s));\n+        }\n+\n+        std::sort(snapshot.begin(), snapshot.end(),\n+                  [](const CacheCoinSnapshot& a, const CacheCoinSnapshot& b) { return a.outpoint < b.outpoint; });",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 39,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We could use `std::ranges` and maybe even use a projection to extract the key:\r\n```suggestion\r\n        std::ranges::sort(snapshot, {}, &CacheCoinSnapshot::outpoint); \r\n```",
      "created_at": "2026-02-04T14:42:41Z",
      "updated_at": "2026-02-04T16:33:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764375763",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764375763"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": 65,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764390989",
      "pull_request_review_id": 3751479287,
      "id": 2764390989,
      "node_id": "PRRC_kwDOABII586kxUJN",
      "diff_hunk": "@@ -35,18 +36,67 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            CacheCoinSnapshot s;\n+            s.outpoint = outpoint;\n+            s.dirty = entry.IsDirty();\n+            s.fresh = entry.IsFresh();\n+            s.coin = entry.coin;\n+            snapshot.push_back(std::move(s));",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "could we emplace it instead?\n```suggestion\n            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n```",
      "created_at": "2026-02-04T14:45:20Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764390989",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764390989"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764659262",
      "pull_request_review_id": 3751479287,
      "id": 2764659262,
      "node_id": "PRRC_kwDOABII586kyVo-",
      "diff_hunk": "@@ -73,10 +124,24 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n             },\n             [&] {\n-                coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                try {\n+                    coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                } catch (const std::logic_error& e) {\n+                    assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is a bit concerning, the fuzzer shouldn't be able to trigger this logic error.\nWould it help if #33018 cleanup landed first, would that simplify this change?\nAnd regardless of the merge order, can we instead make the fuzzer avoid constructing invalid states in the first place and then drop the try/catches (e.g. by setting `possible_overwrite` properly based on `HaveCoinInCache` in `AddCoin`)?",
      "created_at": "2026-02-04T15:41:20Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764659262",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764659262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 130,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764685335",
      "pull_request_review_id": 3751479287,
      "id": 2764685335,
      "node_id": "PRRC_kwDOABII586kycAX",
      "diff_hunk": "@@ -194,8 +259,12 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n     }\n \n     {\n-        std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n-        assert(is_db == !!coins_view_cursor);\n+        try {\n+            std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n+            assert(is_db == !!coins_view_cursor);\n+        } catch (const std::logic_error&) {\n+            assert(dynamic_cast<CCoinsViewCache*>(&backend_coins_view));",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 102,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "isn't this a workaround that https://github.com/bitcoin/bitcoin/pull/34124/changes#diff-095ce1081a930998a10b37358fae5499ac47f8cb6f25f5df5d88e920a54e0341R357 would already fix? Would it help if that landed before this? I'm not sure why it's acceptable to call the unimplemented method if it's a `CCoinsViewCache` with default methods - we shouldn't have that after #34124 as far as I can tell.\nWhat if we only checked this for `is_db` directly:\n```C++\n  if (is_db) {                                                                                                                                                                                   \n      std::unique_ptr<CCoinsViewCursor> coins_view_cursor{backend_coins_view.Cursor()};\n      assert(!!coins_view_cursor);\n  }\n```",
      "created_at": "2026-02-04T15:46:59Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764685335",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764685335"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764697567",
      "pull_request_review_id": 3751479287,
      "id": 2764697567,
      "node_id": "PRRC_kwDOABII586kye_f",
      "diff_hunk": "@@ -35,6 +36,56 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            CacheCoinSnapshot s;\n+            s.outpoint = outpoint;\n+            s.dirty = entry.IsDirty();\n+            s.fresh = entry.IsFresh();\n+            s.coin = entry.coin;\n+            snapshot.push_back(std::move(s));\n+        }\n+\n+        std::sort(snapshot.begin(), snapshot.end(),\n+                  [](const CacheCoinSnapshot& a, const CacheCoinSnapshot& b) { return a.outpoint < b.outpoint; });\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+            m_expected_snapshot = ComputeCacheCoinsSnapshot();",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "could we assert what a new snapshot contains after the flush?\nAssert the cache is empty after flush for `will_erase=true` and maybe add a `auto m_expected_snapshot_before{ComputeCacheCoinsSnapshot()};` or check that no fresh or dirty remain, that no spent ones were written and removed, etc.\n\nThough I'd add that to the general https://github.com/bitcoin/bitcoin/blob/d4bc620ad8cf6b7975be55d5ae27dc943cceef3f/src/test/fuzz/coins_view.cpp#L165-L170, not here.\nThough looking at it I'm not sure why `/*will_erase=*/false` is never tested there, could we do `/*will_erase=*/fuzzed_data_provider.ConsumeBool(); ` instead?\nBut I understand if you think that's outside the scope of this PR (we could still fuzz it locally without committing to make sure the current change is correct).",
      "created_at": "2026-02-04T15:49:33Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764697567",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764697567"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764812555",
      "pull_request_review_id": 3751479287,
      "id": 2764812555,
      "node_id": "PRRC_kwDOABII586ky7EL",
      "diff_hunk": "",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "9df24c2a635087037100b7b93828ca34d3f979d2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "9df24c2a635087037100b7b93828ca34d3f979d2\n> This is a slightly modified version of the first two commits of https://github.com/bitcoin/bitcoin/pull/31132,\n\nThis commit necessitates some PR description updates I think",
      "created_at": "2026-02-04T16:15:42Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764812555",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764812555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764824755",
      "pull_request_review_id": 3751479287,
      "id": 2764824755,
      "node_id": "PRRC_kwDOABII586ky-Cz",
      "diff_hunk": "@@ -177,31 +177,6 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n             });\n     }\n \n-    {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 94,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "e42b1fd6bcf092634c2d5e73334277392c93c0d7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "e42b1fd6bcf092634c2d5e73334277392c93c0d7\nSeems like a clean move-only commit, might want to prefix the message with `move-only`",
      "created_at": "2026-02-04T16:18:35Z",
      "updated_at": "2026-02-04T16:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764824755",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764824755"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 181,
      "original_line": 180,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764963069",
      "pull_request_review_id": 3752138822,
      "id": 2764963069,
      "node_id": "PRRC_kwDOABII586kzfz9",
      "diff_hunk": "@@ -73,10 +124,24 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n             },\n             [&] {\n-                coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                try {\n+                    coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                } catch (const std::logic_error& e) {\n+                    assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": 2764659262,
      "user": {
        "login": "andrewtoth-exo",
        "id": 251224083,
        "node_id": "U_kgDODvlgEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/251224083?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth-exo",
        "html_url": "https://github.com/andrewtoth-exo",
        "followers_url": "https://api.github.com/users/andrewtoth-exo/followers",
        "following_url": "https://api.github.com/users/andrewtoth-exo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth-exo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth-exo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth-exo/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth-exo/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth-exo/repos",
        "events_url": "https://api.github.com/users/andrewtoth-exo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth-exo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm not sure #34124 or #33018 will fix this error.\r\nIf we add a coin that doesn't exist in the cache (with `possible_overwrite` being false), then it will add that coin as fresh. If we `Flush`, then add that same coin again to the cache it will be marked fresh again. Then the subsequent `Flush` will always throw this error.\r\nProduction code relies on checking that any coin we are about to add does not exist in the utxo set. `AddCoin` just operates on the cache layer.",
      "created_at": "2026-02-04T16:50:09Z",
      "updated_at": "2026-02-04T16:50:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764963069",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764963069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 130,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765000368",
      "pull_request_review_id": 3752182574,
      "id": 2765000368,
      "node_id": "PRRC_kwDOABII586kzo6w",
      "diff_hunk": "@@ -194,8 +259,12 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n     }\n \n     {\n-        std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n-        assert(is_db == !!coins_view_cursor);\n+        try {\n+            std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n+            assert(is_db == !!coins_view_cursor);\n+        } catch (const std::logic_error&) {\n+            assert(dynamic_cast<CCoinsViewCache*>(&backend_coins_view));",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 102,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": 2764685335,
      "user": {
        "login": "andrewtoth-exo",
        "id": 251224083,
        "node_id": "U_kgDODvlgEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/251224083?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth-exo",
        "html_url": "https://github.com/andrewtoth-exo",
        "followers_url": "https://api.github.com/users/andrewtoth-exo/followers",
        "following_url": "https://api.github.com/users/andrewtoth-exo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth-exo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth-exo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth-exo/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth-exo/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth-exo/repos",
        "events_url": "https://api.github.com/users/andrewtoth-exo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth-exo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah I'm not sure this check adds much to the test. Just gating it on `is_db` seems acceptable to me.",
      "created_at": "2026-02-04T16:56:41Z",
      "updated_at": "2026-02-04T16:56:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765000368",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765000368"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765025814",
      "pull_request_review_id": 3752214512,
      "id": 2765025814,
      "node_id": "PRRC_kwDOABII586kzvIW",
      "diff_hunk": "@@ -35,6 +36,56 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            CacheCoinSnapshot s;\n+            s.outpoint = outpoint;\n+            s.dirty = entry.IsDirty();\n+            s.fresh = entry.IsFresh();\n+            s.coin = entry.coin;\n+            snapshot.push_back(std::move(s));\n+        }\n+\n+        std::sort(snapshot.begin(), snapshot.end(),\n+                  [](const CacheCoinSnapshot& a, const CacheCoinSnapshot& b) { return a.outpoint < b.outpoint; });\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+            m_expected_snapshot = ComputeCacheCoinsSnapshot();",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": 2764697567,
      "user": {
        "login": "andrewtoth-exo",
        "id": 251224083,
        "node_id": "U_kgDODvlgEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/251224083?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth-exo",
        "html_url": "https://github.com/andrewtoth-exo",
        "followers_url": "https://api.github.com/users/andrewtoth-exo/followers",
        "following_url": "https://api.github.com/users/andrewtoth-exo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth-exo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth-exo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth-exo/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth-exo/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth-exo/repos",
        "events_url": "https://api.github.com/users/andrewtoth-exo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth-exo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The `MutationGuardCoinsViewCache` does not flush. The `CoinsViewOverlay` calls `Flush`, which calls `MutationGuardCoinsViewCache::BatchWrite`.\r\n\r\nThe next code snippet calls `BatchWrite` on the `CoinsViewOverlay`. Making will_erase a fuzzed data boolean makes sense. I wonder why it was hard coded to false?",
      "created_at": "2026-02-04T17:01:08Z",
      "updated_at": "2026-02-04T17:01:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765025814",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765025814"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765032158",
      "pull_request_review_id": 3752222472,
      "id": 2765032158,
      "node_id": "PRRC_kwDOABII586kzwre",
      "diff_hunk": "@@ -177,31 +177,6 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n             });\n     }\n \n-    {",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 94,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "e42b1fd6bcf092634c2d5e73334277392c93c0d7",
      "in_reply_to_id": 2764824755,
      "user": {
        "login": "andrewtoth-exo",
        "id": 251224083,
        "node_id": "U_kgDODvlgEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/251224083?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth-exo",
        "html_url": "https://github.com/andrewtoth-exo",
        "followers_url": "https://api.github.com/users/andrewtoth-exo/followers",
        "following_url": "https://api.github.com/users/andrewtoth-exo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth-exo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth-exo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth-exo/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth-exo/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth-exo/repos",
        "events_url": "https://api.github.com/users/andrewtoth-exo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth-exo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Err, but it updates behavior in that these checks are now done after some other checks. The order of checks change. Some of the checks that were done after and now are done before can mutate the state of the cache, so there is some difference.",
      "created_at": "2026-02-04T17:02:17Z",
      "updated_at": "2026-02-04T17:02:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765032158",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765032158"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 181,
      "original_line": 180,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765709107",
      "pull_request_review_id": 3753017270,
      "id": 2765709107,
      "node_id": "PRRC_kwDOABII586k2V8z",
      "diff_hunk": "@@ -73,10 +124,24 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n             },\n             [&] {\n-                coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                try {\n+                    coins_view_cache.Flush(/*reallocate_cache=*/fuzzed_data_provider.ConsumeBool());\n+                } catch (const std::logic_error& e) {\n+                    assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": 2764659262,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I keep the error caught in the backend cache's `BatchWrite`, and don't rethrow it.",
      "created_at": "2026-02-04T19:44:12Z",
      "updated_at": "2026-02-04T19:44:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765709107",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765709107"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 130,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765710685",
      "pull_request_review_id": 3753018947,
      "id": 2765710685,
      "node_id": "PRRC_kwDOABII586k2WVd",
      "diff_hunk": "@@ -35,6 +36,56 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            CacheCoinSnapshot s;\n+            s.outpoint = outpoint;\n+            s.dirty = entry.IsDirty();\n+            s.fresh = entry.IsFresh();\n+            s.coin = entry.coin;\n+            snapshot.push_back(std::move(s));\n+        }\n+\n+        std::sort(snapshot.begin(), snapshot.end(),\n+                  [](const CacheCoinSnapshot& a, const CacheCoinSnapshot& b) { return a.outpoint < b.outpoint; });\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+            m_expected_snapshot = ComputeCacheCoinsSnapshot();",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "original_commit_id": "2790e6e71f62eb0a7a5f239d1f8ea933be526d88",
      "in_reply_to_id": 2764697567,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added a new commit that makes `will_erase` a fuzz provided boolean.",
      "created_at": "2026-02-04T19:44:40Z",
      "updated_at": "2026-02-04T19:44:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765710685",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765710685"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765841801",
      "pull_request_review_id": 3753164499,
      "id": 2765841801,
      "node_id": "PRRC_kwDOABII586k22WJ",
      "diff_hunk": "@@ -35,18 +38,65 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.\n+            // There's not an easy way to prevent the fuzzer from reaching this, so we handle it here.\n+            // Since it is thrown in the middle of the write, we reset our own state and iterate through\n+            // the cursor so the caller's state is also reset.\n+            assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});\n+            Reset();\n+            for (auto it{cursor.Begin()}; it != cursor.End(); it = cursor.NextAndMaybeErase(*it)) {}",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 67,
      "original_position": 59,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is a bit weird, but we're in a crisis recovery mode in this branch, I'm sure we'll get back to this in follow-ups...",
      "created_at": "2026-02-04T20:24:20Z",
      "updated_at": "2026-02-04T20:28:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765841801",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765841801"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 90,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765848281",
      "pull_request_review_id": 3753164499,
      "id": 2765848281,
      "node_id": "PRRC_kwDOABII586k237Z",
      "diff_hunk": "@@ -304,6 +304,11 @@ class CCoinsView\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n     virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n \n+    //! Retrieve the Coin (unspent transaction output) for a given outpoint, without caching results.",
      "path": "src/coins.h",
      "position": 7,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: we're not usually this friendly :)\r\n```suggestion\r\n    //! Retrieve the Coin for a given outpoint, without caching results.\r\n```",
      "created_at": "2026-02-04T20:26:33Z",
      "updated_at": "2026-02-04T21:13:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765848281",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765848281"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 308,
      "original_line": 307,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765979836",
      "pull_request_review_id": 3753313757,
      "id": 2765979836,
      "node_id": "PRRC_kwDOABII586k3YC8",
      "diff_hunk": "@@ -304,6 +304,11 @@ class CCoinsView\n     //! Retrieve the Coin (unspent transaction output) for a given outpoint.\n     virtual std::optional<Coin> GetCoin(const COutPoint& outpoint) const;\n \n+    //! Retrieve the Coin (unspent transaction output) for a given outpoint, without caching results.",
      "path": "src/coins.h",
      "position": 7,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": 2765848281,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is copied from 3 lines up :)",
      "created_at": "2026-02-04T21:06:55Z",
      "updated_at": "2026-02-04T21:06:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765979836",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2765979836"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 308,
      "original_line": 307,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2780426692",
      "pull_request_review_id": 3770998831,
      "id": 2780426692,
      "node_id": "PRRC_kwDOABII586lufHE",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add PeekCoin()\"\n\nThere should be a way added to the `coinscache_sim` fuzz test that exercises `PeekCoin`:\n\n```diff\ndiff --git a/src/test/fuzz/coinscache_sim.cpp b/src/test/fuzz/coinscache_sim.cpp\nindex 8c2d1678386..ec17a903907 100644\n--- a/src/test/fuzz/coinscache_sim.cpp\n+++ b/src/test/fuzz/coinscache_sim.cpp\n@@ -252,12 +252,14 @@ FUZZ_TARGET(coinscache_sim)\n         CallOneOf(\n             provider,\n \n-            [&]() { // GetCoin\n+            [&]() { // GetCoin / PeekCoin\n                 uint32_t outpointidx = provider.ConsumeIntegralInRange<uint32_t>(0, NUM_OUTPOINTS - 1);\n                 // Look up in simulation data.\n                 auto sim = lookup(outpointidx);\n                 // Look up in real caches.\n-                auto realcoin = caches.back()->GetCoin(data.outpoints[outpointidx]);\n+                auto realcoin = provider.ConsumeBool() ?\n+                                caches.back()->PeekCoin(data.outpoints[outpointidx]) :\n+                                caches.back()->GetCoin(data.outpoints[outpointidx]);\n                 // Compare results.\n                 if (!sim.has_value()) {\n```",
      "created_at": "2026-02-09T03:33:26Z",
      "updated_at": "2026-02-09T03:38:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2780426692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2780426692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2788637510",
      "pull_request_review_id": 3779722077,
      "id": 2788637510,
      "node_id": "PRRC_kwDOABII586mNztG",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2780426692,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks @sipa. I think to not invalidate the ACKs here I will leave this change to a follow-up, unless you insist it needs to go in this PR.",
      "created_at": "2026-02-10T15:26:47Z",
      "updated_at": "2026-02-10T15:26:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2788637510",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2788637510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2788689025",
      "pull_request_review_id": 3779780073,
      "id": 2788689025,
      "node_id": "PRRC_kwDOABII586mOASB",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2780426692,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A follow-up is fine.",
      "created_at": "2026-02-10T15:35:32Z",
      "updated_at": "2026-02-10T15:35:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2788689025",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2788689025"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789041230",
      "pull_request_review_id": 3780208392,
      "id": 2789041230,
      "node_id": "PRRC_kwDOABII586mPWRO",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2780426692,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@andrewtoth, can you try it locally before merge? I'm personally fine with a response of ðŸ‘ / ðŸ‘Ž (just to avoid surprises)",
      "created_at": "2026-02-10T16:35:38Z",
      "updated_at": "2026-02-10T16:35:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789041230",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789041230"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789324653",
      "pull_request_review_id": 3780508142,
      "id": 2789324653,
      "node_id": "PRRC_kwDOABII586mQbdt",
      "diff_hunk": "@@ -15,6 +15,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add PeekCoin()\" (c40f6d743a696a66eaf68785688d7cb3d2c4be18)\r\n\r\nTwo issues I think would be good to address in this commit:\r\n\r\n- `PeekCoin` is documented as not modifying the cache, but the default implementation calls `GetCoin` can modify it.\r\n- `GetCoin` and `HaveCoin` should probably have documentation saying now that they may modify the cache, to contrast with `PeekCoin`\r\n\r\nThe problem with default `PeekCoin` implementation calling `GetCoin` could be minimally addressed by just not providing any `PeekCoin` implementation, which would be in keeping with #34124. IMO, a nicer solution would be to make `PeekCoin`, `GetCoin`, and `HaveCoin` all non-virtual methods, with simpler and more clearly distinguished hooks for subclasses to implement:\r\n\r\n```c++\r\n    virtual bool LookupCoin(const COutPoint& outpoint, Coin* coin = nullptr) const = 0;\r\n    virtual bool MutableLookupCoin(const COutPoint& outpoint, Coin* coin = nullptr) = 0;\r\n```\r\n\r\n642fa06f0af7321d35959f599e2edf74e72c6bd9 is a full implementation to show what this would look like.\r\n\r\nMore ideally all of this should just be enforced with `const`. Only methods that don't mutate the cache should be `const` and others should be non-const. However, this would be a bigger change since `const` is currently being used to guard against `BatchWrite` being called. To fix that it would make sense to drop `BatchWrite` from the coins \"view\" interface and add it to a separate \"store\" interface.\r\n\r\nSo this is kind of a rabbithole. But I think it's important to at least document these methods better and to prevent the default PeekCoin implmentation from being able to modify the cache.",
      "created_at": "2026-02-10T17:33:22Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789324653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789324653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789334056",
      "pull_request_review_id": 3780520185,
      "id": 2789334056,
      "node_id": "PRRC_kwDOABII586mQdwo",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2780426692,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@l0rinc I applied the diff locally and fuzzed the target for half an hour (~1.7 million iterations). No issues :+1: ",
      "created_at": "2026-02-10T17:35:31Z",
      "updated_at": "2026-02-10T17:35:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789334056",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789334056"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789450929",
      "pull_request_review_id": 3780508142,
      "id": 2789450929,
      "node_id": "PRRC_kwDOABII586mQ6Sx",
      "diff_hunk": "@@ -382,6 +382,9 @@ class CCoinsViewCache : public CCoinsViewBacked\n      */\n     void Reset() noexcept;\n \n+    /* Get the coin from base. Used for cache misses in FetchCoin. */\n+    virtual std::optional<Coin> GetCoinFromBase(const COutPoint& outpoint) const;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: don't mutate main cache when connecting block\" (ea96314622292dbe0d333d61a9acd4c198532285)\r\n\r\nSeems like it would make more sense to call this method `FetchCoinFromBase` since it is called from `FetchCoin`,  and PR seems to be using `Get` to mean fetch with caching, and `Peek` to mean fetch without caching?",
      "created_at": "2026-02-10T18:00:37Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789450929",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789450929"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 386,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789468267",
      "pull_request_review_id": 3780508142,
      "id": 2789468267,
      "node_id": "PRRC_kwDOABII586mQ-hr",
      "diff_hunk": "@@ -1856,7 +1856,7 @@ void CoinsViews::InitCache()\n {\n     AssertLockHeld(::cs_main);\n     m_cacheview = std::make_unique<CCoinsViewCache>(&m_catcherview);\n-    m_connect_block_view = std::make_unique<CCoinsViewCache>(&*m_cacheview);\n+    m_connect_block_view = std::make_unique<CoinsViewOverlay>(&*m_cacheview);",
      "path": "src/validation.cpp",
      "position": 21,
      "original_position": 5,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: don't mutate main cache when connecting block\" (ea96314622292dbe0d333d61a9acd4c198532285)\r\n\r\nIt would be helpful if commit description could say what practical effect this change expected to have on ConnectTip performance. Current commit description only says that this should be useful for a parallel fetching in the future, but it's not clear what impact this change could have by itself. PR description says caching \"is generally a performance improvement for single threaded access patterns\" but I guess that doesn't apply here because if the block is successfully connected, `m_connect_block_view` will be flushed and the cache underneath will contain all of the same entries as before? And if the block fails to connect, probably better if its inputs aren't cached?\r\n\r\nAlso it would seem better to introduce this change in the later commit introducing the `connect_tip_does_not_cache_inputs_on_failed_connect` test which validates it. There is already enough complexity in this commit without this.",
      "created_at": "2026-02-10T18:04:33Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789468267",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789468267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1859,
      "original_line": 1859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789531328",
      "pull_request_review_id": 3780508142,
      "id": 2789531328,
      "node_id": "PRRC_kwDOABII586mRN7A",
      "diff_hunk": "@@ -0,0 +1,165 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewoverlay_tests)\n+\n+namespace {\n+\n+CBlock CreateBlock() noexcept",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 24,
      "original_position": 24,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: don't mutate main cache when connecting block\" (ea96314622292dbe0d333d61a9acd4c198532285)\r\n\r\nAny background or insight on why ~150 lines of test code added to test a much smaller change which is effectively just swapping `base->GetCoin` with  `GetCoinFromBase`?\r\n\r\nAre the test setup functions newly written or copied from somewhere?\r\n\r\nIf `CoinsViewOverlay` and `CCoinsViewCache` classes are identical except one class calling `base->GetCoin` and the other calling `base->PeekCoin` I would not expect them to just use same test setup code and similar test cases instead of having entirely separate tests in different files.\r\n\r\nThis also makes me wonder if implementation should be simpler and `CCoinsViewCache` should just take a `bool use_peek` option and new class `CoinsViewOverlay` and new `GetCoinFromBase` method and new test setup code could all go away.",
      "created_at": "2026-02-10T18:19:34Z",
      "updated_at": "2026-02-10T20:34:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789531328",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789531328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789710402",
      "pull_request_review_id": 3780508142,
      "id": 2789710402,
      "node_id": "PRRC_kwDOABII586mR5pC",
      "diff_hunk": "@@ -327,3 +380,12 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n     CCoinsViewCache coins_view_cache{&backend_coins_view, /*deterministic=*/true};\n     TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/true);\n }\n+\n+FUZZ_TARGET(coins_view_overlay, .init = initialize_coins_view)",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 191,
      "original_position": 87,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"fuzz: add target for CoinsViewOverlay\" (babb80d03aee7d7ca8ce33c6a96250f080b50a9f)\r\n\r\nI think the description of this test in the commit description should be removed and added to the code. Similar the description of MutationGuardCoinsViewCache should be removed and added to that class.\r\n\r\nShould be possible to learn this information from the code and not need to look at git history.",
      "created_at": "2026-02-10T19:01:17Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789710402",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789710402"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 384,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789870757",
      "pull_request_review_id": 3780508142,
      "id": 2789870757,
      "node_id": "PRRC_kwDOABII586mSgyl",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 53,
      "commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"fuzz: add target for CoinsViewOverlay\" (babb80d03aee7d7ca8ce33c6a96250f080b50a9f)\r\n\r\nI don't understand what causes this exception to happen in the new test when it didn't seem to happen in previous tests, when the only difference seems to be an extra layer of caching here.\r\n\r\nI also don't understand what the comment means when it says we have \"the same fresh entry\" when from the error the only thing you would know about the entry is that it is unspent, not that it the same or that it is fresh.\r\n\r\nIt would be helpful to see a simple example of what operations the fuzzer could do to the overlay to trigger this exception.",
      "created_at": "2026-02-10T19:37:18Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789870757",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789870757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789932554",
      "pull_request_review_id": 3780508142,
      "id": 2789932554,
      "node_id": "PRRC_kwDOABII586mSv4K",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.\n+            // There's not an easy way to prevent the fuzzer from reaching this, so we handle it here.\n+            // Since it is thrown in the middle of the write, we reset our own state and iterate through\n+            // the cursor so the caller's state is also reset.\n+            assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});\n+            Reset();\n+            for (auto it{cursor.Begin()}; it != cursor.End(); it = cursor.NextAndMaybeErase(*it)) {}",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 67,
      "original_position": 59,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"fuzz: add target for CoinsViewOverlay\" (babb80d03aee7d7ca8ce33c6a96250f080b50a9f)\r\n\r\nWhat's the implication of clearing the cache, undoing this write and all previous writes here? Does it make the test coverage less meaningful when this happens?\r\n\r\nThe fact that reseting this cache is ok me question what the point is of calling `TestCoinsView` with 3 layers of views (CCoinsView + MutationGuardCoinsViewCache + CoinsViewOverlay) when the existing fuzz tests are fine with just two layers (CCoinsView + CCoinsViewCache) and (CCoinsViewDB + CCoinsViewCache).\r\n\r\nWhy not follow the previous pattern and test (CCoinsView + CoinsViewOverlay) and (CCoinsViewDB + CoinsViewOverlay), just overriding the `CoinsViewOverlay::BatchWrite` method to do the \r\n`assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot)` check? This would seem more consistent and avoid the need for extra complexity and reduced reliability of the test this `Reset()` call seems to add.\r\n\r\n",
      "created_at": "2026-02-10T19:50:08Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789932554",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789932554"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": 89,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": 90,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789939384",
      "pull_request_review_id": 3780508142,
      "id": 2789939384,
      "node_id": "PRRC_kwDOABII586mSxi4",
      "diff_hunk": "@@ -212,7 +212,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n                 bool expected_code_path = false;\n                 try {\n-                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/true)};\n+                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/fuzzed_data_provider.ConsumeBool())};",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"fuzz: provide boolean for will_write when testing BatchWrite\" (70e93a10b7fad61483bc9044b483460a7faaa1b8)\n\nCan commit description state reason for this change? It seems good to expand coverage but is just unrelated to the rest of the PR or related somehow?",
      "created_at": "2026-02-10T19:51:44Z",
      "updated_at": "2026-02-10T20:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789939384",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2789939384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790110142",
      "pull_request_review_id": 3781389217,
      "id": 2790110142,
      "node_id": "PRRC_kwDOABII586mTbO-",
      "diff_hunk": "@@ -15,6 +15,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2789324653,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> this PR does have a lot of acks so may not be worth changing\r\n\r\nI don't mind re-reviewing, your suggestions are always very useful.\r\n\r\n> https://github.com/bitcoin/bitcoin/commit/642fa06f0af7321d35959f599e2edf74e72c6bd9 is a full implementation to show what this would look like.\r\n\r\nThis kinda' undoes https://github.com/bitcoin/bitcoin/pull/30849 and has a lot of renames, but I like the new comments.\r\n\r\n> More ideally all of this should just be enforced with const. \r\n\r\n> However, this would be a bigger change\r\n\r\nðŸ‘ - we should do that in a follow-up!\r\n\r\n> would make sense to drop BatchWrite from the coins \"view\" interface\r\n\r\nYes, we will have to segregate that interface, it has multiple issues, but first we need to gradually clean up usage to fully understand the narrowest interfaces, see https://github.com/bitcoin/bitcoin/issues/34280\r\n\r\n> at least document these methods better and to prevent the default PeekCoin implementation\r\n\r\nAgree, I also won't mind if we do that in follow-up since we will be touching all of these in other cleanup PRs as well",
      "created_at": "2026-02-10T20:24:43Z",
      "updated_at": "2026-02-10T20:24:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790110142",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790110142"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790126917",
      "pull_request_review_id": 3781408494,
      "id": 2790126917,
      "node_id": "PRRC_kwDOABII586mTfVF",
      "diff_hunk": "@@ -1856,7 +1856,7 @@ void CoinsViews::InitCache()\n {\n     AssertLockHeld(::cs_main);\n     m_cacheview = std::make_unique<CCoinsViewCache>(&m_catcherview);\n-    m_connect_block_view = std::make_unique<CCoinsViewCache>(&*m_cacheview);\n+    m_connect_block_view = std::make_unique<CoinsViewOverlay>(&*m_cacheview);",
      "path": "src/validation.cpp",
      "position": 21,
      "original_position": 5,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": 2789468267,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> It would be helpful if commit description could say what practical effect this change expected to have on ConnectTip performance\r\n\r\nI have measured it via pruned IBD and reindex-chainstate multiple times and couldn't measure any difference.\r\nIt's not necessarily an optimization - but the PR description doesn't oversell that aspect in my opinion.",
      "created_at": "2026-02-10T20:28:36Z",
      "updated_at": "2026-02-10T20:28:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790126917",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790126917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1859,
      "original_line": 1859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790135029",
      "pull_request_review_id": 3781417999,
      "id": 2790135029,
      "node_id": "PRRC_kwDOABII586mThT1",
      "diff_hunk": "@@ -0,0 +1,165 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewoverlay_tests)\n+\n+namespace {\n+\n+CBlock CreateBlock() noexcept",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 24,
      "original_position": 24,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": 2789531328,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> should just take a bool use_peek option\r\n\r\nSo the object itself would either *always* populate underlying cache fetches or *never* for the GetCoin calls?",
      "created_at": "2026-02-10T20:30:42Z",
      "updated_at": "2026-02-10T20:30:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790135029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790135029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790140706",
      "pull_request_review_id": 3781424723,
      "id": 2790140706,
      "node_id": "PRRC_kwDOABII586mTisi",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 53,
      "commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": 2789870757,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2764963069",
      "created_at": "2026-02-10T20:32:09Z",
      "updated_at": "2026-02-10T20:32:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790140706",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790140706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790149979",
      "pull_request_review_id": 3781435761,
      "id": 2790149979,
      "node_id": "PRRC_kwDOABII586mTk9b",
      "diff_hunk": "@@ -212,7 +212,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n                 bool expected_code_path = false;\n                 try {\n-                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/true)};\n+                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/fuzzed_data_provider.ConsumeBool())};",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": 2789939384,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's related to https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2765710685 - but I don't mind if we add it in a separate PR",
      "created_at": "2026-02-10T20:34:30Z",
      "updated_at": "2026-02-10T20:34:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790149979",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790149979"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790183244",
      "pull_request_review_id": 3781479058,
      "id": 2790183244,
      "node_id": "PRRC_kwDOABII586mTtFM",
      "diff_hunk": "@@ -0,0 +1,165 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewoverlay_tests)\n+\n+namespace {\n+\n+CBlock CreateBlock() noexcept",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 24,
      "original_position": 24,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": 2789531328,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790135029\r\n\r\n> So the object itself would either _always_ populate underlying cache fetches or _never_ for the GetCoin calls?\r\n\r\nYes, if `CCoinsViewCache` and `CoinsViewOverlay` classes are identical, except one of them uses `base->GetCoin` and the other one uses `base->PeekCoin` this could be implemented with a boolean option to avoid needing a new virtual hook `GetCoinFromBase` hook and maybe let the two classes share more testing code. Current approach also seems ok, just wonder if it makes sense to simplify.",
      "created_at": "2026-02-10T20:43:08Z",
      "updated_at": "2026-02-10T20:43:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790183244",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790183244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790241611",
      "pull_request_review_id": 3781555828,
      "id": 2790241611,
      "node_id": "PRRC_kwDOABII586mT7VL",
      "diff_hunk": "@@ -0,0 +1,165 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <coins.h>\n+#include <primitives/block.h>\n+#include <primitives/transaction.h>\n+#include <primitives/transaction_identifier.h>\n+#include <txdb.h>\n+#include <uint256.h>\n+#include <util/byte_units.h>\n+#include <util/hasher.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <cstdint>\n+#include <cstring>\n+#include <ranges>\n+\n+BOOST_AUTO_TEST_SUITE(coinsviewoverlay_tests)\n+\n+namespace {\n+\n+CBlock CreateBlock() noexcept",
      "path": "src/test/coinsviewoverlay_tests.cpp",
      "position": 24,
      "original_position": 24,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": 2789531328,
      "user": {
        "login": "andrewtoth-exo",
        "id": 251224083,
        "node_id": "U_kgDODvlgEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/251224083?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth-exo",
        "html_url": "https://github.com/andrewtoth-exo",
        "followers_url": "https://api.github.com/users/andrewtoth-exo/followers",
        "following_url": "https://api.github.com/users/andrewtoth-exo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth-exo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth-exo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth-exo/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth-exo/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth-exo/repos",
        "events_url": "https://api.github.com/users/andrewtoth-exo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth-exo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "So, the extra context here is that this change is pulled out of #31132, where we will extend `CoinsViewOverlay::GetCoinFromBase` to first lookup coins in a new internal thread safe queue. Only if the coin is not found in the thread safe queue will we fallback to `base->PeekCoin`. A lot of the design decisions in this PR are due to making this easy to rebase the parent PR onto. The extra test code here will incorporate a `StartFetching(CBlock& block)` method on `CoinsViewOverlay`.",
      "created_at": "2026-02-10T20:57:20Z",
      "updated_at": "2026-02-10T20:57:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790241611",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790241611"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790309634",
      "pull_request_review_id": 3781633378,
      "id": 2790309634,
      "node_id": "PRRC_kwDOABII586mUL8C",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 53,
      "commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": 2789870757,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I don't understand what causes this exception to happen in the new test when it didn't seem to happen in previous tests, when the only difference seems to be an extra layer of caching here.\r\n\r\nIt does happen in the previous tests, [https://github.com/bitcoin/bitcoin/blob/master/src/test/fuzz/coins_view.cpp#L170-L176](https://github.com/bitcoin/bitcoin/blob/master/src/test/fuzz/coins_view.cpp#L170-L176). This is adding a second `CCoinsViewCache::BatchWrite` in a different spot.\r\n\r\n> I also don't understand what the comment means when it says we have \"the same fresh entry\" when from the error the only thing you would know about the entry is that it is unspent, not that it the same or that it is fresh.\r\n\r\nI'm not complete sure what you mean by this. This `BatchWrite` is called by the child cache when it is writing its contents to it via `Flush` or `Sync`. The error is thrown when the child cache has a fresh entry for an outpoint, and this cache has a fresh entry for the same outpoint. Please let me know how this can be made more clear via the comment.\r\n\r\n> It would be helpful to see a simple example of what operations the fuzzer could do to the overlay to trigger this exception.\r\n\r\nThis exception is thrown if the fuzzer does  \"set random_coin\" ->  `AddCoin` -> `Flush` -> `AddCoin` -> `Flush`.",
      "created_at": "2026-02-10T21:11:39Z",
      "updated_at": "2026-02-10T21:11:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790309634",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790309634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790330656",
      "pull_request_review_id": 3781655725,
      "id": 2790330656,
      "node_id": "PRRC_kwDOABII586mUREg",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.\n+            // There's not an easy way to prevent the fuzzer from reaching this, so we handle it here.\n+            // Since it is thrown in the middle of the write, we reset our own state and iterate through\n+            // the cursor so the caller's state is also reset.\n+            assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});\n+            Reset();\n+            for (auto it{cursor.Begin()}; it != cursor.End(); it = cursor.NextAndMaybeErase(*it)) {}",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 67,
      "original_position": 59,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": 2789932554,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What's the implication of clearing the cache, undoing this write and all previous writes here? Does it make the test coverage less meaningful when this happens?\r\n\r\nIf this exception is thrown it puts the two caches in an invalid state. In production code we do not catch this error and crash. In other parts of this test we set `good_data = false;` when we want the fuzzer to not go further, but here we would already be in an invalid state so we need to reset to continue.\r\n\r\n> what the point is of calling TestCoinsView with 3 layers of views\r\n\r\n`CoinsViewOverlay` is designed to not mutate the parent `CCoinsViewCache`. So, we need a `CoinsViewOverlay` backed via a `CCoinsViewCache` in this case. However, a `CCoinsViewCache` cannot exist by itself without a backing view, so we need to add a third `CCoinsView` to it.",
      "created_at": "2026-02-10T21:17:21Z",
      "updated_at": "2026-02-10T21:17:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2790330656",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2790330656"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": 89,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": 90,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2791257760",
      "pull_request_review_id": 3782662683,
      "id": 2791257760,
      "node_id": "PRRC_kwDOABII586mXzag",
      "diff_hunk": "@@ -15,6 +15,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2789324653,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think a simpler solution for now is to just make the default `PeekCoin` return `std::nullopt` like `GetCoin`, and override `PeekCoin` in `CCoinsViewDB`.",
      "created_at": "2026-02-11T03:31:08Z",
      "updated_at": "2026-02-11T03:31:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2791257760",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2791257760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796359484",
      "pull_request_review_id": 3788323810,
      "id": 2796359484,
      "node_id": "PRRC_kwDOABII586mrQ88",
      "diff_hunk": "@@ -212,7 +212,7 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsViewCache& co\n                 }\n                 bool expected_code_path = false;\n                 try {\n-                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/true)};\n+                    auto cursor{CoinsViewCacheCursor(sentinel, coins_map, /*will_erase=*/fuzzed_data_provider.ConsumeBool())};",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": 2789939384,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed this for now. Agree it's unrelated and can be done in a follow-up.",
      "created_at": "2026-02-12T01:39:59Z",
      "updated_at": "2026-02-12T01:40:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796359484",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796359484"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796362326",
      "pull_request_review_id": 3788326173,
      "id": 2796362326,
      "node_id": "PRRC_kwDOABII586mrRpW",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 53,
      "commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": 2789870757,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Clarified the comment here to better explain this case. I hope you find it to be an improvement.",
      "created_at": "2026-02-12T01:40:48Z",
      "updated_at": "2026-02-12T01:40:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796362326",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796362326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796365122",
      "pull_request_review_id": 3788329117,
      "id": 2796365122,
      "node_id": "PRRC_kwDOABII586mrSVC",
      "diff_hunk": "@@ -1856,7 +1856,7 @@ void CoinsViews::InitCache()\n {\n     AssertLockHeld(::cs_main);\n     m_cacheview = std::make_unique<CCoinsViewCache>(&m_catcherview);\n-    m_connect_block_view = std::make_unique<CCoinsViewCache>(&*m_cacheview);\n+    m_connect_block_view = std::make_unique<CoinsViewOverlay>(&*m_cacheview);",
      "path": "src/validation.cpp",
      "position": 21,
      "original_position": 5,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "ea96314622292dbe0d333d61a9acd4c198532285",
      "in_reply_to_id": 2789468267,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Moved this change to the following commit that introduces the integration test.\r\nThere is no expected performance change, so I did not feel it was necessary to add a comment here.",
      "created_at": "2026-02-12T01:41:50Z",
      "updated_at": "2026-02-12T01:41:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796365122",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796365122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1859,
      "original_line": 1859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796368325",
      "pull_request_review_id": 3788332886,
      "id": 2796368325,
      "node_id": "PRRC_kwDOABII586mrTHF",
      "diff_hunk": "@@ -15,6 +15,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2789324653,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Made the default `PeekCoin` return `std::nullopt`, so subclasses have to explicitly opt in. This should pair well with #34124 as well.\r\n\r\nAlso took some of your comments from 642fa06f0af7321d35959f599e2edf74e72c6bd9 and added you as a co-author.\r\n\r\nI think the further improvements re: LookupCoin and constness are interesting but could be better explored in a more focused follow-up.",
      "created_at": "2026-02-12T01:43:23Z",
      "updated_at": "2026-02-12T01:44:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796368325",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796368325"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796371915",
      "pull_request_review_id": 3788336837,
      "id": 2796371915,
      "node_id": "PRRC_kwDOABII586mrT_L",
      "diff_hunk": "@@ -1159,4 +1159,25 @@ BOOST_AUTO_TEST_CASE(ccoins_reset_guard)\n     BOOST_CHECK(!root_cache.HaveCoinInCache(outpoint));\n }\n \n+BOOST_AUTO_TEST_CASE(ccoins_peekcoin)",
      "path": "src/test/coins_tests.cpp",
      "position": 58,
      "original_position": 4,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2780426692,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added this now and added you as co-author.",
      "created_at": "2026-02-12T01:45:14Z",
      "updated_at": "2026-02-12T01:45:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796371915",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796371915"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1162,
      "original_line": 1162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797741276",
      "pull_request_review_id": 3789764345,
      "id": 2797741276,
      "node_id": "PRRC_kwDOABII586mwiTc",
      "diff_hunk": "@@ -74,6 +74,11 @@ std::optional<Coin> CCoinsViewDB::GetCoin(const COutPoint& outpoint) const\n     return std::nullopt;\n }\n \n+std::optional<Coin> CCoinsViewDB::PeekCoin(const COutPoint& outpoint) const\n+{\n+    return GetCoin(outpoint);",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "shouldn't it be vice-versa for safety, i.e. `GetCoin` delegating to `PeekCoin` so that we narrow the contract instead of expanding it? Same for `coinscache_sim.cpp`",
      "created_at": "2026-02-12T09:25:31Z",
      "updated_at": "2026-02-12T09:25:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2797741276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797741276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797747740",
      "pull_request_review_id": 3789770973,
      "id": 2797747740,
      "node_id": "PRRC_kwDOABII586mwj4c",
      "diff_hunk": "@@ -323,6 +384,22 @@ FUZZ_TARGET(coins_view_db, .init = initialize_coins_view)\n         .cache_bytes = 1_MiB,\n         .memory_only = true,\n     };\n-    CCoinsViewDB coins_db{std::move(db_params), CoinsViewOptions{}};\n-    TestCoinsView(fuzzed_data_provider, coins_db, /*is_db=*/true);\n+    CCoinsViewDB backend_coins_view{std::move(db_params), CoinsViewOptions{}};\n+    CCoinsViewCache coins_view_cache{&backend_coins_view, /*deterministic=*/true};\n+    TestCoinsView(fuzzed_data_provider, coins_view_cache, backend_coins_view, /*is_db=*/true);\n+}\n+\n+/**\n+ * Creates a CoinsViewOverlay and a",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 188,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: what happened to the formatting here?",
      "created_at": "2026-02-12T09:26:51Z",
      "updated_at": "2026-02-12T09:26:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2797747740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797747740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 393,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797750053",
      "pull_request_review_id": 3789773245,
      "id": 2797750053,
      "node_id": "PRRC_kwDOABII586mwkcl",
      "diff_hunk": "@@ -393,3 +408,8 @@ bool CCoinsViewErrorCatcher::HaveCoin(const COutPoint& outpoint) const\n {\n     return ExecuteBackedWrapper<bool>([&]() { return CCoinsViewBacked::HaveCoin(outpoint); }, m_err_callbacks);\n }\n+\n+std::optional<Coin> CCoinsViewErrorCatcher::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't like this, we're just adding dead code.\r\nEdit: Can we at least do `return CCoinsViewErrorCatcher::GetCoin(outpoint);` here to demystify this?",
      "created_at": "2026-02-12T09:27:20Z",
      "updated_at": "2026-02-12T09:35:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2797750053",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2797750053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 412,
      "original_line": 412,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799361637",
      "pull_request_review_id": 3791527505,
      "id": 2799361637,
      "node_id": "PRRC_kwDOABII586m2t5l",
      "diff_hunk": "@@ -74,6 +74,11 @@ std::optional<Coin> CCoinsViewDB::GetCoin(const COutPoint& outpoint) const\n     return std::nullopt;\n }\n \n+std::optional<Coin> CCoinsViewDB::PeekCoin(const COutPoint& outpoint) const\n+{\n+    return GetCoin(outpoint);",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": 2797741276,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You're absolutely right! We can also solve the issue pointed out in https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789324653 by making `CCoinsView::GetCoin` delegate to `PeekCoin` instead of vice-versa. This makes the base case non-mutating and avoids a footgun of having to define both methods. Otherwise one path would return a Coin the other nullopt.",
      "created_at": "2026-02-12T14:56:12Z",
      "updated_at": "2026-02-12T14:56:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2799361637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799361637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799399922",
      "pull_request_review_id": 3791570600,
      "id": 2799399922,
      "node_id": "PRRC_kwDOABII586m23Py",
      "diff_hunk": "@@ -35,18 +38,73 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+/**\n+ * MutationGuardCoinsViewCache asserts that nothing mutates cacheCoins until\n+ * BatchWrite is called. It keeps a snapshot of the cacheCoins state, which it\n+ * uses for the assertion in BatchWrite. After the call to the superclass\n+ * CCoinsViewCache::BatchWrite returns, it recomputes the snaphshot at that",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 23,
      "commit_id": "890215cfb952ba1a5b99d246c9c071e6dc4bde02",
      "original_commit_id": "1dea8f5d46f9486a0eafc0b166e82739c34e17ff",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Possible typos and grammar issues:\r\n\r\n    snaphshot -> snapshot [typo in comment: \"recomputes the snaphshot at that moment\" makes \"snapshot\" misspelled]\r\n    snaphshot -> snapshot [typo in comment: \"ComputeCacheCoinsSnapshot()\" description: \"keeps a snapshot ... which it uses for the assertion in BatchWrite. After the call ... it recomputes the snaphshot\" â€” same misspelling repeated]\r\n    excercise -> exercise [typo in comment: \"This allows us to excercise all methods\" â€” \"excercise\" is misspelled]\r\n\r\n2026-02-12 14:55:06",
      "created_at": "2026-02-12T15:03:00Z",
      "updated_at": "2026-02-12T15:03:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2799399922",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799399922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801082546",
      "pull_request_review_id": 3793697280,
      "id": 2801082546,
      "node_id": "PRRC_kwDOABII586m9SCy",
      "diff_hunk": "@@ -5,16 +5,17 @@\n #include <coins.h>\n \n #include <consensus/consensus.h>\n+#include <logging.h>\n #include <random.h>\n #include <uint256.h>\n-#include <util/log.h>\n #include <util/trace.h>\n \n TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return PeekCoin(outpoint); }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "original_commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add PeekCoin()\" (f7136201e6ef4557bbb1070988c46db26b2386a0)\n\nOne concern I'd have about this implementation is that a subclass could override `GetCoin` and forget to implement `PeekCoin` and the code would appear correct but non-caching lookups would return `nullopt`.\n\nThis almost seems worse than the previous [issue](https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2789324653) where a subclass might only override `GetCoin` and `PeekCoin` would incorrectly update the cache.\n\nMight be worth adding a warning to the class definition that subclasses can override `PeekCoin` without overriding `GetCoin` but shouldn't do the reverse. And this might not be a problem for long if #34124 makes these all virtual methods.\n\n\n\n",
      "created_at": "2026-02-12T21:12:14Z",
      "updated_at": "2026-02-12T22:14:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801082546",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801082546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801103708",
      "pull_request_review_id": 3793697280,
      "id": 2801103708,
      "node_id": "PRRC_kwDOABII586m9XNc",
      "diff_hunk": "@@ -534,7 +542,7 @@ class CCoinsViewErrorCatcher final : public CCoinsViewBacked\n         m_err_callbacks.emplace_back(std::move(f));\n     }\n \n-    std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n+    std::optional<Coin> PeekCoin(const COutPoint& outpoint) const override;",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 37,
      "commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "original_commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add PeekCoin()\" (f7136201e6ef4557bbb1070988c46db26b2386a0)\r\n\r\nDoes this change mean errors will no longer be caught if `CCoinsViewErrorCatcher::GetCoin` is called since `CCoinsViewBacked::GetCoin` will call the base view without `ExecuteBackedWrapper`?",
      "created_at": "2026-02-12T21:18:12Z",
      "updated_at": "2026-02-12T22:14:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801103708",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801103708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801127300",
      "pull_request_review_id": 3793697280,
      "id": 2801127300,
      "node_id": "PRRC_kwDOABII586m9c-E",
      "diff_hunk": "@@ -340,6 +346,7 @@ class CCoinsViewBacked : public CCoinsView\n public:\n     CCoinsViewBacked(CCoinsView *viewIn);\n     std::optional<Coin> GetCoin(const COutPoint& outpoint) const override;\n+    std::optional<Coin> PeekCoin(const COutPoint& outpoint) const override;",
      "path": "src/coins.h",
      "position": 20,
      "original_position": 20,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"coins: add PeekCoin()\" (f7136201e6ef4557bbb1070988c46db26b2386a0)\n\nIt seems like `CCoinsViewMemPool` is overriding `CCoinsViewBacked::GetCoin` but not `CCoinsViewBacked::PeekCoin` so calling `PeekCoin` may skip querying the mempool and just return coins from the base view?\n\nThis seems like it would be a bug if so, but maybe nothing is calling `CCoinsViewMemPool::PeekCoin`",
      "created_at": "2026-02-12T21:24:40Z",
      "updated_at": "2026-02-12T22:14:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801127300",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801127300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 349,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801244789",
      "pull_request_review_id": 3793697280,
      "id": 2801244789,
      "node_id": "PRRC_kwDOABII586m95p1",
      "diff_hunk": "@@ -35,6 +38,54 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 1,
      "original_position": 53,
      "commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "original_commit_id": "babb80d03aee7d7ca8ce33c6a96250f080b50a9f",
      "in_reply_to_id": 2789870757,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2796362326\r\n\r\n> Clarified the comment here to better explain this case. I hope you find it to be an improvement.\r\n\r\nThanks. i was confused by \"same fresh entry\" and thought it was saying the same coin was added to both caches, so my question was how we know they are the same? And why would they be the same? New comment is clear it is only referring to the same outpoints.\r\n\r\nI also didn't realize this error already happened elsewhere in the fuzz test, so now it makes sense that there isn't something about the new cache setup which is causing this.\r\n\r\nI still suspect there might be a better way to handle the case of conflicting `AddCoins` calls that doesn't clear the cache and compromise the `assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot)` check (maybe just writing the entries directly instead of calling `CoinsViewCache::BatchWrite`?), but maybe this happens rarely enough that improving the check doesn't matter.\r\n\r\nI'd probably need to look at the fuzz test more to fully understand this, but this approach now seems reasonable and thanks for the clarifications!\r\n\r\n",
      "created_at": "2026-02-12T21:55:04Z",
      "updated_at": "2026-02-12T22:14:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801244789",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801244789"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801340030",
      "pull_request_review_id": 3794007221,
      "id": 2801340030,
      "node_id": "PRRC_kwDOABII586m-Q5-",
      "diff_hunk": "@@ -5,16 +5,17 @@\n #include <coins.h>\n \n #include <consensus/consensus.h>\n+#include <logging.h>\n #include <random.h>\n #include <uint256.h>\n-#include <util/log.h>\n #include <util/trace.h>\n \n TRACEPOINT_SEMAPHORE(utxocache, add);\n TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n-std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return PeekCoin(outpoint); }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return std::nullopt; }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "original_commit_id": "f7136201e6ef4557bbb1070988c46db26b2386a0",
      "in_reply_to_id": 2801082546,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, I had this thought too after I changed it. I don't think either approach is really ideal on its own, and I appreciate #34124 more now after trying to solve this. In #34124 we can make only PeekCoin pure virtual, which will delegate to GetCoin. Or just make them non-virtual and add better hooks as you recommended. But, I suppose this is better discussed in that PR.\r\n\r\nFor now, I think I will revert to the previous change (which had 5 or 6 ACKs). There is no path I can see that calls a mutating GetCoin after PeekCoin, and this would have been revealed by fuzzing.",
      "created_at": "2026-02-12T22:22:51Z",
      "updated_at": "2026-02-12T22:22:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801340030",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801340030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801990507",
      "pull_request_review_id": 3794745840,
      "id": 2801990507,
      "node_id": "PRRC_kwDOABII586nAvtr",
      "diff_hunk": "@@ -15,6 +15,7 @@ TRACEPOINT_SEMAPHORE(utxocache, spent);\n TRACEPOINT_SEMAPHORE(utxocache, uncache);\n \n std::optional<Coin> CCoinsView::GetCoin(const COutPoint& outpoint) const { return std::nullopt; }\n+std::optional<Coin> CCoinsView::PeekCoin(const COutPoint& outpoint) const { return GetCoin(outpoint); }",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "original_commit_id": "c40f6d743a696a66eaf68785688d7cb3d2c4be18",
      "in_reply_to_id": 2789324653,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I reverted this change. I think it's safe to forward to `GetCoin` here at the base. This would only be an issue if there was a stack like `CCoinsViewCache` -> `CCoinsView` -> `CCoinsViewCache`. In production code, there is only really `CoinsViewOverlay` -> `CCoinsViewCache` -> `CCoinsViewDB`. It doesn't matter for the db to have `PeekCoin` because it doesn't cache anything. I think this is ok to merge as is, and further improvements will follow in #34124.",
      "created_at": "2026-02-13T02:38:19Z",
      "updated_at": "2026-02-13T03:15:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2801990507",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2801990507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2802064311",
      "pull_request_review_id": 3794816280,
      "id": 2802064311,
      "node_id": "PRRC_kwDOABII586nBBu3",
      "diff_hunk": "@@ -74,6 +74,11 @@ std::optional<Coin> CCoinsViewDB::GetCoin(const COutPoint& outpoint) const\n     return std::nullopt;\n }\n \n+std::optional<Coin> CCoinsViewDB::PeekCoin(const COutPoint& outpoint) const\n+{\n+    return GetCoin(outpoint);",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": 2797741276,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this is only safe if `PeekCoin` is a pure virtual method so subclasses can't miss overriding it.",
      "created_at": "2026-02-13T03:17:04Z",
      "updated_at": "2026-02-13T03:17:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2802064311",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2802064311"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810061849",
      "pull_request_review_id": 3805665338,
      "id": 2810061849,
      "node_id": "PRRC_kwDOABII586nfiQZ",
      "diff_hunk": "@@ -393,3 +408,8 @@ bool CCoinsViewErrorCatcher::HaveCoin(const COutPoint& outpoint) const\n {\n     return ExecuteBackedWrapper<bool>([&]() { return CCoinsViewBacked::HaveCoin(outpoint); }, m_err_callbacks);\n }\n+\n+std::optional<Coin> CCoinsViewErrorCatcher::PeekCoin(const COutPoint& outpoint) const",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": 2797750053,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This still stands - or was reverted since",
      "created_at": "2026-02-15T22:54:23Z",
      "updated_at": "2026-02-15T23:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2810061849",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810061849"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 412,
      "original_line": 412,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810063482",
      "pull_request_review_id": 3805665338,
      "id": 2810063482,
      "node_id": "PRRC_kwDOABII586nfip6",
      "diff_hunk": "@@ -74,6 +74,11 @@ std::optional<Coin> CCoinsViewDB::GetCoin(const COutPoint& outpoint) const\n     return std::nullopt;\n }\n \n+std::optional<Coin> CCoinsViewDB::PeekCoin(const COutPoint& outpoint) const\n+{\n+    return GetCoin(outpoint);",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "original_commit_id": "6ca865fb2bd82b1034c6946d27640999f8135c89",
      "in_reply_to_id": 2797741276,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "in https://github.com/bitcoin/bitcoin/pull/34124 `HaveCoin` is already delegated like that in the empty view\r\n\r\nYou decided not to pursue this in the end? I see there was some back and forth here",
      "created_at": "2026-02-15T22:55:53Z",
      "updated_at": "2026-02-15T23:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2810063482",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810063482"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810075908",
      "pull_request_review_id": 3805665338,
      "id": 2810075908,
      "node_id": "PRRC_kwDOABII586nflsE",
      "diff_hunk": "",
      "path": "src/test/fuzz/coinscache_sim.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            [&]() { // PeekCoin/GetCoin\n```",
      "created_at": "2026-02-15T23:06:33Z",
      "updated_at": "2026-02-15T23:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2810075908",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810075908"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 255,
      "original_line": 255,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810088311",
      "pull_request_review_id": 3805665338,
      "id": 2810088311,
      "node_id": "PRRC_kwDOABII586nfot3",
      "diff_hunk": "@@ -35,18 +38,65 @@ bool operator==(const Coin& a, const Coin& b)\n     if (a.IsSpent() && b.IsSpent()) return true;\n     return a.fCoinBase == b.fCoinBase && a.nHeight == b.nHeight && a.out == b.out;\n }\n+\n+class MutationGuardCoinsViewCache final : public CCoinsViewCache\n+{\n+private:\n+    struct CacheCoinSnapshot {\n+        COutPoint outpoint;\n+        bool dirty{false};\n+        bool fresh{false};\n+        Coin coin;\n+        bool operator==(const CacheCoinSnapshot&) const = default;\n+    };\n+\n+    std::vector<CacheCoinSnapshot> ComputeCacheCoinsSnapshot() const\n+    {\n+        std::vector<CacheCoinSnapshot> snapshot;\n+        snapshot.reserve(cacheCoins.size());\n+\n+        for (const auto& [outpoint, entry] : cacheCoins) {\n+            snapshot.emplace_back(outpoint, entry.IsDirty(), entry.IsFresh(), entry.coin);\n+        }\n+\n+        std::ranges::sort(snapshot, std::less<>{}, &CacheCoinSnapshot::outpoint);\n+        return snapshot;\n+    }\n+\n+    mutable std::vector<CacheCoinSnapshot> m_expected_snapshot{ComputeCacheCoinsSnapshot()};\n+\n+public:\n+    void BatchWrite(CoinsViewCacheCursor& cursor, const uint256& block_hash) override\n+    {\n+        // Nothing must modify cacheCoins other than BatchWrite.\n+        assert(ComputeCacheCoinsSnapshot() == m_expected_snapshot);\n+        try {\n+            CCoinsViewCache::BatchWrite(cursor, block_hash);\n+        } catch (const std::logic_error& e) {\n+            // This error is thrown if we try and write a fresh entry when we already have the same fresh entry.\n+            // There's not an easy way to prevent the fuzzer from reaching this, so we handle it here.\n+            // Since it is thrown in the middle of the write, we reset our own state and iterate through\n+            // the cursor so the caller's state is also reset.\n+            assert(e.what() == std::string{\"FRESH flag misapplied to coin that exists in parent cache\"});\n+            Reset();\n+            for (auto it{cursor.Begin()}; it != cursor.End(); it = cursor.NextAndMaybeErase(*it)) {}",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 67,
      "original_position": 59,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "70e93a10b7fad61483bc9044b483460a7faaa1b8",
      "in_reply_to_id": 2765841801,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe we can replace the manual drain loop with a qualified call to the base implementation:\n```suggestion\n            CCoinsView::BatchWrite(cursor, block_hash);\n```",
      "created_at": "2026-02-15T23:17:18Z",
      "updated_at": "2026-02-15T23:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2810088311",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810088311"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 90,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810097537",
      "pull_request_review_id": 3805665338,
      "id": 2810097537,
      "node_id": "PRRC_kwDOABII586nfq-B",
      "diff_hunk": "@@ -220,8 +253,10 @@ void TestCoinsView(FuzzedDataProvider& fuzzed_data_provider, CCoinsView& backend\n     }\n \n     {\n-        std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n-        assert(is_db == !!coins_view_cursor);\n+        if (is_db) {\n+            std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n+            assert(!!coins_view_cursor);\n+        }",
      "path": "src/test/fuzz/coins_view.cpp",
      "position": 131,
      "original_position": 131,
      "commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "original_commit_id": "cae6d895f8a8cf5f57e05519536fda5d62b10841",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "this is kinda broken currently ([the backend isn't actually changed](https://github.com/bitcoin/bitcoin/pull/34124#discussion_r2809051500)) - do we really need to modify this here or can we wait for #34124 to land first and have a more meaningful assertion here?",
      "created_at": "2026-02-15T23:25:34Z",
      "updated_at": "2026-02-15T23:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34165#discussion_r2810097537",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2810097537"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34165"
        }
      },
      "start_line": 256,
      "original_start_line": 256,
      "start_side": "RIGHT",
      "line": 259,
      "original_line": 259,
      "side": "RIGHT"
    }
  ]
}