{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374",
    "id": 2822409784,
    "node_id": "PR_kwDOABII586oOo44",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33374",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33374.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33374.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33374",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33374/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/9b8d95f0e3adeb3e95bb7783403c99160997b968",
    "number": 33374,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: add applySolution() to interface",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Unlike the `submitblock` RPC which takes a fully serialized block, when a block solution is received via IPC the client only provides the nonce, coinbase and a few other fields. It may not have all the information it needs to reconstruct the block. This makes debugging difficult when the block is invalid.\r\n\r\nThis commit adds `applySolution()` which returns the reconstructed block and can be used by the client for debugging. It's assigned `@11` in the `.cap` file, and will not break existing client software.\r\n\r\nIt can also be used by the client for an alternative broadcast mechanism.\r\n\r\nThis is alternative or complimentary approach to #33372. \r\n",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2025-09-12T11:48:32Z",
    "updated_at": "2025-09-16T13:41:10Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "2d5cafe76d6c70ddc5b2f8d0a09a662deed6f9f9",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2025/08/applySolution",
      "ref": "2025/08/applySolution",
      "sha": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 14,
        "watchers_count": 14,
        "size": 275206,
        "default_branch": "2025/06/musig2-power",
        "open_issues_count": 6,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-12T17:05:05Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2025-07-13T19:52:25Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d20f10affba83601f1855bc87d0f47e9dfd5caae",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37791,
        "stargazers_count": 85529,
        "watchers_count": 85529,
        "size": 293569,
        "default_branch": "master",
        "open_issues_count": 788,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-16T10:20:59Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-09-16T13:34:32Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 21,
    "deletions": 1,
    "changed_files": 4,
    "commits": 1,
    "review_comments": 10,
    "comments": 2
  },
  "events": [
    {
      "event": "labeled",
      "id": 19659025286,
      "node_id": "LE_lADOABII587LQtSyzwAAAASTxOuG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19659025286",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-12T11:48:35Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3284965890,
      "node_id": "IC_kwDOABII587DzJoC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3284965890",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-12T11:48:37Z",
      "updated_at": "2025-09-15T13:09:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33374.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33374#pullrequestreview-3224409033) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#issuecomment-3284965890",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33374"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDliOGQ5NWYwZTNhZGViM2U5NWJiNzc4MzQwM2M5OTE2MDk5N2I5Njg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "tree": {
        "sha": "d3b593c238f46509d81c5fdf6427f75addb784ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3b593c238f46509d81c5fdf6427f75addb784ae"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d3b593c238f46509d81c5fdf6427f75addb784ae\nparent d20f10affba83601f1855bc87d0f47e9dfd5caae\nauthor Sjors Provoost <sjors@sprovoost.nl> 1757678615 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1757696699 +0200\n\nmining: add applySolution() to interface\n\nUnlike the submitblock RPC which takes a fully serialized block,\nwhen a block solution is received via IPC the client only provides\nthe nonce, coinbase and a few other fields. It may not have all\nthe information it needs to reconstruct the block. This makes\ndebugging difficult when the block is invalid.\n\nThis commit adds applySolution() which returns the reconstructed block\nand can be used by the client for debugging.\n\nIt can also be used by the client for an alternative broadcast mechanism.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmjEUrsACgkQV/+b28ww\nEAmRXA/+K3SRKXYUZ5wZWANbQ7P/W80gW7V6muIyne0awljTVM//XjT4nvwAaakx\nezGlN/+mNJl38q162RwpU1JgQXmYT857nJqXQdezRv79r1ER2LQjmEV17p+UjcIX\n76Uaqh+rDGyChA/wheIfPU/19saV1PNbVpY5YIVmkf4ObwMU92ZrxLigFbHvW5/I\nTsfyP+0tIPmCmYRLlF1FTcU2twdLsK9YT5k49m978OfbiexMcJWPedytUrvzU/0s\nNxdosg2DEmiVVSmIn/tkr69xl15lMOPY1b+60hWZkzIblnVqjnn9vbUXxsitouol\nmIh47nHWhO5zpV8cpVVx/U745b9GReI3qxvPdvz1Zv7GyuFcqWGQPrgiNfO1tF+b\nuzy5MUK6vq54zAS+y2OtQhOtN4nVqUDYmbV6LZZlr23FDJrYQg8syOUJQIKVM8I4\nxPsgAdK8MsYQZ8uSFcdSaqZfJ2OGkvdc3ePdeEeBLXvl0kulMIQ754sWjplSfu65\n5EIZxUbwdRJa7DOs/kAtEiSr1eJYJwO3BiqEJD5jGVzQo7G1N+fJE2IaQgKLxQFI\nppqW0qW1PiF1jocCjiVPnvFKF68d+0rVgB2Jc1OEtdMUjAiqUF0GwzogV85j4PIv\nj90FXD7DNCTdihbzgEQVRdqxhwd/omWaKxDq4nAmyBA5IMJD5LE=\n=XHNz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "sha": "d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d20f10affba83601f1855bc87d0f47e9dfd5caae"
        }
      ],
      "message": "mining: add applySolution() to interface\n\nUnlike the submitblock RPC which takes a fully serialized block,\nwhen a block solution is received via IPC the client only provides\nthe nonce, coinbase and a few other fields. It may not have all\nthe information it needs to reconstruct the block. This makes\ndebugging difficult when the block is invalid.\n\nThis commit adds applySolution() which returns the reconstructed block\nand can be used by the client for debugging.\n\nIt can also be used by the client for an alternative broadcast mechanism.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-09-12T17:04:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-09-12T12:03:35Z"
      },
      "sha": "9b8d95f0e3adeb3e95bb7783403c99160997b968"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19665490935,
      "node_id": "HRFPE_lADOABII587LQtSyzwAAAASUJ5P3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19665490935",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "created_at": "2025-09-12T17:05:06Z"
    },
    {
      "event": "commented",
      "id": 3286123576,
      "node_id": "IC_kwDOABII587D3kQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3286123576",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-12T17:05:16Z",
      "updated_at": "2025-09-12T17:05:16Z",
      "author_association": "MEMBER",
      "body": "Fixed typo.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#issuecomment-3286123576",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33374"
    },
    {
      "event": "reviewed",
      "id": 3223123539,
      "node_id": "PRR_kwDOABII587AHPZT",
      "url": null,
      "actor": null,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T07:29:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "I like this better than just logging stuff, for whatever that's worth.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#pullrequestreview-3223123539",
      "submitted_at": "2025-09-15T07:29:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
    },
    {
      "event": "reviewed",
      "id": 3224409033,
      "node_id": "PRR_kwDOABII587AMJPJ",
      "url": null,
      "actor": null,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T13:09:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, this does seem like a more general solution than 33372.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#pullrequestreview-3224409033",
      "submitted_at": "2025-09-15T13:09:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
    },
    {
      "event": "convert_to_draft",
      "id": 19727251377,
      "node_id": "CTDE_lADOABII587LQtSyzwAAAASX1fex",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19727251377",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T13:41:10Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348023413",
      "pull_request_review_id": 3223123539,
      "id": 2348023413,
      "node_id": "PRRC_kwDOABII586L8_51",
      "diff_hunk": "@@ -32,6 +32,7 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\n     getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\n     getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\n     submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\n+    applySolution @11 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Data);",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The existing entries seem to be in order of the `@n` value rather than alphabetically.",
      "created_at": "2025-09-15T06:46:14Z",
      "updated_at": "2025-09-15T07:29:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348023413",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348023413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 35,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348048893",
      "pull_request_review_id": 3223123539,
      "id": 2348048893,
      "node_id": "PRRC_kwDOABII586L9GH9",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this assumes that the provided coinbase tx includes the coinbase witness, which is different to how `submitblock` behaves. (In particular `submitblock` includes a call to `chainman.UpdateUncommittedBlockStructures`, whereas `AddMerkleRootAndCoinbase` doesn't) That seems like it might be a source of bugs -- might at least be worth adding a check and having an explicit log message if the coinbase requires a witness but doesn't have it?\r\n\r\nFWIW I think `miner_tests` is being run against mainnet params for ~100 blocks, which means that segwit is never active (it activates at block 481824), so the witness-specific code isn't being tested there.",
      "created_at": "2025-09-15T07:00:18Z",
      "updated_at": "2025-09-15T07:29:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348048893",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348048893"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348144204",
      "pull_request_review_id": 3223305842,
      "id": 2348144204,
      "node_id": "PRRC_kwDOABII586L9dZM",
      "diff_hunk": "@@ -32,6 +32,7 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\n     getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\n     getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\n     submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\n+    applySolution @11 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Data);",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348023413,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Before now* we were able to make breaking changes such as renumbering easily, which is why they were numbered this way.\r\n\r\nWe could order them alphabetically, thematically or based on when they were introduced. I think the first two are better, but no strong preference.\r\n\r\n@ryanofsky what do you think is better?\r\n\r\n* = it's still not a big deal at this stage to break clients ",
      "created_at": "2025-09-15T07:48:21Z",
      "updated_at": "2025-09-15T07:50:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348144204",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348144204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 35,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348155638",
      "pull_request_review_id": 3223322350,
      "id": 2348155638,
      "node_id": "PRRC_kwDOABII586L9gL2",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348048893,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "That could be a problem indeed.\r\n\r\nAnother thing that's not great here is that `m_block_template->block` is mutated. Will look into it. My assumption is that in general a client will call `submitSolution` first, since it's time sensitive, and then this method. So it should be fine if it copies to block rather than mutates the original even if that's marginally slower.\r\n\r\nWill look into this.",
      "created_at": "2025-09-15T07:53:17Z",
      "updated_at": "2025-09-15T07:53:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348155638",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348155638"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348160819",
      "pull_request_review_id": 3223329857,
      "id": 2348160819,
      "node_id": "PRRC_kwDOABII586L9hcz",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348048893,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> is being run against mainnet params for ~100 blocks\r\n\r\nIt uses mainnet in order to have difficulty adjustment, but we should probably _also_ run against regtest for segwit coverage.",
      "created_at": "2025-09-15T07:55:42Z",
      "updated_at": "2025-09-15T07:55:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348160819",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348160819"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348345510",
      "pull_request_review_id": 3223608643,
      "id": 2348345510,
      "node_id": "PRRC_kwDOABII586L-Oim",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348048893,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "An OP_TRUE signet would presumably get both for whatever that's worth",
      "created_at": "2025-09-15T09:08:36Z",
      "updated_at": "2025-09-15T09:08:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348345510",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348345510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348807001",
      "pull_request_review_id": 3224321120,
      "id": 2348807001,
      "node_id": "PRRC_kwDOABII586L__NZ",
      "diff_hunk": "@@ -32,6 +32,7 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\n     getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\n     getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\n     submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\n+    applySolution @11 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Data);",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348023413,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348144204\r\n\r\nI think it makes sense if method order order in `.capnp` files just matches the method order in `.h` files so the declarations are easy to compare.\r\n\r\nSince we haven't needed binary compatibility before, we've just renumbered when making any changes, so numbers have been in order up to this point. But if we want to start having binary compatibility, we won't be able to reassign numbers anymore, and it'll be normal for them not to be in order in the file.\r\n\r\n> * = it's still not a big deal at this stage to break clients\r\n\r\nMakes sense, but to be sure, there are different ways of breaking ciients. For example if we just make changes like renumbering mining methods, or fields, or changing default values, results could be a little chaotic if an old client connects to a new node or vice versa, because client IPC calls could appear to work but invoke the wrong methods and send invalid parameter values.\r\n\r\nA way to make cleaner breaks is to update the `Init.makeMining` method. Give it a new number so only new clients will be able to call it, and add a `Init.makeMiningRemoved` or `init.makeMiningV1` method with the old number that returns null or triggers an error. This way an old client connecting to a new node, or new cient connecting to an old node will fail early instead of sending requests later that would not be interpreted correctly:\r\n\r\n```diff\r\n--- a/src/ipc/capnp/init.capnp\r\n+++ b/src/ipc/capnp/init.capnp\r\n@@ -19,5 +19,8 @@ using Mining = import \"mining.capnp\";\r\n interface Init $Proxy.wrap(\"interfaces::Init\") {\r\n     construct @0 (threadMap: Proxy.ThreadMap) -> (threadMap :Proxy.ThreadMap);\r\n     makeEcho @1 (context :Proxy.Context) -> (result :Echo.Echo);\r\n-    makeMining @2 (context :Proxy.Context) -> (result :Mining.Mining);\r\n+    makeMining @3 (context :Proxy.Context) -> (result :Mining.Mining);\r\n+\r\n+    # Previous declarations for binary compatibility, no longer supported.\r\n+    makeMiningV1 @2 (context :Proxy.Context) -> (result :Mining.Mining);\r\n }\r\n--- a/src/interfaces/init.h\r\n+++ b/src/interfaces/init.h\r\n@@ -38,6 +38,9 @@ public:\r\n     virtual std::unique_ptr<Echo> makeEcho() { return nullptr; }\r\n     virtual Ipc* ipc() { return nullptr; }\r\n     virtual bool canListenIpc() { return false; }\r\n+\r\n+    // For IPC compatibility, no longer supported.\r\n+    virtual std::unique_ptr<Mining> makeMiningV1() { return nullptr; }\r\n };\r\n \r\n //! Return implementation of Init interface for the node process. If the argv\r\n```",
      "created_at": "2025-09-15T12:16:09Z",
      "updated_at": "2025-09-15T12:16:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348807001",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348807001"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 35,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348861453",
      "pull_request_review_id": 3224409033,
      "id": 2348861453,
      "node_id": "PRRC_kwDOABII586MAMgN",
      "diff_hunk": "@@ -32,6 +32,7 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\n     getWitnessCommitmentIndex @7 (context: Proxy.Context) -> (result: Int32);\n     getCoinbaseMerklePath @8 (context: Proxy.Context) -> (result: List(Data));\n     submitSolution @9 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Bool);\n+    applySolution @11 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data) -> (result: Data);",
      "path": "src/ipc/capnp/mining.capnp",
      "position": 4,
      "original_position": 4,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348023413,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> re: [#33374 (comment)](https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348144204)\r\n\r\nLooking at the PR more, since this is just adding a new method and should be backwards compatible, probably nothing in my comment above applies here, other than that I think it's reasonable for applySolution to follow submitSolution in the .capnp file like it does in the .h file, and for the methods to not be renumbered or sorted by number.",
      "created_at": "2025-09-15T12:36:35Z",
      "updated_at": "2025-09-15T13:09:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348861453",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348861453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 35,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348937808",
      "pull_request_review_id": 3224409033,
      "id": 2348937808,
      "node_id": "PRRC_kwDOABII586MAfJQ",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348048893,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Another thing that's not great here is that `m_block_template->block` is mutated.\r\n\r\nIt does seem nicer to not to mutate the block template. And as long as entire block is being serialized and sent over the socket anyway, probably the cost of copying it is not significant.\r\n\r\nBut one thought is that maybe serializing whole block is not necessary, and this could just return CBlockHeader?\r\n\r\nAnother idea is that this could be changed to use output parameters, and the client could decide what information it wants returned. For example:\r\n\r\n```c++\r\nvirtual void applySolution(\r\n    uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase,\r\n    CBlockHeader* out_header=nullptr, CBlock* out_block=nullptr, std::string* out_invalid_reason=nullptr) = 0;\r\n```\r\n\r\nThe cap'n proto declaration corresponding to this would look like:\r\n\r\n```capnp\r\napplySolution @11 (context: Proxy.Context, version: UInt32, timestamp: UInt32, nonce: UInt32, coinbase :Data, wantHeader: Bool, wantBlock :Bool, wantInvalidReason :Bool) \r\n    -> (header: Data, block: Data, invalidReason: Text);\r\n```\r\n\r\n(libmultimultiprocess uses `wantFoo` parameters and `foo` return values to support c++ methods with optional output parameters.)\r\n\r\nThe idea with the `out_invalid_reason` parameter would be to provide the debug information #33372 was previously logging.\r\n\r\nNot sure if this interface would actually be more useful in practice, but wanted to point out it is possible to return information selectively like this.",
      "created_at": "2025-09-15T13:05:48Z",
      "updated_at": "2025-09-15T13:09:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2348937808",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2348937808"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349501608",
      "pull_request_review_id": 3225401005,
      "id": 2349501608,
      "node_id": "PRRC_kwDOABII586MCoyo",
      "diff_hunk": "@@ -916,6 +916,12 @@ class BlockTemplateImpl : public BlockTemplate\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n     }\n \n+    CBlock applySolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n+    {\n+        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);",
      "path": "src/node/interfaces.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "original_commit_id": "9b8d95f0e3adeb3e95bb7783403c99160997b968",
      "in_reply_to_id": 2348048893,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> But one thought is that maybe serializing whole block is not necessary, and this could just return `CBlockHeader`?\r\n\r\nI think it's easier to use if we just return the block. Otherwise a client has the call `getBlock()`, then `applySolution()` and then swap out the header in the block they got. In which case they might as well call `getBlock()` just apply the solution themselves.\r\n\r\nI think the two main use cases for this are:\r\n1. Testing mining (pool) software, which doesn't need to be performant\r\n2. Debugging an invalid mainnet block\r\n\r\nThe alternative approach of having `applySolution()` optionally return the block itself seems fine too, but then maybe we should just make a breaking change to `submitSolution`.\r\n\r\nThough in terms of performance vs simplicity, I image the client has a single thread that wants to get a new template ASAP after `submitSolution()`, and then has a separate lower priority thread that calls `applySolution()` and archives that. That's an argument in favour of having two separate methods.",
      "created_at": "2025-09-15T16:18:08Z",
      "updated_at": "2025-09-15T16:20:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33374#discussion_r2349501608",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349501608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33374"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 921,
      "original_line": 921,
      "side": "RIGHT"
    }
  ]
}